"use strict";function _classCallCheck2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(r)},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports.eve=t():e.eve=t()}(void 0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){t.Agent=n(1),t.ServiceManager=n(21),t.TransportManager=n(62),t.module={BabbleModule:n(63),PatternModule:n(144),RequestModule:n(145),RPCModule:n(146)},t.transport={Transport:n(147),AMQPTransport:n(148),DistribusTransport:n(151),HTTPTransport:n(196),LocalTransport:n(217),PubNubTransport:n(219),DBusTransport:n(222),WebSocketTransport:n(263),connection:{Connection:n(150),AMQPConnection:n(149),DistribusConnection:n(195),HTTPConnection:n(216),LocalConnection:n(218),PubNubConnection:n(220),DBusConnection:n(223),WebSocketConnection:n(264)}},t.hypertimer=n(23),t.util=n(13),t.Agent.registerModule(t.module.BabbleModule),t.Agent.registerModule(t.module.PatternModule),t.Agent.registerModule(t.module.RequestModule),t.Agent.registerModule(t.module.RPCModule),t.TransportManager.registerType(t.transport.AMQPTransport),t.TransportManager.registerType(t.transport.DistribusTransport),t.TransportManager.registerType(t.transport.HTTPTransport),t.TransportManager.registerType(t.transport.LocalTransport),t.TransportManager.registerType(t.transport.PubNubTransport),t.TransportManager.registerType(t.transport.DBusTransport),t.TransportManager.registerType(t.transport.WebSocketTransport),t.system=new t.ServiceManager,t.system.transports.add(new t.transport.LocalTransport),t.Agent.getTransportById=function(e){return t.system.transports.get(e)}},function(e,t,n){function r(e){this.id=e?e.toString():s(),this.connections=[],this.defaultConnection=null,this.ready=o.resolve([])}function i(e){var t=r.modules[e];if(!t)throw new Error('Unknown module "'+e+'". Choose from: '+Object.keys(r.modules).map(JSON.stringify).join(", "));return t}var o=n(2),s=n(12),a=(n(13),n(14));r.modules={},r.registerModule=function(e){var t=e.prototype.type;if("function"!=typeof e)throw new Error("Constructor function expected");if(!t)throw new Error('Field "prototype.type" missing in transport constructor');if(t in r.modules&&r.modules[t]!==e)throw new Error('Module of type "'+t+'" already exists');r.modules[t]=e},r.getTransportById=function(e){throw new Error('Transport with id "'+e+'" not found')},r.prototype.extend=function(e,t){if(Array.isArray(e)){var n=[].concat(e);n.sort(function(e,t){return"pattern"==e?-1:"pattern"==t?1:0});for(var r=0;r<n.length;r++)this.extend(n[r],t)}else{var o=new(i(e))(this,t).mixin(),s=this;Object.keys(o).forEach(function(e){if(void 0!==s[e]&&"_receive"!==e)throw new Error('Conflict: agent already has a property "'+prop+'"')}),Object.keys(o).forEach(function(e){s[e]=o[e]})}return this},r.prototype.loadModule=function(e,t,n){(void 0!==t?Object.create(t):{}).extend=!1;var r=new(i(e))(this,t,n),o=r.mixin();return this._receive=o._receive,r},r.prototype.send=function(e,t){if(-1!==e.indexOf("://")){var n=a.parse(e);return"http:"==n.protocol||"ws:"==n.protocol||"https:"==n.protocol?this._sendByProtocol(n.protocol.slice(0,-1),e,t):this._sendByNetworkId(n.host,n.path,t)}var r=e.indexOf("@");if(-1!=r){var i=e.substring(0,r),s=e.substring(r+1);return this._sendByTransportId(s,i,t)}var u=this.defaultConnection;return u?u.send(e,t):o.reject(new Error("No transport found"))},r.prototype._sendByNetworkId=function(e,t,n){for(var r=0;r<this.connections.length;r++){var i=this.connections[r];if(i.transport.networkId==e)return i.send(t,n)}return o.reject(new Error('No transport found with networkId "'+e+'"'))},r.prototype._sendByProtocol=function(e,t,n){e="https"==e?"http":e;for(var r=0;r<this.connections.length;r++){var i=this.connections[r];if(i.transport.type==e)return i.send(t,n)}return o.reject(new Error('No transport found for protocol "'+e+'"'))},r.prototype._sendByTransportId=function(e,t,n){for(var r=0;r<this.connections.length;r++){var i=this.connections[r];if(i.transport.id==e)return i.send(t,n)}return o.reject(new Error('No transport found with id "'+e+'"'))},r.prototype.receive=function(e,t){},r.prototype._receive=function(e,t){return this.receive(e,t)},r.prototype.connect=function(e,t){if(Array.isArray(e)){var n=this;return e.map(function(e){return n._connect(e,t)})}return"string"==typeof e?this._connect(r.getTransportById(e),t):this._connect(e,t)},r.prototype._connect=function(e,t){var n=this,r=e.connect(t||this.id,function(e,t){return n._receive(e,t)});if(this.connections.push(r),this.defaultConnection){if(e.default){if(this.defaultConnection.default)throw new Error("Cannot connect to a second default transport");this.defaultConnection=r}}else this.defaultConnection=r;return this._updateReady(),r},r.prototype.disconnect=function(e){var t,n;if(e){if(Array.isArray(e))for(t=0;t<this.connections.length;)n=this.connections[t],-1!==e.indexOf(n.transport)?this._disconnect(n):t++;else if("string"==typeof e)this.disconnect(r.getTransportById(e));else for(t=0;t<this.connections.length;t++)if((n=this.connections[t]).transport===e){this._disconnect(n);break}}else for(;n=this.connections[0];)this._disconnect(n)},r.prototype._disconnect=function(e){var t=this.connections.indexOf(e);-1!==t&&(e.close(),this.connections.splice(t,1),this.defaultConnection===e&&(this.defaultConnection=this.connections[this.connections.length-1]||null)),this._updateReady()},r.prototype._updateReady=function(){this.ready=o.all(this.connections.map(function(e){return e.ready}))},e.exports=r},function(e,t,n){e.exports=n(3)},function(e,t,n){e.exports=n(4),n(6),n(7),n(8),n(9),n(11)},function(e,t,n){function r(){}function i(e){try{return e.then}catch(e){return v=e,y}}function o(e,t){try{return e(t)}catch(e){return v=e,y}}function s(e,t,n){try{e(t,n)}catch(e){return v=e,y}}function a(e){if("object"!==_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._99=0,this._44=0,this._7=null,this._12=null,e!==r&&g(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var s=new a(r);s.then(i,o),c(e,new p(t,n,s))})}function c(e,t){for(;3===e._44;)e=e._7;if(a._32&&a._32(e),0===e._44)return 0===e._99?(e._99=1,void(e._12=t)):1===e._99?(e._99=2,void(e._12=[e._12,t])):void e._12.push(t);l(e,t)}function l(e,t){_(function(){var n=1===e._44?t.onFulfilled:t.onRejected;if(null!==n){var r=o(n,e._7);r===y?h(t.promise,v):f(t.promise,r)}else 1===e._44?f(t.promise,e._7):h(t.promise,e._7)})}function f(e,t){if(t===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===(void 0===t?"undefined":_typeof(t))||"function"==typeof t)){var n=i(t);if(n===y)return h(e,v);if(n===e.then&&t instanceof a)return e._44=3,e._7=t,void d(e);if("function"==typeof n)return void g(n.bind(t),e)}e._44=1,e._7=t,d(e)}function h(e,t){e._44=2,e._7=t,a._89&&a._89(e,t),d(e)}function d(e){if(1===e._99&&(c(e,e._12),e._12=null),2===e._99){for(var t=0;t<e._12.length;t++)c(e,e._12[t]);e._12=null}}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function g(e,t){var n=!1,r=s(e,function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,h(t,e))});n||r!==y||(n=!0,h(t,v))}var _=n(5),v=null,y={};e.exports=a,a._32=null,a._89=null,a._27=r,a.prototype.then=function(e,t){if(this.constructor!==a)return u(this,e,t);var n=new a(r);return c(this,new p(e,t,n)),n}},function(e,t){(function(t){function n(e){s.length||(o(),a=!0),s[s.length]=e}function r(){for(;u<s.length;){var e=u;if(u+=1,s[e].call(),u>c){for(var t=0,n=s.length-u;t<n;t++)s[t]=s[t+u];s.length-=u,u=0}}s.length=0,u=0,a=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,s=[],a=!1,u=0,c=1024,l=void 0!==t?t:self,f=l.MutationObserver||l.WebKitMutationObserver;o="function"==typeof f?function(e){var t=1,n=new f(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,function(){return this}())},function(e,t,n){var r=n(4);e.exports=r,r.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,n){var r=n(4);e.exports=r,r.prototype.finally=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},function(e,t,n){function r(e){var t=new i(i._27);return t._44=1,t._7=e,t}var i=n(4);e.exports=i;var o=r(!0),s=r(!1),a=r(null),u=r(void 0),c=r(0),l=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return a;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return s;if(0===e)return c;if(""===e)return l;if("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(s,a){if(a&&("object"===(void 0===a?"undefined":_typeof(a))||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._44;)a=a._7;return 1===a._44?r(s,a._7):(2===a._44&&n(a._7),void a.then(function(e){r(s,e)},n))}var u=a.then;if("function"==typeof u)return void new i(u.bind(a)).then(function(e){r(s,e)},n)}t[s]=a,0==--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,s=0;s<t.length;s++)r(s,t[s])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){function r(e,t){for(var n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([a]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}function i(e){for(var t=Math.max(e.length-1,3),n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+a+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}var o=n(4),s=n(10);e.exports=o,o.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?r(e,t):i(e)};var a="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(e){if(null===n||void 0===n)return new o(function(t,n){n(e)});s(function(){n.call(r,e)})}}},o.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(n){s(function(){e.call(t,null,n)})},function(n){s(function(){e.call(t,n)})})}},function(e,t,n){function r(e){var t;(t=s.length?s.pop():new i).task=e,o(t)}function i(){this.task=null}var o=n(5),s=[],a=[],u=o.makeRequestCallFromTimer(function(){if(a.length)throw a.shift()});e.exports=r,i.prototype.call=function(){try{this.task.call()}catch(e){r.onerror?r.onerror(e):(a.push(e),u())}finally{this.task=null,s[s.length]=this}}},function(e,t,n){var r=n(4);e.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._44)return this._7.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._7},r.prototype.getReason=function(){if(3===this._44)return this._7.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._7},r.prototype.getState=function(){return 3===this._44?this._7.getState():-1===this._44||-2===this._44?0:this._44}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},function(e,t){var n=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;(t=e.exports=function(){for(var e,n="",r=0;r<32;r++)e=16*t.random()|0,r>4&&r<21&&!(r%4)&&(n+="-"),n+=(12===r?4:16===r?3&e|8:e).toString(16);return n}).isUUID=function(e){return n.test(e)},t.random=function(){return Math.random()}},function(e,t){t.isPromise=function(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch},t.normalizeURL=function(e){return"/"==e[e.length-1]?e.substring(0,e.length-1):e}},function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&s.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}var o=n(15),s=n(17);t.parse=i,t.resolve=function(e,t){return i(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},t.format=function(e){return s.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)},t.Url=r;var a=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(l),h=["'"].concat(f),d=["%","/","?",";","#"].concat(h),p=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(18);r.prototype.parse=function(e,t,n){if(!s.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":_typeof(e)));var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",u=e.split(i),l=/\\/g;u[0]=u[0].replace(l,"/");var f=e=u.join(i);if(f=f.trim(),!n&&1===e.split("#").length){var w=c.exec(f);if(w)return this.path=f,this.href=f,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var k=a.exec(f);if(k){var E=(k=k[0]).toLowerCase();this.protocol=E,f=f.substr(k.length)}if(n||k||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===f.substr(0,2);!S||k&&y[k]||(f=f.substr(2),this.slashes=!0)}if(!y[k]&&(S||k&&!m[k])){for(var x=-1,T=0;T<p.length;T++)-1!==(A=f.indexOf(p[T]))&&(-1===x||A<x)&&(x=A);var O,C;-1!==(C=-1===x?f.lastIndexOf("@"):f.lastIndexOf("@",x))&&(O=f.slice(0,C),f=f.slice(C+1),this.auth=decodeURIComponent(O)),x=-1;for(T=0;T<d.length;T++){var A=f.indexOf(d[T]);-1!==A&&(-1===x||A<x)&&(x=A)}-1===x&&(x=f.length),this.host=f.slice(0,x),f=f.slice(x),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var P=this.hostname.split(/\./),T=0,N=P.length;T<N;T++){var B=P[T];if(B&&!B.match(g)){for(var M="",I=0,j=B.length;I<j;I++)B.charCodeAt(I)>127?M+="x":M+=B[I];if(!M.match(g)){var L=P.slice(0,T),U=P.slice(T+1),D=B.match(_);D&&(L.push(D[1]),U.unshift(D[2])),U.length&&(f="/"+U.join(".")+f),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=o.toASCII(this.hostname));var F=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+F,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==f[0]&&(f="/"+f))}if(!v[E])for(var T=0,N=h.length;T<N;T++){var q=h[T];if(-1!==f.indexOf(q)){var H=encodeURIComponent(q);H===q&&(H=escape(q)),f=f.split(q).join(H)}}var G=f.indexOf("#");-1!==G&&(this.hash=f.substr(G),f=f.slice(0,G));var K=f.indexOf("?");if(-1!==K?(this.search=f.substr(K),this.query=f.substr(K+1),t&&(this.query=b.parse(this.query)),f=f.slice(0,K)):t&&(this.search="",this.query={}),f&&(this.pathname=f),m[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",V=this.search||"";this.path=F+V}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(s.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||y[e.protocol])n.pathname=e.pathname;else{for(E=(e.pathname||"").split("/");E.length&&!(e.host=E.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==E[0]&&E.unshift(""),E.length<2&&E.unshift(""),n.pathname=E.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",g=n.search||"";n.path=p+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=v||_||n.host&&e.pathname,w=b,k=n.pathname&&n.pathname.split("/")||[],E=e.pathname&&e.pathname.split("/")||[],S=n.protocol&&!m[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===E[0]?E[0]=e.host:E.unshift(e.host)),e.host=null),b=b&&(""===E[0]||""===k[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,k=E;else if(E.length)k||(k=[]),k.pop(),k=k.concat(E),n.search=e.search,n.query=e.query;else if(!s.isNullOrUndefined(e.search))return S&&(n.hostname=n.host=k.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),n.search=e.search,n.query=e.query,s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=k.slice(-1)[0],T=(n.host||e.host||k.length>1)&&("."===x||".."===x)||""===x,O=0,C=k.length;C>=0;C--)"."===(x=k[C])?k.splice(C,1):".."===x?(k.splice(C,1),O++):O&&(k.splice(C,1),O--);if(!b&&!w)for(;O--;O)k.unshift("..");!b||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),T&&"/"!==k.join("/").substr(-1)&&k.push("");var A=""===k[0]||k[0]&&"/"===k[0].charAt(0);if(S){n.hostname=n.host=A?"":k.length?k.shift():"";var R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");R&&(n.auth=R.shift(),n.host=n.hostname=R.shift())}return(b=b||n.host&&k.length)&&!A&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var r;(function(e,i){!function(o){function s(e){throw RangeError(R[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+a((e=e.replace(A,".")).split("."),t).join(".")}function c(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function l(e){return a(e,function(e){var t="";return e>65535&&(t+=B((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=B(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:m}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?N(e/E):e>>1,e+=N(e/t);e>P*w>>1;r+=m)e=N(e/P);return N(r+(P+1)*e/(e+k))}function p(e){var t,n,r,i,o,a,u,c,h,p,g=[],_=e.length,v=0,k=x,E=S;for((n=e.lastIndexOf(T))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&s("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(o=v,a=1,u=m;i>=_&&s("invalid-input"),((c=f(e.charCodeAt(i++)))>=m||c>N((y-v)/a))&&s("overflow"),v+=c*a,h=u<=E?b:u>=E+w?w:u-E,!(c<h);u+=m)a>N(y/(p=m-h))&&s("overflow"),a*=p;E=d(v-o,t=g.length+1,0==o),N(v/t)>y-k&&s("overflow"),k+=N(v/t),v%=t,g.splice(v++,0,k)}return l(g)}function g(e){var t,n,r,i,o,a,u,l,f,p,g,_,v,k,E,O=[];for(_=(e=c(e)).length,t=x,n=0,o=S,a=0;a<_;++a)(g=e[a])<128&&O.push(B(g));for(r=i=O.length,i&&O.push(T);r<_;){for(u=y,a=0;a<_;++a)(g=e[a])>=t&&g<u&&(u=g);for(u-t>N((y-n)/(v=r+1))&&s("overflow"),n+=(u-t)*v,t=u,a=0;a<_;++a)if((g=e[a])<t&&++n>y&&s("overflow"),g==t){for(l=n,f=m;p=f<=o?b:f>=o+w?w:f-o,!(l<p);f+=m)E=l-p,k=m-p,O.push(B(h(p+E%k,0))),l=N(E/k);O.push(B(h(l,0))),o=d(n,v,r==i),n=0,++r}++n,++t}return O.join("")}"object"==(void 0===t?"undefined":_typeof(t))&&t&&t.nodeType,"object"==(void 0===e?"undefined":_typeof(e))&&e&&e.nodeType;var _="object"==(void 0===i?"undefined":_typeof(i))&&i;var v,y=2147483647,m=36,b=1,w=26,k=38,E=700,S=72,x=128,T="-",O=/^xn--/,C=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=m-b,N=Math.floor,B=String.fromCharCode;v={version:"1.3.2",ucs2:{decode:c,encode:l},decode:p,encode:g,toASCII:function(e){return u(e,function(e){return C.test(e)?"xn--"+g(e):e})},toUnicode:function(e){return u(e,function(e){return O.test(e)?p(e.slice(4).toLowerCase()):e})}},void 0!==(r=function(){return v}.call(t,n,t,e))&&(e.exports=r)}()}).call(t,n(16)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){t.decode=t.parse=n(19),t.encode=t.stringify=n(20)},function(e,t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;c<u;++c){var l,f,h,d,p=e[c].replace(s,"%20"),g=p.indexOf(r);g>=0?(l=p.substr(0,g),f=p.substr(g+1)):(l=p,f=""),h=decodeURIComponent(l),d=decodeURIComponent(f),n(o,h)?Array.isArray(o[h])?o[h].push(d):o[h]=[o[h],d]:o[h]=d}return o}},function(e,t){var n=function(e){switch(void 0===e?"undefined":_typeof(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":_typeof(e))?Object.keys(e).map(function(i){var o=encodeURIComponent(n(i))+r;return Array.isArray(e[i])?e[i].map(function(e){return o+encodeURIComponent(n(e))}).join(t):o+encodeURIComponent(n(e[i]))}).join(t):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(e)):""}},function(e,t,n){function r(e){this.transports=new s,this.timer=o(),this.random=Math.random,this.init(e)}var i=n(22),o=n(23),s=n(62);r.prototype.init=function(e){if(this.transports.clear(),e){if(e.transports&&this.transports.load(e.transports),e.timer&&this.timer.config(e.timer),e.random)if(e.random.deterministic){var t=e.random.seed||"random seed";this.random=i(t,e.random)}else this.random=Math.random;for(var n in e)e.hasOwnProperty(n)}},r.prototype.clear=function(){this.transports.clear()},e.exports=r},function(e,t){(function(t){function n(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<a;)s[i]=i++;for(i=0;i<a;i++)s[i]=s[o=d&o+e[i%n]+(t=s[i])],s[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,s=r.S;e--;)t=s[i=d&i+1],n=n*a+s[d&(s[i]=s[o=d&o+t])+(s[o]=t)];return r.i=i,r.j=o,n})(a)}function r(e,t){var n,i=[],o=(void 0===e?"undefined":_typeof(e))[0];if(t&&"o"==o)for(n in e)try{i.push(r(e[n],t-1))}catch(e){}return i.length?i:"s"==o?e:e+"\0"}function i(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++);return s(t)}function o(e){try{return c.crypto.getRandomValues(e=new Uint8Array(a)),s(e)}catch(e){return[+new Date,c,c.navigator&&c.navigator.plugins,c.screen,s(u)]}}function s(e){return String.fromCharCode.apply(0,e)}var a=256,u=[],c=void 0===t?window:t,l=Math.pow(a,6),f=Math.pow(2,52),h=2*f,d=a-1,p=Math.random;e.exports=function(t,c){if(c&&!0===c.global)return c.global=!1,Math.random=e.exports(t,c),c.global=!0,Math.random;var d=[],p=(i(r(c&&c.entropy||!1?[t,s(u)]:0 in arguments?t:o(),3),d),new n(d));return i(s(p.S),u),function(){for(var e=p.g(6),t=l,n=0;e<f;)e=(e+n)*a,t*=a,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t}},e.exports.resetGlobal=function(){Math.random=p},i(Math.random(),u)}).call(t,function(){return this}())},function(e,t,n){e.exports=n(24)},function(e,t,n){var r=n(25),i=n(40),o=n(42).createMaster,s=n(58).createSlave,a=n(61),u={TIMEOUT:0,INTERVAL:1,TRIGGER:2};e.exports=function(e){function t(){return{paced:v,rate:y,deterministic:m,time:b,master:w,port:k}}function n(e){if(P||e.master)for(var t in e)if("master"!==t&&"slave"!==t)throw new Error('Cannot apply configuration option "'+t+'", timer is configured as slave.')}function c(e){if("deterministic"in e&&(m=!!e.deterministic),"paced"in e&&(v=!!e.paced),"time"in e&&(x=_(e.time),S=a.systemNow(),l(x),b=new Date(x).toISOString()),"rate"in e){var n=Number(e.rate);if(isNaN(n)||n<=0)throw new TypeError("Invalid rate "+JSON.stringify(e.rate)+". Rate must be a positive number");x=N.now(),S=a.systemNow(),y=n}if("master"in e&&(P&&(P.destroy(),P=null),w=e.master,null!=e.master)){var r=function(e){var n=t();c(e);var r=t();N.emit("config",r,n)};(P=s(e.master)).on("change",function(e){r({time:e})}),P.on("config",function(e){r(e)}),P.on("error",function(e){N.emit("error",e)})}"port"in e&&(R&&(R.destroy(),R=null),k=e.port,e.port&&(R=o(N.now,N.config,e.port)).on("error",function(e){N.emit("error",e)})),g(),R&&R.broadcastConfig()}function l(e){for(var t=0;t<T.length;t++){var n=T[t];n.type===u.INTERVAL&&f(n,e)}}function f(e,t){e.occurrence=Math.round((t-e.firstTime)/e.interval),e.time=e.firstTime+e.occurrence*e.interval}function h(e){if(T.length>0){for(var t=T.length-1;t>=0&&T[t].time>e.time;)t--;T.splice(t+1,0,e)}else T.push(e)}function d(e,t){function n(){e.type===u.INTERVAL&&O[e.id]&&(e.occurrence++,e.time=e.firstTime+e.occurrence*e.interval,h(e)),delete O[e.id],t&&t()}O[e.id]=e;try{0==e.callback.length?(e.callback(),n()):e.callback(n)}catch(e){i(N,"error")&&N.emit("error",e),n()}}function p(e){for(var t=0;t<T.length&&(T[t].time<=e||!isFinite(T[t].time));)t++;var n=T.splice(0,t);return 0==m&&a.shuffle(n),n}function g(){if(v||!(Object.keys(O).length>0)){var e=T[0];if(C&&(clearTimeout(C),C=null),E&&e){var t=e.time,n=t-N.now(),r=v?n/y:0;C=setTimeout(function(){v||(x=t>x&&isFinite(t)?t:x);var e=p(t);v?(e.forEach(function(e){d(e)}),g()):function t(){var n=e.shift();n?d(n,t):g()}()},Math.round(r))}}}function _(e){var t="number"==typeof e?e:e instanceof Date?e.valueOf():new Date(e).valueOf();if(isNaN(t))throw new TypeError("Invalid date "+JSON.stringify(e)+". Date, number, or ISOString expected");return t}var v=!0,y=1,m=!0,b=null,w=null,k=null,E=!1,S=null,x=a.systemNow(),T=[],O={},C=null,A=0,R=null,P=null,N=r({});return N.config=function(e){return e&&(n(e),c(e)),t()},N.now=function(){if(v){if(E){var e=a.systemNow()-S;return x+e*y}return x}return x},N.continue=function(){S=a.systemNow(),E=!0,g()},N.pause=function(){x=N.now(),S=null,E=!1,g()},N.getTime=function(){return new Date(N.now())},N.valueOf=N.getTime,N.toString=function(){return N.getTime().toString()},N.setTimeout=function(e,t){var n=A++,r=N.now()+t;if(isNaN(r))throw new TypeError("delay must be a number");return h({id:n,type:u.TIMEOUT,time:r,callback:e}),g(),n},N.setTrigger=function(e,t){var n=A++,r=_(t);return h({id:n,type:u.TRIGGER,time:r,callback:e}),g(),n},N.setInterval=function(e,t,n){var r=A++,i=Number(t);if(isNaN(i))throw new TypeError("interval must be a number");(i<0||!isFinite(i))&&(i=0);var o=void 0!=n?_(n):null,s=N.now(),a=null!=o?o:s+i,c={id:r,type:u.INTERVAL,interval:i,time:a,firstTime:null!=o?o:a,occurrence:0,callback:e};return a<s&&f(c,s),h(c),g(),r},N.clearTimeout=function(e){if(O[e])delete O[e];else for(var t=0;t<T.length;t++)if(T[t].id===e){T.splice(t,1),g();break}},N.clearTrigger=N.clearTimeout,N.clearInterval=N.clearTimeout,N.list=function(){return T.map(function(e){return e.id})},N.clear=function(){O={},T=[],g()},N.destroy=function(){N.clear(),P&&P.destroy(),R&&R.destroy()},Object.defineProperty(N,"running",{get:function(){return E}}),N.config(e),N.continue(),N}},function(e,t,n){var r,i,o,s,a,u,c,l=n(26),f=n(39),h=Function.prototype.apply,d=Function.prototype.call,p=Object.create,g=Object.defineProperty,_=Object.defineProperties,v=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};a={on:r=function(e,t){var n;return f(t),v.call(this,"__ee__")?n=this.__ee__:(n=y.value=p(null),g(this,"__ee__",y),y.value=null),n[e]?"object"===_typeof(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:i=function(e,t){var n,i;return f(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),h.call(t,this,arguments)}),n.__eeOnceListener__=t,this},off:o=function(e,t){var n,r,i,o;if(f(t),!v.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"===(void 0===(r=n[e])?"undefined":_typeof(r)))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},emit:s=function(e){var t,n,r,i,o;if(v.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"===(void 0===i?"undefined":_typeof(i))){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)h.call(r,this,o)}else switch(arguments.length){case 1:d.call(i,this);break;case 2:d.call(i,this,arguments[1]);break;case 3:d.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];h.call(i,this,o)}}},u={on:l(r),once:l(i),off:l(o),emit:l(s)},c=_({},u),e.exports=t=function(e){return null==e?p(c):_(Object(e),u)},t.methods=a},function(e,t,n){var r=n(27),i=n(34),o=n(35),s=n(36);(e.exports=function(e,t){var n,o,a,u,c;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(n=a=!0,o=!1):(n=s.call(e,"c"),o=s.call(e,"e"),a=s.call(e,"w")),c={value:t,configurable:n,enumerable:o,writable:a},u?r(i(u),c):c}).gs=function(e,t,n){var a,u,c,l;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],null==t?t=void 0:o(t)?null==n?n=void 0:o(n)||(c=n,n=void 0):(c=t,t=n=void 0),null==e?(a=!0,u=!1):(a=s.call(e,"c"),u=s.call(e,"e")),l={get:t,set:n,configurable:a,enumerable:u},c?r(i(c),l):l}},function(e,t,n){e.exports=n(28)()?Object.assign:n(29)},function(e,t){e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){var r=n(30),i=n(33),o=Math.max;e.exports=function(e,t){var n,s,a,u=o(arguments.length,2);for(e=Object(i(e)),a=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},s=1;s<u;++s)t=arguments[s],r(t).forEach(a);if(void 0!==n)throw n;return e}},function(e,t,n){e.exports=n(31)()?Object.keys:n(32)},function(e,t){e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t){var n=Object.keys;e.exports=function(e){return n(null==e?e:Object(e))}},function(e,t){e.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},function(e,t){var n=Array.prototype.forEach,r=Object.create,i=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=r(null);return n.call(arguments,function(e){null!=e&&i(Object(e),t)}),t}},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,n){e.exports=n(37)()?String.prototype.contains:n(38)},function(e,t){var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},function(e,t){var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){var r=n(41),i=n(33),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t;return i(e),t=arguments[1],arguments.length>1?o.call(e,"__ee__")&&Boolean(e.__ee__[t]):e.hasOwnProperty("__ee__")&&!r(e.__ee__)}},function(e,t,n){var r=n(33),i=Object.prototype.propertyIsEnumerable;e.exports=function(e){var t;r(e);for(t in e)if(i.call(e,t))return!1;return!0}},function(e,t,n){var r=n(43),i=n(45),o=n(54)("hypertimer:master");t.createMaster=function(e,t,n){function s(){var e=t();return delete e.time,delete e.master,delete e.port,e}var a=new r.Server({port:n});return a.on("connection",function(t){o("new connection");var n=i(t);n.on("time",function(t,n){var r=e();n(r),o("send time "+new Date(r).toISOString())});var r=s();o("send config",r),n.send("config",r),t.emitter=n}),a.broadcast=function(e,t){o("broadcast",e,t),a.clients.forEach(function(n){n.emitter.send(e,t)})},a.broadcastConfig=function(){a.broadcast("config",s())},a.destroy=function(){a.close(),o("destroyed")},o("listening at ws://localhost:"+n),a}},function(e,t,n){e.exports="undefined"==typeof window||void 0===window.WebSocket?n(44):window.WebSocket},function(e,t){function n(e,t,n){return t?new i(e,t):new i(e)}var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;e.exports=i?n:null,i&&(n.prototype=i.prototype)},function(e,t,n){var r=n(25),i=n(46),o=n(54)("hypertimer:socket"),s=6e4;e.exports=function(e){function t(){return u++}var n=r({socket:e,send:function(t,n){var r={event:t,data:n};o("send",r),e.send(JSON.stringify(r))},request:function(n,r){return new i(function(i,u){var c=t(),l={event:n,id:c,data:r};a[c]={resolve:i,reject:u,timeout:setTimeout(function(){delete a[c],u(new Error("Timeout"))},s)},o("request",l),e.send(JSON.stringify(l))}).catch(function(e){})}});e.onmessage=function(t){var r=t.data,i=JSON.parse(r);o("receive",i);var s=a[i.id];s?(clearTimeout(s.timeout),delete a[i.id],s.resolve(i.data)):"id"in i?n.emit(i.event,i.data,function(t){var n={id:i.id,data:t};e.readyState===e.OPEN||e.readyState===e.CONNECTING?(o("reply",n),e.send(JSON.stringify(n))):o("cancel reply",n,"(socket is closed)")}):n.emit(i.event,i.data)};var a={},u=0;return n}},function(e,t,n){e.exports="undefined"==typeof window||void 0===window.Promise?n(47):window.Promise},function(e,t,n){e.exports=n(48)},function(e,t,n){e.exports=n(49),n(50),n(51),n(52),n(53)},function(e,t,n){function r(){}function i(e){try{return e.then}catch(e){return _=e,v}}function o(e,t){try{return e(t)}catch(e){return _=e,v}}function s(e,t,n){try{e(t,n)}catch(e){return _=e,v}}function a(e){if("object"!==_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==r&&p(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var s=new a(r);s.then(i,o),c(e,new d(t,n,s))})}function c(e,t){for(;3===e._37;)e=e._12;0!==e._37?g(function(){var n=1===e._37?t.onFulfilled:t.onRejected;if(null!==n){var r=o(n,e._12);r===v?f(t.promise,_):l(t.promise,r)}else 1===e._37?l(t.promise,e._12):f(t.promise,e._12)}):e._59.push(t)}function l(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===(void 0===t?"undefined":_typeof(t))||"function"==typeof t)){var n=i(t);if(n===v)return f(e,_);if(n===e.then&&t instanceof a)return e._37=3,e._12=t,void h(e);if("function"==typeof n)return void p(n.bind(t),e)}e._37=1,e._12=t,h(e)}function f(e,t){e._37=2,e._12=t,h(e)}function h(e){for(var t=0;t<e._59.length;t++)c(e,e._59[t]);e._59=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function p(e,t){var n=!1,r=s(e,function(e){n||(n=!0,l(t,e))},function(e){n||(n=!0,f(t,e))});n||r!==v||(n=!0,f(t,_))}var g=n(5),_=null,v={};e.exports=a,a._99=r,a.prototype.then=function(e,t){if(this.constructor!==a)return u(this,e,t);var n=new a(r);return c(this,new d(e,t,n)),n}},function(e,t,n){var r=n(49);e.exports=r,r.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,n){var r=n(49);e.exports=r,r.prototype.finally=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},function(e,t,n){function r(e){var t=new i(i._99);return t._37=1,t._12=e,t}var i=n(49);e.exports=i;var o=r(!0),s=r(!1),a=r(null),u=r(void 0),c=r(0),l=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return a;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return s;if(0===e)return c;if(""===e)return l;if("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(s,a){if(a&&("object"===(void 0===a?"undefined":_typeof(a))||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._37;)a=a._12;return 1===a._37?r(s,a._12):(2===a._37&&n(a._12),void a.then(function(e){r(s,e)},n))}var u=a.then;if("function"==typeof u)return void new i(u.bind(a)).then(function(e){r(s,e)},n)}t[s]=a,0==--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,s=0;s<t.length;s++)r(s,t[s])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){var r=n(49),i=n(10);e.exports=r,r.denodeify=function(e,t){return t=t||1/0,function(){var n=this,i=Array.prototype.slice.call(arguments,0,t>0?t:0);return new r(function(t,r){i.push(function(e,n){e?r(e):t(n)});var o=e.apply(n,i);!o||"object"!==(void 0===o?"undefined":_typeof(o))&&"function"!=typeof o||"function"!=typeof o.then||t(o)})}},r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,o=this;try{return e.apply(this,arguments).nodeify(n,o)}catch(e){if(null===n||void 0===n)return new r(function(t,n){n(e)});i(function(){n.call(o,e)})}}},r.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(n){i(function(){e.call(t,null,n)})},function(n){i(function(){e.call(t,n)})})}},function(e,t,n){var r="undefined"!=typeof window?window.Debug:n(55);e.exports=r||function(){return function(){}}},function(e,t,n){function r(){var e;try{e=t.storage.debug}catch(e){}return e}(t=e.exports=n(56)).log=function(){return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color,i=0,o=0;return(e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(r())},function(e,t,n){function r(){return t.colors[o++%t.colors.length]}(t=e.exports=function(e){function n(){}function o(){var e=o,n=+new Date,s=n-(i||n);e.diff=s,e.prev=i,e.curr=n,i=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var u=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;u++;var i=t.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(e,o),a.splice(u,1),u--}return n}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a)),(o.log||t.log||void 0).apply(e,a)}n.enabled=!1,o.enabled=!0;var s=t.enabled(e)?o:n;return s.namespace=e,s}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(57),t.names=[],t.skips=[],t.formatters={};var i,o=0},function(e,t){function n(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return o(e,c,"day")||o(e,u,"hour")||o(e,a,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,u=60*a,c=24*u,l=365.25*c;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t.long?i(e):r(e)}},function(e,t,n){var r=n(43),i=n(46),o=n(54)("hypertimer:slave"),s=n(45),a=n(59),u=n(60),c=1e3,l=5;t.createSlave=function(e){function t(){return u.repeat(function(){var e=null;return p?i.resolve(e):n(h).then(function(t){e=t}).catch(function(e){}).then(function(){return u.wait(c)}).then(function(){return e})},l).then(function(e){o("latencies",e);var t=e.filter(function(e){return null!==e}),n=a.median(t)+a.std(t),r=t.filter(function(e){return e<n});return r.length>0?a.mean(r):null}).then(function(e){return p?i.resolve(null):h.request("time").then(function(t){var n=t+e;return h.emit("change",n),n})}).catch(function(e){h.emit("error",e)})}function n(e){var t=Date.now();return e.request("time").then(function(n){var r=(Date.now()-t)/2,i=n+r;return d&&(d=!1,e.emit("change",i)),r})}var f=new r(e),h=s(f),d=!0,p=!1,g=null;return f.onopen=function(){o("connected"),t(),g=setInterval(t,36e5)},h.destroy=function(){p=!0,clearInterval(g),g=null,f.close(),o("destroyed")},h}},function(e,t){t.compare=function(e,t){return e>t?1:e<t?-1:0},t.add=function(e,t){return e+t},t.sum=function(e){return e.reduce(t.add)},t.mean=function(e){return t.sum(e)/e.length},t.std=function(e){return Math.sqrt(t.variance(e))},t.variance=function(e){if(e.length<2)return 0;var n=t.mean(e);return e.map(function(e){return Math.pow(e-n,2)}).reduce(t.add)/(e.length-1)},t.median=function(e){return e.length<2?e[0]:e.slice().sort(t.compare).length%2==0?(e[e.length/2-1]+e[e.length/2])/2:e[(e.length-1)/2]}},function(e,t,n){var r=n(46);t.wait=function(e){return new r(function(t){setTimeout(t,e)})},t.repeat=function(e,t){return new r(function(n,r){function i(){o<t?(o++,e().then(function(e){s.push(e),i()})):n(s)}var o=0,s=[];i()})},t.whilst=function(e,t){return new r(function(n,r){function i(){e()?t().then(function(){i()}):n()}i()})}},function(e,t){"function"==typeof Date.now?t.systemNow=function(){return Date.now()}:t.systemNow=function(){return(new Date).valueOf()},t.shuffle=function(e){for(var t,n,r=e.length;r;t=Math.floor(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e}},function(e,t){function n(e){this.transports=[],e&&this.load(e)}n.types={},n.registerType=function(e){var t=e.prototype.type;if("function"!=typeof e)throw new Error("Constructor function expected");if(!t)throw new Error('Field "prototype.type" missing in transport constructor');if(t in n.types&&n.types[t]!==e)throw new Error('Transport type "'+t+'" already exists');n.types[t]=e},n.prototype.add=function(e){return this.transports.push(e),e},n.prototype.load=function(e){if(Array.isArray(e))return e.map(this.load.bind(this));var t=e.type;if(!t)throw new Error('Property "type" missing');var r=n.types[t];if(!r)throw new Error('Unknown type of transport "'+t+'". Choose from: '+Object.keys(n.types).join(","));var i=new r(e);return this.transports.push(i),i},n.prototype.unload=function(e){var t;if("string"==typeof e)t=this.get(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)this.unload(e[n]);else t=e;if(t){t.close();var r=this.transports.indexOf(t);-1!==r&&this.transports.splice(r,1)}},n.prototype.get=function(e){for(var t=0;t<this.transports.length;t++){var n=this.transports[t];if(n.id===e)return n}throw new Error('Transport with id "'+e+'" not found')},n.prototype.getAll=function(){return this.transports.concat([])},n.prototype.getByType=function(e){if(e){if(!(e in n.types))throw new Error('Unknown type of transport "'+e+'". Choose from: '+Object.keys(n.types).join(","));return this.transports.filter(function(t){return t.type===e})}return[].concat(this.transports)},n.prototype.clear=function(){this.transports.forEach(function(e){e.close()}),this.transports=[]},e.exports=n},function(e,t,n){function r(e,t){var n=i.babbler(e.id);n.connect({connect:function(e){},disconnect:function(e){},send:function(t,n){e.send(t,n)}}),this.babbler=n;var r=e._receive;this._receive=function(t,i){return n._receive(i),r.call(e,t,i)}}var i=n(64);r.prototype.type="babble",r.prototype.mixin=function(){var e=this.babbler;return{_receive:this._receive,ask:e.ask.bind(e),tell:e.tell.bind(e),listen:e.listen.bind(e),listenOnce:e.listenOnce.bind(e)}},e.exports=r},function(e,t,n){e.exports=n(65)},function(e,t,n){var r=n(66),i=n(140),o=n(141),s=n(138),a=n(143),u=n(142);t.babbler=function(e){return new r(e)},t.tell=function(e){return new i(e)},t.ask=function(e,n){return t.tell(e).listen(n)},t.decide=function(e,t){return new a(e,t)},t.listen=function(e){var t=new o;return e?t.then(e):t},t.then=function(e){return new s(e)},t.iif=function(e,t,n){return new u(e,t,n)},t.Babbler=r,t.block={Block:n(137),Then:n(138),Decision:n(143),IIf:n(142),Listen:n(141),Tell:n(140)},t.messagebus=n(133),t.babblify=function(e,n){var r;if(n&&void 0!==n.id)r=n.id;else{if(void 0===e.id)throw new Error('Id missing. Ensure that either actor has a property "id", or provide an id as a property in second argument params');r=e.id}["ask","tell","listen","listenOnce"].forEach(function(t){if(void 0!==e[t])throw new Error('Conflict: actor already has a property "'+t+'"')});var i=n&&n.send||"send";if("function"!=typeof e[i])throw new Error('Missing function. Function "'+i+'(to, message)" expected on actor or on params');var o=t.babbler(r),s=n&&n.receive||"receive",a=e.hasOwnProperty(s)?e[s]:null;return e[s]=a?function(t,n){return o._receive(n),a.call(e,t,n)}:function(e,t){return o._receive(t)},o.send=function(t,n){setTimeout(function(){e[i](t,n)},0)},e.__babbler__={babbler:o,receiveOriginal:a,receiveName:s},e.ask=o.ask.bind(o),e.tell=o.tell.bind(o),e.listen=o.listen.bind(o),e.listenOnce=o.listenOnce.bind(o),e},t.unbabblify=function(e){var t=e.__babbler__;return t&&(delete e.__babbler__,delete e.ask,delete e.tell,delete e.listen,delete e.listenOnce,delete e[t.receiveName],t.receiveOriginal&&(e[t.receiveName]=t.receiveOriginal)),e}},function(e,t,n){function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!e)throw new Error("id required");this.id=e,this.listeners=[],this.conversations={},this.connect()}var i=n(67),o=n(131).Promise,s=n(133),a=n(136),u=(n(137),n(138),n(140)),c=n(141);n(142),r.prototype.isBabbler=!0,r.prototype.connect=function(e){if(this.disconnect(),e||(e=s.default()),"function"!=typeof e.connect)throw new Error("message bus must contain a function connect(params: {id: string, callback: function}) : string");if("function"!=typeof e.disconnect)throw new Error("message bus must contain a function disconnect(token: string)");if("function"!=typeof e.send)throw new Error("message bus must contain a function send(params: {id: string, message: *})");var t=null,n=new o(function(e,n){t=e}),r=e.connect({id:this.id,message:this._receive.bind(this),callback:t});return this.disconnect=function(){e.disconnect(r)},this.send=e.send,n},r.prototype._receive=function(e){if(e&&"id"in e&&"message"in e){var t=this,n=e.id,r=this.conversations[n];r&&r.length?r.forEach(function(t){t.deliver(e)}):(r||(r=[]),this.conversations[n]=r,this.listeners.forEach(function(i){var o=new a({id:n,self:t.id,other:e.from,context:{from:e.from},send:t.send});return r.push(o),o.deliver(e),t._process(i,o).then(function(){var e=r.indexOf(o);-1!==e&&r.splice(e,1),0===r.length&&delete t.conversations[n]})}))}},r.prototype.disconnect=function(){},r.prototype.send=function(e,t){throw new Error("Cannot send: not connected")},r.prototype.listen=function(e,t){var n=new c;this.listeners.push(n);var r=n;return e&&(r=r.iif(e)),t&&(r=r.then(t)),r},r.prototype.listenOnce=function(e,t){var n=new c;this.listeners.push(n);var r=this,i=n;return e&&(i=i.iif(e)),i=i.then(function(e){var t=r.listeners.indexOf(n);return-1!==t&&r.listeners.splice(t,1),e}),t&&(i=i.then(t)),i},r.prototype.tell=function(e,t){var n=this,r=i.v4(),o=new a({id:r,self:this.id,other:e,context:{from:e},send:n.send});this.conversations[r]=[o];var s=new u(t);return setTimeout(function(){n._process(s,o).then(function(){delete n.conversations[r]})},0),s},r.prototype.ask=function(e,t,n){return this.tell(e,t).listen(n)},r.prototype._process=function(e,t){return new o(function(n,r){function i(e,r){e.execute(t,r).then(function(e){e.block?i(e.block,e.result):n(t)})}i(e)})},e.exports=r},function(e,t,n){var r;(function(i){!function(o){function s(e,t){var n=t||0,r=d;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function a(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new h(16):null,e=null);var i=(e=e||{}).random||(e.rng||u)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;o++)t[r+o]=i[o];return t||s(i)}var u,c,l,f;o?function(){var e=o.crypto||o.msCrypto;if(!u&&e&&e.getRandomValues)try{var t=new Uint8Array(16);f=u=function(){return e.getRandomValues(t),t},u()}catch(e){}if(!u){var n=new Array(16);c=u=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n},"undefined"!=typeof console&&console.warn}}():function(){try{var e=n(72).randomBytes;l=u=e&&function(){return e(16)},u()}catch(e){}}();for(var h="function"==typeof i?i:Array,d=[],p={},g=0;g<256;g++)d[g]=(g+256).toString(16).substr(1),p[d[g]]=g;var _=u(),v=[1|_[0],_[1],_[2],_[3],_[4],_[5]],y=16383&(_[6]<<8|_[7]),m=0,b=0,w=a;w.v1=function(e,t,n){var r=t&&n||0,i=t||[],o=null!=(e=e||{}).clockseq?e.clockseq:y,a=null!=e.msecs?e.msecs:(new Date).getTime(),u=null!=e.nsecs?e.nsecs:b+1,c=a-m+(u-b)/1e4;if(c<0&&null==e.clockseq&&(o=o+1&16383),(c<0||a>m)&&null==e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=a,b=u,y=o;var l=(1e4*(268435455&(a+=122192928e5))+u)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=255&l;var f=a/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var h=e.node||v,d=0;d<6;d++)i[r+d]=h[d];return t||s(i)},w.v4=a,w.parse=function(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[r+i++]=p[e])});i<16;)t[r+i++]=0;return t},w.unparse=s,w.BufferClass=h,w._rng=u,w._mathRNG=c,w._nodeRNG=l,w._whatwgRNG=f,void 0!==e&&e.exports?e.exports=w:void 0!==(r=function(){return w}.call(t,n,t,e))&&(e.exports=r)}("undefined"!=typeof window?window:null)}).call(t,n(68).Buffer)},function(e,t,n){(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=o.prototype:(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?l(e,t,n):d(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return a(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(a(t),e=i(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,n),s=(e=i(e,r)).write(t,n);return s!==r&&(e=e.slice(0,s)),e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t).__proto__=o.prototype:e=f(e,t),e}function d(e,t){if(o.isBuffer(t)){var n=0|p(t.length);return 0===(e=i(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Z(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&J(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function _(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<a;c++)if(o(e,c)===o(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*s}else-1!==l&&(c-=c-l),l=-1}else for(n+u>a&&(n=a-u),c=n;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){f=!1;break}if(f)return c}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return W(H(t,e.length-n),e,n,r)}function k(e,t,n,r){return W(G(t),e,n,r)}function E(e,t,n,r){return k(e,t,n,r)}function S(e,t,n,r){return W(V(t),e,n,r)}function x(e,t,n,r){return W(K(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,c,l,f;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(u=e[i+1]))&&(f=(31&o)<<6|63&u)>127&&(s=f);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return C(r)}function C(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=q(e[o]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||L(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,i){return i||L(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,r,52,8),n+8}function F(e){if((e=z(e).replace(Q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function K(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}function V(e){return Y.toByteArray(F(e))}function W(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Z(e){return e!==e}var Y=n(69),X=n(70),J=n(71);t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return s(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return u(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):_.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var s=i-r,a=n-t,u=Math.min(s,a),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),X.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),X.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),X.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),X.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=o.isBuffer(e)?e:H(new o(e,r).toString()),u=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%u]}return this};var Q=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}function i(e,t,n){for(var i,o=[],s=t;s<n;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(r(i));return o.join("")}t.byteLength=function(e){return 3*e.length/4-n(e)},t.toByteArray=function(e){var t,r,i,o,u,c=e.length;o=n(e),u=new a(3*c/4-o),r=o>0?c-4:c;var l=0;for(t=0;t<r;t+=4)i=s[e.charCodeAt(t)]<<18|s[e.charCodeAt(t+1)]<<12|s[e.charCodeAt(t+2)]<<6|s[e.charCodeAt(t+3)],u[l++]=i>>16&255,u[l++]=i>>8&255,u[l++]=255&i;return 2===o?(i=s[e.charCodeAt(t)]<<2|s[e.charCodeAt(t+1)]>>4,u[l++]=255&i):1===o&&(i=s[e.charCodeAt(t)]<<10|s[e.charCodeAt(t+1)]<<4|s[e.charCodeAt(t+2)]>>2,u[l++]=i>>8&255,u[l++]=255&i),u},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,s="",a=[],u=0,c=n-r;u<c;u+=16383)a.push(i(e,u,u+16383>c?c:u+16383));return 1===r?(t=e[n-1],s+=o[t>>2],s+=o[t<<4&63],s+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],s+=o[t>>10],s+=o[t>>4&63],s+=o[t<<2&63],s+="="),a.push(s),a.join("")};for(var o=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=u.length;c<l;++c)o[c]=u[c],s[u.charCodeAt(c)]=c;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+d]=255&s,d+=p,s/=256,c-=8);e[n+d-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(r){function i(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}var o=n(73);t.createHash=n(75),t.createHmac=n(88),t.randomBytes=function(e,t){if(!t||!t.call)return new r(o(e));try{t.call(this,void 0,new r(o(e)))}catch(e){t(e)}},t.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var s=n(89)(t);t.pbkdf2=s.pbkdf2,t.pbkdf2Sync=s.pbkdf2Sync,n(91)(t,e.exports),function(e,t){for(var n in e)t(e[n],n)}(["createCredentials","createSign","createVerify","createDiffieHellman"],function(e){t[e]=function(){i("sorry,",e,"is not implemented yet")}})}).call(t,n(68).Buffer)},function(e,t,n){(function(t,r){!function(){var i=("undefined"==typeof window?t:window)||{};_crypto=i.crypto||i.msCrypto||n(74),e.exports=function(e){if(_crypto.getRandomValues){var t=new r(e);return _crypto.getRandomValues(t),t}if(_crypto.randomBytes)return _crypto.randomBytes(e);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(t,function(){return this}(),n(68).Buffer)},function(e,t){},function(e,t,n){(function(t){function r(e){return function(){var n=[];return{update:function(e,r){return t.isBuffer(e)||(e=new t(e,r)),n.push(e),this},digest:function(r){var i=t.concat(n),o=e(i);return n=null,r?o.toString(r):o}}}}var i=n(76),o=r(n(85)),s=r(n(87));e.exports=function(e){return"md5"===e?new o:"rmd160"===e?new s:i(e)}}).call(t,n(68).Buffer)},function(e,t,n){var t=e.exports=function(e){var n=t[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n},r=n(68).Buffer,i=n(77)(r);t.sha1=n(78)(r,i),t.sha256=n(83)(r,i),t.sha512=n(84)(r,i)},function(e,t){e.exports=function(e){function t(t,n){this._block=new e(t),this._finalSize=n,this._blockSize=t,this._len=0,this._s=0}return t.prototype.init=function(){this._s=0,this._len=0},t.prototype.update=function(t,n){"string"==typeof t&&(t=new e(t,n=n||"utf8"));for(var r=this._len+=t.length,i=this._s=this._s||0,o=0,s=this._block;i<r;){for(var a=Math.min(t.length,o+this._blockSize-i%this._blockSize)-o,u=0;u<a;u++)s[i%this._blockSize+u]=t[u+o];o+=a,(i+=a)%this._blockSize==0&&this._update(s)}return this._s=i,this},t.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var n=this._update(this._block)||this._hash();return e?n.toString(e):n},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t}},function(e,t,n){var r=n(79).inherits;e.exports=function(e,t){function n(){return c.length?c.pop().init():this instanceof n?(this._w=u,t.call(this,64,56),this._h=null,void this.init()):new n}function i(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function o(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function s(e,t){return e+t|0}function a(e,t){return e<<t|e>>>32-t}var u=new("undefined"==typeof Int32Array?Array:Int32Array)(80),c=[];return r(n,t),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,t.prototype.init.call(this),this},n.prototype._POOL=c,n.prototype._update=function(e){var t,n,r,u,c,l,f,h,d,p;t=l=this._a,n=f=this._b,r=h=this._c,u=d=this._d,c=p=this._e;for(var g=this._w,_=0;_<80;_++){var v=g[_]=_<16?e.readInt32BE(4*_):a(g[_-3]^g[_-8]^g[_-14]^g[_-16],1),y=s(s(a(t,5),i(_,n,r,u)),s(s(c,v),o(_)));c=u,u=r,r=a(n,30),n=t,t=y}this._a=s(t,l),this._b=s(n,f),this._c=s(r,h),this._d=s(u,d),this._e=s(c,p)},n.prototype._hash=function(){c.length<100&&c.push(this);var t=new e(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},n}},function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=u(e,i,r)),i}var o=c(e,n);if(o)return o;var s=Object.keys(n),g=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(n);if(0===s.length){if(S(n)){var _=n.name?": "+n.name:"";return e.stylize("[Function"+_+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return l(n)}var v="",m=!1,w=["{","}"];if(p(n)&&(m=!0,w=["[","]"]),S(n)&&(v=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(v=" "+RegExp.prototype.toString.call(n)),k(n)&&(v=" "+Date.prototype.toUTCString.call(n)),E(n)&&(v=" "+l(n)),0===s.length&&(!m||0==n.length))return w[0]+v+w[1];if(r<0)return b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var x;return x=m?f(e,n,r,g,s):s.map(function(t){return h(e,n,r,g,t,m)}),e.seen.pop(),d(x,v,w)}function c(e,t){if(m(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)T(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}function h(e,t,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),T(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=_(n)?u(e,c.value,null):u(e,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),m(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function _(e){return null===e}function v(e){return"number"==typeof e}function y(e){return"string"==typeof e}function m(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===x(e)}function w(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function k(e){return w(e)&&"[object Date]"===x(e)}function E(e){return w(e)&&("[object Error]"===x(e)||e instanceof Error)}function S(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var O=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(e).replace(O,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<o;a=r[++n])_(a)||!w(a)?s+=" "+a:s+=" "+i(a);return s},t.deprecate=function(n,i){if(m(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation,o=!0}return n.apply(this,arguments)}};var C,A={};t.debuglog=function(e){if(m(C)&&(C=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!A[e])if(new RegExp("\\b"+e+"\\b","i").test(C)){r.pid;A[e]=function(){t.format.apply(t,arguments)}}else A[e]=function(){};return A[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=g,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=y,t.isSymbol=function(e){return"symbol"===(void 0===e?"undefined":_typeof(e))},t.isUndefined=m,t.isRegExp=b,t.isObject=w,t.isDate=k,t.isError=E,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":_typeof(e))||void 0===e},t.isBuffer=n(81);t.log=function(){},t.inherits=n(82),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(80))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){g&&d&&(g=!1,d.length?p=d.concat(p):_=-1,p.length&&a())}function a(){if(!g){var e=i(s);g=!0;for(var t=p.length;t;){for(d=p,p=[];++_<t;)d&&d[_].run();_=-1,t=p.length}d=null,g=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,p=[],g=!1,_=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||g||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var r=n(79).inherits;e.exports=function(e,t){function n(){this.init(),this._w=d,t.call(this,64,56)}function i(e,t){return e>>>t|e<<32-t}function o(e,t){return e>>>t}function s(e,t,n){return e&t^~e&n}function a(e,t,n){return e&t^e&n^t&n}function u(e){return i(e,2)^i(e,13)^i(e,22)}function c(e){return i(e,6)^i(e,11)^i(e,25)}function l(e){return i(e,7)^i(e,18)^o(e,3)}function f(e){return i(e,17)^i(e,19)^o(e,10)}var h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=new Array(64);return r(n,t),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(e){var t,n,r,i,o,d,p,g,_,v,y=this._w;t=0|this._a,n=0|this._b,r=0|this._c,i=0|this._d,o=0|this._e,d=0|this._f,p=0|this._g,g=0|this._h;for(var m=0;m<64;m++){var b=y[m]=m<16?e.readInt32BE(4*m):f(y[m-2])+y[m-7]+l(y[m-15])+y[m-16];_=g+c(o)+s(o,d,p)+h[m]+b,v=u(t)+a(t,n,r),g=p,p=d,d=o,o=i+_,i=r,r=n,n=t,t=_+v}this._a=t+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0,this._f=d+this._f|0,this._g=p+this._g|0,this._h=g+this._h|0},n.prototype._hash=function(){var t=new e(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},n}},function(e,t,n){var r=n(79).inherits;e.exports=function(e,t){function n(){this.init(),this._w=u,t.call(this,128,112)}function i(e,t,n){return e>>>n|t<<32-n}function o(e,t,n){return e&t^~e&n}function s(e,t,n){return e&t^e&n^t&n}var a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);return r(n,t),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(e){var t,n,r,u,c,l,f,h,d,p,g,_,v,y,m,b,w=this._w;t=0|this._a,n=0|this._b,r=0|this._c,u=0|this._d,c=0|this._e,l=0|this._f,f=0|this._g,h=0|this._h,d=0|this._al,p=0|this._bl,g=0|this._cl,_=0|this._dl,v=0|this._el,y=0|this._fl,m=0|this._gl,b=0|this._hl;for(var k=0;k<80;k++){var E,S,x=2*k;if(k<16)E=w[x]=e.readInt32BE(4*x),S=w[x+1]=e.readInt32BE(4*x+4);else{var T=w[x-30],O=w[x-30+1],C=i(T,O,1)^i(T,O,8)^T>>>7,A=i(O,T,1)^i(O,T,8)^i(O,T,7),R=i(T=w[x-4],O=w[x-4+1],19)^i(O,T,29)^T>>>6,P=i(O,T,19)^i(T,O,29)^i(O,T,6),N=w[x-14],B=w[x-14+1],M=w[x-32],I=w[x-32+1];E=(E=(E=C+N+((S=A+B)>>>0<A>>>0?1:0))+R+((S+=P)>>>0<P>>>0?1:0))+M+((S+=I)>>>0<I>>>0?1:0),w[x]=E,w[x+1]=S}var j=s(t,n,r),L=s(d,p,g),U=i(t,d,28)^i(d,t,2)^i(d,t,7),D=i(d,t,28)^i(t,d,2)^i(t,d,7),F=i(c,v,14)^i(c,v,18)^i(v,c,9),z=i(v,c,14)^i(v,c,18)^i(c,v,9),q=a[x],H=a[x+1],G=o(c,l,f),K=o(v,y,m),V=b+z,W=h+F+(V>>>0<b>>>0?1:0);W=(W=(W=W+G+((V+=K)>>>0<K>>>0?1:0))+q+((V+=H)>>>0<H>>>0?1:0))+E+((V+=S)>>>0<S>>>0?1:0);var Z=D+L,Y=U+j+(Z>>>0<D>>>0?1:0);h=f,b=m,f=l,m=y,l=c,y=v,c=u+W+((v=_+V|0)>>>0<_>>>0?1:0)|0,u=r,_=g,r=n,g=p,n=t,p=d,t=W+Y+((d=V+Z|0)>>>0<V>>>0?1:0)|0}this._al=this._al+d|0,this._bl=this._bl+p|0,this._cl=this._cl+g|0,this._dl=this._dl+_|0,this._el=this._el+v|0,this._fl=this._fl+y|0,this._gl=this._gl+m|0,this._hl=this._hl+b|0,this._a=this._a+t+(this._al>>>0<d>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+r+(this._cl>>>0<g>>>0?1:0)|0,this._d=this._d+u+(this._dl>>>0<_>>>0?1:0)|0,this._e=this._e+c+(this._el>>>0<v>>>0?1:0)|0,this._f=this._f+l+(this._fl>>>0<y>>>0?1:0)|0,this._g=this._g+f+(this._gl>>>0<m>>>0?1:0)|0,this._h=this._h+h+(this._hl>>>0<b>>>0?1:0)|0},n.prototype._hash=function(){function t(e,t,r){n.writeInt32BE(e,r),n.writeInt32BE(t,r+4)}var n=new e(64);return t(this._a,this._al,0),t(this._b,this._bl,8),t(this._c,this._cl,16),t(this._d,this._dl,24),t(this._e,this._el,32),t(this._f,this._fl,40),t(this._g,this._gl,48),t(this._h,this._hl,56),n},n}},function(e,t,n){function r(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,i=-1732584194,l=271733878,f=0;f<e.length;f+=16){var h=n,d=r,p=i,g=l;r=u(r=u(r=u(r=u(r=a(r=a(r=a(r=a(r=s(r=s(r=s(r=s(r=o(r=o(r=o(r=o(r,i=o(i,l=o(l,n=o(n,r,i,l,e[f+0],7,-680876936),r,i,e[f+1],12,-389564586),n,r,e[f+2],17,606105819),l,n,e[f+3],22,-1044525330),i=o(i,l=o(l,n=o(n,r,i,l,e[f+4],7,-176418897),r,i,e[f+5],12,1200080426),n,r,e[f+6],17,-1473231341),l,n,e[f+7],22,-45705983),i=o(i,l=o(l,n=o(n,r,i,l,e[f+8],7,1770035416),r,i,e[f+9],12,-1958414417),n,r,e[f+10],17,-42063),l,n,e[f+11],22,-1990404162),i=o(i,l=o(l,n=o(n,r,i,l,e[f+12],7,1804603682),r,i,e[f+13],12,-40341101),n,r,e[f+14],17,-1502002290),l,n,e[f+15],22,1236535329),i=s(i,l=s(l,n=s(n,r,i,l,e[f+1],5,-165796510),r,i,e[f+6],9,-1069501632),n,r,e[f+11],14,643717713),l,n,e[f+0],20,-373897302),i=s(i,l=s(l,n=s(n,r,i,l,e[f+5],5,-701558691),r,i,e[f+10],9,38016083),n,r,e[f+15],14,-660478335),l,n,e[f+4],20,-405537848),i=s(i,l=s(l,n=s(n,r,i,l,e[f+9],5,568446438),r,i,e[f+14],9,-1019803690),n,r,e[f+3],14,-187363961),l,n,e[f+8],20,1163531501),i=s(i,l=s(l,n=s(n,r,i,l,e[f+13],5,-1444681467),r,i,e[f+2],9,-51403784),n,r,e[f+7],14,1735328473),l,n,e[f+12],20,-1926607734),i=a(i,l=a(l,n=a(n,r,i,l,e[f+5],4,-378558),r,i,e[f+8],11,-2022574463),n,r,e[f+11],16,1839030562),l,n,e[f+14],23,-35309556),i=a(i,l=a(l,n=a(n,r,i,l,e[f+1],4,-1530992060),r,i,e[f+4],11,1272893353),n,r,e[f+7],16,-155497632),l,n,e[f+10],23,-1094730640),i=a(i,l=a(l,n=a(n,r,i,l,e[f+13],4,681279174),r,i,e[f+0],11,-358537222),n,r,e[f+3],16,-722521979),l,n,e[f+6],23,76029189),i=a(i,l=a(l,n=a(n,r,i,l,e[f+9],4,-640364487),r,i,e[f+12],11,-421815835),n,r,e[f+15],16,530742520),l,n,e[f+2],23,-995338651),i=u(i,l=u(l,n=u(n,r,i,l,e[f+0],6,-198630844),r,i,e[f+7],10,1126891415),n,r,e[f+14],15,-1416354905),l,n,e[f+5],21,-57434055),i=u(i,l=u(l,n=u(n,r,i,l,e[f+12],6,1700485571),r,i,e[f+3],10,-1894986606),n,r,e[f+10],15,-1051523),l,n,e[f+1],21,-2054922799),i=u(i,l=u(l,n=u(n,r,i,l,e[f+8],6,1873313359),r,i,e[f+15],10,-30611744),n,r,e[f+6],15,-1560198380),l,n,e[f+13],21,1309151649),i=u(i,l=u(l,n=u(n,r,i,l,e[f+4],6,-145523070),r,i,e[f+11],10,-1120210379),n,r,e[f+2],15,718787259),l,n,e[f+9],21,-343485551),n=c(n,h),r=c(r,d),i=c(i,p),l=c(l,g)}return Array(n,r,i,l)}function i(e,t,n,r,i,o){return c(l(c(c(t,e),c(r,o)),i),n)}function o(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function u(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}function c(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function l(e,t){return e<<t|e>>>32-t}var f=n(86);e.exports=function(e){return f.hash(e,r,16)}},function(e,t,n){(function(t){function n(e,n){if(e.length%i!=0){var r=e.length+(i-e.length%i);e=t.concat([e,o],r)}for(var s=[],a=n?e.readInt32BE:e.readInt32LE,u=0;u<e.length;u+=i)s.push(a.call(e,u));return s}function r(e,n,r){for(var i=new t(n),o=r?i.writeInt32BE:i.writeInt32LE,s=0;s<e.length;s++)o.call(i,e[s],4*s,!0);return i}var i=4,o=new t(i);o.fill(0);var s=8;e.exports={hash:function(e,i,o,a){return t.isBuffer(e)||(e=new t(e)),r(i(n(e,a),e.length*s),o,a)}}}).call(t,n(68).Buffer)},function(e,t,n){(function(t){function n(e,t,n){return e^t^n}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return(e|~t)^n}function o(e,t,n){return e&n|t&~n}function s(e,t,n){return e^(t|~n)}function a(e,t){return e<<t|e>>>32-t}e.exports=function(e){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof e&&(e=new t(e,"utf8"));var r=p(e),i=8*e.length,o=8*e.length;r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(s=0;s<r.length;s+=16)_(n,r,s);for(var s=0;s<5;s++){var a=n[s];n[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var u=g(n);return new t(u)};var u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],f=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0],p=function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},g=function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},_=function(e,t,p){for(C=0;C<16;C++){var g=p+C,_=t[g];t[g]=16711935&(_<<8|_>>>24)|4278255360&(_<<24|_>>>8)}var v,y,m,b,w,k,E,S,x,T;k=v=e[0],E=y=e[1],S=m=e[2],x=b=e[3],T=w=e[4];for(var O,C=0;C<80;C+=1)O=v+t[p+u[C]]|0,O+=C<16?n(y,m,b)+h[0]:C<32?r(y,m,b)+h[1]:C<48?i(y,m,b)+h[2]:C<64?o(y,m,b)+h[3]:s(y,m,b)+h[4],O=(O=a(O|=0,l[C]))+w|0,v=w,w=b,b=a(m,10),m=y,y=O,O=k+t[p+c[C]]|0,O+=C<16?s(E,S,x)+d[0]:C<32?o(E,S,x)+d[1]:C<48?i(E,S,x)+d[2]:C<64?r(E,S,x)+d[3]:n(E,S,x)+d[4],O=(O=a(O|=0,f[C]))+T|0,k=T,T=x,x=a(S,10),S=E,E=O;O=e[1]+m+x|0,e[1]=e[2]+b+T|0,e[2]=e[3]+w+k|0,e[3]=e[4]+v+E|0,e[4]=e[0]+y+S|0,e[0]=O}}).call(t,n(68).Buffer)},function(e,t,n){(function(t){function r(e,n){if(!(this instanceof r))return new r(e,n);this._opad=u,this._alg=e;var s="sha512"===e?128:64;(n=this._key=t.isBuffer(n)?n:new t(n)).length>s?n=i(e).update(n).digest():n.length<s&&(n=t.concat([n,o],s));for(var a=this._ipad=new t(s),u=this._opad=new t(s),c=0;c<s;c++)a[c]=54^n[c],u[c]=92^n[c];this._hash=i(e).update(a)}var i=n(75),o=new t(128);o.fill(0),e.exports=r,r.prototype.update=function(e,t){return this._hash.update(e,t),this},r.prototype.digest=function(e){var t=this._hash.digest();return i(this._alg).update(this._opad).update(t).digest(e)}}).call(t,n(68).Buffer)},function(e,t,n){var r=n(90);e.exports=function(e,t){t=t||{};var n=r(e);return t.pbkdf2=n.pbkdf2,t.pbkdf2Sync=n.pbkdf2Sync,t}},function(e,t,n){(function(t){e.exports=function(e){function n(n,r,i,o,s){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0)throw new TypeError("Bad key length");s=s||"sha1",t.isBuffer(n)||(n=new t(n)),t.isBuffer(r)||(r=new t(r));var a,u,c,l=1,f=new t(o),h=new t(r.length+4);r.copy(h,0,0,r.length);for(var d=1;d<=l;d++){h.writeUInt32BE(d,r.length);var p=e.createHmac(s,n).update(h).digest();if(!a&&(a=p.length,c=new t(a),l=Math.ceil(o/a),u=o-(l-1)*a,o>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");p.copy(c,0,0,a);for(var g=1;g<i;g++){p=e.createHmac(s,n).update(p).digest();for(var _=0;_<a;_++)c[_]^=p[_]}var v=(d-1)*a,y=d==l?u:a;c.copy(f,v,0,y)}return f}return{pbkdf2:function(e,t,r,i,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=n(e,t,r,i,o)}catch(e){return s(e)}s(void 0,a)})},pbkdf2Sync:n}}}).call(t,n(68).Buffer)},function(e,t,n){e.exports=function(e,t){t=t||{};var r=n(92)(e);t.createCipher=r.createCipher,t.createCipheriv=r.createCipheriv;var i=n(130)(e);t.createDecipher=i.createDecipher,t.createDecipheriv=i.createDecipheriv;var o=n(121);t.listCiphers=function(){return Object.keys(o)}}},function(e,t,n){(function(t){function r(e,n,a){if(!(this instanceof r))return new r(e,n,a);s.call(this),this._cache=new i,this._cipher=new o.AES(n),this._prev=new t(a.length),a.copy(this._prev),this._mode=e}function i(){if(!(this instanceof i))return new i;this.cache=new t("")}var o=n(93),s=n(94),a=n(97),u=n(121),c=n(122),l=n(123);a(r,s),r.prototype._transform=function(e,t,n){this._cache.add(e);for(var r,i;r=this._cache.get();)i=this._mode.encrypt(this,r),this.push(i);n()},r.prototype._flush=function(e){var t=this._cache.flush();this.push(this._mode.encrypt(this,t)),this._cipher.scrub(),e()},i.prototype.add=function(e){this.cache=t.concat([this.cache,e])},i.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},i.prototype.flush=function(){for(var e=16-this.cache.length,n=new t(e),r=-1;++r<e;)n.writeUInt8(e,r);return t.concat([this.cache,n])};var f={ECB:n(124),CBC:n(125),CFB:n(127),OFB:n(128),CTR:n(129)};e.exports=function(e){function n(e,n,i){var o=u[e];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new t(i)),"string"==typeof n&&(n=new t(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new l(f[o.mode],n,i):new r(f[o.mode],n,i)}return{createCipher:function(t,r){var i=u[t];if(!i)throw new TypeError("invalid suite type");var o=c(e,r,i.key,i.iv);return n(t,o.key,o.iv)},createCipheriv:n}}}).call(t,n(68).Buffer)},function(e,t,n){(function(e){function n(e){var t;return e>a||e<0?(t=Math.abs(e)%a,e<0?a-t:t):e}function r(e){var t,n,r;for(t=n=0,r=e.length;0<=r?n<r:n>r;t=0<=r?++n:--n)e[t]=0;return!1}function i(){var e;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var t,n;for(n=[],e=t=0;t<4;e=++t)n.push([]);return n}(),this.INV_SUB_MIX=function(){var t,n;for(n=[],e=t=0;t<4;e=++t)n.push([]);return n}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(e){for(var t=e.length/4,n=new Array(t),r=-1;++r<t;)n[r]=e.readUInt32BE(4*r);return n}function s(e){this._key=o(e),this._doReset()}var a=Math.pow(2,32);i.prototype.init=function(){var e,t,n,r,i,o,s,a,u,c;for(e=function(){var e,n;for(n=[],t=e=0;e<256;t=++e)t<128?n.push(t<<1):n.push(t<<1^283);return n}(),i=0,u=0,t=c=0;c<256;t=++c)n=(n=u^u<<1^u<<2^u<<3^u<<4)>>>8^255&n^99,this.SBOX[i]=n,this.INV_SBOX[n]=i,a=e[s=e[o=e[i]]],r=257*e[n]^16843008*n,this.SUB_MIX[0][i]=r<<24|r>>>8,this.SUB_MIX[1][i]=r<<16|r>>>16,this.SUB_MIX[2][i]=r<<8|r>>>24,this.SUB_MIX[3][i]=r,r=16843009*a^65537*s^257*o^16843008*i,this.INV_SUB_MIX[0][n]=r<<24|r>>>8,this.INV_SUB_MIX[1][n]=r<<16|r>>>16,this.INV_SUB_MIX[2][n]=r<<8|r>>>24,this.INV_SUB_MIX[3][n]=r,0===i?i=u=1:(i=o^e[e[e[a^o]]],u^=e[e[u]]);return!0};var u=new i;s.blockSize=16,s.prototype.blockSize=s.blockSize,s.keySize=32,s.prototype.keySize=s.keySize,s.ivSize=s.blockSize,s.prototype.ivSize=s.ivSize,s.prototype._doReset=function(){var e,t,n,r,i,o,s,a;for(t=(n=this._key).length,this._nRounds=t+6,i=4*(this._nRounds+1),this._keySchedule=[],r=s=0;0<=i?s<i:s>i;r=0<=i?++s:--s)this._keySchedule[r]=r<t?n[r]:(o=this._keySchedule[r-1],r%t==0?(o=o<<8|o>>>24,o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o],o^=u.RCON[r/t|0]<<24):t>6&&r%t==4&&(o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o]),this._keySchedule[r-t]^o);for(this._invKeySchedule=[],e=a=0;0<=i?a<i:a>i;e=0<=i?++a:--a)r=i-e,o=this._keySchedule[r-(e%4?0:4)],this._invKeySchedule[e]=e<4||r<=4?o:u.INV_SUB_MIX[0][u.SBOX[o>>>24]]^u.INV_SUB_MIX[1][u.SBOX[o>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[o>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&o]];return!0},s.prototype.encryptBlock=function(t){t=o(new e(t));var n=this._doCryptBlock(t,this._keySchedule,u.SUB_MIX,u.SBOX),r=new e(16);return r.writeUInt32BE(n[0],0),r.writeUInt32BE(n[1],4),r.writeUInt32BE(n[2],8),r.writeUInt32BE(n[3],12),r},s.prototype.decryptBlock=function(t){var n=[(t=o(new e(t)))[3],t[1]];t[1]=n[0],t[3]=n[1];var r=this._doCryptBlock(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX),i=new e(16);return i.writeUInt32BE(r[0],0),i.writeUInt32BE(r[3],4),i.writeUInt32BE(r[2],8),i.writeUInt32BE(r[1],12),i},s.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},s.prototype._doCryptBlock=function(e,t,r,i){var o,s,a,u,c,l,f,h,d,p,g;for(s=e[0]^t[0],a=e[1]^t[1],u=e[2]^t[2],c=e[3]^t[3],o=4,p=1,g=this._nRounds;1<=g?p<g:p>g;1<=g?++p:--p)l=r[0][s>>>24]^r[1][a>>>16&255]^r[2][u>>>8&255]^r[3][255&c]^t[o++],f=r[0][a>>>24]^r[1][u>>>16&255]^r[2][c>>>8&255]^r[3][255&s]^t[o++],h=r[0][u>>>24]^r[1][c>>>16&255]^r[2][s>>>8&255]^r[3][255&a]^t[o++],d=r[0][c>>>24]^r[1][s>>>16&255]^r[2][a>>>8&255]^r[3][255&u]^t[o++],s=l,a=f,u=h,c=d;return l=(i[s>>>24]<<24|i[a>>>16&255]<<16|i[u>>>8&255]<<8|i[255&c])^t[o++],f=(i[a>>>24]<<24|i[u>>>16&255]<<16|i[c>>>8&255]<<8|i[255&s])^t[o++],h=(i[u>>>24]<<24|i[c>>>16&255]<<16|i[s>>>8&255]<<8|i[255&a])^t[o++],d=(i[c>>>24]<<24|i[s>>>16&255]<<16|i[a>>>8&255]<<8|i[255&u])^t[o++],[n(l),n(f),n(h),n(d)]},t.AES=s}).call(t,n(68).Buffer)},function(e,t,n){(function(t){function r(){i.call(this)}var i=n(95).Transform,o=n(97);e.exports=r,o(r,i),r.prototype.update=function(e,n,r){this.write(e,n);for(var i,o=new t("");i=this.read();)o=t.concat([o,i]);return r&&(o=o.toString(r)),o},r.prototype.final=function(e){this.end();for(var n,r=new t("");n=this.read();)r=t.concat([r,n]);return e&&(r=r.toString(e)),r}}).call(t,n(68).Buffer)},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(96).EventEmitter;n(97)(r,i),r.Readable=n(98),r.Writable=n(117),r.Duplex=n(118),r.Transform=n(119),r.PassThrough=n(120),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,e.end())}function s(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(c.on("end",o),c.on("close",s));var l=!1;return c.on("error",a),e.on("error",a),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),i=(c=n.slice()).length,u=0;u<i;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(t=e.exports=n(99)).Stream=t,t.Readable=t,t.Writable=n(110),t.Duplex=n(109),t.Transform=n(115),t.PassThrough=n(116)},function(e,t,n){(function(t,r){function i(e){return L.from(e)}function o(e){return L.isBuffer(e)||e instanceof U}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?M(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function a(e,t){B=B||n(109),e=e||{},this.objectMode=!!e.objectMode,t instanceof B&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(q||(q=n(114).StringDecoder),this.decoder=new q(e.encoding),this.encoding=e.encoding)}function u(e){if(B=B||n(109),!(this instanceof u))return new u(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),j.call(this)}function c(e,t,n,r,o){var s=e._readableState;if(null===t)s.reading=!1,g(e,s);else{var a;o||(a=f(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===L.prototype||(t=i(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?l(e,s,t,!1):y(e,s)):l(e,s,t,!1))):r||(s.reading=!1)}return h(s)}function l(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e)),y(e,t)}function f(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){return e>=V?e=V:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_(e)}}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(z("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?N(v,e):v(e))}function v(e){z("emit readable"),e.emit("readable"),S(e)}function y(e,t){t.readingMore||(t.readingMore=!0,N(m,e,t))}function m(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(z("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;z("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&I(e,"data")&&(t.flowing=!0,S(e))}}function w(e){z("readable nexttick read 0"),e.read(0)}function k(e,t){t.resumeScheduled||(t.resumeScheduled=!0,N(E,e,t))}function E(e,t){t.reading||(z("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(z("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=T(e,t.buffer,t.decoder),n}function T(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?O(e,t):C(e,t),r}function O(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}function C(e,t){var n=L.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,N(R,t,e))}function R(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var N=n(100);e.exports=u;var B,M=n(101);u.ReadableState=a;n(96).EventEmitter;var I=function(e,t){return e.listeners(t).length},j=n(102),L=n(103).Buffer,U=t.Uint8Array||function(){},D=n(105);D.inherits=n(97);var F=n(106),z=void 0;z=F&&F.debuglog?F.debuglog("stream"):function(){};var q,H=n(107),G=n(108);D.inherits(u,j);var K=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),u.prototype.destroy=G.destroy,u.prototype._undestroy=G.undestroy,u.prototype._destroy=function(e,t){this.push(null),t(e)},u.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=L.from(e,t),t=""),n=!0),c(this,e,t,!1,n)},u.prototype.unshift=function(e){return c(this,e,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(e){return q||(q=n(114).StringDecoder),this._readableState.decoder=new q(e),this._readableState.encoding=e,this};var V=8388608;u.prototype.read=function(e){z("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return z("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):_(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&A(this),null;var r=t.needReadable;z("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&z("length less than watermark",r=!0),t.ended||t.reading?z("reading or ended",r=!1):r&&(z("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t)));var i;return null===(i=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(e,t){function n(e,t){z("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){z("onend"),e.end()}function o(){z("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",n),h.removeListener("end",i),h.removeListener("end",f),h.removeListener("data",a),_=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function a(t){z("ondata"),v=!1,!1!==e.write(t)||v||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==P(d.pipes,e))&&!_&&(z("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,v=!0),h.pause())}function u(t){z("onerror",t),f(),e.removeListener("error",u),0===I(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){z("onfinish"),e.removeListener("close",c),f()}function f(){z("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,z("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:f;d.endEmitted?N(p):h.once("end",p),e.on("unpipe",n);var g=b(h);e.on("drain",g);var _=!1,v=!1;return h.on("data",a),s(e,"error",u),e.once("close",c),e.once("finish",l),e.emit("pipe",h),d.flowing||(z("pipe resume"),h.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=P(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},u.prototype.on=function(e,t){var n=j.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):N(w,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(z("resume"),e.flowing=!0,k(this,e)),this},u.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(z("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){z("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<K.length;o++)e.on(K[o],r.emit.bind(r,K[o]));return r._read=function(t){z("wrapped _read",t),n&&(n=!1,e.resume())},r},u._fromList=x}).call(t,function(){return this}(),n(80))},function(e,t,n){(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}:e.exports=t.nextTick}).call(t,n(80))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(96).EventEmitter},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return s(e,t,n)}var o=n(104),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=i),r(s,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,n){(function(e){function r(t){if(t>W)throw new RangeError("Invalid typed array length");var n=new Uint8Array(t);return n.__proto__=e.prototype,n}function e(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return a(e)}return i(e,t,n)}function i(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return e instanceof ArrayBuffer?l(e,t,n):"string"==typeof e?u(e,t):f(e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e,t,n){return o(e),e<=0?r(e):void 0!==t?"string"==typeof n?r(e).fill(t,n):r(e).fill(t):r(e)}function a(e){return o(e),r(e<0?0:0|h(e))}function u(t,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|d(t,n),o=r(i),s=o.write(t,n);return s!==i&&(o=o.slice(0,s)),o}function c(e){for(var t=e.length<0?0:0|h(e.length),n=r(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function l(t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");var i;return i=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),i.__proto__=e.prototype,i}function f(t){if(e.isBuffer(t)){var n=0|h(t.length),i=r(n);return 0===i.length?i:(t.copy(i,0,0,n),i)}if(t){if(H(t)||"length"in t)return"number"!=typeof t.length||G(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=W)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+W.toString(16)+" bytes");return 0|e}function d(t,n){if(e.isBuffer(t))return t.length;if(H(t)||t instanceof ArrayBuffer)return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(i)return U(t).length;n=(""+n).toLowerCase(),i=!0}}function p(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(t,n,r,i,o){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,G(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=e.from(n,i)),e.isBuffer(n))return 0===n.length?-1:v(t,n,r,i,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):v(t,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<a;c++)if(o(e,c)===o(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*s}else-1!==l&&(c-=c-l),l=-1}else for(n+u>a&&(n=a-u),c=n;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){f=!1;break}if(f)return c}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(G(a))return s;e[n+s]=a}return s}function m(e,t,n,r){return q(U(t,e.length-n),e,n,r)}function b(e,t,n,r){return q(D(t),e,n,r)}function w(e,t,n,r){return b(e,t,n,r)}function k(e,t,n,r){return q(z(t),e,n,r)}function E(e,t,n,r){return q(F(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,c,l,f;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(u=e[i+1]))&&(f=(31&o)<<6|63&u)>127&&(s=f);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return T(r)}function T(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=L(e[o]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,n,r,i,o,s){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,i){return t=+t,n>>>=0,i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(e,t,n,r,23,4),n+4}function I(e,t,n,r,i){return t=+t,n>>>=0,i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(e,t,n,r,52,8),n+8}function j(e){if((e=e.trim().replace(Y,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function D(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function F(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}function z(e){return K.toByteArray(j(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function H(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function G(e){return e!==e}var K=n(69),V=n(70);t.Buffer=e,t.SlowBuffer=function(t){return+t!=t&&(t=0),e.alloc(+t)},t.INSPECT_MAX_BYTES=50;var W=2147483647;t.kMaxLength=W,e.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),!e.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(e,t,n){return i(e,t,n)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(e,t,n){return s(e,t,n)},e.allocUnsafe=function(e){return a(e)},e.allocUnsafeSlow=function(e){return a(e)},e.isBuffer=function(e){return null!=e&&!0===e._isBuffer},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,i=n.length,o=0,s=Math.min(r,i);o<s;++o)if(t[o]!==n[o]){r=t[o],i=n[o];break}return r<i?-1:i<r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var i=e.allocUnsafe(n),o=0;for(r=0;r<t.length;++r){var s=t[r];if(!e.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},e.byteLength=d,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},e.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):p.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,r,i,o){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var s=o-i,a=r-n,u=Math.min(s,a),c=this.slice(i,o),l=t.slice(n,r),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},e.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},e.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return m(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),n<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<t&&(n=t);var i=this.subarray(t,n);return i.__proto__=e.prototype,i},e.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},e.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),V.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),V.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),V.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),V.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},e.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},e.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},e.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},e.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},e.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},e.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},e.prototype.fill=function(t,n,r,i){if("string"==typeof t){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var s;if("number"==typeof t)for(s=n;s<r;++s)this[s]=t;else{var a=e.isBuffer(t)?t:new e(t,i),u=a.length;for(s=0;s<r-n;++s)this[s+n]=a[s%u]}return this};var Y=/[^+/0-9A-Za-z-_]/g}).call(t,n(68).Buffer)},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"===(void 0===e?"undefined":_typeof(e))},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":_typeof(e))||void 0===e},t.isBuffer=e.isBuffer}).call(t,n(68).Buffer)},function(e,t){},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=n(103).Buffer;e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}()},function(e,t,n){function r(e,t){e.emit("error",t)}var i=n(100);e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;o||s?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i(r,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);c.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var s=n(100),a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var u=n(105);u.inherits=n(97);var c=n(99),l=n(110);u.inherits(r,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var d=f[h];r.prototype[d]||(r.prototype[d]=l.prototype[d])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),s(t,e)}},function(e,t,n){(function(t,r,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){O(t,e)}}function s(e){return M.from(e)}function a(e){return M.isBuffer(e)||e instanceof I}function u(){}function c(e,t){A=A||n(109),e=e||{},this.objectMode=!!e.objectMode,t instanceof A&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(e){if(A=A||n(109),!(L.call(l,this)||this instanceof A))return new l(e);this._writableState=new c(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),B.call(this)}function f(e,t){var n=new Error("write after end");e.emit("error",n),C(t,n)}function h(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),C(r,o),i=!1),i}function d(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=M.from(t,n)),t}function p(e,t,n,r,i,o){if(!n){var s=d(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,a,r,i,o);return u}function g(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function _(e,t,n,r,i){--t.pendingcb,n?(C(i,r),C(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),x(e,t))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(v(n),t)_(e,n,r,t,i);else{var o=k(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?R(m,e,n,o,i):m(e,n,o,i)}}function m(e,t,n,r){n||b(e,t),t.pendingcb--,r(),x(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,g(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t)}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(g(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function S(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,C(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function x(e,t){var n=k(t);return n&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function T(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?C(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function O(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var C=n(100);e.exports=l;var A,R=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:C;l.WritableState=c;var P=n(105);P.inherits=n(97);var N={deprecate:n(113)},B=n(102),M=n(103).Buffer,I=i.Uint8Array||function(){},j=n(108);P.inherits(l,B),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,"buffer",{get:N.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var L;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!L.call(this,e)||e&&e._writableState instanceof c}})):L=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=a(e)&&!r.objectMode;return o&&!M.isBuffer(e)&&(e=s(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?f(this,n):(o||h(this,r,e,n))&&(r.pendingcb++,i=p(this,r,o,e,t,n)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},l.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||T(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=j.destroy,l.prototype._undestroy=j.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(80),n(111).setImmediate,function(){return this}())},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(112),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){function r(e){delete u[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function o(e){if(c)setTimeout(o,0,e);else{var t=u[e];if(t){c=!0;try{i(t)}finally{r(e),c=!1}}}}if(!e.setImmediate){var s,a=1,u={},c=!1,l=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?s=function(e){t.nextTick(function(){o(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},s=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;s=function(t){var n=l.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():s=function(e){setTimeout(o,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[a]=r,s(a),a++},f.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,function(){return this}(),n(80))},function(e,t){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation"),r=!0}return e.apply(this,arguments)}}}).call(t,function(){return this}())},function(e,t,n){function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(_.isEncoding===v||!v(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=l,this.end=f,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=h,this.end=d,t=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function a(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function u(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(n+2)}}function c(e){var t=this.lastTotal-this.lastNeed,n=u(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function f(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var _=n(103).Buffer,v=_.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},o.prototype.text=function(e,t){var n=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(t)})}function s(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var a=n(109),u=n(105);u.inherits=n(97),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;a.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}e.exports=r;var i=n(115),o=n(105);o.inherits=n(97),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(110)},function(e,t,n){e.exports=n(109)},function(e,t,n){e.exports=n(98).Transform},function(e,t,n){e.exports=n(98).PassThrough},function(e,t){t["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},t["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},t["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},t["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},t["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},t["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},t.aes128=t["aes-128-cbc"],t.aes192=t["aes-192-cbc"],t.aes256=t["aes-256-cbc"],t["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},t["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},t["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},t["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},t["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},t["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},t["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},t["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},t["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"}},function(e,t,n){(function(t){e.exports=function(e,n,r,i){r/=8,i=i||0;for(var o,s,a,u=0,c=0,l=new t(r),f=new t(i),h=0;;){if(o=e.createHash("md5"),h++>0&&o.update(s),o.update(n),s=o.digest(),a=0,r>0)for(;;){if(0===r)break;if(a===s.length)break;l[u++]=s[a],r--,a++}if(i>0&&a!==s.length)for(;;){if(0===i)break;if(a===s.length)break;f[c++]=s[a],i--,a++}if(0===r&&0===i)break}for(a=0;a<s.length;a++)s[a]=0;return{key:l,iv:f}}}).call(t,n(68).Buffer)},function(e,t,n){(function(t){function r(e,n,s,a){if(!(this instanceof r))return new r(e,n,s);o.call(this),this._cipher=new i.AES(n),this._prev=new t(s.length),this._cache=new t(""),this._secCache=new t(""),this._decrypt=a,s.copy(this._prev),this._mode=e}var i=n(93),o=n(94);n(97)(r,o),e.exports=r,r.prototype._transform=function(e,t,n){n(null,this._mode.encrypt(this,e,this._decrypt))},r.prototype._flush=function(e){this._cipher.scrub(),e()}}).call(t,n(68).Buffer)},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,n){var r=n(126);t.encrypt=function(e,t){var n=r(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},t.decrypt=function(e,t){var n=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return r(i,n)}},function(e,t,n){(function(t){e.exports=function(e,n){for(var r=Math.min(e.length,n.length),i=new t(r),o=-1;++o<r;)i.writeUInt8(e[o]^n[o],o);return i}}).call(t,n(68).Buffer)},function(e,t,n){(function(e){function r(t,n,r){var o=n.length,s=i(n,t._cache);return t._cache=t._cache.slice(o),t._prev=e.concat([t._prev,r?n:s]),s}var i=n(126);t.encrypt=function(t,n,i){for(var o,s=new e("");n.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=new e("")),!(t._cache.length<=n.length)){s=e.concat([s,r(t,n,i)]);break}o=t._cache.length,s=e.concat([s,r(t,n.slice(0,o),i)]),n=n.slice(o)}return s}}).call(t,n(68).Buffer)},function(e,t,n){(function(e){function r(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var i=n(126);t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,r(t)]);var o=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),i(n,o)}}).call(t,n(68).Buffer)},function(e,t,n){(function(e){function r(e){var t=e._cipher.encryptBlock(e._prev);return i(e._prev),t}function i(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}var o=n(126);t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,r(t)]);var i=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),o(n,i)}}).call(t,n(68).Buffer)},function(e,t,n){(function(t){function r(e,n,o){if(!(this instanceof r))return new r(e,n,o);a.call(this),this._cache=new i,this._last=void 0,this._cipher=new s.AES(n),this._prev=new t(o.length),o.copy(this._prev),this._mode=e}function i(){if(!(this instanceof i))return new i;this.cache=new t("")}function o(e){var t=e[15];if(16!==t)return e.slice(0,16-t)}var s=n(93),a=n(94),u=n(97),c=n(121),l=n(123),f=n(122);u(r,a),r.prototype._transform=function(e,t,n){this._cache.add(e);for(var r,i;r=this._cache.get();)i=this._mode.decrypt(this,r),this.push(i);n()},r.prototype._flush=function(e){var t=this._cache.flush();if(!t)return e;this.push(o(this._mode.decrypt(this,t))),e()},i.prototype.add=function(e){this.cache=t.concat([this.cache,e])},i.prototype.get=function(){if(this.cache.length>16){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},i.prototype.flush=function(){if(this.cache.length)return this.cache};var h={ECB:n(124),CBC:n(125),CFB:n(127),OFB:n(128),CTR:n(129)};e.exports=function(e){function n(e,n,i){var o=c[e];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new t(i)),"string"==typeof n&&(n=new t(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new l(h[o.mode],n,i,!0):new r(h[o.mode],n,i)}return{createDecipher:function(t,r){var i=c[t];if(!i)throw new TypeError("invalid suite type");var o=f(e,r,i.key,i.iv);return n(t,o.key,o.iv)},createDecipheriv:n}}}).call(t,n(68).Buffer)},function(e,t,n){(function(t,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   3.3.1
	 */
!function(t,n){e.exports=n()}(0,function(){function e(e){return"function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function i(e){return"function"==typeof e}function o(){return function(){D(a)}}function s(){var e=setTimeout;return function(){return e(a,1)}}function a(){for(var e=0;e<U;e+=2)(0,W[e])(W[e+1]),W[e]=void 0,W[e+1]=void 0;U=0}function u(e,t){var n=arguments,r=this,i=new this.constructor(l);void 0===i[Y]&&A(i);var o=r._state;return o?function(){var e=n[o-1];z(function(){return T(o,i,e,r._result)})}():k(r,i,e,t),i}function c(e){var t=this;if(e&&"object"===(void 0===e?"undefined":_typeof(e))&&e.constructor===t)return e;var n=new t(l);return y(n,e),n}function l(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function h(){return new TypeError("A promises callback cannot return that same promise.")}function d(e){try{return e.then}catch(e){return Q.error=e,Q}}function p(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function g(e,t,n){z(function(e){var r=!1,i=p(n,t,function(n){r||(r=!0,t!==n?y(e,n):b(e,n))},function(t){r||(r=!0,w(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,w(e,i))},e)}function _(e,t){t._state===J?b(e,t._result):t._state===$?w(e,t._result):k(t,void 0,function(t){return y(e,t)},function(t){return w(e,t)})}function v(e,t,n){t.constructor===e.constructor&&n===u&&t.constructor.resolve===c?_(e,t):n===Q?w(e,Q.error):void 0===n?b(e,t):i(n)?g(e,t,n):b(e,t)}function y(t,n){t===n?w(t,f()):e(n)?v(t,n,d(n)):b(t,n)}function m(e){e._onerror&&e._onerror(e._result),E(e)}function b(e,t){e._state===X&&(e._result=t,e._state=J,0!==e._subscribers.length&&z(E,e))}function w(e,t){e._state===X&&(e._state=$,e._result=t,z(m,e))}function k(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+J]=n,i[o+$]=r,0===o&&e._state&&z(E,e)}function E(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?T(n,r,i,o):i(o);e._subscribers.length=0}}function S(){this.error=null}function x(e,t){try{return e(t)}catch(e){return ee.error=e,ee}}function T(e,t,n,r){var o=i(n),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=x(n,r))===ee?(c=!0,a=s.error,s=null):u=!0,t===s)return void w(t,h())}else s=r,u=!0;t._state!==X||(o&&u?y(t,s):c?w(t,a):e===J?b(t,s):e===$&&w(t,s))}function O(e,t){try{t(function(t){y(e,t)},function(t){w(e,t)})}catch(t){w(e,t)}}function C(){return te++}function A(e){e[Y]=te++,e._state=void 0,e._result=void 0,e._subscribers=[]}function R(e,t){this._instanceConstructor=e,this.promise=new e(l),this.promise[Y]||A(this.promise),L(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&b(this.promise,this._result))):w(this.promise,P())}function P(){return new Error("Array Methods must be provided an Array")}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function M(e){this[Y]=C(),this._result=this._state=void 0,this._subscribers=[],l!==e&&("function"!=typeof e&&N(),this instanceof M?O(this,e):B())}function I(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=M}var j=void 0,L=j=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},U=0,D=void 0,F=void 0,z=function(e,t){W[U]=e,W[U+1]=t,2===(U+=2)&&(F?F(a):Z())},q="undefined"!=typeof window?window:void 0,H=q||{},G=H.MutationObserver||H.WebKitMutationObserver,K="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),V="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,W=new Array(1e3),Z=void 0;Z=K?function(){return t.nextTick(a)}:G?function(){var e=0,t=new G(a),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():V?function(){var e=new MessageChannel;return e.port1.onmessage=a,function(){return e.port2.postMessage(0)}}():void 0===q?function(){try{var e=n(132);return D=e.runOnLoop||e.runOnContext,o()}catch(e){return s()}}():s();var Y=Math.random().toString(36).substring(16),X=void 0,J=1,$=2,Q=new S,ee=new S,te=0;return R.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===X&&n<e;n++)this._eachEntry(t[n],n)},R.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===c){var i=d(e);if(i===u&&e._state!==X)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===M){var o=new n(l);v(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},R.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===X&&(this._remaining--,e===$?w(r,n):this._result[t]=n),0===this._remaining&&b(r,this._result)},R.prototype._willSettleAt=function(e,t){var n=this;k(e,void 0,function(e){return n._settledAt(J,t,e)},function(e){return n._settledAt($,t,e)})},M.all=function(e){return new R(this,e).promise},M.race=function(e){var t=this;return new t(L(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},M.resolve=c,M.reject=function(e){var t=new this(l);return w(t,e),t},M._setScheduler=function(e){F=e},M._setAsap=function(e){z=e},M._asap=z,M.prototype={constructor:M,then:u,catch:function(e){return this.then(null,e)}},I(),M.polyfill=I,M.Promise=M,M})}).call(t,n(80),function(){return this}())},function(e,t){},function(e,t,n){var r=n(131).Promise;t["pubsub-js"]=function(){var e=n(134);return{connect:function(t){var n=e.subscribe(t.id,function(e,n){t.message(n)});return"function"==typeof t.callback&&t.callback(),n},disconnect:function(t){e.unsubscribe(t)},send:function(t,n){e.publish(t,n)}}},t.pubnub=function(e){var t;if("undefined"!=typeof window){if(void 0===window.PUBNUB)throw new Error("Please load pubnub first in the browser");t=window.PUBNUB}else t=n(135);var i=t.init(e);return{connect:function(e){return i.subscribe({channel:e.id,message:e.message,connect:e.callback}),e.id},disconnect:function(e){i.unsubscribe(e)},send:function(e,t){return new r(function(n,r){i.publish({channel:e,message:t,callback:n})})}}},t.default=t["pubsub-js"]},function(e,t,n){var r;!function(i,o){var s={};i.PubSub=s,o(s),void 0!==(r=function(){return s}.call(t,n,t,e))&&(e.exports=r)}("object"===("undefined"==typeof window?"undefined":_typeof(window))&&window||this,function(e){function t(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function n(e){return function(){throw e}}function r(e,t,r){try{e(t,r)}catch(e){setTimeout(n(e),0)}}function i(e,t,n){e(t,n)}function o(e,t,n,o){var s,a=c[t],u=o?i:r;if(c.hasOwnProperty(t))for(s in a)a.hasOwnProperty(s)&&u(a[s],e,n)}function s(e,t,n){return function(){var r=String(e),i=r.lastIndexOf(".");for(o(e,e,t,n);-1!==i;)i=(r=r.substr(0,i)).lastIndexOf("."),o(e,r,t,n)}}function a(e){for(var n=String(e),r=Boolean(c.hasOwnProperty(n)&&t(c[n])),i=n.lastIndexOf(".");!r&&-1!==i;)i=(n=n.substr(0,i)).lastIndexOf("."),r=Boolean(c.hasOwnProperty(n)&&t(c[n]));return r}function u(e,t,n,r){var i=s(e,t,r);return!!a(e)&&(!0===n?i():setTimeout(i,0),!0)}var c={},l=-1;e.publish=function(t,n){return u(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return u(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,t){if("function"!=typeof t)return!1;c.hasOwnProperty(e)||(c[e]={});var n="uid_"+String(++l);return c[e][n]=t,n},e.clearAllSubscriptions=function(){c={}},e.clearSubscriptions=function(e){var t;for(t in c)c.hasOwnProperty(t)&&0===t.indexOf(e)&&delete c[t]},e.unsubscribe=function(t){var n,r,i,o="string"==typeof t&&(c.hasOwnProperty(t)||function(e){var t;for(t in c)if(c.hasOwnProperty(t)&&0===t.indexOf(e))return!0;return!1}(t)),s=!o&&"string"==typeof t,a="function"==typeof t,u=!1;{if(!o){for(n in c)if(c.hasOwnProperty(n)){if(r=c[n],s&&r[t]){delete r[t],u=t;break}if(a)for(i in r)r.hasOwnProperty(i)&&r[i]===t&&(delete r[i],u=!0)}return u}e.clearSubscriptions(t)}}})},function(e,t){!function(){function i(){return"x"+ ++B+ +new Date}function o(){return+new Date}function s(e,t){var n=e.join(q),r=[];return t?(d(t,function(e,t){var n="object"==(void 0===t?"undefined":_typeof(t))?JSON.stringify(t):t;void 0!==t&&null!=t&&_(n).length>0&&r.push(e+"="+_(n))}),n+="?"+r.join(H)):n}function a(e,t){var n,r=0;return function i(){r+t>o()?(clearTimeout(n),n=setTimeout(i,t)):(r=o(),e())}}function u(e,t){var n=[];return d(e||[],function(e){t(e)&&n.push(e)}),n}function c(e,t){return e.replace(W,function(e,n){return t[n]||e})}function l(e,t){return setTimeout(e,t)}function f(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});return e&&e(t),t}function h(e){return!!e&&"string"!=typeof e&&(Array.isArray&&Array.isArray(e)||"number"==typeof e.length)}function d(e,t){if(e&&t)if(h(e))for(var n=0,r=e.length;n<r;)t.call(e[n],e[n],n++);else for(var n in e)e.hasOwnProperty&&e.hasOwnProperty(n)&&t.call(e[n],n,e[n])}function p(e,t){var n=[];return d(e||[],function(e,r){n.push(t(e,r))}),n}function g(e){return encodeURIComponent(e).replace(/[!'()*~]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function _(e){return encodeURIComponent(e)}function v(e,t){var n=[];return d(e,function(e,r){t?e.search("-pnpres")<0&&r.subscribed&&n.push(e):r.subscribed&&n.push(e)}),n.sort()}function y(e,t){var n=[];return d(e,function(e,r){t?e.search("-pnpres")<0&&r.subscribed&&n.push(e):r.subscribed&&n.push(e)}),n.sort()}function m(){l(function(){M||(M=1,d(I,function(e){e()}))},z)}function b(e){function t(e){return e||(e={}),d(Ne,function(t,n){t in e||(e[t]=n)}),e}function r(e){var t=[];return d(e,function(e,n){t.push(e)}),t}function b(e){return r(e).sort()}function w(e){var t="",n=b(e);for(var r in n){var i=n[r];t+=i+"="+g(e[i]),r!=n.length-1&&(t+="&")}return t}function E(e,t,n){var r=!1;if(void 0===e)return t;if("number"==typeof e)r=!(e>G||0==e);else{if("boolean"==typeof e)return e?K:0;r=!0}return r?(n&&n("Presence Heartbeat value invalid. Valid range ( x > "+G+" or x = 0). Current Value : "+(t||G)),t||G):e}function S(e,t){return He.encrypt(e,t||Le)||e}function x(e,t){return He.decrypt(e,t||Le)||He.decrypt(e,Le)||e}function T(){clearTimeout(xe),!Oe||Oe>=500||Oe<1||!v(ke,!0).length&&!y(Ee,!0).length?Ce=!1:(Ce=!0,Ge.presence_heartbeat({callback:function(e){xe=l(T,Oe*z)},error:function(e){Be&&Be("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(e)),xe=l(T,Oe*z)}}))}function O(){!Ce&&T()}function C(e){if(Ae){if(!de.length)return}else{if(e&&(de.sending=0),de.sending||!de.length)return;de.sending=1}Pe(de.shift())}function A(e){var t=0;return d(y(Ee),function(n){var r=Ee[n];r&&(t++,(e||function(){})(r))}),t}function R(e){var t=0;return d(v(ke),function(n){var r=ke[n];r&&(t++,(e||function(){})(r))}),t}function P(e,t,n){if("object"==(void 0===e?"undefined":_typeof(e))){if(e.error){var r={};return e.message&&(r.message=e.message),e.payload&&(r.payload=e.payload),void(n&&n(r))}if(e.payload)return void(e.next_page?t&&t(e.payload,e.next_page):t&&t(e.payload))}t&&t(e)}function N(e,t){if("object"==(void 0===e?"undefined":_typeof(e))&&e.error){var n={};return e.message&&(n.message=e.message),e.payload&&(n.payload=e.payload),void(t&&t(n))}t&&t(e)}function B(e,n,r,i){var n=e.callback||n,o=e.error||Be,s=Ie();(i=i||{}).auth||(i.auth=e.auth_key||oe);var a=[le,"v1","channel-registration","sub-key",ie];a.push.apply(a,r),s&&(i.callback=s),Pe({callback:s,data:t(i),success:function(e){P(e,n,o)},fail:function(e){N(e,o)},url:a})}function U(){Me()||H(1,{error:"Offline. Please check your network settings. "}),X&&clearTimeout(X),X=l(U,z)}function q(){te&&Ge.time(function(e){Y(function(){},e),e||H(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),J&&clearTimeout(J),J=l(q,ee)})}function H(e,t){ye&&ye(e,t),ye=null,clearTimeout(X),clearTimeout(J)}function W(e){return o()-ge-e/1e4}function Y(e,t){function n(t){if(t){var n=t/1e4,i=(o()-r)/2;ge=o()-(n+i),e&&e(ge)}}var r=o();t&&n(t)||Ge.time(n)}var X,J,$=+e.windowing||L,Q=(+e.timeout||D)*z,ee=(+e.keepalive||F)*z,te=e.timecheck||0,ne=e.noleave||0,re=e.publish_key,ie=e.subscribe_key,oe=e.auth_key||"",se=e.secret_key||"",ae=e.hmac_SHA256,ue=e.ssl?"s":"",ce="http"+ue+"://"+(e.origin||"pubsub.pubnub.com"),le=Z(ce),fe=Z(ce),he=function(){},de=[],pe=!0,ge=0,_e=0,ve=0,ye=0,me=e.restore||0,be=0,we=!1,ke={},Ee={},Se={},xe=null,Te=E(e.heartbeat||e.pnexpires||0,e.error),Oe=e.heartbeat_interval||Te/2-1,Ce=!1,Ae=e.no_wait_for_pending,Re=e["compatible_3.5"]||!1,Pe=e.xdr,Ne=e.params||{},Be=e.error||function(){},Me=e._is_online||function(){return 1},Ie=e.jsonp_cb||function(){return 0},je=e.db||{get:function(){},set:function(){}},Le=e.cipher_key,Ue=e.uuid||!e.unique_uuid&&je&&je.get(ie+"uuid")||"",De=e.instance_id||!1,Fe="",ze=e.shutdown,qe=void 0===e.use_send_beacon||e.use_send_beacon?e.sendBeacon:null;2===Te&&(Oe=1);var He=e.crypto_obj||{encrypt:function(e,t){return e},decrypt:function(e,t){return e}},Ge={LEAVE:function(e,n,r,i,o){var a,u,c={uuid:Ue,auth:r||oe},l=Z(ce),i=i||function(){},f=o||function(){},h=Ie();if(e.indexOf(j)>0)return!0;if(Re){if(!ue)return!1;if("0"==h)return!1}return!ne&&("0"!=h&&(c.callback=h),De&&(c.instanceid=Fe),a=[l,"v2","presence","sub_key",ie,"channel",_(e),"leave"],u=t(c),qe&&(url_string=s(a,u),qe(url_string))?(i&&i({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Pe({blocking:n||ue,callback:h,data:u,success:function(e){P(e,i,f)},fail:function(e){N(e,f)},url:a}),!0))},LEAVE_GROUP:function(e,n,r,i,o){var a,u,c={uuid:Ue,auth:r||oe},l=Z(ce),i=i||function(){},f=o||function(){},h=Ie();if(e.indexOf(j)>0)return!0;if(Re){if(!ue)return!1;if("0"==h)return!1}return!ne&&("0"!=h&&(c.callback=h),e&&e.length>0&&(c["channel-group"]=e),De&&(c.instanceid=Fe),a=[l,"v2","presence","sub_key",ie,"channel",_(","),"leave"],u=t(c),qe&&(url_string=s(a,u),qe(url_string))?(i&&i({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Pe({blocking:n||ue,callback:h,data:u,success:function(e){P(e,i,f)},fail:function(e){N(e,f)},url:a}),!0))},set_resumed:function(e){we=e},get_cipher_key:function(){return Le},set_cipher_key:function(e){Le=e},raw_encrypt:function(e,t){return S(e,t)},raw_decrypt:function(e,t){return x(e,t)},get_heartbeat:function(){return Te},set_heartbeat:function(e,t){Te=E(e,Te,Be),Oe=t||Te/2-1,2==Te&&(Oe=1),he(),T()},get_heartbeat_interval:function(){return Oe},set_heartbeat_interval:function(e){Oe=e,T()},get_version:function(){return V},getGcmMessageObject:function(e){return{data:e}},getApnsMessageObject:function(e){var t={aps:{badge:1,alert:""}};for(k in e)k[t]=e[k];return t},newPnMessage:function(){var e={};gcm&&(e.pn_gcm=gcm),apns&&(e.pn_apns=apns);for(k in n)e[k]=n[k];return e},_add_param:function(e,t){Ne[e]=t},channel_group:function(e,t){var n,r,i=e.channel_group,t=t||e.callback,o=e.channels||e.channel,s=e.cloak,a=[],u={},c=e.mode||"add";if(i){var l=i.split(":");l.length>1?(n="*"===l[0]?null:l[0],r=l[1]):r=l[0]}n&&a.push("namespace")&&a.push(_(n)),a.push("channel-group"),r&&"*"!==r&&a.push(r),o?(h(o)&&(o=o.join(",")),u[c]=o,u.cloak=pe?"true":"false"):"remove"===c&&a.push("remove"),void 0!==s&&(u.cloak=s?"true":"false"),B(e,t,a,u)},channel_group_list_groups:function(e,t){var n;(n=e.namespace||e.ns||e.channel_group||null)&&(e.channel_group=n+":*"),Ge.channel_group(e,t)},channel_group_list_channels:function(e,t){if(!e.channel_group)return Be("Missing Channel Group");Ge.channel_group(e,t)},channel_group_remove_channel:function(e,t){return e.channel_group?e.channel||e.channels?(e.mode="remove",void Ge.channel_group(e,t)):Be("Missing Channel"):Be("Missing Channel Group")},channel_group_remove_group:function(e,t){return e.channel_group?e.channel?Be("Use channel_group_remove_channel if you want to remove a channel from a group."):(e.mode="remove",void Ge.channel_group(e,t)):Be("Missing Channel Group")},channel_group_add_channel:function(e,t){return e.channel_group?e.channel||e.channels?void Ge.channel_group(e,t):Be("Missing Channel"):Be("Missing Channel Group")},channel_group_cloak:function(e,t){void 0!==e.cloak?(pe=e.cloak,Ge.channel_group(e,t)):t(pe)},channel_group_list_namespaces:function(e,t){B(e,t,["namespace"])},channel_group_remove_namespace:function(e,t){B(e,t,["namespace",e.namespace,"remove"])},history:function(e,n){var n=e.callback||n,r=e.count||e.limit||100,i=e.reverse||"false",o=e.error||function(){},s=e.auth_key||oe,a=e.cipher_key,u=e.channel,c=e.channel_group,l=e.start,f=e.end,h=e.include_token,d=e.string_message_token||!1,p={},g=Ie();return u||c?n?ie?(p.stringtoken="true",p.count=r,p.reverse=i,p.auth=s,c&&(p["channel-group"]=c,u||(u=",")),g&&(p.callback=g),l&&(p.start=l),f&&(p.end=f),h&&(p.include_token="true"),d&&(p.string_message_token="true"),void Pe({callback:g,data:t(p),success:function(e){if("object"==(void 0===e?"undefined":_typeof(e))&&e.error)o({message:e.message,payload:e.payload});else{for(var t=e[0],r=[],i=0;i<t.length;i++)if(h){var s=x(t[i].message,a),u=t[i].timetoken;try{r.push({message:JSON.parse(s),timetoken:u})}catch(e){r.push({message:s,timetoken:u})}}else{s=x(t[i],a);try{r.push(JSON.parse(s))}catch(e){r.push(s)}}n([r,e[1],e[2]])}},fail:function(e){N(e,o)},url:[le,"v2","history","sub-key",ie,"channel",_(u)]})):Be("Missing Subscribe Key"):Be("Missing Callback"):Be("Missing Channel")},replay:function(e,n){var n=n||e.callback||function(){},r=e.auth_key||oe,i=e.source,o=e.destination,s=e.stop,a=e.start,u=e.end,c=e.reverse,l=e.limit,f=Ie(),h={};return i?o?re?ie?("0"!=f&&(h.callback=f),s&&(h.stop="all"),c&&(h.reverse="true"),a&&(h.start=a),u&&(h.end=u),l&&(h.count=l),h.auth=r,void Pe({callback:f,success:function(e){P(e,n,err)},fail:function(){n([0,"Disconnected"])},url:[le,"v1","replay",re,ie,i,o],data:t(h)})):Be("Missing Subscribe Key"):Be("Missing Publish Key"):Be("Missing Destination Channel"):Be("Missing Source Channel")},auth:function(e){oe=e,he()},time:function(e){var n=Ie(),r={uuid:Ue,auth:oe};De&&(r.instanceid=Fe),Pe({callback:n,data:t(r),url:[le,"time",n],success:function(t){e(t[0])},fail:function(){e(0)}})},publish:function(e,n){var r=e.message;if(!r)return Be("Missing Message");var i,o,n=n||e.callback||r.callback||e.success||function(){},s=e.channel||r.channel,a=e.auth_key||oe,u=e.cipher_key,c=e.error||r.error||function(){},l=e.post||!1,f=!("store_in_history"in e)||e.store_in_history,h=Ie(),d="push";return e.prepend&&(d="unshift"),s?re?ie?(r.getPubnubMessage&&(r=r.getPubnubMessage()),r=JSON.stringify(S(r,u)),o=[le,"publish",re,ie,0,_(s),h,_(r)],i={uuid:Ue,auth:a},f||(i.store="0"),De&&(i.instanceid=Fe),de[d]({callback:h,url:o,data:t(i),fail:function(e){N(e,c),C(1)},success:function(e){P(e,n,c),C(1)},mode:l?"POST":"GET"}),void C()):Be("Missing Subscribe Key"):Be("Missing Publish Key"):Be("Missing Channel")},unsubscribe:function(e,t){var n=e.channel,r=e.channel_group,i=e.auth_key||oe,t=t||e.callback||function(){},o=e.error||function(){};if(be=0,me=1,!n&&!r)return Be("Missing Channel or Channel Group");if(!ie)return Be("Missing Subscribe Key");if(n){var s=[],a=[];if(d(h(n)?n:(""+n).split(","),function(e){ke[e]&&s.push(e)}),0==s.length)return void t({action:"leave"});d(s,function(e){a.push(e+j)}),d(s.concat(a),function(e){e in ke&&(ke[e]=0),e in Se&&delete Se[e]});l=!0;M&&(l=Ge.LEAVE(s.join(","),0,i,t,o)),l||t({action:"leave"})}if(r){var u=[],c=[];if(d(h(r)?r:(""+r).split(","),function(e){Ee[e]&&u.push(e)}),0==u.length)return void t({action:"leave"});d(u,function(e){c.push(e+j)}),d(u.concat(c),function(e){e in Ee&&(Ee[e]=0),e in Se&&delete Se[e]});var l=!0;M&&(l=Ge.LEAVE_GROUP(u.join(","),0,i,t,o)),l||t({action:"leave"})}he()},subscribe:function(e,n){function r(e){e?l(he,S):(le=Z(ce,1),fe=Z(ce,1),l(function(){Ge.time(r)},z)),R(function(t){if(e&&t.disconnected)return t.disconnected=0,t.reconnect(t.name);e||t.disconnected||(t.disconnected=1,t.disconnect(t.name))}),A(function(t){if(e&&t.disconnected)return t.disconnected=0,t.reconnect(t.name);e||t.disconnected||(t.disconnected=1,t.disconnect(t.name))})}function i(){var e=Ie(),n=v(ke).join(","),o=y(Ee).join(",");if(n||o){n||(n=","),H();var s=t({uuid:Ue,auth:oe});o&&(s["channel-group"]=o),JSON.stringify(Se).length>2&&(s.state=JSON.stringify(Se)),Te&&(s.heartbeat=Te),De&&(s.instanceid=Fe),O(),ye=Pe({timeout:E,callback:e,fail:function(e){e&&e.error&&e.service?(N(e,h),r(1)):Ge.time(function(t){!t&&N(e,h),r(t)})},data:t(s),url:[fe,"subscribe",ie,_(n),e,be],success:function(e){if(!e||"object"==(void 0===e?"undefined":_typeof(e))&&"error"in e&&e.error)return h(e.error),l(he,z);if(g(e[1]),be=!be&&me&&je.get(ie)||e[1],R(function(e){e.connected||(e.connected=1,e.connect(e.name))}),A(function(e){e.connected||(e.connected=1,e.connect(e.name))}),we&&!me)return be=0,we=!1,je.set(ie,0),void l(i,S);w&&(be=1e4,w=0),je.set(ie,e[1]);var t=function(){var t="",n="";e.length>3?(t=e[3],n=e[2]):t=e.length>2?e[2]:p(v(ke),function(t){return p(Array(e[0].length).join(",").split(","),function(){return t})}).join(",");var r=t.split(","),i=n?n.split(","):[];return function(){var e=r.shift()||ve,t=i.shift(),n={};t?(e&&e.indexOf("-pnpres")>=0&&t.indexOf("-pnpres")<0&&(t+="-pnpres"),n=Ee[t]||ke[t]||{callback:function(){}}):n=ke[e];var o=[n.callback||_e,e.split(j)[0]];return t&&o.push(t.split(j)[0]),o}}(),n=W(+e[1]);d(e[0],function(r){var i=t(),o=x(r,ke[i[1]]?ke[i[1]].cipher_key:null);i[0]&&i[0](o,e,i[2]||i[1],n,i[1])}),l(i,S)}})}}var s=e.channel,a=e.channel_group,n=(n=n||e.callback)||e.message,u=e.connect||function(){},c=e.reconnect||function(){},f=e.disconnect||function(){},h=e.error||h||function(){},g=e.idle||function(){},m=e.presence||0,b=e.noheresync||0,w=e.backfill||0,k=e.timetoken||0,E=e.timeout||Q,S=e.windowing||$,T=e.state,C=e.heartbeat||e.pnexpires,P=e.heartbeat_interval,B=e.restore||me;return oe=e.auth_key||oe,me=B,be=k,s||a?n?ie?((C||0===C||P||0===P)&&Ge.set_heartbeat(C,P),s&&d((s.join?s.join(","):""+s).split(","),function(r){var i=ke[r]||{};ke[ve=r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:_e=n,cipher_key:e.cipher_key,connect:u,disconnect:f,reconnect:c},T&&(Se[r]=r in T?T[r]:T),m&&(Ge.subscribe({channel:r+j,callback:m,restore:B}),i.subscribed||b||Ge.here_now({channel:r,data:t({uuid:Ue,auth:oe}),callback:function(e){d("uuids"in e?e.uuids:[],function(t){m({action:"join",uuid:t,timestamp:Math.floor(o()/1e3),occupancy:e.occupancy||1},e,r)})}}))}),a&&d((a.join?a.join(","):""+a).split(","),function(r){var i=Ee[r]||{};Ee[r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:_e=n,cipher_key:e.cipher_key,connect:u,disconnect:f,reconnect:c},m&&(Ge.subscribe({channel_group:r+j,callback:m,restore:B,auth_key:oe}),i.subscribed||b||Ge.here_now({channel_group:r,data:t({uuid:Ue,auth:oe}),callback:function(e){d("uuids"in e?e.uuids:[],function(t){m({action:"join",uuid:t,timestamp:Math.floor(o()/1e3),occupancy:e.occupancy||1},e,r)})}}))}),he=function(){H(),l(i,S)},M?void he():I.push(he)):Be("Missing Subscribe Key"):Be("Missing Callback"):Be("Missing Channel")},here_now:function(e,n){var n=e.callback||n,r=e.debug,i=e.error||function(){},o=e.auth_key||oe,s=e.channel,a=e.channel_group,u=Ie(),c=!("uuids"in e)||e.uuids,l=e.state,f={uuid:Ue,auth:o};if(c||(f.disable_uuids=1),l&&(f.state=1),!n)return Be("Missing Callback");if(!ie)return Be("Missing Subscribe Key");var h=[le,"v2","presence","sub_key",ie];s&&h.push("channel")&&h.push(_(s)),"0"!=u&&(f.callback=u),a&&(f["channel-group"]=a,!s&&h.push("channel")&&h.push(",")),De&&(f.instanceid=Fe),Pe({callback:u,data:t(f),success:function(e){P(e,n,i)},fail:function(e){N(e,i)},debug:r,url:h})},where_now:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.auth_key||oe,o=Ie(),s=e.uuid||Ue,a={auth:i};return n?ie?("0"!=o&&(a.callback=o),De&&(a.instanceid=Fe),void Pe({callback:o,data:t(a),success:function(e){P(e,n,r)},fail:function(e){N(e,r)},url:[le,"v2","presence","sub_key",ie,"uuid",_(s)]})):Be("Missing Subscribe Key"):Be("Missing Callback")},state:function(e,n){var r,n=e.callback||n||function(e){},i=e.error||function(){},o=e.auth_key||oe,s=Ie(),a=e.state,u=e.uuid||Ue,c=e.channel,l=e.channel_group,f=t({auth:o});return ie?u?c||l?("0"!=s&&(f.callback=s),void 0!==c&&ke[c]&&ke[c].subscribed&&a&&(Se[c]=a),void 0!==l&&Ee[l]&&Ee[l].subscribed&&(a&&(Se[l]=a),f["channel-group"]=l,c||(c=",")),f.state=JSON.stringify(a),De&&(f.instanceid=Fe),r=a?[le,"v2","presence","sub-key",ie,"channel",c,"uuid",u,"data"]:[le,"v2","presence","sub-key",ie,"channel",c,"uuid",_(u)],void Pe({callback:s,data:t(f),success:function(e){P(e,n,i)},fail:function(e){N(e,i)},url:r})):Be("Missing Channel"):Be("Missing UUID"):Be("Missing Subscribe Key")},grant:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.channel||e.channels,o=e.channel_group,s=Ie(),a=e.ttl,u=e.read?"1":"0",c=e.write?"1":"0",l=e.manage?"1":"0",f=e.auth_key||e.auth_keys;if(!n)return Be("Missing Callback");if(!ie)return Be("Missing Subscribe Key");if(!re)return Be("Missing Publish Key");if(!se)return Be("Missing Secret Key");var d=Math.floor((new Date).getTime()/1e3),p=ie+"\n"+re+"\ngrant\n",g={w:c,r:u,timestamp:d};e.manage&&(g.m=l),h(i)&&(i=i.join(",")),h(f)&&(f=f.join(",")),void 0!==i&&null!=i&&i.length>0&&(g.channel=i),void 0!==o&&null!=o&&o.length>0&&(g["channel-group"]=o),"0"!=s&&(g.callback=s),(a||0===a)&&(g.ttl=a),f&&(g.auth=f),g=t(g),f||delete g.auth,p+=w(g);var _=ae(p,se);_=(_=_.replace(/\+/g,"-")).replace(/\//g,"_"),g.signature=_,Pe({callback:s,data:g,success:function(e){P(e,n,r)},fail:function(e){N(e,r)},url:[le,"v1","auth","grant","sub-key",ie]})},mobile_gw_provision:function(e){var t,n,r=e.callback||function(){},i=e.auth_key||oe,o=e.error||function(){},s=Ie(),a=e.channel,u=e.op,c=e.gw_type,l=e.device_id;return l?c?u?a?re?ie?(n=[le,"v1/push/sub-key",ie,"devices",l],t={uuid:Ue,auth:i,type:c},"add"==u?t.add=a:"remove"==u&&(t.remove=a),De&&(data.instanceid=Fe),void Pe({callback:s,data:t,success:function(e){P(e,r,o)},fail:function(e){N(e,o)},url:n})):Be("Missing Subscribe Key"):Be("Missing Publish Key"):Be("Missing gw destination Channel (channel)"):Be("Missing GW Operation (op: add or remove)"):Be("Missing GW Type (gw_type: gcm or apns)"):Be("Missing Device ID (device_id)")},audit:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.channel,o=e.channel_group,s=e.auth_key,a=Ie();if(!n)return Be("Missing Callback");if(!ie)return Be("Missing Subscribe Key");if(!re)return Be("Missing Publish Key");if(!se)return Be("Missing Secret Key");var u=Math.floor((new Date).getTime()/1e3),c=ie+"\n"+re+"\naudit\n",l={timestamp:u};"0"!=a&&(l.callback=a),void 0!==i&&null!=i&&i.length>0&&(l.channel=i),void 0!==o&&null!=o&&o.length>0&&(l["channel-group"]=o),s&&(l.auth=s),l=t(l),s||delete l.auth,c+=w(l);var f=ae(c,se);f=(f=f.replace(/\+/g,"-")).replace(/\//g,"_"),l.signature=f,Pe({callback:a,data:l,success:function(e){P(e,n,r)},fail:function(e){N(e,r)},url:[le,"v1","auth","audit","sub-key",ie]})},revoke:function(e,t){e.read=!1,e.write=!1,Ge.grant(e,t)},set_uuid:function(e){Ue=e,he()},get_uuid:function(){return Ue},isArray:function(e){return h(e)},get_subscribed_channels:function(){return v(ke,!0)},presence_heartbeat:function(e){var n=e.callback||function(){},r=e.error||function(){},i=Ie(),o={uuid:Ue,auth:oe};JSON.stringify(Se).length>2&&(o.state=JSON.stringify(Se)),Te>0&&Te<320&&(o.heartbeat=Te),"0"!=i&&(o.callback=i);var s=_(v(ke,!0).join(",")),a=y(Ee,!0).join(",");s||(s=","),a&&(o["channel-group"]=a),De&&(o.instanceid=Fe),Pe({callback:i,data:t(o),url:[le,"v2","presence","sub-key",ie,"channel",s,"heartbeat"],success:function(e){P(e,n,r)},fail:function(e){N(e,r)}})},stop_timers:function(){clearTimeout(X),clearTimeout(J),clearTimeout(xe)},shutdown:function(){Ge.stop_timers(),ze&&ze()},xdr:Pe,ready:m,db:je,uuid:f,map:p,each:d,"each-channel":R,grep:u,offline:function(){H(1,{message:"Offline. Please check your network settings."})},supplant:c,now:o,unique:i,updater:a};return Ue||(Ue=Ge.uuid()),Fe||(Fe=Ge.uuid()),je.set(ie+"uuid",Ue),X=l(U,z),J=l(q,ee),xe=l(O,(Oe-3)*z),Y(),Ge}function w(){function e(e){return r.SHA256(e).toString(r.enc.Hex)}function t(e){return(e=e||{}).hasOwnProperty("encryptKey")||(e.encryptKey=f.encryptKey),e.hasOwnProperty("keyEncoding")||(e.keyEncoding=f.keyEncoding),e.hasOwnProperty("keyLength")||(e.keyLength=f.keyLength),e.hasOwnProperty("mode")||(e.mode=f.mode),-1==u.indexOf(e.keyEncoding.toLowerCase())&&(e.keyEncoding=f.keyEncoding),-1==c.indexOf(parseInt(e.keyLength,10))&&(e.keyLength=f.keyLength),-1==l.indexOf(e.mode.toLowerCase())&&(e.mode=f.mode),e}function n(e,t){return"base64"==t.keyEncoding?r.enc.Base64.parse(e):"hex"==t.keyEncoding?r.enc.Hex.parse(e):e}function i(t,i){return t=n(t,i),i.encryptKey?r.enc.Utf8.parse(e(t).slice(0,32)):t}function o(e){return"ecb"==e.mode?r.mode.ECB:r.mode.CBC}function s(e){return"cbc"==e.mode?r.enc.Utf8.parse(a):null}var a="0123456789012345",u=["hex","utf8","base64","binary"],c=[128,256],l=["ecb","cbc"],f={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(e,n,a){if(!n)return e;var u=s(a=t(a)),c=o(a),l=i(n,a),f=JSON.stringify(e);return r.AES.encrypt(f,l,{iv:u,mode:c}).ciphertext.toString(r.enc.Base64)||e},decrypt:function(e,n,a){if(!n)return e;var u=s(a=t(a)),c=o(a),l=i(n,a);try{var f=r.enc.Base64.parse(e),h=r.AES.decrypt({ciphertext:f},l,{iv:u,mode:c}).toString(r.enc.Utf8);return JSON.parse(h)}catch(e){return}}}}function E(e){var t,n=0,r=0,i=e.timeout||U,o=l(function(){f(1)},i),a=e.data||{},u=e.fail||function(){},c=e.success||function(){},f=function(e,r){n||(n=1,clearTimeout(o),t&&(t.onerror=t.onload=null,t.abort&&t.abort(),t=null),e&&u(r))};try{(t="undefined"!=typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest).onerror=t.onabort=function(){f(1,t.responseText||{error:"Network Connection Error"})},t.onload=t.onloadend=function(){if(!r){r=1,clearTimeout(o);try{response=JSON.parse(t.responseText)}catch(e){return f(1)}c(response)}},t.onreadystatechange=function(){if(t&&4==t.readyState)switch(t.status){case 200:break;default:try{response=JSON.parse(t.responseText),f(1,response)}catch(e){return f(1,{status:t.status,payload:null,message:t.responseText})}return}},a.pnsdk=Y,url=s(e.url,a),t.open("GET",url,!0),t.timeout=i,t.send()}catch(t){return f(0),E(e)}return f}function S(e,t,n){d(e.split(","),function(e){var r=function(e){e||(e=window.event),n(e)||(e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())};t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r})}function x(e){}function T(e,t,n){if(!n)return e&&e.getAttribute&&e.getAttribute(t);e.setAttribute(t,n)}function O(e){return document.getElementById(e)}function C(e,t){var n=[];return d(e.split(/\s+/),function(e){d((t||document).getElementsByTagName(e),function(e){n.push(e)})}),n}function A(e,t){for(var n in t)if(t.hasOwnProperty(n))try{e.style[n]=t[n]+("|width|height|top|left|".indexOf(n)>0&&"number"==typeof t[n]?"px":"")}catch(e){}}function R(e){return document.createElement(e)}function P(e,t){return r.HmacSHA256(e,t).toString(r.enc.Base64)}function N(e){e.db=X,e.xdr=E,e.error=e.error||x,e.hmac_SHA256=P,e.crypto_obj=w(),e.params={pnsdk:Y},SELF=function(e){return N(e)};var t=b(e);for(var n in t)t.hasOwnProperty(n)&&(SELF[n]=t[n]);return SELF.init=SELF,SELF.$=O,SELF.attr=T,SELF.search=C,SELF.bind=S,SELF.css=A,SELF.create=R,SELF.crypto_obj=w(),"undefined"!=typeof window&&S("beforeunload",window,function(){return SELF["each-channel"](function(e){SELF.LEAVE(e.name,1)}),!0}),e.notest?SELF:("undefined"!=typeof window&&S("offline",window,SELF.offline),"undefined"!=typeof document&&S("offline",document,SELF.offline),SELF.ready(),SELF)}var B=1,M=!1,I=[],j="-pnpres",L=10,U=15e3,D=310,F=60,z=1e3,q="/",H="&",G=5,K=30,V="'3.9.2'".replace(/'/g,""),W=/{([\w\-]+)}/g,Z=function(){var e=Math.floor(20*Math.random());return function(t,n){return t.indexOf("pubsub.")>0&&t.replace("pubsub","ps"+(n?f().split("-")[0]:++e<20?e:e=1))||t}}();void 0!==e&&void 0!==e.exports&&(e.exports={PN_API:b,unique:i,PNmessage:function(e){return msg=e||{apns:{}},msg.getPubnubMessage=function(){var e={};if(Object.keys(msg.apns).length){e.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var t in msg.apns)e.pn_apns[t]=msg.apns[t];var n=["badge","alert"];for(var t in n)delete e.pn_apns[n[t]]}msg.gcm&&(e.pn_gcm={data:msg.gcm});for(var t in msg)e[t]=msg[t];var r=["apns","gcm","publish","channel","callback","error"];for(var t in r)delete e[r[t]];return e},msg.publish=function(){var e=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:e,channel:msg.channel,callback:msg.callback,error:msg.error})},msg},DEF_TIMEOUT:U,timeout:l,build_url:s,each:d,uuid:f,URLBIT:q});var B=1,Y="PubNub-JS-Modern/3.9.2",X=function(){var e="undefined"!=typeof localStorage&&localStorage;return{get:function(t){try{return e?e.getItem(t):-1==document.cookie.indexOf(t)?null:((document.cookie||"").match(RegExp(t+"=([^;]+)"))||[])[1]||null}catch(e){return}},set:function(t,n){try{if(e)return e.setItem(t,n)&&0;document.cookie=t+"="+n+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(e){return}}}}();N.init=N,N.secure=N,N.crypto_obj=w(),PUBNUB=N({}),void 0!==e&&(e.exports=N)||void 0!==t&&(t.PUBNUB=N)||(PUBNUB=N)}(),function(){var e=PUBNUB.ws=function(t,n){if(!(this instanceof e))return new e(t,n);var r=this,t=r.url=t||"",i=(r.protocol=n||"Sec-WebSocket-Protocol",t.split("/")),o={ssl:"wss:"===i[0],origin:i[2],publish_key:i[3],subscribe_key:i[4],channel:i[5]};if(r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,!t)return r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r;r.pubnub=PUBNUB.init(o),r.pubnub.setup=o,r.setup=o,r.pubnub.subscribe({restore:!1,channel:o.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(e){r.onmessage({data:e})},connect:function(){r.readyState=r.OPEN,r.onopen()}})};e.prototype.send=function(e){var t=this;t.pubnub.publish({channel:t.pubnub.setup.channel,message:e,callback:function(e){t.onsend({data:e})}})},e.prototype.close=function(){var e=this;e.pubnub.unsubscribe({channel:e.pubnub.setup.channel}),e.readyState=e.CLOSED,e.onclose({})}}();var r=r||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},u=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);if(t=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,i=e.min(4*t,i),t){for(var u=0;u<t;u+=o)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=i}return new s.init(u,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);!function(e){for(var t=r,n=(o=t.lib).WordArray,i=o.Hasher,o=t.algo,s=[],a=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var f;e:{f=c;for(var h=e.sqrt(f),d=2;d<=h;d++)if(!(f%d)){f=!1;break e}f=!0}f&&(8>l&&(s[l]=u(e.pow(c,.5))),a[l]=u(e.pow(c,1/3)),l++),c++}var p=[],o=o.SHA256=i.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],f=n[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var d=p[h-15],g=p[h-2];p[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[h-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[h-16]}d=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+a[h]+p[h],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),f=l,l=c,c=u,u=s+d|0,s=o,o=i,i=r,r=d+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(o),t.HmacSHA256=i._createHmacHelper(o)}(Math),function(){var e=r,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),s=this._iKey=n.clone(),a=o.words,u=s.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=r,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<n;s++)e.push(r.charAt(o>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map;(i=r.charAt(64))&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r.indexOf(e.charAt(s-1))<<s%4*2,u=r.indexOf(e.charAt(s))>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,o,s){return((e=e+(t&n|~t&r)+i+s)<<o|e>>>32-o)+t}function n(e,t,n,r,i,o,s){return((e=e+(t&r|n&~r)+i+s)<<o|e>>>32-o)+t}function i(e,t,n,r,i,o,s){return((e=e+(t^n^r)+i+s)<<o|e>>>32-o)+t}function o(e,t,n,r,i,o,s){return((e=e+(n^(t|~r))+i+s)<<o|e>>>32-o)+t}for(var s=r,a=(c=s.lib).WordArray,u=c.Hasher,c=s.algo,l=[],f=0;64>f;f++)l[f]=4294967296*e.abs(e.sin(f+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(s=0;16>s;s++){u=e[a=r+s];e[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=this._hash.words,a=e[r+0],u=e[r+1],c=e[r+2],f=e[r+3],h=e[r+4],d=e[r+5],p=e[r+6],g=e[r+7],_=e[r+8],v=e[r+9],y=e[r+10],m=e[r+11],b=e[r+12],w=e[r+13],k=e[r+14],E=e[r+15],S=s[0],x=s[1],T=s[2],O=s[3],x=o(x=o(x=o(x=o(x=i(x=i(x=i(x=i(x=n(x=n(x=n(x=n(x=t(x=t(x=t(x=t(x,T=t(T,O=t(O,S=t(S,x,T,O,a,7,l[0]),x,T,u,12,l[1]),S,x,c,17,l[2]),O,S,f,22,l[3]),T=t(T,O=t(O,S=t(S,x,T,O,h,7,l[4]),x,T,d,12,l[5]),S,x,p,17,l[6]),O,S,g,22,l[7]),T=t(T,O=t(O,S=t(S,x,T,O,_,7,l[8]),x,T,v,12,l[9]),S,x,y,17,l[10]),O,S,m,22,l[11]),T=t(T,O=t(O,S=t(S,x,T,O,b,7,l[12]),x,T,w,12,l[13]),S,x,k,17,l[14]),O,S,E,22,l[15]),T=n(T,O=n(O,S=n(S,x,T,O,u,5,l[16]),x,T,p,9,l[17]),S,x,m,14,l[18]),O,S,a,20,l[19]),T=n(T,O=n(O,S=n(S,x,T,O,d,5,l[20]),x,T,y,9,l[21]),S,x,E,14,l[22]),O,S,h,20,l[23]),T=n(T,O=n(O,S=n(S,x,T,O,v,5,l[24]),x,T,k,9,l[25]),S,x,f,14,l[26]),O,S,_,20,l[27]),T=n(T,O=n(O,S=n(S,x,T,O,w,5,l[28]),x,T,c,9,l[29]),S,x,g,14,l[30]),O,S,b,20,l[31]),T=i(T,O=i(O,S=i(S,x,T,O,d,4,l[32]),x,T,_,11,l[33]),S,x,m,16,l[34]),O,S,k,23,l[35]),T=i(T,O=i(O,S=i(S,x,T,O,u,4,l[36]),x,T,h,11,l[37]),S,x,g,16,l[38]),O,S,y,23,l[39]),T=i(T,O=i(O,S=i(S,x,T,O,w,4,l[40]),x,T,a,11,l[41]),S,x,f,16,l[42]),O,S,p,23,l[43]),T=i(T,O=i(O,S=i(S,x,T,O,v,4,l[44]),x,T,b,11,l[45]),S,x,E,16,l[46]),O,S,c,23,l[47]),T=o(T,O=o(O,S=o(S,x,T,O,a,6,l[48]),x,T,g,10,l[49]),S,x,k,15,l[50]),O,S,d,21,l[51]),T=o(T,O=o(O,S=o(S,x,T,O,b,6,l[52]),x,T,f,10,l[53]),S,x,y,15,l[54]),O,S,u,21,l[55]),T=o(T,O=o(O,S=o(S,x,T,O,_,6,l[56]),x,T,E,10,l[57]),S,x,p,15,l[58]),O,S,w,21,l[59]),T=o(T,O=o(O,S=o(S,x,T,O,h,6,l[60]),x,T,m,10,l[61]),S,x,c,15,l[62]),O,S,v,21,l[63]);s[0]=s[0]+S|0,s[1]=s[1]+x|0,s[2]=s[2]+T|0,s[3]=s[3]+O|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=u._createHelper(c),s.HmacMD5=u._createHmacHelper(c)}(Math),function(){var e=r,t=e.lib,n=t.Base,i=t.WordArray,o=(t=e.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(a=this.cfg).hasher.create(),r=i.create(),o=r.words,s=a.keySize,a=a.iterations;o.length<s;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var c=1;c<a;c++)u=n.finalize(u),n.reset();r.concat(u)}return r.sigBytes=4*s,r}});e.EvpKDF=function(e,t,n){return o.create(n).compute(e,t)}}(),r.lib.Cipher||function(e){var t=(p=r).lib,n=t.Base,i=t.WordArray,o=t.BufferedBlockAlgorithm,s=p.enc.Base64,a=p.algo.EvpKDF,u=t.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?g:d).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?g:d).decrypt(e,t,n,r)}}}});t.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=p.mode={},l=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]},f=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();f.Encryptor=f.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;l.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),f.Decryptor=f.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),l.call(this,e,t,r),this._prevBlock=i}}),c=c.CBC=f,f=(p.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=(n=n-e.sigBytes%n)<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(r);n=i.create(o,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=u.extend({cfg:u.cfg.extend({mode:c,padding:f}),reset:function(){u.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},d=t.SerializableCipher=n.extend({cfg:n.extend({format:c}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,h.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),p=(p.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=i.random(8)),e=a.create({keySize:t+n}).compute(e,r),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:r})}},g=t.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:p}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=d.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,d.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],o=[],s=[],a=[],u=[],c=[],l=[],f=[],h=[],d=[],p=[],g=0;256>g;g++)p[g]=128>g?g<<1:g<<1^283;for(var _=0,v=0,g=0;256>g;g++){var y=(y=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&y^99;i[_]=y,o[y]=_;var m=p[_],b=p[m],w=p[b],k=257*p[y]^16843008*y;s[_]=k<<24|k>>>8,a[_]=k<<16|k>>>16,u[_]=k<<8|k>>>24,c[_]=k,k=16843009*w^65537*b^257*m^16843008*_,l[y]=k<<24|k>>>8,f[y]=k<<16|k>>>16,h[y]=k<<8|k>>>24,d[y]=k,_?(_=m^p[p[p[w^m]]],v^=p[p[v]]):_=v=1}var E=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),r=this._keySchedule=[],o=0;o<n;o++)if(o<t)r[o]=e[o];else{var s=r[o-1];o%t?6<t&&4==o%t&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=E[o/t|0]<<24),r[o]=r[o-t]^s}for(e=this._invKeySchedule=[],t=0;t<n;t++)o=n-t,s=t%4?r[o]:r[o-4],e[t]=4>t||4>=o?s:l[i[s>>>24]]^f[i[s>>>16&255]]^h[i[s>>>8&255]]^d[i[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,u,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,h,d,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],h=e[t+3]^n[3],d=4,p=1;p<u;p++)var g=r[c>>>24]^i[l>>>16&255]^o[f>>>8&255]^s[255&h]^n[d++],_=r[l>>>24]^i[f>>>16&255]^o[h>>>8&255]^s[255&c]^n[d++],v=r[f>>>24]^i[h>>>16&255]^o[c>>>8&255]^s[255&l]^n[d++],h=r[h>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&f]^n[d++],c=g,l=_,f=v;g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&h])^n[d++],_=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^n[d++],v=(a[f>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[d++],h=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^n[d++],e[t]=g,e[t+1]=_,e[t+2]=v,e[t+3]=h},keySize:8});e.AES=t._createHelper(n)}(),r.mode.ECB=function(){var e=r.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}()},function(e,t,n){function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.id=e&&e.id||i.v4(),this.self=e&&e.self||null,this.other=e&&e.other||null,this.context=e&&e.context||{},this._send=e&&e.send||null,this._inbox=[],this._receivers=[]}var i=n(67),o=n(131).Promise;r.prototype.isConversation=!0,r.prototype.send=function(e){return this._send(this.other,{id:this.id,from:this.self,to:this.other,message:e})},r.prototype.deliver=function(e){this._receivers.length?this._receivers.shift()(e.message):this._inbox.push(e.message)},r.prototype.receive=function(){var e=this;return this._inbox.length?o.resolve(this._inbox.shift()):new o(function(t){e._receivers.push(t)})},e.exports=r},function(e,t){function n(){this.next=null,this.previous=null}n.prototype.isBlock=!0,n.prototype.execute=function(e,t){throw new Error("Cannot run an abstract Block")},e.exports=n},function(e,t,n){function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof e)throw new TypeError("Parameter callback must be a Function");this.callback=e}var i=n(131).Promise,o=n(137),s=n(139).isPromise;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.isThen=!0,r.prototype.execute=function(e,t){var n=this,r=this.callback(t,e.context);return(s(r)?r:i.resolve(r)).then(function(e){return{result:e,block:n.next}})},o.prototype.then=function(e){if("function"==typeof e&&(e=new r(e)),!e||!e.isBlock)throw new TypeError("Parameter next must be a Block or function");return e.previous=this,this.next=e,e},e.exports=r},function(e,t){t.isPromise=function(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}},function(e,t,n){function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.message=e}var i=n(131).Promise,o=n(137),s=n(139).isPromise;n(138),n(141),r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.isTell=!0,r.prototype.execute=function(e,t){var n,r=this;if("function"==typeof this.message){var o=this.message(t,e.context);n=s(o)?o:i.resolve(o)}else n=i.resolve(this.message);return n.then(function(t){var n=e.send(t);return(s(n)?n:i.resolve(n)).then(function(){return{result:t,block:r.next}})})},o.prototype.tell=function(e){var t=new r(e);return this.then(t)},o.prototype.ask=function(e,t){return this.tell(e).listen(t)},e.exports=r},function(e,t,n){function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}n(131).Promise;var i=n(137);n(138);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.isListen=!0,r.prototype.execute=function(e,t){var n=this;return e.receive().then(function(e){return{result:e,block:n.next}})},i.prototype.listen=function(e){var t=new r,n=this.then(t);return e&&(n=n.then(e)),n},e.exports=r},function(e,t,n){function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"==typeof e?this.condition=e:e instanceof RegExp?this.condition=function(t,n){return e.test(t)}:this.condition=function(t,n){return t==e},t&&!t.isBlock)throw new TypeError("Parameter trueBlock must be a Block");if(n&&!n.isBlock)throw new TypeError("Parameter falseBlock must be a Block");this.trueBlock=t||null,this.falseBlock=n||null}var i=n(131).Promise,o=n(137),s=n(139).isPromise;n(138),r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.isIIf=!0,r.prototype.execute=function(e,t){var n=this,r=this.condition(t,e.context);return(s(r)?r:i.resolve(r)).then(function(e){var r=e?n.trueBlock||n.next:n.falseBlock;return{result:t,block:r}})},o.prototype.iif=function(e,t,n){var i=new r(e,t,n);return this.then(i)},e.exports=r},function(e,t,n){function r(e,t){var n,i;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"==typeof e?(n=e,i=t):(n=null,i=e),n){if("function"!=typeof n)throw new TypeError("Parameter decision must be a function")}else n=function(e,t){return e};if(i&&"function"==typeof i)throw new TypeError("Parameter choices must be an object");if(this.decision=n,this.choices={},i){var o=this;Object.keys(i).forEach(function(e){o.addChoice(e,i[e])})}}var i=n(131).Promise,o=n(137),s=n(139).isPromise;n(138),r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.isDecision=!0,r.prototype.execute=function(e,t){var n=this,r=this.decision(t,e.context);return(s(r)?r:i.resolve(r)).then(function(e){var r=n.choices[e];if(r||(r=n.choices.default),!r)throw new Error('Block with id "'+e+'" not found');return{result:t,block:r}})},r.prototype.addChoice=function(e,t){if("string"!=typeof e)throw new TypeError("String expected as choice id");if(!t||!t.isBlock)throw new TypeError("Block expected as choice");if(e in this.choices)throw new Error('Choice with id "'+e+'" already exists');for(var n=t;n&&n.previous;)n=n.previous;return this.choices[e]=n,this},o.prototype.decide=function(e,t){var n=new r(e,t);return this.then(n)},e.exports=r},function(e,t){function n(e,t){this.agent=e,this.stopPropagation=t&&t.stopPropagation||!1,this.receiveOriginal=e._receive,this.listeners=[]}n.prototype.type="pattern",n.prototype.receive=function(e,t){for(var n,r=[],i=0,o=this.listeners.length;i<o;i++){var s=this.listeners[i],a=s.pattern;if((a instanceof Function&&a(t)||a instanceof RegExp&&a.test(t)||a==t)&&(n=s.callback.call(this.agent,e,t),r.push(n),this.stopPropagation))return r[0]}return n=this.receiveOriginal.call(this.agent,e,t),r.push(n),r[0]},n.prototype.listen=function(e,t){this.listeners.push({pattern:e,callback:t})},n.prototype.unlisten=function(e,t){for(var n=0,r=this.listeners.length;n<r;n++){var i=this.listeners[n];if(i.pattern===e&&i.callback===t){this.listeners.splice(n,1);break}}},n.prototype.mixin=function(){return{_receive:this.receive.bind(this),listen:this.listen.bind(this),unlisten:this.unlisten.bind(this)}},e.exports=n},function(e,t,n){function r(e,t){this.agent=e,this.receiveOriginal=e._receive,this.timeout=t&&t.timeout||a,this.queue=[]}var i=n(12),o=n(2),s=n(13),a=6e4;r.prototype.type="request",r.prototype.receive=function(e,t){var n=this.agent;if("object"===(void 0===t?"undefined":_typeof(t))){var r=t,i=this.queue[r.id];if(i)return clearTimeout(i.timeout),delete this.queue[r.id],r.error?i.reject(new Error(r.error)):i.resolve(r.message),!0;if("request"==t.type)try{var o=this.receiveOriginal.call(n,e,t.message);s.isPromise(o)?o.then(function(r){n.send(e,{type:"request",id:t.id,message:r})}).catch(function(r){n.send(e,{type:"request",id:t.id,error:r.message||r.toString()})}):n.send(e,{type:"request",id:t.id,message:o})}catch(r){n.send(e,{type:"request",id:t.id,error:r.message||r.toString()})}}else this.receiveOriginal&&this.receiveOriginal.call(n,e,t)},r.prototype.request=function(e,t){var n=this;return new o(function(r,o){var s=i(),a={type:"request",id:s,message:t};n.queue[s]={resolve:r,reject:o,timeout:setTimeout(function(){delete n.queue[s],o(new Error("Timeout"))},n.timeout)},n.agent.send(e,a).catch(function(e){o(e)})})},r.prototype.mixin=function(){return{_receive:this.receive.bind(this),request:this.request.bind(this)}},e.exports=r},function(e,t,n){function r(e,t,n){this.agent=e,this.receiveOriginal=e._receive,this.queue={},this.promiseTimeout=n&&n.timeout||1500,t instanceof Array?this.functionsFromArray(t):t instanceof Object&&(this.availableFunctions=t)}var i=n(12),o=n(2),s=n(13);r.prototype.type="rpc",r.prototype.functionsFromArray=function(e){this.availableFunctions={};for(var t=0;t<e.length;t++){var n=e[t];this.availableFunctions[n]=this.agent[n]}},r.prototype.request=function(e,t){var n=this;return new o(function(r,o){"object"!=(void 0===t?"undefined":_typeof(t))&&o(new TypeError("Message must be an object")),"2.0"!==t.jsonrpc&&(t.jsonrpc="2.0"),void 0===t.id&&(t.id=i()),void 0===t.method&&o(new Error('Property "method" expected')),void 0===t.params&&(t.params={}),n.queue[t.id]={resolve:r,reject:o,timeout:setTimeout(function(){delete n.queue[t.id],o(new Error("RPC Promise Timeout surpassed. Timeout: "+n.promiseTimeout/1e3+"s"))},n.promiseTimeout)};var a=n.agent.send(e,t);1==s.isPromise(a)&&a.catch(function(e){o(e)})})},r.prototype.receive=function(e,t){"object"==(void 0===t?"undefined":_typeof(t))&&"2.0"==t.jsonrpc?this._receive(e,t):this.receiveOriginal.call(this.agent,e,t)},r.prototype._receive=function(e,t){var n={jsonrpc:"2.0",id:t.id};if(void 0!==t.method){var r=this.availableFunctions[t.method];if(void 0!==r){var i=r.call(this.agent,t.params,e)||null;if(s.isPromise(i)){var o=this;i.then(function(t){n.result=t,o.agent.send(e,n)}).catch(function(t){n.error=t.message||t.toString(),o.agent.send(e,n)})}else n.result=i,this.agent.send(e,n)}else{u=new Error("Cannot find function: "+t.method);n.error=u.message||u.toString(),this.agent.send(e,n)}}else if(void 0!==t.result||void 0!==t.error){var a=this.queue[t.id];void 0!==a&&(void 0!=t.error?"object"==(void 0===t?"undefined":_typeof(t))?a.reject(t.error):a.reject(new Error(t.error)):a.resolve(t.result))}else{var u=new Error("No method or result defined. Message:"+JSON.stringify(t));n.error=u.message||u.toString(),this.agent.send(e,n)}},r.prototype.mixin=function(){return{_receive:this.receive.bind(this),request:this.request.bind(this)}},e.exports=r},function(e,t){function n(e){this.id=e&&e.id||null,this.default=e&&e.default||!1}n.prototype.type=null,n.prototype.connect=function(e,t){throw new Error('Cannot invoke abstract function "connect"')},n.prototype.close=function(){throw new Error('Cannot invoke abstract function "close"')},e.exports=n},function(e,t,n){function r(e){this.id=e.id||null,this.url=e.url||e.host&&"amqp://"+e.host||null,this.default=e.default||!1,this.networkId=this.url,this.connection=null,this.config=e}var i=n(2),o=n(147),s=n(149);(r.prototype=new o).type="amqp",r.prototype.connect=function(e,t){var r=n(!function(){var e=new Error('Cannot find module "amqplib/callback_api"');throw e.code="MODULE_NOT_FOUND",e}()),o=this,a=new i(function(e,t){null==o.connection?r.connect(o.url,function(t,n){null!=t||(o.connection=n,e())}):e()});return new s(o,e,t,a)},r.prototype.close=function(){null!=this.connection&&(this.connection.close(),this.connection=null)},e.exports=r},function(e,t,n){(function(t){function r(e,t,n,r){this.transport=e,this.id=t,this.channel=null;var o=this;this.ready=new i(function(e,t){r.then(function(){o.transport.connection.createChannel(function(r,i){null!=r?t():(o.channel=i,i.assertQueue(o.id),i.consume(o.id,function(e){if(null!==e&&e.content&&""!=e.content.toString()){var t=JSON.parse(e.content.toString());t.to!=o.id||n(t.from,t.message),i.ack(e)}}),e())})})})}var i=n(2);n(150);r.prototype.send=function(e,n){if(null!=this.channel){var r={from:this.id,to:e,message:n};this.channel.sendToQueue(e,new t(JSON.stringify(r),"utf-8"))}},r.prototype.close=function(){null!=this.channel&&this.channel.close(),this.channel=null},e.exports=r}).call(t,n(68).Buffer)},function(e,t,n){function r(e,t,n){throw new Error("Cannot create an abstract Connection")}var i=n(2);r.prototype.ready=i.reject(new Error("Cannot get abstract property ready")),r.prototype.send=function(e,t){throw new Error("Cannot call abstract function send")},r.prototype.close=function(){throw new Error('Cannot call abstract function "close"')},e.exports=r},function(e,t,n){function r(e){this.id=e&&e.id||null,this.default=e&&e.default||!1,this.host=e&&e.host||new i.Host(e),this.networkId=this.host.networkId}var i=n(152),o=n(147),s=n(195);(r.prototype=new o).type="distribus",r.prototype.connect=function(e,t){return new s(this,e,t)},r.prototype.close=function(){this.host.close(),this.host=null},e.exports=r},function(e,t,n){t.Host=n(153),t.Promise=n(155)},function(e,t,n){function r(e){var t=this;this.peers={},this.addresses={},this.channels={},this.options={reconnectTimeout:3e5,reconnectDelay:1e3,reconnectDecay:2},this.server=null,this.address=null,this.port=null,this.connections={},this.timers={},this.send=function(e,n,r){var i=t.peers[n];return i?(i.emit("message",e,r),c.resolve(null)):t.find(n).then(function(i){var a=t.connections[i];if(a){var u={method:"send",params:{from:e,to:n,message:r}};return a.request(u).catch(function(e){if(0===e.toString().indexOf("Error: Peer not found"))throw delete t.addresses[n],o(n)})}throw s(n,i)})},this.config(e)}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function o(e){return new Error("Peer not found (id: "+e+")")}function s(e,t){return new Error("Peer unreachable (id: "+e+", url: "+t+")")}var a=n(154),u=n(154).Server,c=(n(67),n(155)),l=n(193),f=n(194);r.prototype.config=function(e){if(e&&(i(this.options,e),e.networkId)){if(null===this.networkId)throw new Error("Cannot replace networkId once set");this.networkId=e.networkId}return i({},this.options)},r.prototype.create=function(e){if(e in this.peers)throw new Error("Id already exists (id: "+e+")");var t=new f(e,this.send);return this.peers[e]=t,t},r.prototype.remove=function(e){e instanceof f?delete this.peers[e.id]:e&&delete this.peers[e]},r.prototype.get=function(e){return this.peers[e]||null},r.prototype.find=function(e){var t=this;if(e in t.peers)return c.resolve(t.url||null);var n=t.addresses[e];return n?c.resolve(n):new c(function(n,r){var i=!1,s=Object.keys(t.connections).map(function(r){return t.connections[r].request({method:"find",params:{id:e}}).then(function(r){r&&!i&&(i=!0,t.addresses[e]=r,n(r))})});c.all(s).then(function(){i&&0!=s.length||r(o(e))})})},r.prototype.listen=function(e,t){var n=this;return new c(function(r,i){n.server?i(new Error("Server already listening")):(n.server=new u({port:t},function(){n.address=e,n.port=t,n.url="ws://"+e+":"+t,r(n)}),n.server.on("connection",function(e){(e=l(e)).onerror=function(e){},e.onclose=function(){var t=n._findUrl(e);delete n.connections[t],n.timers[t]=setTimeout(function(){delete n.timers[t],n._forgetPeers(t)},n.options.reconnectTimeout)},e.onrequest=function(t){return n._onRequest(e,t)}}),n.server.on("error",function(e){i(e)}))})},r.prototype._onRequest=function(e,t){var n,r=this;switch(t.method){case"greeting":n=t.params&&t.params.url;var i=t.params.networkId||null;return null===i||i===r.networkId?!n||n in this.connections?c.resolve({networkId:r.networkId}):(this.connections[n]=e,this._broadcastJoin(n).then(function(){return c.resolve({networkId:r.networkId})})):c.reject(new Error("Network id mismatch ("+i+" !== "+r.networkId+")"));case"join":return n=t.params&&t.params.url,this.join(n).then(function(e){return c.resolve()});case"goodbye":return n=this._findUrl(e),this._forgetPeers(n),this._disconnect(n),c.resolve("goodbye");case"hosts":return t.params&&t.params.urls&&this.join(t.params.urls),c.resolve(Object.keys(this.connections));case"find":var s=t.params&&t.params.id;return c.resolve(this.peers[s]?this.url:null);case"send":var a=t.params&&t.params.from,u=t.params&&t.params.to,l=t.params&&t.params.message,f=this.peers[u];return f?(f.emit("message",a,l),c.resolve(null)):c.reject(o(u).toString());case"publish":var h=t.params&&t.params.channel,l=t.params&&t.params.message;return this._publish(h,l),c.resolve({result:null,error:null});case"ping":return c.resolve({result:t.params,error:null});default:return c.reject('Unknown method "'+t.method+'"')}},r.prototype._findUrl=function(e){for(var t in this.connections)if(this.connections.hasOwnProperty(t)&&this.connections[t]===e)return t;return null},r.prototype._forgetPeers=function(e){for(var t in this.addresses)this.addresses.hasOwnProperty(t)&&this.addresses[t]===e&&delete this.addresses[t]},r.prototype.join=function(e){var t=this;return!e||e in t.connections?c.resolve(t):t._connect(e).then(function(){return t._broadcastJoin(e)}).then(function(e){return t})},r.prototype._connect=function(e){var t=this;return new c(function(n,r){var i=new a(e);l(i),t.connections[e]=i,i.onrequest=function(e){return t._onRequest(i,e)},i.onclose=function(){t.connections[e]&&(delete t.connections[e],t._reconnect(e))},i.onopen=function(){i.request({method:"greeting",params:{url:t.url,networkId:t.networkId}}).then(function(e){t.networkId=e.networkId,n(i)}).catch(function(n){delete t.connections[e],i.close(),r(n)})},i.onerror=function(n){delete t.connections[e],r(n),i.close()}})},r.prototype._reconnect=function(e){function t(i,o){n.timers[e]=setTimeout(function(){delete n.timers[e],(new Date).valueOf()-r<n.options.reconnectTimeout?n._connect(e).catch(function(e){t(i/n.options.reconnectDecay,o+1)}):n._forgetPeers(e)},i)}var n=this,r=(new Date).valueOf();t(n.options.reconnectDelay,0)},r.prototype._broadcastJoin=function(e){var t=this,n=Object.keys(t.connections).filter(function(t){return t!==e});return c.all(n.map(function(n){return t.connections[n].request({method:"join",params:{url:e}}).catch(function(e){}).then(function(){return n})}))},r.prototype.close=function(){var e=this;if(this.server){var t=Object.keys(this.connections);return c.all(t.map(function(t){return e._disconnect(t)})).then(function(){return e.addresses={},e.server&&(e.server.close(),e.server=null,e.address=null,e.port=null,e.url=null),e})}c.resolve(this)},r.prototype._disconnect=function(e){var t=this.connections[e];if(t)return delete this.connections[e],this.timers[e]&&(clearTimeout(this.timers[e]),delete this.timers[e]),t.request({method:"goodbye"}).catch(function(e){}).then(function(){t.close()});c.resolve()},r.prototype.publish=function(e,t){this._publish(e,t);for(var n in this.connections)this.connections.hasOwnProperty(n)&&this.connections[n].notify({method:"publish",params:{channel:e,message:t}})},r.prototype._publish=function(e,t){var n=this.channels[e];n&&n.forEach(function(e){e(t)})},r.prototype.subscribe=function(e,t){var n=this.channels[e];n||(n=[],this.channels[e]=n),n.push(t)},r.prototype.unsubscribe=function(e,t){var n=this.channels[e];if(n){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this.channels[e])}},e.exports=r},function(e,t){function n(e,t,n){return t?new i(e,t):new i(e)}var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;e.exports=i?n:null,i&&(n.prototype=i.prototype)},function(e,t,n){e.exports=n(156)},function(e,t,n){var r=n(157)();e.exports=r},function(e,t,n){(function(t){e.exports=function(){function e(e){return void 0!==e&&e instanceof i}function r(e,t){return e instanceof p&&t>=0}function i(e){if("function"!=typeof e)throw new S("the promise constructor requires a resolver function");if(this.constructor!==i)throw new S("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,e!==f&&this._resolveFromResolver(e)}function o(e,t){return s(e,p,!0===t&&e._isBound()?e._boundTo:void 0).promise()}function s(t,n,r){var o=null;return y(t)?o=t:(o=i._cast(t,void 0))!==t?o._setBoundTo(r):e(o)||(o=null),null!==o?new n(o,r):{promise:function(){return N("expecting an array, a promise or a thenable")}}}var a=n(158),u=n(159),c=n(161),l=n(164),f=function(){},h={},d={e:null},p=n(165)(i,f),g=n(166)(),_=n(167)(d),v=n(168),y=u.isArray,m=u.errorObj,b=u.tryCatch1,w=u.tryCatch2,k=u.tryCatchApply,E=l.RangeError,S=l.TypeError,x=l.CancellationError,T=l.TimeoutError,O=l.RejectionError,C=l.originatesFromRejection,A=l.markAsOriginatingFromRejection,R=l.canAttach,P=u.thrower,N=n(169)(i),B=function(){return new S("circular promise resolution chain")};i.prototype.bind=function(e){var t=new i(f);return t._setTrace(this),t._follow(this),t._setBoundTo(e),this._cancellable()&&(t._setCancellable(),t._cancellationParent=this),t},i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if("function"!=typeof o){var s=new S("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(s),void c.invoke(this._reject,this,s)}r[i++]=o}r.length=i,e=arguments[n],this._resetTrace();var a=new _(r,e,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,e,void 0,void 0,void 0)},i.prototype.then=function(e,t,n){return this._then(e,t,n,void 0,void 0)},i.prototype.done=function(e,t,n){this._then(e,t,n,void 0,void 0)._setIsFinal()},i.prototype.spread=function(e,t){return this._then(e,t,void 0,h,void 0)},i.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},i.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this._settledValue,e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this._settledValue,e.isRejected=!0),e},i.prototype.all=function(){return o(this,!0)},i.is=e,i.all=function(e){return o(e,!1)},i.join=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;++n)t[n]=arguments[n];return s(t,p,void 0).promise()},i.resolve=i.fulfilled=function(e){var t=new i(f);return t._setTrace(void 0),t._tryFollow(e)?t:(t._cleanValues(),t._setFulfilled(),t._settledValue=e,t)},i.reject=i.rejected=function(e){var t=new i(f);if(t._setTrace(void 0),A(e),t._cleanValues(),t._setRejected(),t._settledValue=e,!R(e)){var n=new Error(e+"");t._setCarriedStackTrace(n)}return t._ensurePossibleRejectionHandled(),t},i.prototype.error=function(e){return this.caught(C,e)},i.prototype._resolveFromSyncValue=function(e){if(e===m)this._cleanValues(),this._setRejected(),this._settledValue=e.e,this._ensurePossibleRejectionHandled();else{var t=i._cast(e,void 0);t instanceof i?this._follow(t):(this._cleanValues(),this._setFulfilled(),this._settledValue=e)}},i.method=function(e){if("function"!=typeof e)throw new S("fn must be a function");return function(){var t;switch(arguments.length){case 0:t=b(e,this,void 0);break;case 1:t=b(e,this,arguments[0]);break;case 2:t=w(e,this,arguments[0],arguments[1]);break;default:for(var n=arguments.length,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o];t=k(e,r,this)}var s=new i(f);return s._setTrace(void 0),s._resolveFromSyncValue(t),s}},i.attempt=i.try=function(e,t,n){if("function"!=typeof e)return N("fn must be a function");var r=y(t)?k(e,t,n):b(e,n,t),o=new i(f);return o._setTrace(void 0),o._resolveFromSyncValue(r),o},i.defer=i.pending=function(){var e=new i(f);return e._setTrace(void 0),new v(e)},i.bind=function(e){var t=new i(f);return t._setTrace(void 0),t._setFulfilled(),t._setBoundTo(e),t},i.cast=function(e){var t=i._cast(e,void 0);return t instanceof i?t:i.resolve(t)},i.onPossiblyUnhandledRejection=function(e){g.possiblyUnhandledRejection="function"==typeof e?e:void 0};var M;i.onUnhandledRejectionHandled=function(e){M="function"==typeof e?e:void 0};var I=!(void 0===t||"string"!=typeof t.execPath||"object"!==_typeof(t.env)||!t.env.BLUEBIRD_DEBUG&&"development"!==t.env.NODE_ENV);i.longStackTraces=function(){if(c.haveItemsQueued()&&!1===I)throw new Error("cannot enable long stack traces after promises have been created");I=g.isSupported()},i.hasLongStackTraces=function(){return I&&g.isSupported()},i.prototype._setProxyHandlers=function(e,t){var n=this._length();if(n>=524282&&(n=0,this._setLength(0)),0===n)this._promise0=t,this._receiver0=e;else{var r=n-5;this[r+3]=t,this[r+4]=e,this[r+0]=this[r+1]=this[r+2]=void 0}this._setLength(n+5)},i.prototype._proxyPromiseArray=function(e,t){this._setProxyHandlers(e,t)},i.prototype._proxyPromise=function(e){e._setProxied(),this._setProxyHandlers(e,-1)},i.prototype._then=function(e,t,n,r,o){var s=void 0!==o,a=s?o:new i(f);if(I&&!s){var u=this._peekContext()===this._traceParent;a._traceParent=u?this._traceParent:this,a._setTrace(this)}!s&&this._isBound()&&a._setBoundTo(this._boundTo);var l=this._addCallbacks(e,t,n,a,r);return!s&&this._cancellable()&&(a._setCancellable(),a._cancellationParent=this),this.isResolved()&&c.invoke(this._queueSettleAt,this,l),a},i.prototype._length=function(){return 524287&this._bitField},i.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},i.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},i.prototype._setLength=function(e){this._bitField=-524288&this._bitField|524287&e},i.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},i.prototype._setRejected=function(){this._bitField=134217728|this._bitField},i.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},i.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},i.prototype._isFinal=function(){return(33554432&this._bitField)>0},i.prototype._cancellable=function(){return(67108864&this._bitField)>0},i.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},i.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},i.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},i.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},i.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},i.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},i.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},i.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},i.prototype._setCarriedStackTrace=function(e){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=e},i.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},i.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},i.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},i.prototype._receiverAt=function(e){var t;return t=0===e?this._receiver0:this[e+4-5],this._isBound()&&void 0===t?this._boundTo:t},i.prototype._promiseAt=function(e){return 0===e?this._promise0:this[e+3-5]},i.prototype._fulfillmentHandlerAt=function(e){return 0===e?this._fulfillmentHandler0:this[e+0-5]},i.prototype._rejectionHandlerAt=function(e){return 0===e?this._rejectionHandler0:this[e+1-5]},i.prototype._unsetAt=function(e){0===e?(this._rejectionHandler0=this._progressHandler0=this._promise0=this._receiver0=void 0,this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0)):this[e-5+0]=this[e-5+1]=this[e-5+2]=this[e-5+3]=this[e-5+4]=void 0},i.prototype._resolveFromResolver=function(e){var t=this;this._setTrace(void 0),this._pushContext();var n=w(e,void 0,function(e){t._tryFollow(e)||t._fulfill(e)},function(e){var n=R(e)?e:new Error(e+"");t._attachExtraTrace(n),A(e),t._reject(e,n===e?void 0:n)});if(this._popContext(),void 0!==n&&n===m){var r=n.e,i=R(r)?r:new Error(r+"");t._reject(r,i)}},i.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=524282&&(o=0,this._setLength(0)),0===o)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof e||this._isCarryingStackTrace()||(this._fulfillmentHandler0=e),"function"==typeof t&&(this._rejectionHandler0=t),"function"==typeof n&&(this._progressHandler0=n);else{var s=o-5;this[s+3]=r,this[s+4]=i,this[s+0]="function"==typeof e?e:void 0,this[s+1]="function"==typeof t?t:void 0,this[s+2]="function"==typeof n?n:void 0}return this._setLength(o+5),o},i.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=8388608|this._bitField,this._boundTo=e):this._bitField=-8388609&this._bitField},i.prototype._isBound=function(){return 8388608==(8388608&this._bitField)},i.prototype._spreadSlowCase=function(e,t,n,r){var i=s(n,p,r).promise()._then(function(){return e.apply(r,arguments)},void 0,void 0,h,void 0);t._follow(i)},i.prototype._callSpread=function(t,n,r,o){var s=this._isBound()?this._boundTo:void 0;if(y(r))for(var a=0,u=r.length;a<u;++a)if(e(i._cast(r[a],void 0)))return void this._spreadSlowCase(t,n,r,s);return o&&n._pushContext(),k(t,r,s)},i.prototype._callHandler=function(e,t,n,r,i){var o;return t!==h||this.isRejected()?(i&&n._pushContext(),o=b(e,t,r)):o=this._callSpread(e,n,r,i),i&&n._popContext(),o},i.prototype._settlePromiseFromHandler=function(t,n,r,o){if(e(o)){var s=I,a=this._callHandler(t,n,o,r,s);if(!o._isFollowing())if(a===m||a===o||a===d){var u=a===o?B():a.e,c=R(u)?u:new Error(u+"");a!==d&&o._attachExtraTrace(c),o._rejectUnchecked(u,c)}else{var l=i._cast(a,o);if(e(l)){if(l.isRejected()&&!l._isCarryingStackTrace()&&!R(l._settledValue)){c=new Error(l._settledValue+"");o._attachExtraTrace(c),l._setCarriedStackTrace(c)}o._follow(l),l._cancellable()&&(o._cancellationParent=l,o._setCancellable())}else o._fulfillUnchecked(a)}}else t.call(n,r,o)},i.prototype._follow=function(e){this._setFollowing(),e.isPending()?(e._cancellable()&&(this._cancellationParent=e,this._setCancellable()),e._proxyPromise(this)):e.isFulfilled()?this._fulfillUnchecked(e._settledValue):this._rejectUnchecked(e._settledValue,e._getCarriedStackTrace()),e._isRejectionUnhandled()&&e._unsetRejectionIsUnhandled(),I&&null==e._traceParent&&(e._traceParent=this)},i.prototype._tryFollow=function(t){if(this._isFollowingOrFulfilledOrRejected()||t===this)return!1;var n=i._cast(t,void 0);return!!e(n)&&(this._follow(n),!0)},i.prototype._resetTrace=function(){I&&(this._trace=new g(void 0===this._peekContext()))},i.prototype._setTrace=function(e){if(I){var t=this._peekContext();this._traceParent=t;var n=void 0===t;void 0!==e&&e._traceParent===t?this._trace=e._trace:this._trace=new g(n)}return this},i.prototype._attachExtraTrace=function(e){if(I){var t=this,n=e.stack;n="string"==typeof n?n.split("\n"):[];for(;null!=t&&null!=t._trace;)n=g.combine(n,t._trace.stack.split("\n")),t=t._traceParent;var r=Error.stackTraceLimit+1;n.length>r&&(n.length=r),n.length<=1?e.stack="(No stack trace)":e.stack=n.join("\n")}},i.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},i.prototype._fulfill=function(e){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(e)},i.prototype._reject=function(e,t){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(e,t)},i.prototype._settlePromiseAt=function(e){var t=this.isFulfilled()?this._fulfillmentHandlerAt(e):this._rejectionHandlerAt(e),n=this._settledValue,o=this._receiverAt(e),s=this._promiseAt(e);if("function"==typeof t)this._settlePromiseFromHandler(t,o,n,s);else{var a=!1,u=this.isFulfilled();void 0!==o&&(o instanceof i&&o._isProxied()?(o._unsetProxied(),u?o._fulfillUnchecked(n):o._rejectUnchecked(n,this._getCarriedStackTrace()),a=!0):r(o,s)&&(u?o._promiseFulfilled(n,s):o._promiseRejected(n,s),a=!0)),a||(u?s._fulfill(n):s._reject(n,this._getCarriedStackTrace()))}e>=256&&this._queueGC()},i.prototype._isProxied=function(){return 4194304==(4194304&this._bitField)},i.prototype._setProxied=function(){this._bitField=4194304|this._bitField},i.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},i.prototype._isGcQueued=function(){return-1073741824==(-1073741824&this._bitField)},i.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},i.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},i.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),c.invokeLater(this._gc,this,void 0))},i.prototype._gc=function(){var e=this._length();this._unsetAt(0);for(var t=0;t<e;t++)delete this[t];this._setLength(0),this._unsetGcQueued()},i.prototype._queueSettleAt=function(e){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),c.invoke(this._settlePromiseAt,this,e)},i.prototype._fulfillUnchecked=function(e){if(this.isPending()){if(e===this){var t=B();return this._attachExtraTrace(t),this._rejectUnchecked(t,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=e;var n=this._length();n>0&&c.invoke(this._settlePromises,this,n)}},i.prototype._rejectUncheckedCheckError=function(e){var t=R(e)?e:new Error(e+"");this._rejectUnchecked(e,t===e?void 0:t)},i.prototype._rejectUnchecked=function(e,t){if(this.isPending()){if(e===this){var n=B();return this._attachExtraTrace(n),this._rejectUnchecked(n)}if(this._cleanValues(),this._setRejected(),this._settledValue=e,this._isFinal())c.invokeLater(P,void 0,void 0===t?e:t);else{var r=this._length();void 0!==t&&this._setCarriedStackTrace(t),r>0?c.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}}},i.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},i.prototype._settlePromises=function(){for(var e=this._length(),t=0;t<e;t+=5)this._settlePromiseAt(t)},i.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==g.possiblyUnhandledRejection&&c.invokeLater(this._notifyUnhandledRejection,this,void 0)},i.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof M&&c.invokeLater(M,void 0,this)},i.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue,t=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==t&&(this._unsetCarriedStackTrace(),e=t),"function"==typeof g.possiblyUnhandledRejection&&g.possiblyUnhandledRejection(e,this)}};var j=[];i.prototype._peekContext=function(){var e=j.length-1;if(e>=0)return j[e]},i.prototype._pushContext=function(){I&&j.push(this)},i.prototype._popContext=function(){I&&j.pop()};var L=a.Promise;return i.noConflict=function(){return a.Promise===i&&(a.Promise=L),i},g.isSupported()||(i.longStackTraces=function(){},I=!1),i._makeSelfResolutionError=B,n(170)(i,d),n(171)(i),n(172)(i,f),n(173)(i),i.RangeError=E,i.CancellationError=x,i.TimeoutError=T,i.TypeError=S,i.RejectionError=O,u.toFastProperties(i),u.toFastProperties(i.prototype),n(174)(i,f),n(175)(i,s,p),n(177)(i,f),n(178)(i),n(179)(i,s,p,N),n(180)(i,N,f),n(182)(i,p,f,N),n(183)(i),n(184)(i,f),n(185)(i,p),n(187)(i,s,p,N,f),n(188)(i,s,p),n(190)(i,s,p,N),n(191)(i,r),n(192)(i,f),i.prototype=i.prototype,i}}).call(t,n(80))},function(e,t){(function(t){e.exports=function(){if(void 0!==this)return this;try{return t}catch(e){}try{return window}catch(e){}try{return self}catch(e){}}()}).call(t,function(){return this}())},function(e,t,n){function r(e){"undefined"!=typeof console&&null!==console&&console.warn}function i(e,t,n){try{return e.call(t,n)}catch(e){return m.e=e,m}}function o(e,t,n,r){try{return e.call(t,n,r)}catch(e){return m.e=e,m}}function s(e,t,n){try{return e.apply(n,t)}catch(e){return m.e=e,m}}function a(e){return"string"==typeof e?e:""+e}function u(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function c(e){return!u(e)}function l(e){return u(e)?new Error(a(e)):e}function f(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i}function h(e,t,n){if(u(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return _.defineProperty(e,t,r),e}function d(e){throw e}function p(e){function t(){}return t.prototype=e,t}var g=n(158),_=n(160),v=function(){try{var e={};return _.defineProperty(e,"f",{get:function(){return 3}}),3===e.f}catch(e){return!1}}(),y="undefined"==typeof window||null===window||void 0===window.document||"undefined"==typeof navigator||null===navigator||"string"!=typeof navigator.appName||window!==g,m={e:{}},b=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},w=function(){return"string"!==this}.call("string"),k={thrower:d,isArray:_.isArray,haveGetters:v,notEnumerableProp:h,isPrimitive:u,isObject:c,canEvaluate:y,deprecated:r,errorObj:m,tryCatch1:i,tryCatch2:o,tryCatchApply:s,inherits:b,withAppended:f,asString:a,maybeWrapAsError:l,wrapsPrimitiveReceiver:w,toFastProperties:p};e.exports=k},function(e,t){var n=function(){return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype;e.exports={isArray:function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}},keys:function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},defineProperty:function(e,t,n){return e[t]=n.value,e},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return o}},isES5:n}}},function(e,t,n){function r(){this._isTickUsed=!1,this._length=0,this._lateBuffer=new o,this._functionBuffer=new o(75e3);var e=this;this.consumeFunctionBuffer=function(){e._consumeFunctionBuffer()}}var i=n(162),o=n(163),s=n(159).errorObj,a=n(159).tryCatch1,u=n(158).process;r.prototype.haveItemsQueued=function(){return this._length>0},r.prototype.invokeLater=function(e,t,n){void 0===u||null==u.domain||e.domain||(e=u.domain.bind(e)),this._lateBuffer.push(e,t,n),this._queueTick()},r.prototype.invoke=function(e,t,n){void 0===u||null==u.domain||e.domain||(e=u.domain.bind(e));var r=this._functionBuffer;r.push(e,t,n),this._length=r.length(),this._queueTick()},r.prototype._consumeFunctionBuffer=function(){for(var e=this._functionBuffer;e.length()>0;){var t=e.shift(),n=e.shift(),r=e.shift();t.call(n,r)}this._reset(),this._consumeLateBuffer()},r.prototype._consumeLateBuffer=function(){for(var e=this._lateBuffer;e.length()>0;){var t=e.shift(),n=e.shift(),r=e.shift(),i=a(t,n,r);if(i===s){if(this._queueTick(),null==t.domain)throw i.e;t.domain.emit("error",i.e)}}},r.prototype._queueTick=function(){this._isTickUsed||(i(this.consumeFunctionBuffer),this._isTickUsed=!0)},r.prototype._reset=function(){this._isTickUsed=!1,this._length=0},e.exports=new r},function(e,t,n){(function(t){var r,i=n(158);if(void 0!==t&&null!==t&&"function"==typeof t.cwd&&"function"==typeof t.nextTick&&"string"==typeof t.version)r=function(e){t.nextTick(e)};else if("function"!=typeof i.MutationObserver&&"function"!=typeof i.WebkitMutationObserver&&"function"!=typeof i.WebKitMutationObserver||"undefined"==typeof document||"function"!=typeof document.createElement)if("function"==typeof i.postMessage&&"function"!=typeof i.importScripts&&"function"==typeof i.addEventListener&&"function"==typeof i.removeEventListener){var o="bluebird_message_key_"+Math.random();r=function(){var e=void 0;return i.addEventListener("message",function(t){if(t.source===i&&t.data===o){var n=e;e=void 0,n()}},!1),function(t){e=t,i.postMessage(o,"*")}}()}else r="function"==typeof i.MessageChannel?function(){var e=void 0,t=new i.MessageChannel;return t.port1.onmessage=function(){var t=e;e=void 0,t()},function(n){e=n,t.port2.postMessage(null)}}():i.setTimeout?function(e){setTimeout(e,4)}:function(e){e()};else r=function(){var e=i.MutationObserver||i.WebkitMutationObserver||i.WebKitMutationObserver,t=document.createElement("div"),n=void 0;return new e(function(){var e=n;n=void 0,e()}).observe(t,{attributes:!0}),function(e){n=e,t.setAttribute("class","foo")}}();e.exports=r}).call(t,n(80))},function(e,t){function n(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+t]}function r(e){return e>>>=0,e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1}function i(e){return"number"!=typeof e?16:r(Math.min(Math.max(16,e),1073741824))}function o(e){this._capacity=i(e),this._length=0,this._front=0,this._makeCapacity()}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},o.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},o.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},o.prototype.length=function(){return this._length},o.prototype._makeCapacity=function(){for(var e=this._capacity,t=0;t<e;++t)this[t]=void 0},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<3)},o.prototype._resizeTo=function(e){var t=this._front,r=this._capacity,i=new Array(r),o=this.length();if(n(this,0,i,0,r),this._capacity=e,this._makeCapacity(),this._front=0,t+o<=r)n(i,t,this,0,o);else{var s=o-(t+o&r-1);n(i,t,this,0,s),n(i,0,this,s,o-s)}},e.exports=o},function(e,t,n){function r(e){return e instanceof f}function i(e,t){function n(r){if(!(this instanceof n))return new n(r);this.message="string"==typeof r?r:t,this.name=e,f.captureStackTrace&&f.captureStackTrace(this,this.constructor)}return c(n,f),n}function o(e){this.name="RejectionError",this.message=e,this.cause=e,this.isAsync=!0,e instanceof f?(this.message=e.message,this.stack=e.stack):f.captureStackTrace&&f.captureStackTrace(this,this.constructor)}var s=n(158),a=n(160).freeze,u=n(159),c=u.inherits,l=u.notEnumerableProp,f=s.Error,h=s.TypeError;"function"!=typeof h&&(h=i("TypeError","type error"));var d=s.RangeError;"function"!=typeof d&&(d=i("RangeError","range error"));var p=i("CancellationError","cancellation error"),g=i("TimeoutError","timeout error");c(o,f);var _="__BluebirdErrorTypes__",v=s[_];v||(v=a({CancellationError:p,TimeoutError:g,RejectionError:o}),l(s,_,v)),e.exports={Error:f,TypeError:h,RangeError:d,CancellationError:v.CancellationError,RejectionError:v.RejectionError,TimeoutError:v.TimeoutError,originatesFromRejection:function(e){return null!=e&&(e instanceof o||!0===e.isAsync)},markAsOriginatingFromRejection:function(e){try{l(e,"isAsync",!0)}catch(e){}},canAttach:function(e){return r(e)}}},function(e,t,n){e.exports=function(e,t){function r(e){switch(e){case-1:return;case-2:return[];case-3:return{}}}function i(n,r){var i=this._promise=new e(t),o=void 0;n instanceof e&&(o=n,n._cancellable()&&(i._setCancellable(),i._cancellationParent=n),n._isBound()&&i._setBoundTo(r)),i._setTrace(o),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var o=n(164).canAttach,s=n(159),a=n(161),u={}.hasOwnProperty,c=s.isArray;return i.PropertiesPromiseArray=function(){},i.prototype.length=function(){return this._length},i.prototype.promise=function(){return this._promise},i.prototype._init=function(t,n){var o=this._values;if(o instanceof e){if(!o.isFulfilled())return o.isPending()?void o._then(this._init,this._reject,void 0,this,n):(o._unsetRejectionIsUnhandled(),void this._reject(o._settledValue));if(o=o._settledValue,!c(o)){var s=new e.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(s)}this._values=o}if(0!==o.length){var l,f=o.length,h=f;l=this instanceof i.PropertiesPromiseArray?this._values:new Array(f);for(var d=!1,p=0;p<f;++p){var g=o[p];if(void 0!==g||u.call(o,p)){var _=e._cast(g,void 0);_ instanceof e?_.isPending()?_._proxyPromiseArray(this,p):(_._unsetRejectionIsUnhandled(),d=!0):d=!0,l[p]=_}else h--}if(0!==h){if(this._values=l,this._length=h,d){var v=h===f?this._scanDirectValues:this._scanDirectValuesHoled;a.invoke(v,this,f)}}else-2===n?this._resolve(l):this._resolve(r(n))}else this._resolve(r(n))},i.prototype._settlePromiseAt=function(t){var n=this._values[t];n instanceof e?n.isFulfilled()?this._promiseFulfilled(n._settledValue,t):n.isRejected()&&this._promiseRejected(n._settledValue,t):this._promiseFulfilled(n,t)},i.prototype._scanDirectValuesHoled=function(e){for(var t=0;t<e&&!this._isResolved();++t)u.call(this._values,t)&&this._settlePromiseAt(t)},i.prototype._scanDirectValues=function(e){for(var t=0;t<e&&!this._isResolved();++t)this._settlePromiseAt(t)},i.prototype._isResolved=function(){return null===this._values},i.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},i.prototype.__hardReject__=i.prototype._reject=function(e){this._values=null;var t=o(e)?e:new Error(e+"");this._promise._attachExtraTrace(t),this._promise._reject(e,t)},i.prototype._promiseProgressed=function(e,t){this._isResolved()||this._promise._progress({index:t,value:e})},i.prototype._promiseFulfilled=function(e,t){this._isResolved()||(this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values))},i.prototype._promiseRejected=function(e,t){this._isResolved()||(this._totalResolved++,this._reject(e))},i}},function(e,t,n){e.exports=function(){function e(e){var n;if("function"==typeof e)n="[function "+(e.name||"anonymous")+"]";else{if(n=e.toString(),/\[object [a-zA-Z0-9$_]+\]/.test(n))try{n=JSON.stringify(e)}catch(e){}0===n.length&&(n="(empty array)")}return"(<"+t(n)+">, no stack trace)"}function t(e){return e.length<41?e:e.substr(0,38)+"..."}function r(e,t){this.captureStackTrace(r,t)}var i=n(159).inherits,o=n(160).defineProperty,s=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),a=null,u=null;i(r,Error),r.prototype.captureStackTrace=function(e,t){c(this,e,t)},r.possiblyUnhandledRejection=function(e){if("object"===("undefined"==typeof console?"undefined":_typeof(console))){if("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e){var t=e.stack;"Possibly unhandled "+u(t,e)}else"Possibly unhandled "+String(e);"function"==typeof console.error||"object"===_typeof(console.error)||"function"==typeof console.log||_typeof(console.log)}},r.combine=function(e,t){for(var n=e.length-1,r=t.length-1;r>=0;--r){var i=t[r];if(e[n]!==i)break;e.pop(),n--}e.push("From previous event:");for(var o=e.concat(t),u=[],r=0,c=o.length;r<c;++r)s.test(o[r])||r>0&&!a.test(o[r])&&"From previous event:"!==o[r]||u.push(o[r]);return u},r.isSupported=function(){return"function"==typeof c};var c=function t(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){a=/^\s*at\s*/,u=function(t,n){return"string"==typeof t?t:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:e(n)};var n=Error.captureStackTrace;return function(e,t){n(e,t)}}var r=new Error;if("string"==typeof r.stack&&"function"==typeof"".startsWith&&r.stack.startsWith("stackDetection@")&&"stackDetection"===t.name){o(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),a=/@/;var i=/[@\n]/;return u=function(t,n){return"string"==typeof t?n.name+". "+n.message+"\n"+t:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:e(n)},function(e){for(var t=(new Error).stack.split(i),n=t.length,r="",o=0;o<n;o+=2)r+=t[o],r+="@",r+=t[o+1],r+="\n";e.stack=r}}return u=function(t,n){return"string"==typeof t?t:"object"!==(void 0===n?"undefined":_typeof(n))&&"function"!=typeof n||void 0===n.name||void 0===n.message?e(n):n.name+". "+n.message},null}();return r}},function(e,t,n){e.exports=function(e){function t(e,t,n){this._instances=e,this._callback=t,this._promise=n}function r(e,t){var n={},r=s(e,n,t);return r===a?r:u(n).length?(a.e=new c("Catch filter must inherit from Error or be a simple predicate function"),a):r}var i=n(159),o=n(164),s=i.tryCatch1,a=i.errorObj,u=n(160).keys,c=o.TypeError;return t.prototype.doFilter=function(t){for(var n=this._callback,i=this._promise,u=i._isBound()?i._boundTo:void 0,c=0,l=this._instances.length;c<l;++c){var f=this._instances[c],h=f===Error||null!=f&&f.prototype instanceof Error;if(h&&t instanceof f)return(g=s(n,u,t))===a?(e.e=g.e,e):g;if("function"==typeof f&&!h){var d=r(f,t);if(d===a){var p=o.canAttach(a.e)?a.e:new Error(a.e+"");this._promise._attachExtraTrace(p),t=a.e;break}if(d){var g=s(n,u,t);return g===a?(e.e=g.e,e):g}}}return e.e=t,e},t}},function(e,t,n){function r(e){return e instanceof Error&&p.getPrototypeOf(e)===Error.prototype}function i(e){var t;return t=r(e)?new f(e):e,c.markAsOriginatingFromRejection(t),t}function o(e){return function(t,n){if(null!==e){if(t){var r=i(u(t));e._attachExtraTrace(r),e._reject(r)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;a<o;++a)s[a-1]=arguments[a];e._fulfill(s)}else e._fulfill(n);e=null}}}var s,a=n(159),u=a.maybeWrapAsError,c=n(164),l=c.TimeoutError,f=c.RejectionError,h=n(161),d=a.haveGetters,p=n(160);if(s=d?function(e){this.promise=e}:function(e){this.promise=e,this.asCallback=o(e),this.callback=this.asCallback},d){var g={get:function(){return o(this.promise)}};p.defineProperty(s.prototype,"asCallback",g),p.defineProperty(s.prototype,"callback",g)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(e){var t=this.promise;if(void 0===t||void 0===t._tryFollow)throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");t._tryFollow(e)||h.invoke(t._fulfill,t,e)},s.prototype.reject=function(e){var t=this.promise;if(void 0===t||void 0===t._attachExtraTrace)throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");c.markAsOriginatingFromRejection(e);var n=c.canAttach(e)?e:new Error(e+"");t._attachExtraTrace(n),h.invoke(t._reject,t,e),n!==e&&h.invoke(this._setCarriedStackTrace,this,n)},s.prototype.progress=function(e){h.invoke(this.promise._progress,this.promise,e)},s.prototype.cancel=function(){h.invoke(this.promise.cancel,this.promise,void 0)},s.prototype.timeout=function(){this.reject(new l("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},s.prototype._setCarriedStackTrace=function(e){this.promise.isRejected()&&this.promise._setCarriedStackTrace(e)},e.exports=s},function(e,t,n){e.exports=function(e){var t=n(164).TypeError;return function(n){var r=new t(n),i=e.rejected(r),o=i._peekContext();return null!=o&&o._attachExtraTrace(r),i}}},function(e,t,n){e.exports=function(e,t){function r(){return this}function i(){throw this}function o(e){return function(){return e}}function s(e){return function(){throw e}}function a(e,t,n){var a;return a=f&&h(t)?n?o(t):s(t):n?r:i,e._then(a,d,void 0,t,void 0)}function u(n){var r=this.promise,i=this.handler,o=r._isBound()?i.call(r._boundTo):i();if(void 0!==o){var s=e._cast(o,void 0);if(s instanceof e)return a(s,n,r.isFulfilled())}return r.isRejected()?(t.e=n,t):n}function c(t){var n=this.promise,r=this.handler,i=n._isBound()?r.call(n._boundTo,t):r(t);if(void 0!==i){var o=e._cast(i,void 0);if(o instanceof e)return a(o,t,!0)}return t}var l=n(159),f=l.wrapsPrimitiveReceiver,h=l.isPrimitive,d=l.thrower;e.prototype._passThroughHandler=function(e,t){if("function"!=typeof e)return this.then();var n={promise:this,handler:e};return this._then(t?u:c,t?u:void 0,void 0,n,void 0)},e.prototype.lastly=e.prototype.finally=function(e){return this._passThroughHandler(e,!0)},e.prototype.tap=function(e){return this._passThroughHandler(e,!1)}}},function(e,t,n){var r=n(159),i=r.isPrimitive,o=r.wrapsPrimitiveReceiver;e.exports=function(e){var t=function(){return this},n=function(){throw this},r=function(e,t){return 1===t?function(){throw e}:2===t?function(){return e}:void 0};e.prototype.return=e.prototype.thenReturn=function(e){return o&&i(e)?this._then(r(e,2),void 0,void 0,void 0,void 0):this._then(t,void 0,void 0,e,void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return o&&i(e)?this._then(r(e,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,e,void 0)}}},function(e,t,n){e.exports=function(e,t){function r(e){try{return e.then}catch(e){return u.e=e,u}}function i(e){return l.call(e,"_promise0")}function o(t,n,r){var i=e.defer(),o=!1;try{n.call(t,function(n){if(!o){if(o=!0,t===n){var s=e._makeSelfResolutionError();return void 0!==r&&r._attachExtraTrace(s),void i.promise._reject(s,void 0)}i.resolve(n)}},function(e){if(!o){o=!0;var t=a(e)?e:new Error(e+"");void 0!==r&&r._attachExtraTrace(t),i.promise._reject(e,t)}},function(e){if(!o){var t=i.promise;"function"==typeof t._progress&&t._progress(e)}})}catch(e){if(!o){o=!0;var s=a(e)?e:new Error(e+"");void 0!==r&&r._attachExtraTrace(s),i.promise._reject(e,s)}}return i.promise}var s=n(159),a=n(164).canAttach,u=s.errorObj,c=s.isObject,l={}.hasOwnProperty;e._cast=function(n,s){if(c(n)){if(n instanceof e)return n;if(i(n)){var l=new e(t);return l._setTrace(void 0),n._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null),l._setFollowing(),l}var f=r(n);if(f===u)return void 0!==s&&a(f.e)&&s._attachExtraTrace(f.e),e.reject(f.e);if("function"==typeof f)return o(n,f,s)}return n}}},function(e,t){e.exports=function(e){function t(e){void 0!==e?(this._bitField=e._bitField,this._settledValue=e.isResolved()?e._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}t.prototype.isFulfilled=e.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},t.prototype.isRejected=e.prototype.isRejected=function(){return(134217728&this._bitField)>0},t.prototype.isPending=e.prototype.isPending=function(){return 0==(402653184&this._bitField)},t.prototype.value=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},t.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},t.prototype.isResolved=e.prototype.isResolved=function(){return(402653184&this._bitField)>0},e.prototype.inspect=function(){return new t(this)},e.PromiseInspection=t}},function(e,t,n){var r=n(158),i=function(e,t){for(var n=arguments.length,i=new Array(n-2),o=2;o<n;++o)i[o-2]=arguments[o];r.setTimeout(function(){e.apply(void 0,i)},t)};e.exports=function(e,t){n(159);var r=n(164),o=(n(169)(e),e.TimeoutError),s=function(e,t,n){if(e.isPending()){"string"!=typeof t&&(t="operation timed out after "+n+" ms");var i=new o(t);r.markAsOriginatingFromRejection(i),e._attachExtraTrace(i),e._rejectUnchecked(i)}},a=function(e,t){t._fulfill(e)},u=e.delay=function(n,r){void 0===r&&(r=n,n=void 0),r=+r;var o=e._cast(n,void 0),s=new e(t);return o instanceof e?(o._isBound()&&s._setBoundTo(o._boundTo),o._cancellable()&&(s._setCancellable(),s._cancellationParent=o),s._setTrace(o),s._follow(o),s.then(function(t){return e.delay(t,r)})):(s._setTrace(void 0),i(a,r,n,s),s)};e.prototype.delay=function(e){return u(this,e)},e.prototype.timeout=function(n,r){n=+n;var o=new e(t);return o._setTrace(this),this._isBound()&&o._setBoundTo(this._boundTo),this._cancellable()&&(o._setCancellable(),o._cancellationParent=this),o._follow(this),i(s,n,o,r,n),o}}},function(e,t,n){e.exports=function(e,t,r){function i(e,n){var r=t(e,o,!0===n&&e._isBound()?e._boundTo:void 0),i=r.promise();return i.isRejected()?i:(r.setHowMany(1),r.setUnwrap(),r.init(),i)}var o=n(176)(r);e.any=function(e){return i(e,!1)},e.prototype.any=function(){return i(this,!0)}}},function(e,t,n){e.exports=function(e){function t(e,t){this.constructor$(e,t),this._howMany=0,this._unwrap=!1,this._initialized=!1}var r=n(159),i=n(164).RangeError,o=r.inherits,s=r.isArray;return o(t,e),t.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-2);var e=s(this._values);if(this._holes=e?this._values.length-this.length():0,!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()){var t="(Promise.some) input array contains less than "+this._howMany+" promises";this._reject(new i(t))}}else this._resolve([])},t.prototype.init=function(){this._initialized=!0,this._init()},t.prototype.setUnwrap=function(){this._unwrap=!0},t.prototype.howMany=function(){return this._howMany},t.prototype.setHowMany=function(e){this._isResolved()||(this._howMany=e)},t.prototype._promiseFulfilled=function(e){this._isResolved()||(this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values)))},t.prototype._promiseRejected=function(e){this._isResolved()||(this._addRejected(e),this.howMany()>this._canPossiblyFulfill()&&(this._values.length===this.length()?this._reject([]):this._reject(this._values.slice(this.length()+this._holes))))},t.prototype._fulfilled=function(){return this._totalResolved},t.prototype._rejected=function(){return this._values.length-this.length()-this._holes},t.prototype._addRejected=function(e){this._values.push(e)},t.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},t.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},t}},function(e,t,n){e.exports=function(e,t){function r(n,r){var u=e._cast(n,void 0);if(u instanceof e)return s(u);if(!o(n))return i("expecting an array, a promise or a thenable");var c=new e(t);c._setTrace(r),void 0!==r&&(r._isBound()&&c._setBoundTo(r._boundTo),r._cancellable()&&(c._setCancellable(),c._cancellationParent=r));for(var l=c._fulfill,f=c._reject,h=0,d=n.length;h<d;++h){var p=n[h];(void 0!==p||a.call(n,h))&&e.cast(p)._then(l,f,void 0,c,null)}return c}var i=n(169)(e),o=n(159).isArray,s=function(e){return e.then(function(t){return r(t,e)})},a={}.hasOwnProperty;e.race=function(e){return r(e,void 0)},e.prototype.race=function(){return r(this,void 0)}}},function(e,t){e.exports=function(e){function t(e){return e["string"==typeof this?this:""+this]}e.prototype.call=function(e){for(var t=arguments.length,n=new Array(t-1),r=1;r<t;++r)n[r-1]=arguments[r];return this._then(function(t){return t[e].apply(t,n)},void 0,void 0,void 0,void 0)},e.prototype.get=function(e){return this._then(t,void 0,void 0,e,void 0)}}},function(e,t,n){e.exports=function(e){function t(t){for(var n=this instanceof e?this._settledValue:this,r=n.length,i=new Array(r),o=0,s=0;s<r;++s)t[s]&&(i[o++]=n[s]);return i.length=o,i}n(159).isArray;var r={ref:null};e.filter=function(n,i){return e.map(n,i,r)._then(t,void 0,void 0,r.ref,void 0)},e.prototype.filter=function(e){return this.map(e,r)._then(t,void 0,void 0,r.ref,void 0)}}},function(e,t,n){e.exports=function(e,t,r){var i=n(181)(e,r),o=n(164).TypeError,s=n(159).deprecated;e.coroutine=function(e){if("function"!=typeof e)throw new o("generatorFunction must be a function");var t=i;return function(){var n=e.apply(this,arguments),r=new t(void 0,void 0);return r._generator=n,r._next(void 0),r.promise()}},e.coroutine.addYieldHandler=i.addYieldHandler,e.spawn=function(n){if(s("Promise.spawn is deprecated. Use Promise.coroutine instead."),"function"!=typeof n)return t("generatorFunction must be a function");var r=new i(n,this),o=r.promise();return r._run(e.spawn),o}}},function(e,t,n){e.exports=function(e,t){function r(t){for(var n=f,i=c,o=e,s=n.length,a=0;a<s;++a){var u=l(n[a],void 0,t);if(u===i)return o.reject(i.e);var h=o._cast(u,r,void 0);if(h instanceof o)return h}return null}function i(n,r){(this._promise=new e(t))._setTrace(void 0),this._generatorFunction=n,this._receiver=r,this._generator=void 0}var o=n(164),s=o.TypeError,a=n(159),u=a.isArray,c=a.errorObj,l=a.tryCatch1,f=[];return i.prototype.promise=function(){return this._promise},i.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},i.prototype._continue=function t(n){if(n===c){this._generator=void 0;var i=o.canAttach(n.e)?n.e:new Error(n.e+"");return this._promise._attachExtraTrace(i),void this._promise._reject(n.e,i)}var a=n.value;if(!0===n.done)this._generator=void 0,this._promise._tryFollow(a)||this._promise._fulfill(a);else{var l=e._cast(a,t,void 0);if(!(l instanceof e)&&null===(l=u(l)?e.all(l):r(l)))return void this._throw(new s("A value was yielded that could not be treated as a promise"));l._then(this._next,this._throw,void 0,this,null)}},i.prototype._throw=function(e){o.canAttach(e)&&this._promise._attachExtraTrace(e),this._continue(l(this._generator.throw,this._generator,e))},i.prototype._next=function(e){this._continue(l(this._generator.next,this._generator,e))},i.addYieldHandler=function(e){if("function"!=typeof e)throw new s("fn must be a function");f.push(e)},i}},function(e,t,n){e.exports=function(e,t,r,i){function o(e){return s(e,this[0],this[1],this[2])}function s(t,n,s,u){if("function"!=typeof n)return i("fn must be a function");var c=void 0;!0===s?t._isBound()&&(c=t._boundTo):!1!==s&&(c=s);var l=void 0!==u;if(l&&(u.ref=t),t instanceof e){var h=[n,c,u];return t._then(o,void 0,void 0,h,void 0)}if(!f(t))return i("expecting an array, a promise or a thenable");var d=new e(r);return void 0!==c&&d._setBoundTo(c),d._setTrace(void 0),new a(d,n,t,c,l).init(),d}function a(e,t,n,r,i){this.shouldUnwrapItems=i,this.index=0,this.items=n,this.callback=t,this.receiver=r,this.promise=e,this.result=new Array(n.length)}var u=e.all,c=n(159),l=n(164).canAttach,f=c.isArray,h=e._cast,d={};c.inherits(a,t),a.prototype.init=function(){for(var t=this.items,n=t.length,r=this.result,i=!1,o=0;o<n;++o){var s=h(t[o],void 0);s instanceof e?s.isPending()?(r[o]=d,s._proxyPromiseArray(this,o)):s.isFulfilled()?r[o]=s.value():(s._unsetRejectionIsUnhandled(),i||(this.reject(s.reason()),i=!0)):r[o]=s}i||this.iterate()},a.prototype.isResolved=function(){return null===this.promise},a.prototype._promiseProgressed=function(e){this.isResolved()||this.promise._progress(e)},a.prototype._promiseFulfilled=function(e,t){this.isResolved()||(this.result[t]=e,this.shouldUnwrapItems&&(this.items[t]=e),this.index===t&&this.iterate())},a.prototype._promiseRejected=function(e){this.reject(e)},a.prototype.reject=function(e){if(!this.isResolved()){var t=l(e)?e:new Error(e+"");this.promise._attachExtraTrace(t),this.promise._reject(e,t)}},a.prototype.iterate=function(){for(var e=this.index,t=this.items,n=this.result,r=t.length,n=this.result,i=this.receiver,o=this.callback;e<r;++e){var s=n[e];if(s===d)return void(this.index=e);try{n[e]=o.call(i,s,e,r)}catch(e){return this.reject(e)}}this.promise._follow(u(n)),this.items=this.result=this.callback=this.promise=null},e.prototype.map=function(e,t){return s(this,e,!0,t)},e.map=function(e,t,n){return s(e,t,!1,n)}}},function(e,t,n){e.exports=function(e){function t(e){throw e}function r(e,n){var r=this,i=void 0===e?u(r,n,null):a(r,n,null,e);i===c&&s.invokeLater(t,void 0,i.e)}function i(e,n){var r=u(this,n,e);r===c&&s.invokeLater(t,void 0,r.e)}var o=n(159),s=n(161),a=o.tryCatch2,u=o.tryCatch1,c=o.errorObj;e.prototype.nodeify=function(e){return"function"==typeof e&&this._then(r,i,void 0,e,this._isBound()?this._boundTo:null),this}}},function(e,t,n){e.exports=function(e,t){function r(e){return!0===e.__isPromisified__}function i(e,t){return!!(t+"Async"in e)&&r(e[t+"Async"])}function o(e){for(var t=0;t<e.length;t+=2){var n=e[t];if(b.test(n))for(var r=n.replace(b,""),i=0;i<e.length;i+=2)if(e[i]===r)throw new m("Cannot promisify an API that has normal methods with Async-suffix")}}function s(e){for(var t=[e],n=Math.max(0,e-1-5),r=e-1;r>=n;--r)r!==e&&t.push(r);for(r=e+1;r<=5;++r)t.push(r);return t}function a(e){for(var t=new Array(e),n=0;n<t.length;++n)t[n]="_arg"+n;return t.join(", ")}function u(e){return"number"==typeof e.length?Math.max(Math.min(e.length,1024),0):0}function c(e){return k.test(e)?"."+e:"['"+e.replace(/(['\\])/g,"\\$1")+"']"}function l(e,t,n){if(n){for(var r=w(e),i=0,o=r.length;i<o;i+=2){var s=r[i],a=r[i+1];e[s+"Async"]=E(s,f,s,a)}return h.toFastProperties(e),e}return E(e,t,void 0,e)}var f={},h=n(159),d=n(160),p=n(168)._nodebackForPromise,g=h.withAppended,_=h.maybeWrapAsError,v=h.canEvaluate,y=h.deprecated,m=n(164).TypeError,b=new RegExp("Async$"),w=function(){if(d.isES5){var e=Object.create,t=Object.getOwnPropertyDescriptor;return function(n){for(var s=[],a=e(null),u=n;null!==n;){for(var c=d.keys(n),l=0,f=c.length;l<f;++l){var h=c[l];if(!a[h]){a[h]=!0;var p=t(n,h);null==p||"function"!=typeof p.value||r(p.value)||i(u,h)||s.push(h,p.value)}}n=d.getPrototypeOf(n)}return o(s),s}}return function(e){var t=[];for(var n in e){var s=e[n];"function"!=typeof s||r(s)||i(e,n)||t.push(n,s)}return o(t),t}}(),k=/^[a-z$_][a-z$_0-9]*$/i,E=v?function(n,r,i,o){function l(e){for(var t=new Array(e),i=0,o=t.length;i<o;++i)t[i]="arguments["+i+"]";var s=e>0?",":"";return"string"==typeof n&&r===f?"this"+c(n)+"("+t.join(",")+s+" fn);break;":(void 0===r?"callback("+t.join(",")+s+" fn);":"callback.call("+(r===f?"this":"receiver")+", "+t.join(",")+s+" fn);")+"break;"}var h=Math.max(0,u(o)-1),d=s(h),v="string"==typeof i?i+"Async":"promisified";return k.test(v)||(v="promisified"),new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","var ret = function "+v+"("+a(h)+') {"use strict";var len = arguments.length;var promise = new Promise(INTERNAL);promise._setTrace(void 0);var fn = nodebackForPromise(promise);try {switch(len) {'+function(){for(var e="",t=0;t<d.length;++t)e+="case "+d[t]+":"+l(d[t]);return e+="default: var args = new Array(len + 1);var i = 0;for (var i = 0; i < len; ++i) {    args[i] = arguments[i];}args[i] = fn;"+("string"==typeof n?"this"+c(n)+".apply(":"callback.apply(")+(r===f?"this":"receiver")+", args); break;"}()+"}}catch(e){ var wrapped = maybeWrapAsError(e);promise._attachExtraTrace(wrapped);promise._reject(wrapped);}return promise;}; ret.__isPromisified__ = true; return ret;")(e,n,r,g,_,p,t)}:function(n,r){function i(){var i=r;r===f&&(i=this),"string"==typeof n&&(n=i[n]);var o=new e(t);o._setTrace(void 0);var s=p(o);try{n.apply(i,g(arguments,s))}catch(e){var a=_(e);o._attachExtraTrace(a),o._reject(a)}return o}return i.__isPromisified__=!0,i};e.promisify=function(e,t){if("object"===(void 0===e?"undefined":_typeof(e))&&null!==e)return y("Promise.promisify for promisifying entire objects is deprecated. Use Promise.promisifyAll instead."),l(e,t,!0);if("function"!=typeof e)throw new m("fn must be a function");return r(e)?e:l(e,arguments.length<2?f:t,!1)},e.promisifyAll=function(e){if("function"!=typeof e&&"object"!==(void 0===e?"undefined":_typeof(e)))throw new m("the target of promisifyAll must be an object or a function");return l(e,void 0,!0)}}},function(e,t,n){e.exports=function(e,t){function r(t,n){var r,o=e._cast(t,void 0);return a(o)?(o instanceof e?r=o._then(e.props,void 0,void 0,void 0,void 0):(r=new i(o,!0===n&&o._isBound()?o._boundTo:void 0).promise(),n=!1),!0===n&&o._isBound()&&r._setBoundTo(o._boundTo),r):s("cannot await properties of a non-object")}var i=n(186)(e,t),o=n(159),s=n(169)(e),a=o.isObject;e.prototype.props=function(){return r(this,!0)},e.props=function(e){return r(e,!1)}}},function(e,t,n){e.exports=function(e,t){function r(e,t){for(var n=o.keys(e),r=new Array(n.length),i=0,s=r.length;i<s;++i)r[i]=e[n[i]];if(this.constructor$(r,t),!this._isResolved())for(var i=0,s=n.length;i<s;++i)r.push(n[i])}var i=n(159).inherits,o=n(160);return i(r,t),r.prototype._init=function(){this._init$(void 0,-3)},r.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()&&(this._values[t]=e,++this._totalResolved>=this._length)){for(var n={},r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i];this._resolve(n)}},r.prototype._promiseProgressed=function(e,t){this._isResolved()||this._promise._progress({key:this._values[t+this.length()],value:e})},t.PropertiesPromiseArray=r,r}},function(e,t){e.exports=function(e,t,n,r,i){function o(t,n,r,o,s){this.promise=new e(i),this.index=n,this.length=o.length,this.items=o,this.callback=t,this.receiver=s,this.accum=r}function s(e,t){var n=this,r=void 0;"function"!=typeof n&&(r=n.receiver,n=n.fn);var i=e.length,s=void 0,a=0;void 0!==t?(s=t,a=0):(a=1,i>0&&(s=e[0]));var u=a;if(u>=i)return s;var c=new o(n,u,s,e,r);return c.iterate(),c.promise}function a(e){var t=this.fn,n=this.initialValue;return s.call(t,e,n)}function u(e,t,n,r){return n._then(function(n){return c(e,t,n,r)},void 0,void 0,void 0,void 0)}function c(i,o,c,l){if("function"!=typeof o)return r("fn must be a function");if(!0===l&&i._isBound()&&(o={fn:o,receiver:i._boundTo}),void 0!==c){if(c instanceof e){if(!c.isFulfilled())return u(i,o,c,l);c=c._settledValue}return t(i,n,!0===l&&i._isBound()?i._boundTo:void 0).promise()._then(a,void 0,void 0,{fn:o,initialValue:c},void 0)}return t(i,n,!0===l&&i._isBound()?i._boundTo:void 0).promise()._then(s,void 0,void 0,o,void 0)}o.prototype.reject=function(e){this.promise._reject(e)},o.prototype.fulfill=function(e,t){this.accum=e,this.index=t+1,this.iterate()},o.prototype.iterate=function(){for(var t=this.index,n=this.length,r=this.items,i=this.accum,o=this.receiver,s=this.callback;t<n;++t)if(i=s.call(o,i,r[t],t,n),(i=e._cast(i,void 0))instanceof e)return void i._then(this.fulfill,this.reject,void 0,this,t);this.promise._fulfill(i)},e.reduce=function(e,t,n){return c(e,t,n,!1)},e.prototype.reduce=function(e,t){return c(this,e,t,!0)}}},function(e,t,n){e.exports=function(e,t,r){function i(e,n){return t(e,o,!0===n&&e._isBound()?e._boundTo:void 0).promise()}var o=n(189)(e,r);e.settle=function(e){return i(e,!1)},e.prototype.settle=function(){return i(this,!0)}}},function(e,t,n){e.exports=function(e,t){function r(e,t){this.constructor$(e,t)}var i=e.PromiseInspection;return(0,n(159).inherits)(r,t),r.prototype._promiseResolved=function(e,t){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){var n=new i;n._bitField=268435456,n._settledValue=e,this._promiseResolved(t,n)}},r.prototype._promiseRejected=function(e,t){if(!this._isResolved()){var n=new i;n._bitField=134217728,n._settledValue=e,this._promiseResolved(t,n)}},r}},function(e,t,n){e.exports=function(e,t,r,i){function o(e,n,r){if((0|n)!==n||n<0)return i("expecting a positive integer");var o=t(e,s,!0===r&&e._isBound()?e._boundTo:void 0),a=o.promise();return a.isRejected()?a:(o.setHowMany(n),o.init(),a)}var s=n(176)(r);e.some=function(e,t){return o(e,t,!1)},e.prototype.some=function(e){return o(this,e,!0)}}},function(e,t,n){e.exports=function(e,t){var r=n(159),i=n(161),o=n(164),s=r.tryCatch1,a=r.errorObj;e.prototype.progressed=function(e){return this._then(void 0,void 0,e,void 0,void 0)},e.prototype._progress=function(e){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(e)},e.prototype._progressHandlerAt=function(e){return 0===e?this._progressHandler0:this[e+2-5]},e.prototype._doProgressWith=function(t){var n=t.value,r=t.handler,i=t.promise,u=t.receiver;this._pushContext();var c=s(r,u,n);if(this._popContext(),c===a){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var l=o.canAttach(c.e)?c.e:new Error(c.e+"");i._attachExtraTrace(l),i._progress(c.e)}}else c instanceof e?c._then(i._progress,null,null,i,void 0):i._progress(c)},e.prototype._progressUnchecked=function(n){if(this.isPending())for(var r=this._length(),o=this._progress,s=0;s<r;s+=5){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:n}):i.invoke(o,u,n);else{var c=this._receiverAt(s);"function"==typeof a?a.call(c,n,u):c instanceof e&&c._isProxied()?c._progressUnchecked(n):t(c,u)&&c._promiseProgressed(n,u)}}}}},function(e,t,n){e.exports=function(e,t){var r=n(164),i=n(161),o=r.CancellationError;e.prototype._cancel=function(){if(!this.isCancellable())return this;for(var e,t=this;void 0!==(e=t._cancellationParent)&&e.isCancellable();)t=e;var n=new o;t._attachExtraTrace(n),t._rejectUnchecked(n)},e.prototype.cancel=function(){return this.isCancellable()?(i.invokeLater(this._cancel,this,void 0),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var n=new e(t);return n._setTrace(this),n._follow(this),n._unsetCancellable(),this._isBound()&&n._setBoundTo(this._boundTo),n},e.prototype.fork=function(e,t,n){var r=this._then(e,t,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}}},function(e,t,n){var r=n(67),i=n(155),o=6e4;e.exports=function(e){return function(){var t={};if("request"in e)throw new Error("Socket already has a request property");var n=e;return e.onmessage=function(r){var i=r.data;if("{"==i.charAt(0)){var o=JSON.parse(i),s=t[o.id];if(s)clearTimeout(s.timeout),delete t[o.id],o.error?s.reject(new Error(o.error)):s.resolve(o.message);else if("id"in o)try{n.onrequest(o.message).then(function(t){var n={id:o.id,message:t,error:null};e.send(JSON.stringify(n))}).catch(function(t){var n={id:o.id,message:null,error:t.message||t.toString()};e.send(JSON.stringify(n))})}catch(t){var a={id:o.id,message:null,error:t.message||t.toString()};e.send(JSON.stringify(a))}else n.onrequest(o.message)}},n.request=function(n){return new i(function(i,s){var a=r.v1(),u={id:a,message:n};t[a]={resolve:i,reject:s,timeout:setTimeout(function(){delete t[a],s(new Error("Timeout"))},o)},e.send(JSON.stringify(u))})},n.notify=function(t){return new i(function(n,r){var i={message:t};e.send(JSON.stringify(i),function(){n(null)})})},n.onrequest=function(e){return i.reject("No onrequest handler implemented")},n}()}},function(e,t){function n(e,t){this.id=e,this._send=t,this.listeners={}}n.prototype.send=function(e,t){return this._send(this.id,e,t)},n.prototype.on=function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)},n.prototype.emit=function(e,t,n){var r=this.listeners[e];if(r)for(var i=0,o=r.length;i<o;i++)(0,r[i])(t,n)},e.exports=n},function(e,t,n){function r(e,t,n){this.transport=e,this.id=t,this.transport.host.create(t).on("message",n),this.ready=i.resolve(this)}var i=n(2);n(150);r.prototype.send=function(e,t){return this.transport.host.send(this.id,e,t)},r.prototype.close=function(){this.transport.host.remove(this.id)},e.exports=r},function(e,t,n){function r(e){this.id=e&&e.id||null,this.networkId=null,this.agents={},this.outstandingRequests={},this.outstandingMessages={},this.url=e&&e.url||"http://127.0.0.1:3000/agents/:id",this.parsedUrl=c.parse(this.url),this.remoteUrl=e&&e.remoteUrl,this.localShortcut=!e||!1!==e.localShortcut,this.httpTimeout=e&&e.httpTimeout||2e3,this.httpResponseTimeout=e&&e.httpResponseTimeout||200,this.port=e&&e.port||this.parsedUrl.port||3e3,this.path=this.parsedUrl.pathname.replace(":id",""),"undefined"!=typeof window&&(this.send=this.webSend)}var i=n(197),o=n(2),s=n(147),a=n(216),u=n(12),c=n(14);(r.prototype=new s).type="http",r.prototype.getAgentId=function(e){return e.pathname.slice(e.pathname.lastIndexOf("/")+1)},r.prototype.connect=function(e,t){return void 0===this.server&&"undefined"==typeof window&&this.initiateServer(),this.outstandingRequests[e]={},this.outstandingMessages[e]={},new a(this,e,t)},r.prototype.send=function(e,t,n){var r=this;return new o(function(o,s){var a=c.parse(t),l=c.parse(e),f=r.getAgentId(l),h=u();if(1==r.localShortcut){var d=r.getAgentId(a),p=a.pathname.replace(d,"");if(a.hostname==l.hostname&&a.port==l.port&&p==r.path&&void 0!==r.agents[d])return r.agents[d](f,n),void o()}if("object"==(void 0===n?"undefined":_typeof(n))){var g=r.outstandingRequests[f];if(void 0!==g[n.id]){var _=g[n.id];return _.response.end(JSON.stringify(n)),clearTimeout(_.timeout),delete g[n.id],void o()}n=JSON.stringify(n)}var v={host:a.hostname,port:a.port,path:a.path,method:"POST",headers:{"x-eve-senderurl":e,"Content-type":"text/plain"}},y=i.request(v,function(e){e.setEncoding("utf8"),clearTimeout(r.outstandingMessages[f][h].timeout),e.on("data",function(e){var n;try{n=JSON.parse(e)}catch(t){n=e}"object"!=(void 0===n?"undefined":_typeof(n))||void 0===n.__httpError__?(r.agents[f](t,n),o()):s(new Error(n.__httpError__))})});r.outstandingMessages[f][h]={timeout:setTimeout(function(){y.abort(),s(new Error("Cannot connect to "+t))},r.httpTimeout),reject:s},y.on("error",function(e){s(e)}),y.write(n),y.end()})},r.prototype.webSend=function(e,t,n){var r=this;return new o(function(i,o){"object"==(void 0===n?"undefined":_typeof(n))&&(n=JSON.stringify(n));var s=r.getAgentId(c.parse(e)),a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e="";a.responseText.length>0&&(e=JSON.parse(a.responseText)),r.agents[s](t,e),i()}else 4==a.readyState&&o(new Error("http.status:"+a.status))},a.open("POST",t,!0),a.setRequestHeader("Content-Type","text/plain"),a.send(n)})},r.prototype.processRequest=function(e,t){var n=this,r=e.url,i={};i["Access-Control-Allow-Origin"]="*",i["Access-Control-Allow-Credentials"]=!0,i["Content-Type"]="text/plain";var o=n.getAgentId(c.parse(r)),s="unknown";void 0!==e.headers["x-eve-senderurl"]&&(s=e.headers["x-eve-senderurl"]);var a="";e.on("data",function(t){(a+=t).length>3e7&&e.connection.destroy()}),e.on("end",function(){var e,r=!1;try{e=JSON.parse(a)}catch(t){e=a}r=e.jsonrpc&&"2.0"==e.jsonrpc||r,r=e.type&&"request"==e.type||r,t.writeHead(200,i);var u=n.agents[o];if(void 0===u){var c=new Error('Agent: "'+o+'" does not exist.');t.end(JSON.stringify({__httpError__:c.message||c.toString()}))}else 1==r?(n.outstandingRequests[o][e.id]={response:t,timeout:setTimeout(function(){t.end("timeout"),delete n.outstandingRequests[o][e.id]},n.httpResponseTimeout)},u(s,e)):(t.end(""),void 0!==u&&u(s,e))})},r.prototype.initiateServer=function(){if(void 0===this.server){var e=this;this.server=i.createServer(function(t,n){if("OPTIONS"==t.method){var r={};r["Access-Control-Allow-Origin"]="*",r["Access-Control-Allow-Methods"]="POST, OPTIONS",r["Access-Control-Allow-Credentials"]=!0,r["Access-Control-Max-Age"]="86400",r["Access-Control-Allow-Headers"]="X-Requested-With, Access-Control-Allow-Origin, X-HTTP-Method-Override, Content-Type, Authorization, Accept",n.writeHead(200,r),n.end()}else"POST"==t.method&&e.processRequest(t,n)}),this.server.on("error",function(t){throw"EADDRINUSE"==t.code?new Error("ERROR: Could not start HTTP server. Port "+e.port+" is occupied."):new Error(t)}),this.server.listen(this.port,function(){})}else this.server.close(),this.server=void 0,this.initiateServer()},r.prototype.close=function(){for(var e in this.outstandingRequests)if(this.outstandingRequests.hasOwnProperty(e)){var t=this.outstandingRequests[e];for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],i=new Error("Server shutting down.");r.response.end(JSON.stringify({__httpError__:i.message||i.toString()}))}}this.server&&this.server.close(),this.server=null},e.exports=r},function(e,t,n){(function(e){var r=n(198),i=n(214),o=n(215),s=n(14),a=t;a.request=function(t,n){t="string"==typeof t?s.parse(t):i(t);var o=-1===e.location.protocol.search(/^https?:$/)?"http:":"",a=t.protocol||o,u=t.hostname||t.host,c=t.port,l=t.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),t.url=(u?a+"//"+u:"")+(c?":"+c:"")+l,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var f=new r(t);return n&&f.on("response",n),f},a.get=function(e,t){var n=a.request(e,t);return n.end(),n},a.Agent=function(){},a.Agent.defaultMaxSockets=4,a.STATUS_CODES=o,a.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(t,function(){return this}())},function(e,t,n){(function(t,r,i){function o(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}function s(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}var a=n(199),u=n(97),c=n(200),l=n(201),f=n(213),h=c.IncomingMessage,d=c.readyStates,p=e.exports=function(e){var n=this;l.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){n.setHeader(t,e.headers[t])});var r,i=!0;if("disable-fetch"===e.mode||"timeout"in e)i=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=o(r,i),n.on("finish",function(){n._onFinish()})};u(p,l.Writable),p.prototype.setHeader=function(e,t){var n=this,r=e.toLowerCase();-1===g.indexOf(r)&&(n._headers[r]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},p.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var n=e._opts,o=e._headers,s=null;"GET"!==n.method&&"HEAD"!==n.method&&(s=a.blobConstructor?new r.Blob(e._body.map(function(e){return f(e)}),{type:(o["content-type"]||{}).value||""}):t.concat(e._body).toString());var u=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,n=o[e].value;Array.isArray(n)?n.forEach(function(e){u.push([t,e])}):u.push([t,n])}),"fetch"===e._mode)r.fetch(e._opts.url,{method:e._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var c=e._xhr=new r.XMLHttpRequest;try{c.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}"responseType"in c&&(c.responseType=e._mode.split(":")[0]),"withCredentials"in c&&(c.withCredentials=!!n.withCredentials),"text"===e._mode&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in n&&(c.timeout=n.timeout,c.ontimeout=function(){e.emit("timeout")}),u.forEach(function(e){c.setRequestHeader(e[0],e[1])}),e._response=null,c.onreadystatechange=function(){switch(c.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(c.onprogress=function(){e._onXHRProgress()}),c.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{c.send(s)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}}}},p.prototype._onXHRProgress=function(){var e=this;s(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new h(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},p.prototype._write=function(e,t,n){this._body.push(e),n()},p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},p.prototype.end=function(e,t,n){var r=this;"function"==typeof e&&(n=e,e=void 0),l.Writable.prototype.end.call(r,e,t,n)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(t,n(68).Buffer,function(){return this}(),n(80))},function(e,t){(function(e){function n(){if(void 0!==o)return o;if(e.XMLHttpRequest){o=new e.XMLHttpRequest;try{o.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){o=null}}else o=null;return o}function r(e){var t=n();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function i(e){return"function"==typeof e}t.fetch=i(e.fetch)&&i(e.ReadableStream),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var o,s=void 0!==e.ArrayBuffer,a=s&&i(e.ArrayBuffer.prototype.slice);t.arraybuffer=t.fetch||s&&r("arraybuffer"),t.msstream=!t.fetch&&a&&r("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&s&&r("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!n()&&i(n().overrideMimeType),t.vbArray=i(e.VBArray),o=null}).call(t,function(){return this}())},function(e,t,n){(function(e,r,i){var o=n(199),s=n(97),a=n(201),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=t.IncomingMessage=function(t,n,i){var s=this;if(a.Readable.call(s),s._mode=i,s.headers={},s.rawHeaders=[],s.trailers={},s.rawTrailers=[],s.on("end",function(){e.nextTick(function(){s.emit("close")})}),"fetch"===i){s._fetchResponse=n,s.url=n.url,s.statusCode=n.status,s.statusMessage=n.statusText,n.headers.forEach(function(e,t){s.headers[t.toLowerCase()]=e,s.rawHeaders.push(t,e)});var u=n.body.getReader();!function e(){u.read().then(function(t){s._destroyed||(t.done?s.push(null):(s.push(new r(t.value)),e()))}).catch(function(e){s.emit("error",e)})}()}else if(s._xhr=t,s._pos=0,s.url=t.responseURL,s.statusCode=t.status,s.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===s.headers[n]&&(s.headers[n]=[]),s.headers[n].push(t[2])):void 0!==s.headers[n]?s.headers[n]+=", "+t[2]:s.headers[n]=t[2],s.rawHeaders.push(t[1],t[2])}}),s._charset="x-user-defined",!o.overrideMimeType){var c=s.rawHeaders["mime-type"];if(c){var l=c.match(/;\s*charset=([^;])(;|$)/);l&&(s._charset=l[1].toLowerCase())}s._charset||(s._charset="utf-8")}};s(c,a.Readable),c.prototype._read=function(){},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{n=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==n){e.push(new r(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var o=n.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new r(o.length),a=0;a<o.length;a++)s[a]=255&o.charCodeAt(a);e.push(s)}else e.push(o,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;n=t.response,e.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==u.LOADING||!n)break;e.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==u.LOADING)break;var c=new i.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new r(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(n)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(t,n(80),n(68).Buffer,function(){return this}())},function(e,t,n){(t=e.exports=n(202)).Stream=t,t.Readable=t,t.Writable=n(209),t.Duplex=n(208),t.Transform=n(211),t.PassThrough=n(212)},function(e,t,n){(function(t,r){function i(e){return L.from(e)}function o(e){return L.isBuffer(e)||e instanceof U}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?M(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function a(e,t){B=B||n(208),e=e||{},this.objectMode=!!e.objectMode,t instanceof B&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(q||(q=n(210).StringDecoder),this.decoder=new q(e.encoding),this.encoding=e.encoding)}function u(e){if(B=B||n(208),!(this instanceof u))return new u(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),j.call(this)}function c(e,t,n,r,o){var s=e._readableState;if(null===t)s.reading=!1,g(e,s);else{var a;o||(a=f(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===L.prototype||(t=i(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?l(e,s,t,!1):y(e,s)):l(e,s,t,!1))):r||(s.reading=!1)}return h(s)}function l(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e)),y(e,t)}function f(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){return e>=V?e=V:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_(e)}}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(z("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?N(v,e):v(e))}function v(e){z("emit readable"),e.emit("readable"),S(e)}function y(e,t){t.readingMore||(t.readingMore=!0,N(m,e,t))}function m(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(z("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;z("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&I(e,"data")&&(t.flowing=!0,S(e))}}function w(e){z("readable nexttick read 0"),e.read(0)}function k(e,t){t.resumeScheduled||(t.resumeScheduled=!0,N(E,e,t))}function E(e,t){t.reading||(z("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(z("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=T(e,t.buffer,t.decoder),n}function T(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?O(e,t):C(e,t),r}function O(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}function C(e,t){var n=L.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,N(R,t,e))}function R(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var N=n(100);e.exports=u;var B,M=n(203);u.ReadableState=a;n(96).EventEmitter;var I=function(e,t){return e.listeners(t).length},j=n(204),L=n(103).Buffer,U=t.Uint8Array||function(){},D=n(105);D.inherits=n(97);var F=n(205),z=void 0;z=F&&F.debuglog?F.debuglog("stream"):function(){};var q,H=n(206),G=n(207);D.inherits(u,j);var K=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),u.prototype.destroy=G.destroy,u.prototype._undestroy=G.undestroy,u.prototype._destroy=function(e,t){this.push(null),t(e)},u.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=L.from(e,t),t=""),n=!0),c(this,e,t,!1,n)},u.prototype.unshift=function(e){return c(this,e,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(e){return q||(q=n(210).StringDecoder),this._readableState.decoder=new q(e),this._readableState.encoding=e,this};var V=8388608;u.prototype.read=function(e){z("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return z("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):_(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&A(this),null;var r=t.needReadable;z("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&z("length less than watermark",r=!0),t.ended||t.reading?z("reading or ended",r=!1):r&&(z("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t)));var i;return null===(i=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(e,t){function n(e,t){z("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){z("onend"),e.end()}function o(){z("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",n),h.removeListener("end",i),h.removeListener("end",f),h.removeListener("data",a),_=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function a(t){z("ondata"),v=!1,!1!==e.write(t)||v||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==P(d.pipes,e))&&!_&&(z("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,v=!0),h.pause())}function u(t){z("onerror",t),f(),e.removeListener("error",u),0===I(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){z("onfinish"),e.removeListener("close",c),f()}function f(){z("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,z("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:f;d.endEmitted?N(p):h.once("end",p),e.on("unpipe",n);var g=b(h);e.on("drain",g);var _=!1,v=!1;return h.on("data",a),s(e,"error",u),e.once("close",c),e.once("finish",l),e.emit("pipe",h),d.flowing||(z("pipe resume"),h.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=P(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},u.prototype.on=function(e,t){var n=j.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):N(w,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(z("resume"),e.flowing=!0,k(this,e)),this},u.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(z("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){z("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<K.length;o++)e.on(K[o],r.emit.bind(r,K[o]));return r._read=function(t){z("wrapped _read",t),n&&(n=!1,e.resume())},r},u._fromList=x}).call(t,function(){return this}(),n(80))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(96).EventEmitter},function(e,t){},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=n(103).Buffer;e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}()},function(e,t,n){function r(e,t){e.emit("error",t)}var i=n(100);e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;o||s?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i(r,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);c.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var s=n(100),a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var u=n(105);u.inherits=n(97);var c=n(202),l=n(209);u.inherits(r,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var d=f[h];r.prototype[d]||(r.prototype[d]=l.prototype[d])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),s(t,e)}},function(e,t,n){(function(t,r,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){O(t,e)}}function s(e){return M.from(e)}function a(e){return M.isBuffer(e)||e instanceof I}function u(){}function c(e,t){A=A||n(208),e=e||{},this.objectMode=!!e.objectMode,t instanceof A&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(e){if(A=A||n(208),!(L.call(l,this)||this instanceof A))return new l(e);this._writableState=new c(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),B.call(this)}function f(e,t){var n=new Error("write after end");e.emit("error",n),C(t,n)}function h(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),C(r,o),i=!1),i}function d(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=M.from(t,n)),t}function p(e,t,n,r,i,o){if(!n){var s=d(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,a,r,i,o);return u}function g(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function _(e,t,n,r,i){--t.pendingcb,n?(C(i,r),C(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),x(e,t))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(v(n),t)_(e,n,r,t,i);else{var o=k(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?R(m,e,n,o,i):m(e,n,o,i)}}function m(e,t,n,r){n||b(e,t),t.pendingcb--,r(),x(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,g(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t)}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(g(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function S(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,C(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function x(e,t){var n=k(t);return n&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function T(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?C(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function O(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var C=n(100);e.exports=l;var A,R=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:C;l.WritableState=c;var P=n(105);P.inherits=n(97);var N={deprecate:n(113)},B=n(204),M=n(103).Buffer,I=i.Uint8Array||function(){},j=n(207);P.inherits(l,B),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,"buffer",{get:N.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var L;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!L.call(this,e)||e&&e._writableState instanceof c}})):L=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=a(e)&&!r.objectMode;return o&&!M.isBuffer(e)&&(e=s(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?f(this,n):(o||h(this,r,e,n))&&(r.pendingcb++,i=p(this,r,o,e,t,n)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},l.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||T(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=j.destroy,l.prototype._undestroy=j.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(80),n(111).setImmediate,function(){return this}())},function(e,t,n){function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(_.isEncoding===v||!v(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=l,this.end=f,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=h,this.end=d,t=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function a(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function u(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(n+2)}}function c(e){var t=this.lastTotal-this.lastNeed,n=u(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function f(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var _=n(103).Buffer,v=_.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},o.prototype.text=function(e,t){var n=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(t)})}function s(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var a=n(208),u=n(105);u.inherits=n(97),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;a.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}e.exports=r;var i=n(211),o=n(105);o.inherits=n(97),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){var r=n(104).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(r.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,n){function r(e,t,n){if(this.transport=e,this.id=t,this.id in this.transport.agents)throw new Error("Agent with id "+t+" already exists");this.transport.agents[this.id]=n,this.ready=i.resolve(this)}var i=n(2);n(150);r.prototype.send=function(e,t){var n,r=this.transport.url.replace(":id",this.id);return-1!==e.indexOf("://")?n=e:void 0!==this.transport.remoteUrl&&(n=this.transport.remoteUrl.replace(":id",e)),this.transport.send(r,n,t)},r.prototype.close=function(){delete this.transport.agents[this.id]},e.exports=r},function(e,t,n){function r(e){this.id=e&&e.id||null,this.networkId=this.id||null,this.default=e&&e.default||!1,this.agents={}}var i=n(147),o=n(218);(r.prototype=new i).type="local",r.prototype.connect=function(e,t){return new o(this,e,t)},r.prototype.close=function(){this.agents={}},e.exports=r},function(e,t,n){function r(e,t,n){if(this.transport=e,this.id=t,this.id in this.transport.agents)throw new Error("Agent with id "+t+" already exists");this.transport.agents[this.id]=n,this.ready=i.resolve(this)}var i=n(2);n(150);r.prototype.send=function(e,t){var n=this.transport.agents[e];return n?(n(this.id,t),i.resolve()):i.reject(new Error("Agent with id "+e+" not found"))},r.prototype.close=function(){delete this.transport.agents[this.id]},e.exports=r},function(e,t,n){function r(e){this.id=e.id||null,this.networkId=e.publish_key||null,this.default=e.default||!1,this.pubnub=i().init(e)}function i(){if("undefined"!=typeof window){if(void 0===window.PUBNUB)throw new Error("Please load pubnub first in the browser");return window.PUBNUB}return n(221)}var o=n(147),s=n(220);(r.prototype=new o).type="pubnub",r.prototype.connect=function(e,t){return new s(this,e,t)},r.prototype.close=function(){this.pubnub=null},e.exports=r},function(e,t,n){function r(e,t,n){this.id=t,this.transport=e;var r=this;this.ready=new i(function(i,o){e.pubnub.subscribe({channel:t,message:function(e){n(e.from,e.message)},connect:function(){i(r)}})})}var i=n(2);n(150);r.prototype.send=function(e,t){var n=this;return new i(function(r,i){n.transport.pubnub.publish({channel:e,message:{from:n.id,to:e,message:t},callback:r,error:i})})},r.prototype.close=function(){this.transport.pubnub.unsubscribe({channel:this.id})},e.exports=r},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n(1)),c=r(n(40)),l=r(n(41)),f=n(42),h=(n(8),function(e){function t(e){i(this,t);var n=e.listenToBrowserNetworkEvents,r=void 0===n||n;e.db=l.default,e.sdkFamily="Web",e.networking=new c.default({get:f.get,post:f.post,sendBeacon:a});var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r&&(window.addEventListener("offline",function(){s.networkDownDetected()}),window.addEventListener("online",function(){s.networkUpDetected()})),s}return s(t,e),t}(u.default));t.default=h,e.exports=t.default},function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(2)),u=i(n(7)),c=i(n(9)),l=i(n(11)),f=i(n(12)),h=i(n(18)),d=r(n(19)),p=r(n(20)),g=r(n(21)),_=r(n(22)),v=r(n(23)),y=r(n(24)),m=r(n(25)),b=r(n(26)),w=r(n(27)),k=r(n(28)),E=r(n(29)),S=r(n(30)),x=r(n(31)),T=r(n(32)),O=r(n(33)),C=r(n(34)),A=r(n(35)),R=r(n(36)),P=r(n(37)),N=r(n(38)),B=r(n(15)),M=r(n(39)),I=i(n(16)),j=i(n(13)),L=(n(8),function(){function e(t){var n=this;o(this,e);var r=t.db,i=t.networking,s=this._config=new u.default({setup:t,db:r}),a=new c.default({config:s});i.init(s);var I={config:s,networking:i,crypto:a},j=h.default.bind(this,I,B),L=h.default.bind(this,I,k),U=h.default.bind(this,I,S),D=h.default.bind(this,I,T),F=h.default.bind(this,I,M),z=this._listenerManager=new f.default,q=new l.default({timeEndpoint:j,leaveEndpoint:L,heartbeatEndpoint:U,setStateEndpoint:D,subscribeEndpoint:F,crypto:I.crypto,config:I.config,listenerManager:z});this.addListener=z.addListener.bind(z),this.removeListener=z.removeListener.bind(z),this.removeAllListeners=z.removeAllListeners.bind(z),this.channelGroups={listGroups:h.default.bind(this,I,_),listChannels:h.default.bind(this,I,v),addChannels:h.default.bind(this,I,d),removeChannels:h.default.bind(this,I,p),deleteGroup:h.default.bind(this,I,g)},this.push={addChannels:h.default.bind(this,I,y),removeChannels:h.default.bind(this,I,m),deleteDevice:h.default.bind(this,I,w),listChannels:h.default.bind(this,I,b)},this.hereNow=h.default.bind(this,I,O),this.whereNow=h.default.bind(this,I,E),this.getState=h.default.bind(this,I,x),this.setState=q.adaptStateChange.bind(q),this.grant=h.default.bind(this,I,A),this.audit=h.default.bind(this,I,C),this.publish=h.default.bind(this,I,R),this.fire=function(e,t){return e.replicate=!1,e.storeInHistory=!1,n.publish(e,t)},this.history=h.default.bind(this,I,P),this.fetchMessages=h.default.bind(this,I,N),this.time=j,this.subscribe=q.adaptSubscribeChange.bind(q),this.unsubscribe=q.adaptUnsubscribeChange.bind(q),this.disconnect=q.disconnect.bind(q),this.reconnect=q.reconnect.bind(q),this.destroy=function(e){q.unsubscribeAll(e),q.disconnect()},this.stop=this.destroy,this.unsubscribeAll=q.unsubscribeAll.bind(q),this.getSubscribedChannels=q.getSubscribedChannels.bind(q),this.getSubscribedChannelGroups=q.getSubscribedChannelGroups.bind(q),this.encrypt=a.encrypt.bind(a),this.decrypt=a.decrypt.bind(a),this.getAuthKey=I.config.getAuthKey.bind(I.config),this.setAuthKey=I.config.setAuthKey.bind(I.config),this.setCipherKey=I.config.setCipherKey.bind(I.config),this.getUUID=I.config.getUUID.bind(I.config),this.setUUID=I.config.setUUID.bind(I.config),this.getFilterExpression=I.config.getFilterExpression.bind(I.config),this.setFilterExpression=I.config.setFilterExpression.bind(I.config)}return s(e,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}],[{key:"generateUUID",value:function(){return a.default.v4()}}]),e}());L.OPERATIONS=I.default,L.CATEGORIES=j.default,t.default=L,e.exports=t.default},function(e,t,n){var r=n(3),i=n(6),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r=n(4),i=n(5),o=r(),s=[1|o[0],o[1],o[2],o[3],o[4],o[5]],a=16383&(o[6]<<8|o[7]),u=0,c=0;e.exports=function(e,t,n){var r=t&&n||0,o=t||[],l=void 0!==(e=e||{}).clockseq?e.clockseq:a,f=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:c+1,d=f-u+(h-c)/1e4;if(d<0&&void 0===e.clockseq&&(l=l+1&16383),(d<0||f>u)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=f,c=h,a=l;var p=(1e4*(268435455&(f+=122192928e5))+h)%4294967296;o[r++]=p>>>24&255,o[r++]=p>>>16&255,o[r++]=p>>>8&255,o[r++]=255&p;var g=f/4294967296*1e4&268435455;o[r++]=g>>>8&255,o[r++]=255&g,o[r++]=g>>>24&15|16,o[r++]=g>>>16&255,o[r++]=l>>>8|128,o[r++]=255&l;for(var _=e.node||s,v=0;v<6;++v)o[r+v]=_[v];return t||i(o)}},function(e,t){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(t,function(){return this}())},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},function(e,t,n){var r=n(4),i=n(5);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),s=(n(8),function(){function e(t){var n=t.setup,i=t.db;r(this,e),this._db=i,this.instanceId="pn-"+o.default.v4(),this.secretKey=n.secretKey||n.secret_key,this.subscribeKey=n.subscribeKey||n.subscribe_key,this.publishKey=n.publishKey||n.publish_key,this.sdkFamily=n.sdkFamily,this.partnerId=n.partnerId,this.setAuthKey(n.authKey),this.setCipherKey(n.cipherKey),this.setFilterExpression(n.filterExpression),this.origin=n.origin||"pubsub.pubnub.com",this.secure=n.ssl||!1,this.restore=n.restore||!1,this.proxy=n.proxy,this.keepAlive=n.keepAlive,this.keepAliveSettings=n.keepAliveSettings,this.autoNetworkDetection=n.autoNetworkDetection||!1,this.customEncrypt=n.customEncrypt,this.customDecrypt=n.customDecrypt,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=n.logVerbosity||!1,this.suppressLeaveEvents=n.suppressLeaveEvents||!1,this.announceFailedHeartbeats=n.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=n.announceSuccessfulHeartbeats||!1,this.useInstanceId=n.useInstanceId||!1,this.useRequestId=n.useRequestId||!1,this.requestMessageCountThreshold=n.requestMessageCountThreshold,this.setTransactionTimeout(n.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(n.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(n.useSendBeacon||!0),this.setPresenceTimeout(n.presenceTimeout||300),n.heartbeatInterval&&this.setHeartbeatInterval(n.heartbeatInterval),this.setUUID(this._decideUUID(n.uuid))}return i(e,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(e){return this.authKey=e,this}},{key:"setCipherKey",value:function(e){return this.cipherKey=e,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(e){return this._db&&this._db.set&&this._db.set(this.subscribeKey+"uuid",e),this.UUID=e,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(e){return this.filterExpression=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return this._presenceTimeout=e,this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(e){return this._heartbeatInterval=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getVersion",value:function(){return"4.12.0"}},{key:"_decideUUID",value:function(e){return e||(this._db&&this._db.get&&this._db.get(this.subscribeKey+"uuid")?this._db.get(this.subscribeKey+"uuid"):"pn-"+o.default.v4())}}]),e}());t.default=s,e.exports=t.default},function(e,t){e.exports={}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=r((r(n(7)),n(10))),a=function(){function e(t){var n=t.config;i(this,e),this._config=n,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return o(e,[{key:"HMACSHA256",value:function(e){return s.default.HmacSHA256(e,this._config.secretKey).toString(s.default.enc.Base64)}},{key:"SHA256",value:function(e){return s.default.SHA256(e).toString(s.default.enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?s.default.enc.Base64.parse(e):"hex"===t.keyEncoding?s.default.enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?s.default.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?s.default.mode.ECB:s.default.mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?s.default.enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(e,t,n){return this._config.customEncrypt?this._config.customEncrypt(e):this.pnEncrypt(e,t,n)}},{key:"decrypt",value:function(e,t,n){return this._config.customDecrypt?this._config.customDecrypt(e):this.pnDecrypt(e,t,n)}},{key:"pnEncrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var r=this._getIV(n),i=this._getMode(n),o=this._getPaddedKey(t||this._config.cipherKey,n);return s.default.AES.encrypt(e,o,{iv:r,mode:i}).ciphertext.toString(s.default.enc.Base64)||e}},{key:"pnDecrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var r=this._getIV(n),i=this._getMode(n),o=this._getPaddedKey(t||this._config.cipherKey,n);try{var a=s.default.enc.Base64.parse(e),u=s.default.AES.decrypt({ciphertext:a},o,{iv:r,mode:i}).toString(s.default.enc.Utf8);return JSON.parse(u)}catch(e){return null}}}]),e}();t.default=a,e.exports=t.default},function(e,t){var n=n||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},u=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);if(t=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,i=e.min(4*t,i),t){for(var u=0;u<t;u+=o)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=i}return new s.init(u,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);!function(e){for(var t=n,r=(o=t.lib).WordArray,i=o.Hasher,o=t.algo,s=[],a=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var f;e:{f=c;for(var h=e.sqrt(f),d=2;d<=h;d++)if(!(f%d)){f=!1;break e}f=!0}f&&(8>l&&(s[l]=u(e.pow(c,.5))),a[l]=u(e.pow(c,1/3)),l++),c++}var p=[],o=o.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],f=n[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var d=p[h-15],g=p[h-2];p[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[h-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[h-16]}d=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+a[h]+p[h],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),f=l,l=c,c=u,u=s+d|0,s=o,o=i,i=r,r=d+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(o),t.HmacSHA256=i._createHmacHelper(o)}(Math),function(){var e=n,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),s=this._iKey=n.clone(),a=o.words,u=s.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<n;s++)e.push(r.charAt(o>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map;(i=r.charAt(64))&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r.indexOf(e.charAt(s-1))<<s%4*2,u=r.indexOf(e.charAt(s))>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,o,s){return((e=e+(t&n|~t&r)+i+s)<<o|e>>>32-o)+t}function r(e,t,n,r,i,o,s){return((e=e+(t&r|n&~r)+i+s)<<o|e>>>32-o)+t}function i(e,t,n,r,i,o,s){return((e=e+(t^n^r)+i+s)<<o|e>>>32-o)+t}function o(e,t,n,r,i,o,s){return((e=e+(n^(t|~r))+i+s)<<o|e>>>32-o)+t}for(var s=n,a=(c=s.lib).WordArray,u=c.Hasher,c=s.algo,l=[],f=0;64>f;f++)l[f]=4294967296*e.abs(e.sin(f+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(s=0;16>s;s++){u=e[a=n+s];e[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=this._hash.words,a=e[n+0],u=e[n+1],c=e[n+2],f=e[n+3],h=e[n+4],d=e[n+5],p=e[n+6],g=e[n+7],_=e[n+8],v=e[n+9],y=e[n+10],m=e[n+11],b=e[n+12],w=e[n+13],k=e[n+14],E=e[n+15],S=s[0],x=s[1],T=s[2],O=s[3],x=o(x=o(x=o(x=o(x=i(x=i(x=i(x=i(x=r(x=r(x=r(x=r(x=t(x=t(x=t(x=t(x,T=t(T,O=t(O,S=t(S,x,T,O,a,7,l[0]),x,T,u,12,l[1]),S,x,c,17,l[2]),O,S,f,22,l[3]),T=t(T,O=t(O,S=t(S,x,T,O,h,7,l[4]),x,T,d,12,l[5]),S,x,p,17,l[6]),O,S,g,22,l[7]),T=t(T,O=t(O,S=t(S,x,T,O,_,7,l[8]),x,T,v,12,l[9]),S,x,y,17,l[10]),O,S,m,22,l[11]),T=t(T,O=t(O,S=t(S,x,T,O,b,7,l[12]),x,T,w,12,l[13]),S,x,k,17,l[14]),O,S,E,22,l[15]),T=r(T,O=r(O,S=r(S,x,T,O,u,5,l[16]),x,T,p,9,l[17]),S,x,m,14,l[18]),O,S,a,20,l[19]),T=r(T,O=r(O,S=r(S,x,T,O,d,5,l[20]),x,T,y,9,l[21]),S,x,E,14,l[22]),O,S,h,20,l[23]),T=r(T,O=r(O,S=r(S,x,T,O,v,5,l[24]),x,T,k,9,l[25]),S,x,f,14,l[26]),O,S,_,20,l[27]),T=r(T,O=r(O,S=r(S,x,T,O,w,5,l[28]),x,T,c,9,l[29]),S,x,g,14,l[30]),O,S,b,20,l[31]),T=i(T,O=i(O,S=i(S,x,T,O,d,4,l[32]),x,T,_,11,l[33]),S,x,m,16,l[34]),O,S,k,23,l[35]),T=i(T,O=i(O,S=i(S,x,T,O,u,4,l[36]),x,T,h,11,l[37]),S,x,g,16,l[38]),O,S,y,23,l[39]),T=i(T,O=i(O,S=i(S,x,T,O,w,4,l[40]),x,T,a,11,l[41]),S,x,f,16,l[42]),O,S,p,23,l[43]),T=i(T,O=i(O,S=i(S,x,T,O,v,4,l[44]),x,T,b,11,l[45]),S,x,E,16,l[46]),O,S,c,23,l[47]),T=o(T,O=o(O,S=o(S,x,T,O,a,6,l[48]),x,T,g,10,l[49]),S,x,k,15,l[50]),O,S,d,21,l[51]),T=o(T,O=o(O,S=o(S,x,T,O,b,6,l[52]),x,T,f,10,l[53]),S,x,y,15,l[54]),O,S,u,21,l[55]),T=o(T,O=o(O,S=o(S,x,T,O,_,6,l[56]),x,T,E,10,l[57]),S,x,p,15,l[58]),O,S,w,21,l[59]),T=o(T,O=o(O,S=o(S,x,T,O,h,6,l[60]),x,T,m,10,l[61]),S,x,c,15,l[62]),O,S,v,21,l[63]);s[0]=s[0]+S|0,s[1]=s[1]+x|0,s[2]=s[2]+T|0,s[3]=s[3]+O|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=u._createHelper(c),s.HmacMD5=u._createHmacHelper(c)}(Math),function(){var e=n,t=e.lib,r=t.Base,i=t.WordArray,o=(t=e.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(a=this.cfg).hasher.create(),r=i.create(),o=r.words,s=a.keySize,a=a.iterations;o.length<s;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var c=1;c<a;c++)u=n.finalize(u),n.reset();r.concat(u)}return r.sigBytes=4*s,r}});e.EvpKDF=function(e,t,n){return o.create(n).compute(e,t)}}(),n.lib.Cipher||function(e){var t=(p=n).lib,r=t.Base,i=t.WordArray,o=t.BufferedBlockAlgorithm,s=p.enc.Base64,a=p.algo.EvpKDF,u=t.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?g:d).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?g:d).decrypt(e,t,n,r)}}}});t.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=p.mode={},l=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]},f=(t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();f.Encryptor=f.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;l.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),f.Decryptor=f.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),l.call(this,e,t,r),this._prevBlock=i}}),c=c.CBC=f,f=(p.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=(n=n-e.sigBytes%n)<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(r);n=i.create(o,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=u.extend({cfg:u.cfg.extend({mode:c,padding:f}),reset:function(){u.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},d=t.SerializableCipher=r.extend({cfg:r.extend({format:c}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,h.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),p=(p.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=i.random(8)),e=a.create({keySize:t+n}).compute(e,r),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:r})}},g=t.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:p}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=d.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,d.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=n,t=e.lib.BlockCipher,r=e.algo,i=[],o=[],s=[],a=[],u=[],c=[],l=[],f=[],h=[],d=[],p=[],g=0;256>g;g++)p[g]=128>g?g<<1:g<<1^283;for(var _=0,v=0,g=0;256>g;g++){var y=(y=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&y^99;i[_]=y,o[y]=_;var m=p[_],b=p[m],w=p[b],k=257*p[y]^16843008*y;s[_]=k<<24|k>>>8,a[_]=k<<16|k>>>16,u[_]=k<<8|k>>>24,c[_]=k,k=16843009*w^65537*b^257*m^16843008*_,l[y]=k<<24|k>>>8,f[y]=k<<16|k>>>16,h[y]=k<<8|k>>>24,d[y]=k,_?(_=m^p[p[p[w^m]]],v^=p[p[v]]):_=v=1}var E=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),r=this._keySchedule=[],o=0;o<n;o++)if(o<t)r[o]=e[o];else{var s=r[o-1];o%t?6<t&&4==o%t&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=E[o/t|0]<<24),r[o]=r[o-t]^s}for(e=this._invKeySchedule=[],t=0;t<n;t++)o=n-t,s=t%4?r[o]:r[o-4],e[t]=4>t||4>=o?s:l[i[s>>>24]]^f[i[s>>>16&255]]^h[i[s>>>8&255]]^d[i[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,u,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,h,d,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],h=e[t+3]^n[3],d=4,p=1;p<u;p++)var g=r[c>>>24]^i[l>>>16&255]^o[f>>>8&255]^s[255&h]^n[d++],_=r[l>>>24]^i[f>>>16&255]^o[h>>>8&255]^s[255&c]^n[d++],v=r[f>>>24]^i[h>>>16&255]^o[c>>>8&255]^s[255&l]^n[d++],h=r[h>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&f]^n[d++],c=g,l=_,f=v;g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&h])^n[d++],_=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^n[d++],v=(a[f>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[d++],h=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^n[d++],e[t]=g,e[t+1]=_,e[t+2]=v,e[t+3]=h},keySize:8});e.AES=t._createHelper(r)}(),n.mode.ECB=function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),e.exports=n},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=r((r((r((r(n(9)),n(7))),n(12))),n(14))),a=r(n(17)),u=r((n(8),n(13))),c=function(){function e(t){var n=t.subscribeEndpoint,r=t.leaveEndpoint,o=t.heartbeatEndpoint,a=t.setStateEndpoint,u=t.timeEndpoint,c=t.config,l=t.crypto,f=t.listenerManager;i(this,e),this._listenerManager=f,this._config=c,this._leaveEndpoint=r,this._heartbeatEndpoint=o,this._setStateEndpoint=a,this._subscribeEndpoint=n,this._crypto=l,this._channels={},this._presenceChannels={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new s.default({timeEndpoint:u})}return o(e,[{key:"adaptStateChange",value:function(e,t){var n=this,r=e.state,i=e.channels,o=void 0===i?[]:i,s=e.channelGroups,a=void 0===s?[]:s;return o.forEach(function(e){e in n._channels&&(n._channels[e].state=r)}),a.forEach(function(e){e in n._channelGroups&&(n._channelGroups[e].state=r)}),this._setStateEndpoint({state:r,channels:o,channelGroups:a},t)}},{key:"adaptSubscribeChange",value:function(e){var t=this,n=e.timetoken,r=e.channels,i=void 0===r?[]:r,o=e.channelGroups,s=void 0===o?[]:o,a=e.withPresence,u=void 0!==a&&a;this._config.subscribeKey&&""!==this._config.subscribeKey?(n&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=n),"0"!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),i.forEach(function(e){t._channels[e]={state:{}},u&&(t._presenceChannels[e]={}),t._pendingChannelSubscriptions.push(e)}),s.forEach(function(e){t._channelGroups[e]={state:{}},u&&(t._presenceChannelGroups[e]={}),t._pendingChannelGroupSubscriptions.push(e)}),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log}},{key:"adaptUnsubscribeChange",value:function(e,t){var n=this,r=e.channels,i=void 0===r?[]:r,o=e.channelGroups,s=void 0===o?[]:o;i.forEach(function(e){e in n._channels&&delete n._channels[e],e in n._presenceChannels&&delete n._presenceChannels[e]}),s.forEach(function(e){e in n._channelGroups&&delete n._channelGroups[e],e in n._presenceChannelGroups&&delete n._channelGroups[e]}),!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:i,channelGroups:s},function(e){e.affectedChannels=i,e.affectedChannelGroups=s,e.currentTimetoken=n._currentTimetoken,e.lastTimetoken=n._lastTimetoken,n._listenerManager.announceStatus(e)}),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect()}},{key:"unsubscribeAll",value:function(e){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},e)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval())}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var e=this,t=Object.keys(this._channels),n=Object.keys(this._channelGroups),r={};if(0!==t.length||0!==n.length){t.forEach(function(t){var n=e._channels[t].state;Object.keys(n).length&&(r[t]=n)}),n.forEach(function(t){var n=e._channelGroups[t].state;Object.keys(n).length&&(r[t]=n)});this._heartbeatEndpoint({channels:t,channelGroups:n,state:r},function(t){t.error&&e._config.announceFailedHeartbeats&&e._listenerManager.announceStatus(t),t.error&&e._config.autoNetworkDetection&&e._isOnline&&(e._isOnline=!1,e.disconnect(),e._listenerManager.announceNetworkDown(),e.reconnect()),!t.error&&e._config.announceSuccessfulHeartbeats&&e._listenerManager.announceStatus(t)}.bind(this))}}},{key:"_startSubscribeLoop",value:function(){this._stopSubscribeLoop();var e=[],t=[];if(Object.keys(this._channels).forEach(function(t){return e.push(t)}),Object.keys(this._presenceChannels).forEach(function(t){return e.push(t+"-pnpres")}),Object.keys(this._channelGroups).forEach(function(e){return t.push(e)}),Object.keys(this._presenceChannelGroups).forEach(function(e){return t.push(e+"-pnpres")}),0!==e.length||0!==t.length){var n={channels:e,channelGroups:t,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(n,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(e,t){var n=this;if(e.error)e.category===u.default.PNTimeoutCategory?this._startSubscribeLoop():e.category===u.default.PNNetworkIssuesCategory?(this.disconnect(),e.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){n._config.autoNetworkDetection&&!n._isOnline&&(n._isOnline=!0,n._listenerManager.announceNetworkUp()),n.reconnect(),n._subscriptionStatusAnnounced=!0;var t={category:u.default.PNReconnectedCategory,operation:e.operation,lastTimetoken:n._lastTimetoken,currentTimetoken:n._currentTimetoken};n._listenerManager.announceStatus(t)}),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(e)):e.category===u.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(e)):this._listenerManager.announceStatus(e);else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),!this._subscriptionStatusAnnounced){var r={};r.category=u.default.PNConnectedCategory,r.operation=e.operation,r.affectedChannels=this._pendingChannelSubscriptions,r.subscribedChannels=this.getSubscribedChannels(),r.affectedChannelGroups=this._pendingChannelGroupSubscriptions,r.lastTimetoken=this._lastTimetoken,r.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(r),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var i=t.messages||[],o=this._config.requestMessageCountThreshold;if(o&&i.length>=o){var s={};s.category=u.default.PNRequestMessageCountExceededCategory,s.operation=e.operation,this._listenerManager.announceStatus(s)}i.forEach(function(e){var t=e.channel,r=e.subscriptionMatch,i=e.publishMetaData;if(t===r&&(r=null),a.default.endsWith(e.channel,"-pnpres")){var o={};o.channel=null,o.subscription=null,o.actualChannel=null!=r?t:null,o.subscribedChannel=null!=r?r:t,t&&(o.channel=t.substring(0,t.lastIndexOf("-pnpres"))),r&&(o.subscription=r.substring(0,r.lastIndexOf("-pnpres"))),o.action=e.payload.action,o.state=e.payload.data,o.timetoken=i.publishTimetoken,o.occupancy=e.payload.occupancy,o.uuid=e.payload.uuid,o.timestamp=e.payload.timestamp,e.payload.join&&(o.join=e.payload.join),e.payload.leave&&(o.leave=e.payload.leave),e.payload.timeout&&(o.timeout=e.payload.timeout),n._listenerManager.announcePresence(o)}else{var s={};s.channel=null,s.subscription=null,s.actualChannel=null!=r?t:null,s.subscribedChannel=null!=r?r:t,s.channel=t,s.subscription=r,s.timetoken=i.publishTimetoken,s.publisher=e.issuingClientId,e.userMetadata&&(s.userMetadata=e.userMetadata),n._config.cipherKey?s.message=n._crypto.decrypt(e.payload):s.message=e.payload,n._listenerManager.announceMessage(s)}}),this._region=t.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&(this._subscribeCall.abort(),this._subscribeCall=null)}}]),e}();t.default=c,e.exports=t.default},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(13))),s=function(){function e(){r(this,e),this._listeners=[]}return i(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=[];this._listeners.forEach(function(n){n!==e&&t.push(n)}),this._listeners=t}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(e){this._listeners.forEach(function(t){t.presence&&t.presence(e)})}},{key:"announceStatus",value:function(e){this._listeners.forEach(function(t){t.status&&t.status(e)})}},{key:"announceMessage",value:function(e){this._listeners.forEach(function(t){t.message&&t.message(e)})}},{key:"announceNetworkUp",value:function(){var e={};e.category=o.default.PNNetworkUpCategory,this.announceStatus(e)}},{key:"announceNetworkDown",value:function(){var e={};e.category=o.default.PNNetworkDownCategory,this.announceStatus(e)}}]),e}();t.default=s,e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},e.exports=t.default},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(function(e){e&&e.__esModule}(n(15)),n(8),function(){function e(t){var n=t.timeEndpoint;r(this,e),this._timeEndpoint=n}return i(e,[{key:"onReconnection",value:function(e){this._reconnectionCallback=e}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var e=this;this._timeEndpoint(function(t){t.error||(clearInterval(e._timeTimer),e._reconnectionCallback())})}}]),e}());t.default=o,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNTimeOperation},t.getURL=function(){return"/time/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.isAuthSupported=function(){return!1},t.handleResponse=function(e,t){return{timetoken:t[0]}},t.validateParams=function(){};var r=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(16)))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerAudit:"PNAccessManagerAudit"},e.exports=t.default},function(e,t){function n(e){var t=[];return Object.keys(e).forEach(function(e){return t.push(e)}),t}function r(e){return encodeURIComponent(e).replace(/[!~*'()]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function i(e){return n(e).sort()}e.exports={signPamFromParams:function(e){return i(e).map(function(t){return t+"="+r(e[t])}).join("&")},endsWith:function(e,t){return-1!==e.indexOf(t,this.length-t.length)},createPromise:function(){var e=void 0,t=void 0;return{promise:new Promise(function(n,r){e=n,t=r}),reject:t,fulfill:e}},encodeString:r}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return e.type=t,e.error=!0,e}function u(e){return a({message:e},"validationError")}function c(e,t,n){return e.usePost&&e.usePost(t,n)?e.postURL(t,n):e.getURL(t,n)}function l(e){var t="PubNub-JS-"+e.sdkFamily;return e.partnerId&&(t+="-"+e.partnerId),t+="/"+e.getVersion()}function f(e,t,n){var r=e.config,i=e.crypto;n.timestamp=Math.floor((new Date).getTime()/1e3);var o=r.subscribeKey+"\n"+r.publishKey+"\n"+t+"\n";o+=d.default.signPamFromParams(n);var s=i.HMACSHA256(o);s=(s=s.replace(/\+/g,"-")).replace(/\//g,"_"),n.signature=s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.networking,r=e.config,i=null,o=null,s={};t.getOperation()===p.default.PNTimeOperation||t.getOperation()===p.default.PNChannelGroupsOperation?i=arguments.length<=2?void 0:arguments[2]:(s=arguments.length<=2?void 0:arguments[2],i=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||i||(o=d.default.createPromise());var a=t.validateParams(e,s);if(!a){var _=t.prepareParams(e,s),v=c(t,e,s),y=void 0,m={url:v,operation:t.getOperation(),timeout:t.getRequestTimeout(e)};_.uuid=r.UUID,_.pnsdk=l(r),r.useInstanceId&&(_.instanceid=r.instanceId),r.useRequestId&&(_.requestid=h.default.v4()),t.isAuthSupported()&&r.getAuthKey()&&(_.auth=r.getAuthKey()),r.secretKey&&f(e,v,_);var b=function(n,r){if(n.error)i?i(n):o&&o.reject(new g("PubNub call failed, check status for details",n));else{var a=t.handleResponse(e,r,s);i?i(n,a):o&&o.fulfill(a)}};if(t.usePost&&t.usePost(e,s)){var w=t.postPayload(e,s);y=n.POST(_,w,m,b)}else y=n.GET(_,m,b);return t.getOperation()===p.default.PNSubscribeOperation?y:o?o.promise:void 0}return i?i(u(a)):o?(o.reject(new g("Validation failed, check status for details",u(a))),o.promise):void 0};var h=r(n(2)),d=r((n(8),n(17))),p=r((r(n(7)),n(16))),g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.name=r.constructor.name,r.status=n,r.message=e,r}return s(t,e),t}(Error);e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAddChannelsToGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+o.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveChannelsFromGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+o.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+o.default.encodeString(n)+"/remove"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.handleResponse=function(){return{}};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNChannelGroupsOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{groups:t.payload.groups}};var r=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(16)))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNChannelsForGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+o.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,o=e.config;return n?r?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels;return{type:n,add:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}};var r=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(16)))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,o=e.config;return n?r?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels;return{type:n,remove:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}};var r=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(16)))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return n?r?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(e,t){return{channels:t}};var r=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(16)))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNRemoveAllPushNotificationsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return n?r?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n+"/remove"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(){return{}};var r=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(16)))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUnsubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,s=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+o.default.encodeString(s)+"/leave"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(){return{}};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNWhereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,i=void 0===r?n.UUID:r;return"/v2/presence/sub-key/"+n.subscribeKey+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}};var r=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(16)))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHeartbeatOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,s=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+o.default.encodeString(s)+"/heartbeat"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.state,o=void 0===i?{}:i,s=e.config,a={};return r.length>0&&(a["channel-group"]=r.join(",")),a.state=JSON.stringify(o),a.heartbeat=s.getPresenceTimeout(),a},t.handleResponse=function(){return{}};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetStateOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,i=void 0===r?n.UUID:r,s=t.channels,a=void 0===s?[]:s,u=a.length>0?a.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+o.default.encodeString(u)+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,o=n.channelGroups,s=void 0===o?[]:o,a={};return 1===i.length&&0===s.length?a[i[0]]=t.payload:a=t.payload,{channels:a}};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSetStateOperation},t.validateParams=function(e,t){var n=e.config,r=t.state,i=t.channels,o=void 0===i?[]:i,s=t.channelGroups,a=void 0===s?[]:s;return r?n.subscribeKey?0===o.length&&0===a.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,s=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+o.default.encodeString(s)+"/uuid/"+n.UUID+"/data"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.state,r=t.channelGroups,i=void 0===r?[]:r,o={};return o.state=JSON.stringify(n),i.length>0&&(o["channel-group"]=i.join(",")),o},t.handleResponse=function(e,t){return{state:t.payload}};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,s=t.channelGroups,a=void 0===s?[]:s,u="/v2/presence/sub-key/"+n.subscribeKey;if(i.length>0||a.length>0){var c=i.length>0?i.join(","):",";u+="/channel/"+o.default.encodeString(c)}return u},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.includeUUIDs,o=void 0===i||i,s=t.includeState,a=void 0!==s&&s,u={};return o||(u.disable_uuids=1),a&&(u.state=1),r.length>0&&(u["channel-group"]=r.join(",")),u},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,o=n.channelGroups,s=void 0===o?[]:o,a=n.includeUUIDs,u=void 0===a||a,c=n.includeState,l=void 0!==c&&c;return i.length>1||s.length>0||0===s.length&&0===i.length?function(){var e={};return e.totalChannels=t.payload.total_channels,e.totalOccupancy=t.payload.total_occupancy,e.channels={},Object.keys(t.payload.channels).forEach(function(n){var r=t.payload.channels[n],i=[];return e.channels[n]={occupants:i,name:n,occupancy:r.occupancy},u&&r.uuids.forEach(function(e){l?i.push({state:e.state,uuid:e.uuid}):i.push({state:null,uuid:e})}),e}),e}():function(){var e={},n=[];return e.totalChannels=1,e.totalOccupancy=t.occupancy,e.channels={},e.channels[i[0]]={occupants:n,name:i[0],occupancy:t.occupancy},u&&t.uuids.forEach(function(e){l?n.push({state:e.state,uuid:e.uuid}):n.push({state:null,uuid:e})}),e}()};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNAccessManagerAudit},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/audit/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channel,r=t.channelGroup,i=t.authKeys,o=void 0===i?[]:i,s={};return n&&(s.channel=n),r&&(s["channel-group"]=r),o.length>0&&(s.auth=o.join(",")),s},t.handleResponse=function(e,t){return t.payload};var r=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(16)))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNAccessManagerGrant},t.validateParams=function(e){var t=e.config;return t.subscribeKey?t.publishKey?t.secretKey?void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/grant/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=t.channelGroups,o=void 0===i?[]:i,s=t.ttl,a=t.read,u=void 0!==a&&a,c=t.write,l=void 0!==c&&c,f=t.manage,h=void 0!==f&&f,d=t.authKeys,p=void 0===d?[]:d,g={};return g.r=u?"1":"0",g.w=l?"1":"0",g.m=h?"1":"0",r.length>0&&(g.channel=r.join(",")),o.length>0&&(g["channel-group"]=o.join(",")),p.length>0&&(g.auth=p.join(",")),(s||0===s)&&(g.ttl=s),g},t.handleResponse=function(){return{}};var r=function(e){return e&&e.__esModule?e:{default:e}}((n(8),n(16)))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.crypto,r=e.config,i=JSON.stringify(t);return r.cipherKey&&(i=n.encrypt(i),i=JSON.stringify(i)),i}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)};t.getOperation=function(){return s.default.PNPublishOperation},t.validateParams=function(e,t){var n=e.config,r=t.message;return t.channel?r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.usePost=function(e,t){var n=t.sendByPost;return void 0!==n&&n},t.getURL=function(e,t){var n=e.config,r=t.channel,o=i(e,t.message);return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+a.default.encodeString(r)+"/0/"+a.default.encodeString(o)},t.postURL=function(e,t){var n=e.config,r=t.channel;return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+a.default.encodeString(r)+"/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.postPayload=function(e,t){return i(e,t.message)},t.prepareParams=function(e,t){var n=t.meta,r=t.replicate,i=void 0===r||r,s=t.storeInHistory,a=t.ttl,u={};return null!=s&&(u.store=s?"1":"0"),a&&(u.ttl=a),!1===i&&(u.norep="true"),n&&"object"===(void 0===n?"undefined":o(n))&&(u.meta=JSON.stringify(n)),u},t.handleResponse=function(e,t){return{timetoken:t[2]}};var s=r((n(8),n(16))),a=r(n(17))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNHistoryOperation},t.validateParams=function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var n=t.channel;return"/v2/history/sub-key/"+e.config.subscribeKey+"/channel/"+s.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.reverse,o=t.count,s=void 0===o?100:o,a=t.stringifiedTimeToken,u=void 0!==a&&a,c={include_token:"true"};return c.count=s,n&&(c.start=n),r&&(c.end=r),u&&(c.string_message_token="true"),null!=i&&(c.reverse=i.toString()),c},t.handleResponse=function(e,t){var n={messages:[],startTimeToken:t[1],endTimeToken:t[2]};return t[0].forEach(function(t){var r={timetoken:t.timetoken,entry:i(e,t.message)};n.messages.push(r)}),n};var o=r((n(8),n(16))),s=r(n(17))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNFetchMessagesOperation},t.validateParams=function(e,t){var n=t.channels,r=e.config;return n&&0!==n.length?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channels"},t.getURL=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=e.config,o=r.length>0?r.join(","):",";return"/v3/history/sub-key/"+i.subscribeKey+"/channel/"+s.default.encodeString(o)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.count,o={};return i&&(o.max=i),n&&(o.start=n),r&&(o.end=r),o},t.handleResponse=function(e,t){var n={channels:{}};return Object.keys(t.channels||{}).forEach(function(r){n.channels[r]=[],(t.channels[r]||[]).forEach(function(t){var o={};o.channel=r,o.subscription=null,o.timetoken=t.timetoken,o.message=i(e,t.message),n.channels[r].push(o)})}),n};var o=r((n(8),n(16))),s=r(n(17))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,s=i.length>0?i.join(","):",";return"/v2/subscribe/"+n.subscribeKey+"/"+o.default.encodeString(s)+"/0"},t.getRequestTimeout=function(e){return e.config.getSubscribeTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=e.config,r=t.channelGroups,i=void 0===r?[]:r,o=t.timetoken,s=t.filterExpression,a=t.region,u={heartbeat:n.getPresenceTimeout()};return i.length>0&&(u["channel-group"]=i.join(",")),s&&s.length>0&&(u["filter-expr"]=s),o&&(u.tt=o),a&&(u.tr=a),u},t.handleResponse=function(e,t){var n=[];t.m.forEach(function(e){var t={publishTimetoken:e.p.t,region:e.p.r},r={shard:parseInt(e.a,10),subscriptionMatch:e.b,channel:e.c,payload:e.d,flags:e.f,issuingClientId:e.i,subscribeKey:e.k,originationTimetoken:e.o,userMetadata:e.u,publishMetaData:t};n.push(r)});var r={timetoken:t.t.t,region:t.t.r};return{messages:n,metadata:r}};var i=r((n(8),n(16))),o=r(n(17))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=r((r(n(7)),n(13))),a=(n(8),function(){function e(t){var n=this;i(this,e),this._modules={},Object.keys(t).forEach(function(e){n._modules[e]=t[e].bind(n)})}return o(e,[{key:"init",value:function(e){this._config=e,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){if(-1===this._providedFQDN.indexOf("pubsub."))return this._providedFQDN;var e=void 0;return this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),e=this._currentSubDomain.toString(),this._providedFQDN.replace("pubsub","ps"+e)}},{key:"shiftStandardOrigin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._standardOrigin=this.nextOrigin(e),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POST",value:function(e,t,n,r){return this._modules.post(e,t,n,r)}},{key:"GET",value:function(e,t,n){return this._modules.get(e,t,n)}},{key:"_detectErrorCategory",value:function(e){if("ENOTFOUND"===e.code)return s.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===e.code)return s.default.PNNetworkIssuesCategory;if("ECONNRESET"===e.code)return s.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===e.code)return s.default.PNNetworkIssuesCategory;if(0===e.status||e.hasOwnProperty("status")&&void 0===e.status)return s.default.PNNetworkIssuesCategory;if(e.timeout)return s.default.PNTimeoutCategory;if(e.response){if(e.response.badRequest)return s.default.PNBadRequestCategory;if(e.response.forbidden)return s.default.PNAccessDeniedCategory}return s.default.PNUnknownCategory}}]),e}());t.default=a,e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(e){try{return localStorage.getItem(e)}catch(e){return null}},set:function(e,t){try{return localStorage.setItem(e,t)}catch(e){return null}}},e.exports=t.default},function(e,t,n){function r(e){var t=(new Date).getTime(),n=(new Date).toISOString(),r=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;r.log("<<<<<"),r.log("["+n+"]","\n",e.url,"\n",e.qs),r.log("-----"),e.on("response",function(n){var i=(new Date).getTime()-t,o=(new Date).toISOString();r.log(">>>>>>"),r.log("["+o+" / "+i+"]","\n",e.url,"\n",e.qs,"\n",n.text),r.log("-----")})}function i(e,t,n){var i=this;return this._config.logVerbosity&&(e=e.use(r)),this._config.proxy&&this._modules.proxy&&(e=this._modules.proxy.call(this,e)),this._config.keepAlive&&this._modules.keepAlive&&(e=this._module.keepAlive(e)),e.timeout(t.timeout).end(function(e,r){var o={};if(o.error=null!==e,o.operation=t.operation,r&&r.status&&(o.statusCode=r.status),e)return o.errorData=e,o.category=i._detectErrorCategory(e),n(o,null);var s=JSON.parse(r.text);return n(o,s)})}Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){var r=o.default.get(this.getStandardOrigin()+t.url).query(e);return i.call(this,r,t,n)},t.post=function(e,t,n,r){var s=o.default.post(this.getStandardOrigin()+n.url).query(e).send(t);return i.call(this,s,n,r)};var o=function(e){return e&&e.__esModule?e:{default:e}}(n(43));n(8)},function(e,t,n){function r(){}function i(e){if(!v(e))return e;var t=[];for(var n in e)o(t,n,e[n]);return t.join("&")}function o(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){o(e,t,n)});else if(v(n))for(var r in n)o(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function s(e){for(var t,n,r={},i=e.split("&"),o=0,s=i.length;o<s;++o)-1==(n=(t=i[o]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function a(e){var t,n,r,i,o=e.split(/\r?\n/),s={};o.pop();for(var a=0,u=o.length;a<u;++a)t=(n=o[a]).indexOf(":"),r=n.slice(0,t).toLowerCase(),i=m(n.slice(t+1)),s[r]=i;return s}function u(e){return/[\/+]json\b/.test(e)}function c(e){return e.split(/ *; */).shift()}function l(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})}function f(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=a(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function h(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new f(n)}catch(t){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=t,e.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,e.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(e)}n.emit("response",t);var r;try{(t.status<200||t.status>=300)&&(r=new Error(t.statusText||"Unsuccessful HTTP response"),r.original=e,r.response=t,r.status=t.status)}catch(e){r=e}r?n.callback(r,t):n.callback(null,t)})}function d(e,t){var n=y("DELETE",e);return t&&n.end(t),n}var p;p="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var g=n(44),_=n(45),v=n(46),y=e.exports=n(47).bind(null,h);y.getXHR=function(){if(!(!p.XMLHttpRequest||p.location&&"file:"==p.location.protocol&&p.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only verison of superagent could not find XHR")};var m="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};y.serializeObject=i,y.parseString=s,y.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},y.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},y.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},f.prototype.get=function(e){return this.header[e.toLowerCase()]},f.prototype._setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=c(t);var n=l(t);for(var r in n)this[r]=n[r]},f.prototype._parseBody=function(e){var t=y.parse[this.type];return!t&&u(this.type)&&(t=y.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},f.prototype._setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},f.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},y.Response=f,g(h.prototype);for(var b in _)h.prototype[b]=_[b];h.prototype.type=function(e){return this.set("Content-Type",y.types[e]||e),this},h.prototype.responseType=function(e){return this._responseType=e,this},h.prototype.accept=function(e){return this.set("Accept",y.types[e]||e),this},h.prototype.auth=function(e,t,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);break;case"auto":this.username=e,this.password=t}return this},h.prototype.query=function(e){return"string"!=typeof e&&(e=i(e)),e&&this._query.push(e),this},h.prototype.attach=function(e,t,n){return this._getFormData().append(e,t,n||t.name),this},h.prototype._getFormData=function(){return this._formData||(this._formData=new p.FormData),this._formData},h.prototype.callback=function(e,t){var n=this._callback;this.clearTimeout(),n(e,t)},h.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},h.prototype._timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},h.prototype._appendQueryString=function(){var e=this._query.join("&");e&&(this.url+=~this.url.indexOf("?")?"&"+e:"?"+e)},h.prototype.end=function(e){var t=this,n=this.xhr=y.getXHR(),i=this._timeout,o=this._formData||this._data;this._callback=e||r,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(t){e=0}if(0==e){if(t.timedout)return t._timeoutError();if(t._aborted)return;return t.crossDomainError()}t.emit("end")}};var s=function(e,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=e,t.emit("progress",n)};if(this.hasListeners("progress"))try{n.onprogress=s.bind(null,"download"),n.upload&&(n.upload.onprogress=s.bind(null,"upload"))}catch(e){}if(i&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},i)),this._appendQueryString(),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!this._isHost(o)){var a=this._header["content-type"],c=this._serializer||y.serialize[a?a.split(";")[0]:""];!c&&u(a)&&(c=y.serialize["application/json"]),c&&(o=c(o))}for(var l in this.header)null!=this.header[l]&&n.setRequestHeader(l,this.header[l]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send(void 0!==o?o:null),this},y.Request=h,y.get=function(e,t,n){var r=y("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},y.head=function(e,t,n){var r=y("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.options=function(e,t,n){var r=y("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.del=d,y.delete=d,y.patch=function(e,t,n){var r=y("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.post=function(e,t,n){var r=y("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.put=function(e,t,n){var r=y("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r=n(46);t.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},t.parse=function(e){return this._parser=e,this},t.serialize=function(e){return this._serializer=e,this},t.timeout=function(e){return this._timeout=e,this},t.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},t.catch=function(e){return this.then(void 0,e)},t.use=function(e){return e(this),this},t.get=function(e){return this._header[e.toLowerCase()]},t.getHeader=t.get,t.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},t.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},t.field=function(e,t){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(r(e)){for(var n in e)this.field(n,e[n]);return this}if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return this._getFormData().append(e,t),this},t.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},t.withCredentials=function(){return this._withCredentials=!0,this},t.redirects=function(e){return this._maxRedirects=e,this},t.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},t._isHost=function(e){switch({}.toString.call(e)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}},t.send=function(e){var t=r(e),n=this._header["content-type"];if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)}},function(e,t){e.exports=function(e){return null!==e&&"object"==(void 0===e?"undefined":_typeof(e))}},function(e,t){e.exports=function(e,t,n){return"function"==typeof n?new e("GET",t).end(n):2==arguments.length?new e("GET",t):new e(t,n)}}])})},function(e,t,n){function r(e){this.config=e}var i=n(147),o=n(223);(r.prototype=new i).type="dbus",r.prototype.connect=function(e,t){return new o(this,e,t)},r.prototype.close=function(){},e.exports=r},function(e,t,n){function r(e,t,n){if(this.id=t,e.config&&e.config.systembus&&(c=o.systemBus(),l=o.systemBus()),e.config&&e.config.url){var r=this.fromUrl(e.config.url);r.objectName&&(this.objectName=r.objectName,this.serviceName=r.serviceName,this.url="dbus:"+r.serviceName+r.objectName+t)}this.url&&this.url.startsWith("dbus:")||(this.url="dbus:"+s+u+t,this.objectName=u,this.serviceName=s),this.transport=e;var f=this;this.ready=new i(function(e,r){l.requestName(f.serviceName,4,function(i,o){if(1===o||3===o||4===o){var s={name:a,methods:{receive:["ss","",["Message","Sender"],[]]}},u={receive:function(e,t){var r;try{r=JSON.parse(e)}catch(t){r=e}n(t,r)}};l.exportInterface(u,f.objectName+t,s),e()}else r()})})}var i=n(2),o=(n(150),n(224)),s="com.almende.eve",a="com.almende.eve.agent",u="/agent/",c=o.sessionBus(),l=o.sessionBus();r.prototype.fromUrl=function(e){return e.startsWith("dbus:")?{serviceName:e.substring(e.indexOf(":")+1,e.indexOf("/")),objectName:e.substring(e.indexOf("/")).replace(":id","")}:{serviceName:this.serviceName,objectName:this.objectName+e}},r.prototype.send=function(e,t){var n=this,r=n.fromUrl(e);if(!r.objectName)return i.reject();var o=r.objectName,s=r.serviceName;return new i(function(e,r){c.getService(s).getInterface(o,a,function(i,o){i?r():("string"!=typeof t&&(t=JSON.stringify(t)),o.receive(t,n.url,function(t,n){t?r():e()}))})})},r.prototype.close=function(){},e.exports=r},function(e,t,n){(function(t){function r(e){if(e.stream)return e.stream;var r=e.host,i=e.port,o=e.socket;if(o)return s.createConnection(o);if(i)return s.createConnection(i,r);var a=e.busAddress||t.env.DBUS_SESSION_BUS_ADDRESS;if(!a)throw new Error("unknown bus address");var u=a.split(";");for(var c in u){var l=u[c].split(":"),f=l[0],h={};l[1].split(",").map(function(e){var t=e.split("=");h[t[0]]=t[1]});try{switch(f.toLowerCase()){case"tcp":return r=h.host||"localhost",i=h.port,s.createConnection(i,r);case"unix":if(h.socket)return s.createConnection(h.socket);if(h.abstract)return n(243).connect("\0"+h.abstract);if(h.path)return s.createConnection(h.path);throw new Error("not enough parameters for 'unix' connection - you need to specify 'socket' or 'abstract' or 'path' parameter");case"unixexec":for(var d=n(248),p=n(238).spawn,g=[],_=1;h["arg"+_];_++)g.push(h["arg"+_]);return p(h.path,g),d.duplex(child.stdin,child.stdout);default:throw new Error("unknown address type:"+f)}}catch(e){if(c<u.length-1){console&&(console.warn,Function);continue}throw e}}}function i(e){var t=new o;e||(e={});var n=t.stream=r(e);return n.setNoDelay(),n.on("error",function(e){t.emit("error",e)}),n.on("end",function(){t.emit("end"),t.message=function(){}}),t.end=function(){return n.end(),t},(e.server?l:c)(n,e,function(e,r){if(e)return t.emit("error");t.guid=r,t.emit("connect"),u.unmarshalMessages(n,function(e){t.emit("message",e)})}),t._messages=[],t.message=function(e){t._messages.push(e)},t.once("connect",function(){t.state="connected";for(var e=0;e<t._messages.length;++e)n.write(u.marshall(t._messages[e]));t._messages.length=0,t.message=function(e){n.write(u.marshall(e))}}),t}var o=n(96).EventEmitter,s=n(225),a=n(226),u=n(227),c=n(237),l=n(241),f=(n(242),n(257));e.exports=i,e.exports.createClient=function(e){var t=i(e||{});return new f(t,e||{})},e.exports.systemBus=function(){return e.exports.createClient({socket:"/var/run/dbus/system_bus_socket"})},e.exports.sessionBus=function(t){return e.exports.createClient(t)},e.exports.messageType=a.messageType,e.exports.createConnection=e.exports;var h=n(262);e.exports.createServer=h.createServer}).call(t,n(80))},function(e,t,n){(function(e){var t=n(225);for(k in t)e[k]=t[k]}).call(t,function(){return this}())},function(e,t){e.exports={messageType:{invalid:0,methodCall:1,methodReturn:2,error:3,signal:4},headerTypeName:[null,"path","interface","member","errorName","replySerial","destination","sender","signature"],fieldSignature:{path:"o",interface:"s",member:"s",errorName:"s",replySerial:"u",destination:"s",sender:"s",signature:"g"},headerTypeId:{path:1,interface:2,member:3,errorName:4,replySerial:5,destination:6,sender:7,signature:8},protocolVersion:1,flags:{noReplyExpected:1,noAutoStart:2},endianness:{le:108,be:66},messageSignature:"yyyyuua(yv)",defaultAuthMethods:["EXTERNAL","DBUS_COOKIE_SHA1","ANONYMOUS"]}},function(e,t,n){(function(t){var r=n(228),i=n(226),o=(n(230),n(234)),s=(n(235),n(236));e.exports.unmarshalMessages=function(e,t){var n,r,a,u,c=0,l=0,f=0;e.on("readable",function(){for(;;)if(0==c){if(!(n=e.read(16)))break;c=1,a=n.readUInt32LE(12),u=a+7>>3<<3,f=n.readUInt32LE(4),l=u+f}else{if(!(r=e.read(l)))break;c=0;var h=new o(r),d=h.readArray(s[0].child[0],a);h.align(3);var p={};p.serial=n.readUInt32LE(8);for(var g=0;g<d.length;++g)p[i.headerTypeName[d[g][0]]]=d[g][1][1][0];p.type=n[1],p.flags=n[2],f>0&&p.signature&&(p.body=h.read(p.signature)),t(p)}})},e.exports.unmarshall=function(e){for(var t=new o(e),n=t.read("yyyyuua(yv)"),r={},s=0;s<n[6].length;++s)headerName=i.headerTypeName[n[6][s][0]],r[headerName]=n[6][s][1][1][0];return r.type=n[1],r.flags=n[2],r.serial=n[5],t.align(3),r.body=t.read(r.signature),r},e.exports.marshall=function(e){e.serial||(e.serial=1);var n,o=e.flags||0,s=e.type||i.messageType.methodCall,a=0;e.body&&(a=(n=r(e.signature,e.body)).length);var u=[i.endianness.le,s,o,i.protocolVersion,a,e.serial],c=r("yyyyuu",u),l=[];i.headerTypeName.forEach(function(t){var n=e[t];n&&l.push([i.headerTypeId[t],[i.fieldSignature[t],n]])});var f=r("a(yv)",[l],12),h=c.length+f.length+7>>3<<3,d=t(h+a);return d.fill(0),c.copy(d),f.copy(d,c.length),a>0&&n.copy(d,h),d}}).call(t,n(68).Buffer)},function(e,t,n){(function(t){function r(e,t,n){if(t.length!==n.length)throw new Error("Invalid struct data");for(var r=0;r<t.length;++r)i(e,t[r],n[r]);return e}function i(e,t,n){switch(t.type){case"(":case"{":l(e,8),r(e,t.child,n);break;case"a":var c=u();c._offset=e._offset;var f=c._offset;o(c,"u",0);var h=c._offset-4-f;-1!==["x","t","d","{","("].indexOf(t.child[0].type)&&l(c,8);for(var d=c._offset,p=0;p<n.length;++p)i(c,t.child[0],n[p]);var g=c.buffer(),_=c._offset-d;g.writeUInt32LE(_,h),e.put(g),e._offset+=g.length;break;case"v":s.equal(n.length,2,"variant data should be [signature, data]"),i(e,{type:"g",child:[]},n[0]),1==n[0].length?i(e,{type:n[0],child:[]},n[1]):r(e,a(n[0]),n[1]);break;default:return o(e,t.type,n)}}function o(e,n,r){if(void 0===r)throw new Error("Serialisation of JS 'undefined' type is not supported by d-bus");if(null===r)throw new Error("Serialisation of null value is not supported by d-bus");if(t.isBuffer(r)&&(r=buffer.toString()),-1!=f.indexOf(n)&&"string"!=typeof r)throw new Error("Expected string or buffer argument, got "+JSON.stringify(r)+" of type '"+n+"'");return c.MakeSimpleMarshaller(n).marshall(e,r),e}var s=n(229),a=n(230),u=n(231),c=n(232),l=n(233).align,f=(e.exports=function(e,t,n){void 0===n&&(n=0);var i=a(e);if(!Array.isArray(t)||t.length!==i.length)throw new Error("message body does not match message signature. Body:"+JSON.stringify(t)+", signature:"+e);var o=u();return o._offset=n,r(o,i,t).buffer()},["g","o","s"])}).call(t,n(68).Buffer)},function(e,t,n){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function s(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function a(e){if(b.isFunction(e)){if(E)return e.name;var t=e.toString().match(x);return t&&t[1]}}function u(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function c(e){if(E||!b.isFunction(e))return b.inspect(e);var t=a(e);return"[Function"+(t?": "+t:"")+"]"}function l(e){return u(c(e.actual),128)+" "+e.operator+" "+u(c(e.expected),128)}function f(e,t,n,r,i){throw new S.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function h(e,t){e||f(e,!0,t,"==",S.ok)}function d(e,t,n,a){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(b.isDate(e)&&b.isDate(t))return e.getTime()===t.getTime();if(b.isRegExp(e)&&b.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===(void 0===e?"undefined":_typeof(e))||null!==t&&"object"===(void 0===t?"undefined":_typeof(t))){if(s(e)&&s(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var u=(a=a||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),g(e,t,n,a))}return n?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function g(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(b.isPrimitive(e)||b.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=p(e),o=p(t);if(i&&!o||!i&&o)return!1;if(i)return e=k.call(e),t=k.call(t),d(e,t,n);var s,a,u=T(e),c=T(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),a=u.length-1;a>=0;a--)if(u[a]!==c[a])return!1;for(a=u.length-1;a>=0;a--)if(s=u[a],!d(e[s],t[s],n,r))return!1;return!0}function _(e,t,n){d(e,t,!0)&&f(e,t,n,"notDeepStrictEqual",_)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e){var t;try{e()}catch(e){t=e}return t}function m(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=y(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&f(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&b.isError(i),a=!e&&i&&!n;if((s&&o&&v(i,n)||a)&&f(i,n,"Got unwanted exception"+r),e&&i&&n&&!v(i,n)||!e&&i)throw i}var b=n(79),w=Object.prototype.hasOwnProperty,k=Array.prototype.slice,E="foo"===function(){}.name,S=e.exports=h,x=/\s*function\s+([^\(\s]*)\s*/;S.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=a(t),o=r.indexOf("\n"+i);if(o>=0){var s=r.indexOf("\n",o+1);r=r.substring(s+1)}this.stack=r}}},b.inherits(S.AssertionError,Error),S.fail=f,S.ok=h,S.equal=function(e,t,n){e!=t&&f(e,t,n,"==",S.equal)},S.notEqual=function(e,t,n){e==t&&f(e,t,n,"!=",S.notEqual)},S.deepEqual=function(e,t,n){d(e,t,!1)||f(e,t,n,"deepEqual",S.deepEqual)},S.deepStrictEqual=function(e,t,n){d(e,t,!0)||f(e,t,n,"deepStrictEqual",S.deepStrictEqual)},S.notDeepEqual=function(e,t,n){d(e,t,!1)&&f(e,t,n,"notDeepEqual",S.notDeepEqual)},S.notDeepStrictEqual=_,S.strictEqual=function(e,t,n){e!==t&&f(e,t,n,"===",S.strictEqual)},S.notStrictEqual=function(e,t,n){e===t&&f(e,t,n,"!==",S.notStrictEqual)},S.throws=function(e,t,n){m(!0,e,t,n)},S.doesNotThrow=function(e,t,n){m(!1,e,t,n)},S.ifError=function(e){if(e)throw e};var T=Object.keys||function(e){var t=[];for(var n in e)w.call(e,n)&&t.push(n);return t}}).call(t,function(){return this}())},function(e,t){var n={"{":"}","(":")"},r={};"(){}ybnqiuxtdsogarvehm*?@&^".split("").forEach(function(e){r[e]=!0});e.exports=function(e){function t(){if(s<e.length){var t=e[s];return++s,t}return null}function i(o){function s(e){if(!e)throw new Error("Bad signature: unexpected end");return e}if(!r[o])throw new Error('Unknown type: "'+o+'" in signature "'+e+'"');var a,u={type:o,child:[]};switch(o){case"a":return a=t(),s(a),u.child.push(i(a)),u;case"{":case"(":for(;null!==(a=t())&&a!==n[o];)u.child.push(i(a));return s(a),u}return u}for(var o,s=0,a=[];null!==(o=t());)a.push(i(o));return a};e.exports.fromTree=function(t){for(var r="",i=0;i<t.length;++i)0===t[i].child.length?r+=t[i].type:"a"===t[i].type?r+="a"+e.exports.fromTree(t[i].child):r+=t[i].type+e.exports.fromTree(t[i].child)+n[t[i].type];return r}},function(e,t,n){(function(t){function n(){if(!(this instanceof n))return new n;var e=[],r=0;this.put=function(t){return e.push({buffer:t}),r+=t.length,this},this.word8=function(t){return e.push({bytes:1,value:t}),r+=1,this},this.floatle=function(t){return e.push({bytes:"float",endian:"little",value:t}),r+=4,this},[8,16,24,32,64].forEach(function(t){this["word"+t+"be"]=function(n){return e.push({endian:"big",bytes:t/8,value:n}),r+=t/8,this},this["word"+t+"le"]=function(n){return e.push({endian:"little",bytes:t/8,value:n}),r+=t/8,this}}.bind(this)),this.pad=function(t){return e.push({endian:"big",bytes:t,value:0}),r+=t,this},this.length=function(){return r},this.buffer=function(){var n=new t(r),i=0;return e.forEach(function(e){if(e.buffer)e.buffer.copy(n,i,0),i+=e.buffer.length;else if("float"==e.bytes){var t=Math.abs(e.value),r=1*(e.value>=0),o=Math.ceil(Math.log(t)/Math.LN2),s=t/(1<<o);n[i++]=r<<7&~~(o/2),n[i++]=(1&o)<<7&~~(s/65536),n[i++]=0,n[i++]=0,i+=4}else for(var a="big"===e.endian,u=a?[8*(e.bytes-1),-8]:[0,8],c=u[0];a?c>=0:c<8*e.bytes;c+=u[1])n[i++]=c>=32?255&Math.floor(e.value/Math.pow(2,c)):e.value>>c&255}),n},this.write=function(e){e.write(this.buffer())}}e.exports=n}).call(t,n(68).Buffer)},function(e,t,n){(function(e){var r=n(233).align,i=n(230);t.MakeSimpleMarshaller=function(t){function n(e){if("string"!=typeof e)throw new Error("Data: "+e+" was not of type string");if(-1!==e.indexOf("\0"))throw new Error("String contains null byte")}function u(e){if(e.length>255)throw new Error("Data: "+e+" is too long for signature type ("+e.length+" > 255)");for(var t=0,n=0;n<e.length;++n){if(t>32)throw new Error("Maximum container type nesting exceeded in signature type:"+e);switch(e[n]){case"(":++t;break;case")":--t}}i(e)}var c={};switch(t){case"o":case"s":c.check=function(e){n(e)},c.marshall=function(t,n){this.check(n),r(t,4),buff=new e(n,"utf8"),t.word32le(buff.length).put(buff).word8(0),t._offset+=5+buff.length};break;case"g":c.check=function(e){n(e),u(e)},c.marshall=function(t,n){this.check(n),buff=new e(n,"ascii"),t.word8(n.length).put(buff).word8(0),t._offset+=2+buff.length};break;case"y":c.check=function(e){s(e),o(0,255,e)},c.marshall=function(e,t){this.check(t),e.word8(t),e._offset++};break;case"b":c.check=function(e){a(e)},c.marshall=function(e,t){this.check(t),t=t?1:0,r(e,4),e.word32le(t),e._offset+=4};break;case"n":c.check=function(e){s(e),o(-32768,32767,e)},c.marshall=function(t,n){this.check(n),r(t,2),buff=new e(2),buff.writeInt16LE(parseInt(n),0),t.put(buff),t._offset+=2};break;case"q":c.check=function(e){s(e),o(0,65535,e)},c.marshall=function(e,t){this.check(t),r(e,2),e.word16le(t),e._offset+=2};break;case"i":c.check=function(e){s(e),o(-2147483648,2147483647,e)},c.marshall=function(t,n){this.check(n),r(t,4),buff=new e(4),buff.writeInt32LE(parseInt(n),0),t.put(buff),t._offset+=4};break;case"u":c.check=function(e){s(e),o(0,4294967295,e)},c.marshall=function(e,t){this.check(t),r(e,4),e.word32le(t),e._offset+=4};break;case"t":c.check=function(e){throw new Error("64 Bit integers not supported")},c.marshall=function(e,t){this.check(t),r(e,8),e.word64le(t),e._offset+=8};break;case"x":c.check=function(e){throw new Error("64 Bit integers not supported")},c.marshall=function(e,t){this.check(t),e.word64le(t),e._offset+=8};break;case"d":c.check=function(e){if("number"!=typeof e)throw new Error("Data: "+e+" was not of type number");if(Number.isNaN(e))throw new Error("Data: "+e+" was not a number");if(!Number.isFinite(e))throw new Error("Number outside range")},c.marshall=function(t,n){this.check(n),r(t,8),buff=new e(8),buff.writeDoubleLE(parseFloat(n),0),t.put(buff),t._offset+=8};break;default:throw new Error("Unknown data type format: "+type)}return c};var o=function(e,t,n){if(n>t||n<e)throw new Error("Number outside range")},s=function(e){if("number"!=typeof e)throw new Error("Data: "+e+" was not of type number");if(Math.floor(e)!==e)throw new Error("Data: "+e+" was not an integer")},a=function(e){if("boolean"!=typeof e&&0!==e&&1!==e)throw new Error("Data: "+e+" was not of type boolean")}}).call(t,n(68).Buffer)},function(e,t,n){(function(e){t.align=function(t,n){var r=n-t._offset%n;if(0!==r&&r!==n){var i=e(r);i.fill(0),t.put(e(i)),t._offset+=r}}}).call(t,n(68).Buffer)},function(e,t,n){function r(e,t,n){this.options=n||{ayBuffer:!0},this.buffer=e,this.startPos=t||0,this.pos=0}var i={};"ybnquigsoxtd".split(" ").forEach(function(e){i[e]=!0}),r.prototype.align=function(e){var t=(1<<e)-1,n=this.pos+this.startPos+t>>e<<e;this.pos=n-this.startPos},r.prototype.readInt8=function(){return this.pos++,this.buffer[this.pos-1]},r.prototype.readSInt16=function(){this.align(1);var e=this.buffer.readInt16LE(this.pos);return this.pos+=2,e},r.prototype.readInt16=function(){this.align(1);var e=this.buffer.readUInt16LE(this.pos);return this.pos+=2,e},r.prototype.readSInt32=function(){this.align(2);var e=this.buffer.readInt32LE(this.pos);return this.pos+=4,e},r.prototype.readInt32=function(){this.align(2);var e=this.buffer.readUInt32LE(this.pos);return this.pos+=4,e},r.prototype.readDouble=function(){this.align(3);var e=this.buffer.readDoubleLE(this.pos);return this.pos+=8,e},r.prototype.readString=function(e){if(0===e)return this.pos++,"";var t=this.buffer.toString("utf8",this.pos,this.pos+e);return this.pos+=e+1,t};var o=n(230);r.prototype.readTree=function(e){switch(e.type){case"(":case"{":case"r":return this.align(3),this.readStruct(e.child);case"a":if(!e.child||1!=e.child.length)throw new Error("Incorrect array element signature");var t=this.readInt32();return this.readArray(e.child[0],t);case"v":return this.readVariant();default:return this.readSimpleType(e.type)}},r.prototype.read=function(e){var t=o(e);return this.readStruct(t)},r.prototype.readVariant=function(){var e=this.readSimpleType("g"),t=o(e);return[t,this.readStruct(t)]},r.prototype.readStruct=function(e){for(var t=[],n=0;n<e.length;++n)t.push(this.readTree(e[n]));return t},r.prototype.readArray=function(e,t){var n,r=this.pos;if("y"===e.type&&this.options.ayBuffer)return this.pos+=t,this.buffer.slice(r,this.pos);-1!=["x","t","d","{","(","r"].indexOf(e.type)&&this.align(3);var i=this.pos+t;for(n=[];this.pos<i;)n.push(this.readTree(e));return n},r.prototype.readSimpleType=function(e){switch(e){case"y":return this.readInt8();case"b":return!!this.readInt32();case"n":return this.readSInt16();case"q":return this.readInt16();case"u":return this.readInt32();case"i":return this.readSInt32();case"g":t=this.readInt8();return this.readString(t);case"s":case"o":var t=this.readInt32();return this.readString(t);case"x":return this.align(3),this.readInt32()+4294967296*this.readInt32();case"t":this.align(3);var n=this.readInt32(),r=this.readInt32();return 2147483648&r?-(4294967296*(~r>>>0)+(~n>>>0)+1):n+4294967296*r;case"d":return this.readDouble();default:throw new Error("Unsupported type: "+e)}return result},e.exports=r},function(e,t,n){(function(t){var r=n(234);e.exports=function(e,n,i,o){return i||(i=0),""===n?new t:new r(e,i,o).read(n)}}).call(t,n(68).Buffer)},function(e,t){e.exports=[{type:"a",child:[{type:"(",child:[{type:"y",child:[]},{type:"v",child:[]}]}]}]},function(e,t,n){(function(t,r){function i(e){var t=c.createHash("sha1");return t.update(e),t.digest("hex")}function o(){return t.env[t.platform.match(/$win/)?"USERPROFILE":"HOME"]}function s(e,n,r){var i=f.join(o(),".dbus-keyrings");0===e.length&&(e="org_freedesktop_general");var s=f.join(i,e);l.stat(i,function(e,i){return e?r(e):18&i.mode?r(new Error("User keyrings directory is writeable by other users. Aborting authentication")):t.hasOwnProperty("getuid")&&i.uid!=t.getuid()?r(new Error("Keyrings directory is not owned by the current user. Aborting authentication!")):void l.readFile(s,"ascii",function(e,t){if(e)return r(e);lines=t.split("\n");for(var i=0;i<lines.length;++i){var o=lines[i].split(" ");if(n==o[0])return r(null,o[2])}return r(new Error("cookie not found"))})})}function a(e){return r(e.toString(),"ascii").toString("hex")}function u(e,n,o){function l(){d(e,function(t){var r=t.toString("ascii").match(/^([A-Za-z]+) (.*)/);return r&&"OK"===r[1]?(e.write("BEGIN\r\n"),o(null,r[2])):n.empty?o(t):void u(e,n,o)})}if(0===n.length)return o(new Error("No authentication methods left to try"));var f=n.shift();if(t.hasOwnProperty("getuid"))h=a(t.getuid());else var h=a(0);switch(f){case"EXTERNAL":e.write("AUTH "+f+" "+h+"\r\n"),l();break;case"DBUS_COOKIE_SHA1":e.write("AUTH "+f+" "+h+"\r\n"),d(e,function(t){var n=new r(t.toString().split(" ")[1].trim(),"hex").toString().split(" "),u=n[0],f=n[1],h=n[2],d=c.randomBytes(16).toString("hex");s(u,f,function(t,n){if(t)return o(t);var r=i([h,d,n].join(":")),s=a(d+r);e.write("DATA "+s+"\r\n"),l()})});break;case"ANONYMOUS":e.write("AUTH ANONYMOUS \r\n"),l();break;default:l()}}var c=n(72),l=n(238),f=n(239),h=n(226),d=n(240);e.exports=function(e,t,n){var r;r=t.authMethods?t.authMethods:h.defaultAuthMethods,e.write("\0"),u(e,r.slice(),n)}}).call(t,n(80),n(68).Buffer)},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===s(e,-1);return(e=n(r(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}for(var c=[],u=a;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(80))},function(e,t,n){(function(t){e.exports=function(e,n){function r(){for(;;){var o=e.read(1);if(!o)return;var s=o[0];if(10===s){try{n(new t(i))}catch(t){e.emit("error",t)}return void e.removeListener("readable",r)}i.push(s)}}var i=[];e.on("readable",r)}}).call(t,n(68).Buffer)},function(e,t,n){(function(t){n(231),n(72),n(238);var r=n(240);e.exports=function(e,n,i){e.name="SERVER SERVER",r(e,function(n){e.write("REJECTED EXTERNAL DBUS_COOKIE_SHA1 ANONYMOUS\r\n"),r(e,function(n){e.write("DATA "+t("org_freedesktop_general 642038150 b9ce247a275f427c8586e4c9de9bb951").toString("hex")+"\r\n"),r(e,function(t){e.write("OK 6f72675f667265656465736b746f705f67656e6572616c20353631303331333937206239636532343761323735663432376338353836653463396465396262393531\r\n"),r(e,function(e){i(null)})})})})}}).call(t,n(68).Buffer)},function(e,t,n){(function(t){e.exports=function(){return new t("6c01 0001 0000 0000 0100 0000 6d00 00000101 6f00 1500 0000 2f6f 7267 2f66 72656564 6573 6b74 6f70 2f44 4275 7300 00000301 7300 0500 0000 4865 6c6c 6f00 00000201 7300 1400 0000 6f72 672e 6672 65656465 736b 746f 702e 4442 7573 0000 00000601 7300 1400 0000 6f72 672e 6672 6565"+"6465 736b 746f 702e 4442 7573 0000 0000".replace(/ /g,""),"hex")}}).call(t,n(68).Buffer)},function(e,t,n){(function(e){function r(e,t){var n=new Error(t+" "+e);return n.errno=n.code=e,n.syscall=t,n}var i=n(225),o=n(244)("abstract_socket.node"),s=o.socket,a=o.bind,u=o.connect,c=o.close,l=function(e){function t(e){return _classCallCheck2(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"listen",value:function(e,n){var i=s();i<0&&this.emit(r(i,"socket"));var o={fd:i};(i=a(i,e))<0&&(c(o.fd),this.emit(r(i,"bind"))),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this,o,n)}}]),t}(i.Server);t.createServer=function(e){return new l(e)},t.connect=t.createConnection=function(t,n){var o={readable:!0,writable:!0},a=s();if(a<0){var l=new i.Socket(o);return e(function(){return l.emit("error",r(a,"socket"))}),l}var f=Object.assign({fd:a},o);if((a=u(a,t))<0){c(f.fd);var h=new i.Socket(o);return e(function(){return h.emit("error",r(a,"connect"))}),h}var d=new i.Socket(f);return"function"==typeof n&&e(function(){return n(d)}),d}}).call(t,n(111).setImmediate)},function(e,t,n){(function(r,i){var o=n(238),s=n(239),a=s.join,u=s.dirname,c=o.existsSync||s.existsSync,l={arrow:r.env.NODE_BINDINGS_ARROW||" → ",compiled:r.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:r.platform,arch:r.arch,version:r.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};e.exports=t=function(e){"string"==typeof e?e={bindings:e}:e||(e={}),e.__proto__=l,e.module_root||(e.module_root=t.getRoot(t.getFileName())),".node"!=s.extname(e.bindings)&&(e.bindings+=".node");for(var r,i,o,u=[],c=0,f=e.try.length;c<f;c++){r=a.apply(null,e.try[c].map(function(t){return e[t]||t})),u.push(r);try{return i=e.path?n(245).resolve(r):n(245)(r),e.path||(i.path=r),i}catch(e){if(!/not find/i.test(e.message))throw e}}throw o=new Error("Could not locate the bindings file. Tried:\n"+u.map(function(t){return e.arrow+t}).join("\n")),o.tries=u,o},t.getFileName=function(e){var t,n=Error.prepareStackTrace,r=Error.stackTraceLimit,o={};return Error.stackTraceLimit=10,Error.prepareStackTrace=function(n,r){for(var o=0,s=r.length;o<s;o++)if((t=r[o].getFileName())!==i){if(!e)return;if(t!==e)return}},Error.captureStackTrace(o),Error.prepareStackTrace=n,Error.stackTraceLimit=r,t},t.getRoot=function(e){for(var t,n=u(e);;){if("."===n&&(n=r.cwd()),c(a(n,"package.json"))||c(a(n,"node_modules")))return n;if(t===n)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');t=n,n=a(n,"..")}}}).call(t,n(80),"/index.js")},function(e,t,n){function r(e){return n(i(e))}function i(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./README.md":246,"./bindings":244,"./bindings.js":244,"./package":247,"./package.json":247};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=245},function(e,t){},function(e,t){e.exports={_args:[[{raw:"bindings@^1.2.1",scope:null,escapedName:"bindings",name:"bindings",rawSpec:"^1.2.1",spec:">=1.2.1 <2.0.0",type:"range"},"/home/ludo/projects/evejs/node_modules/abstract-socket"]],_from:"bindings@>=1.2.1 <2.0.0",_id:"bindings@1.2.1",_inCache:!0,_location:"/bindings",_npmUser:{name:"tootallnate",email:"nathan@tootallnate.net"},_npmVersion:"1.4.14",_phantomChildren:{},_requested:{raw:"bindings@^1.2.1",scope:null,escapedName:"bindings",name:"bindings",rawSpec:"^1.2.1",spec:">=1.2.1 <2.0.0",type:"range"},_requiredBy:["/abstract-socket","/bufferutil","/utf-8-validate"],_resolved:"https://registry.npmjs.org/bindings/-/bindings-1.2.1.tgz",_shasum:"14ad6113812d2d37d72e67b4cacb4bb726505f11",_shrinkwrap:null,_spec:"bindings@^1.2.1",_where:"/home/ludo/projects/evejs/node_modules/abstract-socket",author:{name:"Nathan Rajlich",email:"nathan@tootallnate.net",url:"http://tootallnate.net"},bugs:{url:"https://github.com/TooTallNate/node-bindings/issues"},dependencies:{},description:"Helper module for loading your native module's .node file",devDependencies:{},directories:{},dist:{shasum:"14ad6113812d2d37d72e67b4cacb4bb726505f11",tarball:"https://registry.npmjs.org/bindings/-/bindings-1.2.1.tgz"},gitHead:"e404152ee27f8478ccbc7122ee051246e8e5ec02",homepage:"https://github.com/TooTallNate/node-bindings",keywords:["native","addon","bindings","gyp","waf","c","c++"],license:"MIT",main:"./bindings.js",maintainers:[{name:"TooTallNate",email:"nathan@tootallnate.net"},{name:"tootallnate",email:"nathan@tootallnate.net"}],name:"bindings",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git://github.com/TooTallNate/node-bindings.git"},scripts:{},version:"1.2.1"}},function(e,t,n){(function(e,r,i){var o=n(95).Stream,s=t,a=n(249),u=n(250),c=n(251),l=n(252),f=n(253),h=n(254),d=n(256),p=e.setImmediate||r.nextTick;s.Stream=o,s.through=a,s.from=u,s.duplex=c,s.map=l,s.pause=f,s.split=h,s.pipeline=s.connect=s.pipe=d,s.concat=s.merge=function(){var e=[].slice.call(arguments);1===e.length&&e[0]instanceof Array&&(e=e[0]);var t=new o;t.setMaxListeners(0);var n=0;return t.writable=t.readable=!0,e.length?e.forEach(function(r){r.pipe(t,{end:!1});var i=!1;r.on("end",function(){i||(i=!0,++n==e.length&&t.emit("end"))})}):r.nextTick(function(){t.emit("end")}),t.write=function(e){this.emit("data",e)},t.destroy=function(){e.forEach(function(e){e.destroy&&e.destroy()})},t},s.writeArray=function(e){if("function"!=typeof e)throw new Error("function writeArray (done): done must be function");var t=new o,n=[],r=!1;return t.write=function(e){n.push(e)},t.end=function(){r=!0,e(null,n)},t.writable=!0,t.readable=!1,t.destroy=function(){t.writable=t.readable=!1,r||e(new Error("destroyed before end"),n)},t},s.readArray=function(e){var t=new o,n=0,i=!1,s=!1;if(t.readable=!0,t.writable=!1,!Array.isArray(e))throw new Error("event-stream.read expects an array");return t.resume=function(){if(!s){i=!1;for(var r=e.length;n<r&&!i&&!s;)t.emit("data",e[n++]);n!=r||s||(s=!0,t.readable=!1,t.emit("end"))}},r.nextTick(t.resume),t.pause=function(){i=!0},t.destroy=function(){s=!0,t.emit("close")},t},s.readable=function(e,t){function n(r,o){r?(i.emit("error",r),t||i.emit("end")):arguments.length>1&&i.emit("data",o),p(function(){if(!(u||a||c))try{c=!0,e.call(i,s++,function(){c=!1,n.apply(null,arguments)})}catch(e){i.emit("error",e)}})}var i=new o,s=0,a=!1,u=!1,c=!1;if(i.readable=!0,i.writable=!1,"function"!=typeof e)throw new Error("event-stream.readable expects async function");return i.on("end",function(){u=!0}),i.resume=function(){a=!1,n()},r.nextTick(n),i.pause=function(){a=!0},i.destroy=function(){i.emit("end"),i.emit("close"),u=!0},i},s.mapSync=function(e){return s.through(function(t){var n;try{n=e(t)}catch(e){return this.emit("error",e)}void 0!==n&&this.emit("data",n)})},s.log=function(e){return s.through(function(e){[].slice.call(arguments);this.emit("data",e)})},s.child=function(e){return s.duplex(e.stdin,e.stdout)},s.parse=function(e){var t=!(!e||!e.error);return s.through(function(e){var n;try{e&&(n=JSON.parse(e.toString()))}catch(e){if(t)return this.emit("error",e);return}void 0!==n&&this.emit("data",n)})},s.stringify=function(){var e=n(104).Buffer;return s.mapSync(function(t){return JSON.stringify(e.isBuffer(t)?t.toString():t)+"\n"})},s.replace=function(e,t){return s.pipeline(s.split(e),s.join(t))},s.join=function(e){if("function"==typeof e)return s.wait(e);var t=!0;return s.through(function(n){return t||this.emit("data",e),t=!1,this.emit("data",n),!0})},s.wait=function(e){var t=[];return s.through(function(e){t.push(e)},function(){var n=i.isBuffer(t[0])?i.concat(t):t.join("");this.emit("data",n),this.emit("end"),e&&e(null,n)})},s.pipeable=function(){throw new Error("[EVENT-STREAM] es.pipeable is deprecated")}}).call(t,function(){return this}(),n(80),n(68).Buffer)},function(e,t,n){(function(r){function i(e,t,n){function i(){for(;c.length&&!f.paused;){var e=c.shift();if(null===e)return f.emit("end");f.emit("data",e)}}function s(){f.writable=!1,t.call(f),!f.readable&&f.autoDestroy&&f.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var a=!1,u=!1,c=[],l=!1,f=new o;return f.readable=f.writable=!0,f.paused=!1,f.autoDestroy=!(n&&!1===n.autoDestroy),f.write=function(t){return e.call(this,t),!f.paused},f.queue=f.push=function(e){return l?f:(null===e&&(l=!0),c.push(e),i(),f)},f.on("end",function(){f.readable=!1,!f.writable&&f.autoDestroy&&r.nextTick(function(){f.destroy()})}),f.end=function(e){if(!a)return a=!0,arguments.length&&f.write(e),s(),f},f.destroy=function(){if(!u)return u=!0,a=!0,c.length=0,f.writable=f.readable=!1,f.emit("close"),f},f.pause=function(){if(!f.paused)return f.paused=!0,f},f.resume=function(){return f.paused&&(f.paused=!1,f.emit("resume")),i(),f.paused||f.emit("drain"),f},f}var o=n(95);t=e.exports=i,i.through=i}).call(t,n(80))},function(e,t,n){(function(t){var r=n(95);e.exports=function e(n){function i(){if(a.started=!0,!a.ended)for(;!a.ended&&!a.paused&&n.call(a,u++,function(){a.ended||a.paused||t.nextTick(i)}););}if(Array.isArray(n)){var o=0,s=n.length;return e(function(e){return o<s?this.emit("data",n[o++]):this.emit("end"),!0})}var a=new r,u=0;return a.ended=!1,a.started=!1,a.readable=!0,a.writable=!1,a.paused=!1,a.ended=!1,a.pause=function(){a.started=!0,a.paused=!0},a.resume=function(){a.started=!0,a.paused=!1,i()},a.on("end",function(){a.ended=!0,a.readable=!1,t.nextTick(a.destroy)}),a.destroy=function(){a.ended=!0,a.emit("close")},t.nextTick(function(){a.started||a.resume()}),a}}).call(t,n(80))},function(e,t,n){function r(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n)}var i=n(95),o=["write","end","destroy"],s=["resume","pause"],a=["data","close"],u=Array.prototype.slice;e.exports=function(e,t){function n(e){c.emit("error",e)}var c=new i,l=!1;return r(o,function(t){c[t]=function(){return e[t].apply(e,arguments)}}),r(s,function(e){c[e]=function(){c.emit(e);var n=t[e];if(n)return n.apply(t,arguments);t.emit(e)}}),r(a,function(e){t.on(e,function(){var t=u.call(arguments);t.unshift(e),c.emit.apply(c,t)})}),t.on("end",function(){if(!l){l=!0;var e=u.call(arguments);e.unshift("end"),c.emit.apply(c,e)}}),e.on("drain",function(){c.emit("drain")}),e.on("error",n),t.on("error",n),c.writable=e.writable,c.readable=t.readable,c}},function(e,t,n){(function(t){var r=n(95).Stream;e.exports=function(e,n){function i(e,t){var n=g+1;if(t===n?(void 0!==e&&u.emit.apply(u,["data",e]),g++,n++):y[t]=e,y.hasOwnProperty(n)){var r=y[n];return delete y[n],i(r,n)}l===++f&&(d&&(d=!1,u.emit("drain")),h&&a())}function o(e,t,n){p||(_=!0,e&&!c.opts.failures||i(t,n),e&&u.emit.apply(u,[v,e]),_=!1)}function s(t,n,r){return e.call(null,t,function(e,t){r(e,t,n)})}function a(e){if(h=!0,u.writable=!1,void 0!==e)return i(e,l);l==f&&(u.readable=!1,u.emit("end"),u.destroy())}var u=new r,c=this,l=0,f=0,h=!1,d=!1,p=!1,g=0,_=!1;this.opts=n||{};var v=this.opts.failures?"failure":"error",y={};return u.writable=!0,u.readable=!0,u.write=function(e){if(h)throw new Error("map stream is not writable");_=!1,l++;try{var t=s(e,l,o);return!(d=!1===t)}catch(e){if(_)throw e;return o(e),!d}},u.end=function(e){h||a()},u.destroy=function(){h=p=!0,u.writable=u.readable=d=!1,t.nextTick(function(){u.emit("close")})},u.pause=function(){d=!0},u.resume=function(){d=!1},u}}).call(t,n(80))},function(e,t,n){e.exports=n(249)},function(e,t,n){var r=n(249),i=n(255).StringDecoder;e.exports=function(e,t,n){function o(e,n){if(t){try{n=t(n)}catch(t){return e.emit("error",t)}void 0!==n&&e.queue(n)}else e.queue(n)}function s(t,n){var r=((null!=u?u:"")+n).split(e);u=r.pop(),c&&u.length>c&&t.emit("error",new Error("maximum buffer reached"));for(var i=0;i<r.length;i++)o(t,r[i])}var a=new i,u="",c=n&&n.maxLength;return"function"==typeof e&&(t=e,e=null),e||(e=/\r?\n/),r(function(e){s(this,a.write(e))},function(){a.end&&s(this,a.end()),null!=u&&o(this,u),this.queue(null)})}},function(e,t,n){function r(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=n(104).Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var r=(t+=e.toString(this.encoding,0,r)).length-1,i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},function(e,t,n){var r=n(251);e.exports=function(){function e(t){t.length<2||(t[0].pipe(t[1]),e(t.slice(1)))}var t=[].slice.call(arguments),n=t[0],i=t[t.length-1],o=r(n,i);if(1==t.length)return t[0];if(!t.length)throw new Error("connect called with empty args");e(t);for(var s=1;s<t.length-1;s++)t[s].on("error",function(){var e=[].slice.call(arguments);e.unshift("error"),o.emit.apply(o,e)});return o}},function(e,t,n){var r=n(96).EventEmitter,i=n(226),o=n(258);e.exports=function e(t,s){function a(e,t){this.name=e,this.service=t,this.as=function(e){return this.proxy[e]}}function u(e,t){this.name=e,this.bus=t,this.getObject=function(e,t){var r=new a(e,this);n(259)(r,function(e,n,i){if(e)return t(e);r.proxy=n,r.nodes=i,t(null,r)})},this.getInterface=function(e,t,n){this.getObject(e,function(e,r){if(e)return n(e);n(null,r.as(t))})}}if(!(this instanceof e))return new e(t);s||(s={});var c=this;this.connection=t,this.serial=1,this.cookies={},this.methodCallHandlers={},this.signals=new r,this.exportedObjects={},this.invoke=function(e,t){e.type||(e.type=i.messageType.methodCall),e.serial=c.serial,c.serial++,this.cookies[e.serial]=t,c.connection.message(e)},this.invokeDbus=function(e,t){e.path||(e.path="/org/freedesktop/DBus"),e.destination||(e.destination="org.freedesktop.DBus"),e.interface||(e.interface="org.freedesktop.DBus"),c.invoke(e,t)},this.mangle=function(e,t,n){var r={};return"object"===(void 0===e?"undefined":_typeof(e))?(r.path=e.path,r.interface=e.interface,r.member=e.member):(r.path=e,r.interface=t,r.member=n),JSON.stringify(r)},this.sendSignal=function(e,t,n,r,o){var s={type:i.messageType.signal,serial:c.serial,interface:t,path:e,member:n};r&&(s.signature=r,s.body=o),c.connection.message(s)},this.sendError=function(e,t,n){var r={type:i.messageType.error,replySerial:e.serial,destination:e.sender,errorName:t,signature:"s",body:[n]};this.connection.message(r)},this.sendReply=function(e,t,n){var r={type:i.messageType.methodReturn,replySerial:e.serial,destination:e.sender,signature:t,body:n};this.connection.message(r)},this.connection.on("message",function(e){var t;if(e.type==i.messageType.methodReturn||e.type==i.messageType.error){if(t=c.cookies[e.replySerial]){delete c.cookies[e.replySerial];var n={connection:c.connection,bus:c,message:e,signature:e.signature},r=e.body||[];e.type==i.messageType.methodReturn?(r=[null].concat(r),t.apply(n,r)):t.call(n,r)}}else if(e.type==i.messageType.signal)c.signals.emit(c.mangle(e),e.body,e.signature);else{if(o(e,c))return;var s,a,u;if((s=c.exportedObjects[e.path])&&(a=s[e.interface])){var l=(u=a[1])[e.member];if(!l)throw new Error("Method "+e.member+" is not implemented ");try{d=l.apply(u,e.body)}catch(e){throw e}var f=a[0].methods[e.member][1],h={type:i.messageType.methodReturn,destination:e.sender,replySerial:e.serial};return d&&(h.signature=f,h.body=[d]),void c.connection.message(h)}if(t=c.methodCallHandlers[c.mangle(e)]){var d;try{d=t[0].apply(null,e.body)}catch(e){return void c.sendError(e.message,e.description)}h={type:i.messageType.methodReturn,destination:e.sender,replySerial:e.serial};d&&(h.signature=t[1],h.body=d),c.connection.message(h)}else c.sendError(e,"org.freedesktop.DBus.Error.UnknownService","Uh oh oh")}}),this.setMethodCallHandler=function(e,t,n,r){var i=c.mangle(e,t,n);c.methodCallHandlers[i]=r},this.exportInterface=function(e,t,n){var r;if(r=c.exportedObjects[t]?c.exportedObjects[t]:c.exportedObjects[t]={},r[n.name]=[n,e],"function"==typeof e.emit){var o=e.emit;e.emit=function(){var r=Array.prototype.slice.apply(arguments),s=r[0];if(!s)throw new Error("Trying to emit undefined signa");var a;if(n.signals&&n.signals[s]){a=n.signals[s];var u={type:i.messageType.signal,serial:c.serial,interface:n.name,path:t,member:s};a[0]&&(u.signature=a[0],u.body=r.slice(1)),c.connection.message(u),c.serial++}o.apply(e,r)}}},!0!==s.direct?this.invokeDbus({member:"Hello"},function(e,t){if(e)throw new Error(e);c.name=t}):c.name=null,this.getService=function(e){return new u(e,this)},this.getObject=function(e,t,n){return this.getService(e).getObject(t,n)},this.getInterface=function(e,t,n,r){return this.getObject(e,t,function(e,t){if(e)return r(e);r(null,t.as(n))})},this.addMatch=function(e,t){if(!c.name)return t(null,null);this.invokeDbus({member:"AddMatch",signature:"s",body:[e]},t)},this.removeMatch=function(e,t){if(!c.name)return t(null,null);this.invokeDbus({member:"RemoveMatch",signature:"s",body:[e]},t)},this.getId=function(e){this.invokeDbus({member:"GetId"},e)},this.requestName=function(e,t,n){this.invokeDbus({member:"RequestName",signature:"su",body:[e,t]},function(e,t){n&&n(e,t)})},this.releaseName=function(e,t){this.invokeDbus({member:"ReleaseName",signature:"s",body:[e]},t)},this.listNames=function(e){this.invokeDbus({member:"ListNames"},e)},this.listActivatableNames=function(e){this.invokeDbus({member:"ListActivatableNames",signature:"s",body:[name]},e)},this.updateActivationEnvironment=function(e,t){this.invokeDbus({member:"UpdateActivationEnvironment",signature:"a{ss}",body:[e]},t)},this.startServiceByName=function(e,t,n){this.invokeDbus({member:"StartServiceByName",signature:"su",body:[e,t]},n)},this.getConnectionUnixUser=function(e,t){this.invokeDbus({member:"GetConnectionUnixUser",signature:"s",body:[e]},t)},this.getConnectionUnixProcessId=function(e,t){this.invokeDbus({member:"GetConnectionUnixProcessID",signature:"s",body:[e]},t)},this.getNameOwner=function(e,t){this.invokeDbus({member:"GetNameOwner",signature:"s",body:[e]},t)},this.nameHasOwner=function(e,t){this.invokeDbus({member:"NameHasOwner",signature:"s",body:[e]},t)}}},function(e,t,n){function r(e){var t,n=[],r=function(e,t,r){e&&a(e).forEach(function(e,o){var s=t?t[o]:r+o,a="signal"===r?"":'" direction="'+r;n.push('      <arg type="'+i([e])+'" name="'+s+a+'" />')})};if(n.push('  <interface name="'+e.name+'">'),e.methods)for(t in e.methods){var o=e.methods[t];n.push('    <method name="'+t+'">'),r(o[0],o[2],"in"),r(o[1],o[3],"out"),n.push("    </method>")}if(e.signals)for(t in e.signals){var s=e.signals[t];n.push('    <signal name="'+t+'">'),r(s[0],s.slice(1),"signal"),n.push("    </signal>")}if(e.properties)for(t in e.properties)n.push('    <property name="'+t+'" type="'+e.properties[t]+'" access="readwrite"/>');return n.push("  </interface>"),n.join("\n")}function i(e){var t=[];return e.forEach(function(e){t.push(e.type+i(e.child)),"{"===e.type&&t.push("}"),"("===e.type&&t.push(")")}),t.join("")}var o,s=n(226),a=n(230);e.exports=function(e,t){if("org.freedesktop.DBus.Introspectable"===e.interface&&"Introspect"===e.member){"/"==e.path&&(e.path="");var n,i=['<!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"\n    "http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">'],a={};for(var u in t.exportedObjects)if(0===u.indexOf(e.path))if(n=t.exportedObjects[e.path])a[e.path]=n;else{if("/"!=u[e.path.length])continue;a[u.substr(e.path.length).split("/")[1]]=null}var c,l=Object.keys(a).length;if(0===l)i.push("<node/>");else if(1===l)if(n=a[Object.keys(a)[0]]){i.push("<node>");for(c in n)i.push(r(n[c][0]));i.push(o),i.push("</node>")}else i.push('<node>\n  <node name="'+Object.keys(a)[0]+'"/>\n  </node>');else{i.push("<node>");for(var f in a)if(null===a[f])i.push('  <node name="'+f+'" />');else{n=a[f],i.push('  <node name="'+f+'" >');for(c in n)i.push(r(n[c][0]));i.push(o),i.push("  </node>")}i.push("</node>")}p={type:s.messageType.methodReturn,replySerial:e.serial,destination:e.sender,signature:"s",body:[i.join("\n")]};return t.connection.message(p),1}if("org.freedesktop.DBus.Properties"===e.interface){var h=e.body[0];if(!(n=t.exportedObjects[e.path])||!n[h])return t.sendError(e,"org.freedesktop.DBus.Error.UnknownMethod","Uh oh oh"),1;var d=n[h][1],p={type:s.messageType.methodReturn,replySerial:e.serial,destination:e.sender};if("Get"===e.member||"Set"===e.member){var g=e.body[1],_=n[h][0].properties[g];if("Get"===e.member){var v=d[g];p.signature="v",p.body=[[_,v]]}else d[g]=1234}else if("GetAll"==e.member){p.signature="a{sv}";var y=[];for(var m in n[h][0].properties){var b=n[h][0].properties[m];y.push([m,[b,d[m]]])}p.body=[y]}return t.connection.message(p),1}if("org.freedesktop.DBus.Peer"===e.interface){p={type:s.messageType.methodReturn,replySerial:e.serial,destination:e.sender};return"Ping"===e.member||"GetMachineId"===e.member&&(p.signature="s",p.body=["This is a machine id. TODO: implement"]),t.connection.message(p),1}return 0},e.exports.interfaceToXML=r,o='  <interface name="org.freedesktop.DBus.Properties">\n    <method name="Get">\n      <arg type="s" name="interface_name" direction="in"/>\n      <arg type="s" name="property_name" direction="in"/>\n      <arg type="v" name="value" direction="out"/>\n    </method>\n    <method name="GetAll">\n      <arg type="s" name="interface_name" direction="in"/>\n      <arg type="a{sv}" name="properties" direction="out"/>\n    </method>\n    <method name="Set">\n      <arg type="s" name="interface_name" direction="in"/>\n      <arg type="s" name="property_name" direction="in"/>\n      <arg type="v" name="value" direction="in"/>\n    </method>\n    <signal name="PropertiesChanged">\n      <arg type="s" name="interface_name"/>\n      <arg type="a{sv}" name="changed_properties"/>\n      <arg type="as" name="invalidated_properties"/>\n    </signal>\n  </interface>\n  <interface name="org.freedesktop.DBus.Introspectable">\n    <method name="Introspect">\n      <arg type="s" name="xml_data" direction="out"/>\n    </method>\n  </interface>\n  <interface name="org.freedesktop.DBus.Peer">\n    <method name="Ping"/>\n    <method name="GetMachineId">\n      <arg type="s" name="machine_uuid" direction="out"/>\n    </method>\n  </interface>'},function(e,t,n){var r=n(260);e.exports=function(t,n){var i=t.service.bus;i.invoke({destination:t.service.name,path:t.name,interface:"org.freedesktop.DBus.Introspectable",member:"Introspect"},function(o,s){if(o)return n(o);new r.Parser({explicitArray:!0}).parseString(s,function(r,o){if(r)return n(r);if(!o.interface){if(o.node&&o.node.length>0&&o.node[0]["@"]){var s=Object.assign(t,{});return"/"!==s.name.slice(-1)&&(s.name+="/"),s.name+=o.node[0]["@"].name,e.exports(s,n)}return n(new Error("No such interface found"))}var a,u,c,l,f,h,d,p,g,_,v,y,m={},b=[],w=o.interface,k=o.node;for(null==k&&(k=[]),a=1;a<k.length;++a)b.push(k[a]["@"].name);for(a=0;a<w.length;++a){for(p=w[a],l=p["@"].name,y=m[l]={},function(){function e(e){var t;return-1==(t=r.indexOf(e))&&(t=r.push(e)-1,o[t]=function(t){e.apply(null,t)}),o[t]}function n(e,t,n){return"type='signal',path='"+e+"',interface='"+t+"',member='"+n+"'"}var r=[],o=[];y.addListener=y.on=function(r){return function(o,s){var a=i.mangle(t.name,r,o);if(i.signals.listeners(a).length)i.signals.on(a,e(s));else{var u=n(t.name,r,o);i.addMatch(u,function(t,n){if(t)throw new Error(t);i.signals.on(a,e(s))})}}}(l),y.removeListener=function(s){return function(a,u){var c=i.mangle(t.name,s,a);if(i.signals.removeListener(c,e(u)),!i.signals.listeners(c).length){var l=n(t.name,s,a);i.removeMatch(l,function(e,t){if(e)throw new Error(e);r.length=0,o.length=0})}}}(l)}(),u=0;p.method&&u<p.method.length;++u){for(v="",S=(f=p.method[u])["@"].name,g=0;f.arg&&g<f.arg.length;++g)"in"===(_=f.arg[g]["@"]).direction&&(v+=_.type);y[S]=function(e,n,r){return function(){var o=Array.prototype.slice.apply(arguments),s="function"==typeof o[o.length-1]?o.pop():function(){},a={destination:t.service.name,path:t.name,interface:e,member:n};""!==r&&(a.signature=r,a.body=o),i.invoke(a,s)}}(l,S,v)}for(var E=0;p.property&&E<p.property.length;++E){S=(h=p.property[E])["@"].name,function(e,n,r,o){Object.defineProperty(e,r,{enumerable:!0,get:function(){return function(e){i.invoke({destination:t.service.name,path:t.name,interface:"org.freedesktop.DBus.Properties",member:"Get",signature:"ss",body:[n,r]},function(t,n){t&&e(t),1===n[0].length?e(t,n[1][0]):e(t,n[1])})}},set:function(e){i.invoke({destination:t.service.name,path:t.name,interface:"org.freedesktop.DBus.Properties",member:"Set",signature:"ssv",body:[n,r,[o["@"].type,e]]})}})}(y,l,S,h)}for(c=0;p.signal&&c<p.signal.length;++c)var S=(d=p.signal[c])["@"].name}n(null,m,b)})})}},function(e,t,n){(function(){var e,r,i,o={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a=function(e,t){return function(){return e.apply(t,arguments)}};i=n(261),e=n(96),r=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!=e&&0===Object.keys(e).length},t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null},.2:{explicitCharkey:!1,trim:!1,normalize:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null}},t.ValidationError=function(e){function t(e){this.message=e}return s(t,e),t.name="ValidationError",t}(Error),t.Parser=function(e){function n(e){this.parseString=a(this.parseString,this),this.reset=a(this.reset,this);var n,r,i;this.options={},i=t.defaults[.1];for(n in i)o.call(i,n)&&(r=i[n],this.options[n]=r);for(n in e)o.call(e,n)&&(r=e[n],this.options[n]=r);this.reset()}return s(n,e),n.name="Parser",n.prototype.reset=function(){var e,t,n,s,a=this;return this.removeAllListeners(),this.saxParser=i.parser(!0,{trim:!1,normalize:!1}),n=!1,this.saxParser.onerror=function(e){if(!n)return n=!0,a.emit("error",e)},this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,s=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){var r,i,u;if(i={},i[t]="",!a.options.ignoreAttrs){u=n.attributes;for(r in u)o.call(u,r)&&(e in i||a.options.mergeAttrs||(i[e]={}),a.options.mergeAttrs?i[r]=n.attributes[r]:i[e][r]=n.attributes[r])}return i["#name"]=n.name,s.push(i)},this.saxParser.onclosetag=function(){var e,n,i,o,u,c;return i=s.pop(),n=i["#name"],delete i["#name"],u=s[s.length-1],i[t].match(/^\s*$/)?delete i[t]:(a.options.trim&&(i[t]=i[t].trim()),a.options.normalize&&(i[t]=i[t].replace(/\s{2,}/g," ").trim()),1===Object.keys(i).length&&t in i&&!a.EXPLICIT_CHARKEY&&(i=i[t])),void 0!==a.options.emptyTag&&r(i)&&(i=a.options.emptyTag),null!=a.options.validator&&(c="/"+function(){var t,n,r;for(r=[],t=0,n=s.length;t<n;t++)e=s[t],r.push(e["#name"]);return r}().concat(n).join("/"),i=a.options.validator(c,u&&u[n],i)),s.length>0?a.options.explicitArray?(u[n]instanceof Array||(u[n]=[]),u[n].push(i)):n in u?u[n]instanceof Array?u[n].push(i):(o=u[n],u[n]=[o],u[n].push(i)):u[n]=i:(a.options.explicitRoot&&(o=i,(i={})[n]=o),a.resultObject=i,a.emit("end",a.resultObject))},this.saxParser.ontext=this.saxParser.oncdata=function(e){var n;if(n=s[s.length-1])return n[t]+=e}},n.prototype.parseString=function(e,n){if(null!=n&&"function"==typeof n&&(this.on("end",function(e){return this.reset(),n(null,e)}),this.on("error",function(e){return this.reset(),n(e)})),""===e.toString().trim())return this.emit("end",null),!0;try{return this.saxParser.write(e.toString())}catch(e){if(e instanceof t.ValidationError)return this.emit("error",e.message);throw e}},n}(e.EventEmitter)}).call(this)},function(e,t,n){(function(e){!function(t){function r(e,n){if(!(this instanceof r))return new r(e,n);var i=this;o(i),i.q=i.c="",i.bufferCheckPosition=t.MAX_BUFFER_LENGTH,i.opt=n||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=F.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(I)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),d(i,"onready")}function i(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,i=0,o=C.length;i<o;i++){var s=e[C[i]].length;if(s>n)switch(C[i]){case"textNode":g(e);break;case"cdata":p(e,"oncdata",e.cdata),e.cdata="";break;case"script":p(e,"onscript",e.script),e.script="";break;default:v(e,"Max buffer length exceeded: "+C[i])}r=Math.max(r,s)}var a=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=a+e.position}function o(e){for(var t=0,n=C.length;t<n;t++)e[C[t]]=""}function s(e){g(e),""!==e.cdata&&(p(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(p(e,"onscript",e.script),e.script="")}function a(e,t){if(!(this instanceof a))return new a(e,t);A.apply(this),this._parser=new r(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,R.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})})}function u(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function c(e){return'"'===e||"'"===e}function l(e){return">"===e||u(e)}function f(e,t){return e.test(t)}function h(e,t){return!f(e,t)}function d(e,t,n){e[t]&&e[t](n)}function p(e,t,n){e.textNode&&g(e),d(e,t,n)}function g(e){e.textNode=_(e.opt,e.textNode),e.textNode&&d(e,"ontext",e.textNode),e.textNode=""}function _(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function v(e,t){return g(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,d(e,"onerror",t),e}function y(e){return e.sawRoot&&!e.closedRoot&&m(e,"Unclosed root tag"),e.state!==F.BEGIN&&e.state!==F.BEGIN_WHITESPACE&&e.state!==F.TEXT&&v(e,"Unexpected end"),g(e),e.c="",e.closed=!0,d(e,"onend"),r.call(e,e.strict,e.opt),e}function m(e,t){if("object"!==(void 0===e?"undefined":_typeof(e))||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&v(e,t)}function b(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,p(e,"onopentagstart",n)}function w(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function k(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=w(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==B)m(e,"xml: prefix must be bound to "+B+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==M)m(e,"xmlns: prefix must be bound to "+M+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,p(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function E(e,t){if(e.opt.xmlns){var n=e.tag,r=w(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(m(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){p(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,s=e.attribList.length;o<s;o++){var a=e.attribList[o],u=a[0],c=a[1],l=w(u,!0),f=l.prefix,h=l.local,d=""===f?"":n.ns[f]||"",g={name:u,value:c,prefix:f,local:h,uri:d};f&&"xmlns"!==f&&!d&&(m(e,"Unbound namespace prefix: "+JSON.stringify(f)),g.uri=f),e.tag.attributes[u]=g,p(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),p(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=F.TEXT:e.state=F.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function S(e){if(!e.tagName)return m(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=F.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=F.SCRIPT);p(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)m(e,"Unexpected close tag");if(t<0)return m(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=F.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,p(e,"onclosetag",e.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach(function(t){var n=o.ns[t];p(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=F.TEXT}function x(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(m(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function T(e,t){"<"===t?(e.state=F.OPEN_WAKA,e.startTagPosition=e.position):u(t)||(m(e,"Non-whitespace before first tag."),e.textNode=t,e.state=F.TEXT)}function O(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}t.parser=function(e,t){return new r(e,t)},t.SAXParser=r,t.SAXStream=a,t.createStream=function(e,t){return new a(e,t)},t.MAX_BUFFER_LENGTH=65536;var C=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){y(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return v(t,"Cannot write after close. Assign an onready handler.");if(null===e)return y(t);"object"===(void 0===e?"undefined":_typeof(e))&&(e=e.toString());for(var n=0,r="";r=O(e,n++),t.c=r,r;)switch(t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++),t.state){case F.BEGIN:if(t.state=F.BEGIN_WHITESPACE,"\ufeff"===r)continue;T(t,r);continue;case F.BEGIN_WHITESPACE:T(t,r);continue;case F.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=n-1;r&&"<"!==r&&"&"!==r;)(r=O(e,n++))&&t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,n-1)}"<"!==r||t.sawRoot&&t.closedRoot&&!t.strict?(u(r)||t.sawRoot&&!t.closedRoot||m(t,"Text data outside of root node."),"&"===r?t.state=F.TEXT_ENTITY:t.textNode+=r):(t.state=F.OPEN_WAKA,t.startTagPosition=t.position);continue;case F.SCRIPT:"<"===r?t.state=F.SCRIPT_ENDING:t.script+=r;continue;case F.SCRIPT_ENDING:"/"===r?t.state=F.CLOSE_TAG:(t.script+="<"+r,t.state=F.SCRIPT);continue;case F.OPEN_WAKA:if("!"===r)t.state=F.SGML_DECL,t.sgmlDecl="";else if(u(r));else if(f(j,r))t.state=F.OPEN_TAG,t.tagName=r;else if("/"===r)t.state=F.CLOSE_TAG,t.tagName="";else if("?"===r)t.state=F.PROC_INST,t.procInstName=t.procInstBody="";else{if(m(t,"Unencoded <"),t.startTagPosition+1<t.position){var s=t.position-t.startTagPosition;r=new Array(s).join(" ")+r}t.textNode+="<"+r,t.state=F.TEXT}continue;case F.SGML_DECL:(t.sgmlDecl+r).toUpperCase()===P?(p(t,"onopencdata"),t.state=F.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+r==="--"?(t.state=F.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===N?(t.state=F.DOCTYPE,(t.doctype||t.sawRoot)&&m(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===r?(p(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=F.TEXT):c(r)?(t.state=F.SGML_DECL_QUOTED,t.sgmlDecl+=r):t.sgmlDecl+=r;continue;case F.SGML_DECL_QUOTED:r===t.q&&(t.state=F.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case F.DOCTYPE:">"===r?(t.state=F.TEXT,p(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,"["===r?t.state=F.DOCTYPE_DTD:c(r)&&(t.state=F.DOCTYPE_QUOTED,t.q=r));continue;case F.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=F.DOCTYPE);continue;case F.DOCTYPE_DTD:t.doctype+=r,"]"===r?t.state=F.DOCTYPE:c(r)&&(t.state=F.DOCTYPE_DTD_QUOTED,t.q=r);continue;case F.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=F.DOCTYPE_DTD,t.q="");continue;case F.COMMENT:"-"===r?t.state=F.COMMENT_ENDING:t.comment+=r;continue;case F.COMMENT_ENDING:"-"===r?(t.state=F.COMMENT_ENDED,t.comment=_(t.opt,t.comment),t.comment&&p(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=F.COMMENT);continue;case F.COMMENT_ENDED:">"!==r?(m(t,"Malformed comment"),t.comment+="--"+r,t.state=F.COMMENT):t.state=F.TEXT;continue;case F.CDATA:"]"===r?t.state=F.CDATA_ENDING:t.cdata+=r;continue;case F.CDATA_ENDING:"]"===r?t.state=F.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=F.CDATA);continue;case F.CDATA_ENDING_2:">"===r?(t.cdata&&p(t,"oncdata",t.cdata),p(t,"onclosecdata"),t.cdata="",t.state=F.TEXT):"]"===r?t.cdata+="]":(t.cdata+="]]"+r,t.state=F.CDATA);continue;case F.PROC_INST:"?"===r?t.state=F.PROC_INST_ENDING:u(r)?t.state=F.PROC_INST_BODY:t.procInstName+=r;continue;case F.PROC_INST_BODY:if(!t.procInstBody&&u(r))continue;"?"===r?t.state=F.PROC_INST_ENDING:t.procInstBody+=r;continue;case F.PROC_INST_ENDING:">"===r?(p(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=F.TEXT):(t.procInstBody+="?"+r,t.state=F.PROC_INST_BODY);continue;case F.OPEN_TAG:f(L,r)?t.tagName+=r:(b(t),">"===r?E(t):"/"===r?t.state=F.OPEN_TAG_SLASH:(u(r)||m(t,"Invalid character in tag name"),t.state=F.ATTRIB));continue;case F.OPEN_TAG_SLASH:">"===r?(E(t,!0),S(t)):(m(t,"Forward-slash in opening tag not followed by >"),t.state=F.ATTRIB);continue;case F.ATTRIB:if(u(r))continue;">"===r?E(t):"/"===r?t.state=F.OPEN_TAG_SLASH:f(j,r)?(t.attribName=r,t.attribValue="",t.state=F.ATTRIB_NAME):m(t,"Invalid attribute name");continue;case F.ATTRIB_NAME:"="===r?t.state=F.ATTRIB_VALUE:">"===r?(m(t,"Attribute without value"),t.attribValue=t.attribName,k(t),E(t)):u(r)?t.state=F.ATTRIB_NAME_SAW_WHITE:f(L,r)?t.attribName+=r:m(t,"Invalid attribute name");continue;case F.ATTRIB_NAME_SAW_WHITE:if("="===r)t.state=F.ATTRIB_VALUE;else{if(u(r))continue;m(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",p(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===r?E(t):f(j,r)?(t.attribName=r,t.state=F.ATTRIB_NAME):(m(t,"Invalid attribute name"),t.state=F.ATTRIB)}continue;case F.ATTRIB_VALUE:if(u(r))continue;c(r)?(t.q=r,t.state=F.ATTRIB_VALUE_QUOTED):(m(t,"Unquoted attribute value"),t.state=F.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case F.ATTRIB_VALUE_QUOTED:if(r!==t.q){"&"===r?t.state=F.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}k(t),t.q="",t.state=F.ATTRIB_VALUE_CLOSED;continue;case F.ATTRIB_VALUE_CLOSED:u(r)?t.state=F.ATTRIB:">"===r?E(t):"/"===r?t.state=F.OPEN_TAG_SLASH:f(j,r)?(m(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=F.ATTRIB_NAME):m(t,"Invalid attribute name");continue;case F.ATTRIB_VALUE_UNQUOTED:if(!l(r)){"&"===r?t.state=F.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}k(t),">"===r?E(t):t.state=F.ATTRIB;continue;case F.CLOSE_TAG:if(t.tagName)">"===r?S(t):f(L,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=F.SCRIPT):(u(r)||m(t,"Invalid tagname in closing tag"),t.state=F.CLOSE_TAG_SAW_WHITE);else{if(u(r))continue;h(j,r)?t.script?(t.script+="</"+r,t.state=F.SCRIPT):m(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case F.CLOSE_TAG_SAW_WHITE:if(u(r))continue;">"===r?S(t):m(t,"Invalid characters in closing tag");continue;case F.TEXT_ENTITY:case F.ATTRIB_VALUE_ENTITY_Q:case F.ATTRIB_VALUE_ENTITY_U:var a,d;switch(t.state){case F.TEXT_ENTITY:a=F.TEXT,d="textNode";break;case F.ATTRIB_VALUE_ENTITY_Q:a=F.ATTRIB_VALUE_QUOTED,d="attribValue";break;case F.ATTRIB_VALUE_ENTITY_U:a=F.ATTRIB_VALUE_UNQUOTED,d="attribValue"}";"===r?(t[d]+=x(t),t.entity="",t.state=a):f(t.entity.length?D:U,r)?t.entity+=r:(m(t,"Invalid character in entity name"),t[d]+="&"+t.entity+r,t.entity="",t.state=a);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&i(t),t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var A;try{A=n(95).Stream}catch(e){A=function(){}}var R=t.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});a.prototype=Object.create(A.prototype,{constructor:{value:a}}),a.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var r=n(255).StringDecoder;this._decoder=new r("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},a.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},a.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===R.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),A.prototype.on.call(n,e,t)};var P="[CDATA[",N="DOCTYPE",B="http://www.w3.org/XML/1998/namespace",M="http://www.w3.org/2000/xmlns/",I={xml:B,xmlns:M},j=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,L=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,F=0;t.STATE={BEGIN:F++,BEGIN_WHITESPACE:F++,TEXT:F++,TEXT_ENTITY:F++,OPEN_WAKA:F++,SGML_DECL:F++,SGML_DECL_QUOTED:F++,DOCTYPE:F++,DOCTYPE_QUOTED:F++,DOCTYPE_DTD:F++,DOCTYPE_DTD_QUOTED:F++,COMMENT_STARTING:F++,COMMENT:F++,COMMENT_ENDING:F++,COMMENT_ENDED:F++,CDATA:F++,CDATA_ENDING:F++,CDATA_ENDING_2:F++,PROC_INST:F++,PROC_INST_BODY:F++,PROC_INST_ENDING:F++,OPEN_TAG:F++,OPEN_TAG_SLASH:F++,ATTRIB:F++,ATTRIB_NAME:F++,ATTRIB_NAME_SAW_WHITE:F++,ATTRIB_VALUE:F++,ATTRIB_VALUE_QUOTED:F++,ATTRIB_VALUE_CLOSED:F++,ATTRIB_VALUE_UNQUOTED:F++,ATTRIB_VALUE_ENTITY_Q:F++,ATTRIB_VALUE_ENTITY_U:F++,CLOSE_TAG:F++,CLOSE_TAG_SAW_WHITE:F++,SCRIPT:F++,SCRIPT_ENDING:F++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(e){var n=t.ENTITIES[e],r="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r});for(var z in t.STATE)t.STATE[t.STATE[z]]=z;F=t.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,r,i=[],o=-1,s=arguments.length;if(!s)return"";for(var a="";++o<s;){var u=Number(arguments[o]);if(!isFinite(u)||u<0||u>1114111||t(u)!==u)throw RangeError("Invalid code point: "+u);u<=65535?i.push(u):(n=55296+((u-=65536)>>10),r=u%1024+56320,i.push(n,r)),(o+1===s||i.length>16384)&&(a+=e.apply(null,i),i.length=0)}return a};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}(t)}).call(t,n(68).Buffer)},function(e,t,n){var r=n(224),i=(n(96).EventEmitter,n(225));e.exports.createServer=function(e){return new function(){var t=123;this.server=i.createServer(function(n){n.idd=t,t++;var i=r({stream:n,server:!0});e&&e(i)}),this.listen=this.server.listen.bind(this.server)}}},function(e,t,n){function r(e){if(this.id=e&&e.id||null,this.networkId=this.id||null,this.default=e&&e.default||!1,this.localShortcut=!e||!1!==e.localShortcut,this.reconnectDelay=e&&e.reconnectDelay||1e4,this.httpTransport=e&&e.httpTransport,this.url=e&&e.url||null,this.server=null,null!=this.url){var t=i.parse(this.url);if("ws:"!=t.protocol)throw new Error('Invalid protocol, "ws:" expected');if(-1==this.url.indexOf(":id"))throw new Error('":id" placeholder missing in url');this.address=t.protocol+"//"+t.host,this.ready=this._initServer(this.url)}else this.address=null,this.ready=s.resolve(this);this.agents={}}var i=n(14),o=n(12),s=n(2),a=n(13),u=n(147),c=n(264);(r.prototype=new u).type="ws",r.prototype.getUrl=function(e){return this.url?this.url.replace(":id",e):null},r.prototype._initServer=function(e){var t=n(265).Server,r=i.parse(e).port||80,o=this;return new s(function(e,n){void 0!==o.httpTransport?o.server=new t({server:o.httpTransport.server},function(){e(o)}):o.server=new t({port:r},function(){e(o)}),o.server.on("connection",o._onConnection.bind(o)),o.server.on("error",function(e){n(e)})})},r.prototype._onConnection=function(e){var t=e.upgradeReq.url,n=i.parse(t,!0),r=n.pathname,s=a.normalizeURL(this.address+r),u=n.query.id||o(),c=this.agents[s];c?c._onConnection(u,e):e.close()},r.prototype.connect=function(e,t){var n=-1!==e.indexOf("://")?e:this.getUrl(e)||e;if(n&&(n=a.normalizeURL(n)),this.agents[n])throw new Error("Agent with id "+this.id+" already exists");var r=new c(this,n,t);return this.agents[r.url]=r,r},r.prototype.close=function(){for(var e in this.agents)this.agents.hasOwnProperty(e)&&this.agents[e].close();this.agents={},this.server&&this.server.close()},e.exports=r},function(e,t,n){function r(e,t,n){this.transport=e,this.url=t?a.normalizeURL(t):i(),this.receive=n,this.sockets={},this.closed=!1,this.reconnectTimers={},this.ready=o.resolve(this)}var i=n(12),o=n(2),s="undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:n(265),a=n(13);n(150);r.prototype.send=function(e,t){if(this.transport.localShortcut){var n=this.transport.agents[e];if(n)try{return n.receive(this.url,t),o.resolve()}catch(e){return o.reject(e)}}var r=this.sockets[e];if(r)try{if(r.readyState==r.CONNECTING)return new o(function(e,n){r.onopen.callbacks.push(function(){r.send(JSON.stringify(t)),e()})});if(r.readyState==r.OPEN)return r.send(JSON.stringify(t)),o.resolve();r=null}catch(e){return o.reject(e)}if(!r){var i=this;return new o(function(n,r){i._connect(e,function(e){e.send(JSON.stringify(t)),n()},function(t){r(new Error('Failed to connect to agent "'+e+'"'))})})}},r.prototype.connect=function(e){var t=this;return new o(function(n,r){t._connect(e,function(){n(t)},r)})},r.prototype._connect=function(e,t,n,r){var i=this,o=new s(e+"?id="+this.url);return i.sockets[e]=o,o.onopen=function(){r=!0,o.onopen.callbacks.forEach(function(e){e(o)}),o.onopen.callbacks=[]},o.onopen.callbacks=t?[t]:[],o.onmessage=function(t){i.receive(e,JSON.parse(t.data))},o.onclose=function(){delete i.sockets[e],r&&i._reconnect(e)},o.onerror=function(t){delete i.sockets[e],n&&n(t)},o},r.prototype._reconnect=function(e){var t=this;0==t.closed&&null==t.reconnectTimers[e]&&(t.reconnectTimers[e]=setTimeout(function(){delete t.reconnectTimers[e],t._connect(e,null,null,!0)},t.transport.reconnectDelay))},r.prototype._onConnection=function(e,t){var n=this;return t.onmessage=function(t){n.receive(e,JSON.parse(t.data))},t.onclose=function(){delete n.sockets[e]},t.onerror=function(t){delete n.sockets[e]},this.sockets[e]&&this.sockets[e].close(),this.sockets[e]=t,t},r.prototype.list=function(){return Object.keys(this.sockets)},r.prototype.close=function(){this.closed=!0;for(var e in this.sockets)this.sockets.hasOwnProperty(e)&&this.sockets[e].close();this.sockets={},delete this.transport.agents[this.url]},e.exports=r},function(e,t,n){var r=n(266);r.Server=n(308),r.Receiver=n(302),r.Sender=n(307),e.exports=r},function(e,t,n){function r(e,t,n){this.protocolVersion=n.protocolVersion,this._maxPayload=n.maxPayload,this.extensions=n.extensions,this.protocol=n.protocol,this._isServer=!0,this.setSocket(e,t)}function i(e,t,n){var r=this;if(n=Object.assign({protocolVersion:v[1],protocol:t.join(","),perMessageDeflate:!0,localAddress:null,headers:null,family:null,origin:null,agent:null,host:null,checkServerIdentity:null,rejectUnauthorized:null,passphrase:null,ciphers:null,cert:null,key:null,pfx:null,ca:null},n),-1===v.indexOf(n.protocolVersion))throw new Error("unsupported protocol version: "+n.protocolVersion+" (supported versions: "+v.join(", ")+")");this.protocolVersion=n.protocolVersion,this._isServer=!1,this.url=e;var i=l.parse(e),o="ws+unix:"===i.protocol;if(!(i.host||o&&i.path))throw new Error("invalid url");var a,h="wss:"===i.protocol||"https:"===i.protocol,g=s.randomBytes(16).toString("base64"),_=h?u:c,m={};n.perMessageDeflate&&(a=new f(!0!==n.perMessageDeflate?n.perMessageDeflate:{},!1),m[f.extensionName]=a.offer());var b={port:i.port||(h?443:80),host:i.hostname,path:"/",headers:{"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":g,Connection:"Upgrade",Upgrade:"websocket"}};if(n.headers&&Object.assign(b.headers,n.headers),Object.keys(m).length&&(b.headers["Sec-WebSocket-Extensions"]=d.format(m)),n.protocol&&(b.headers["Sec-WebSocket-Protocol"]=n.protocol),n.origin&&(n.protocolVersion<13?b.headers["Sec-WebSocket-Origin"]=n.origin:b.headers.Origin=n.origin),n.host&&(b.headers.Host=n.host),i.auth&&(b.auth=i.auth),n.localAddress&&(b.localAddress=n.localAddress),n.family&&(b.family=n.family),o){var w=i.path.split(":");b.socketPath=w[0],b.path=w[1]}else i.path&&("/"!==i.path.charAt(0)?b.path="/"+i.path:b.path=i.path);var k=n.agent;(null!=n.rejectUnauthorized||n.checkServerIdentity||n.passphrase||n.ciphers||n.cert||n.key||n.pfx||n.ca)&&(n.passphrase&&(b.passphrase=n.passphrase),n.ciphers&&(b.ciphers=n.ciphers),n.cert&&(b.cert=n.cert),n.key&&(b.key=n.key),n.pfx&&(b.pfx=n.pfx),n.ca&&(b.ca=n.ca),n.checkServerIdentity&&(b.checkServerIdentity=n.checkServerIdentity),null!=n.rejectUnauthorized&&(b.rejectUnauthorized=n.rejectUnauthorized),k||(k=new _.Agent(b))),k&&(b.agent=k),this._req=_.get(b),this._req.on("error",function(e){r._req.aborted||(r._req=null,r.emit("error",e),r.finalize(!0))}),this._req.on("response",function(e){r.emit("unexpected-response",r._req,e)||(r._req.abort(),r.emit("error",new Error("unexpected server response ("+e.statusCode+")")),r.finalize(!0))}),this._req.on("upgrade",function(e,t,i){if(r.emit("headers",e.headers,e),r.readyState===y.CONNECTING){r._req=null;var o=s.createHash("sha1").update(g+p.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==o)return t.destroy(),r.emit("error",new Error("invalid server key")),r.finalize(!0);var u,c=e.headers["sec-websocket-protocol"],l=(n.protocol||"").split(/, */);if(!n.protocol&&c?u="server sent a subprotocol even though none requested":n.protocol&&!c?u="server sent no subprotocol even though requested":c&&-1===l.indexOf(c)&&(u="server responded with an invalid protocol"),u)return t.destroy(),r.emit("error",new Error(u)),r.finalize(!0);c&&(r.protocol=c);var h=d.parse(e.headers["sec-websocket-extensions"]);if(a&&h[f.extensionName]){try{a.accept(h[f.extensionName])}catch(e){return t.destroy(),r.emit("error",new Error("invalid extension parameter")),r.finalize(!0)}r.extensions[f.extensionName]=a}r.setSocket(t,i)}})}var o=n(96),s=n(72),a=n(267),u=n(268),c=n(197),l=n(14),f=n(269),h=n(299),d=n(300),p=n(301),g=n(302),_=n(307),v=[8,13],y=function(e){function t(e,n,o){_classCallCheck2(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n?"string"==typeof n?n=[n]:Array.isArray(n)||(o=n,n=[]):n=[],s.readyState=t.CONNECTING,s.bytesReceived=0,s.extensions={},s.protocol="",s._binaryType=p.BINARY_TYPES[0],s._finalize=s.finalize.bind(s),s._finalizeCalled=!1,s._closeMessage=null,s._closeTimer=null,s._closeCode=null,s._receiver=null,s._sender=null,s._socket=null,s._ultron=null,Array.isArray(e)?r.call(s,e[0],e[1],o):i.call(s,e,n,o),s}return _inherits(t,e),_createClass(t,[{key:"setSocket",value:function(e,n){var r=this;e.setTimeout(0),e.setNoDelay(),this._receiver=new g(this.extensions,this._maxPayload,this.binaryType),this._sender=new _(e,this.extensions),this._ultron=new a(e),this._socket=e,this._ultron.on("close",this._finalize),this._ultron.on("error",this._finalize),this._ultron.on("end",this._finalize),n&&n.length>0&&(e.unshift(n),n=null),this._ultron.on("data",function(e){r.bytesReceived+=e.length,r._receiver.add(e)}),this._receiver.onmessage=function(e){return r.emit("message",e)},this._receiver.onping=function(e){r.pong(e,!r._isServer,!0),r.emit("ping",e)},this._receiver.onpong=function(e){return r.emit("pong",e)},this._receiver.onclose=function(e,t){r._closeMessage=t,r._closeCode=e,r.close(e,t)},this._receiver.onerror=function(e,t){r.close(t,""),r.emit("error",e)},this._sender.onerror=function(e){r.close(1002,""),r.emit("error",e)},this.readyState=t.OPEN,this.emit("open")}},{key:"finalize",value:function(e){var n=this;this._finalizeCalled||(this.readyState=t.CLOSING,this._finalizeCalled=!0,clearTimeout(this._closeTimer),this._closeTimer=null,e&&(this._closeCode=1006),this._socket&&(this._ultron.destroy(),this._socket.on("error",function(){this.destroy()}),e?this._socket.destroy():this._socket.end(),this._socket=null,this._ultron=null),this._sender&&(this._sender=this._sender.onerror=null),this._receiver?(this._receiver.cleanup(function(){return n.emitClose()}),this._receiver=null):this.emitClose())}},{key:"emitClose",value:function(){this.readyState=t.CLOSED,this.emit("close",this._closeCode||1006,this._closeMessage||""),this.extensions[f.extensionName]&&this.extensions[f.extensionName].cleanup(),this.extensions=null,this.removeAllListeners(),this.on("error",p.NOOP)}},{key:"pause",value:function(){if(this.readyState!==t.OPEN)throw new Error("not opened");this._socket.pause()}},{key:"resume",value:function(){if(this.readyState!==t.OPEN)throw new Error("not opened");this._socket.resume()}},{key:"close",value:function(e,n){var r=this;this.readyState!==t.CLOSED&&(this.readyState!==t.CONNECTING?this.readyState!==t.CLOSING?(this.readyState=t.CLOSING,this._sender.close(e,n,!this._isServer,function(e){e&&r.emit("error",e),r._socket&&(r._closeCode&&r._socket.end(),clearTimeout(r._closeTimer),r._closeTimer=setTimeout(r._finalize,3e4,!0))})):this._closeCode&&this._socket&&this._socket.end():this._req&&!this._req.aborted&&(this._req.abort(),this.emit("error",new Error("closed before the connection is established")),this.finalize(!0)))}},{key:"ping",value:function(e,n,r){if(this.readyState!==t.OPEN){if(r)return;throw new Error("not opened")}"number"==typeof e&&(e=e.toString()),void 0===n&&(n=!this._isServer),this._sender.ping(e||p.EMPTY_BUFFER,n)}},{key:"pong",value:function(e,n,r){if(this.readyState!==t.OPEN){if(r)return;throw new Error("not opened")}"number"==typeof e&&(e=e.toString()),void 0===n&&(n=!this._isServer),this._sender.pong(e||p.EMPTY_BUFFER,n)}},{key:"send",value:function(e,n,r){if("function"==typeof n&&(r=n,n={}),this.readyState===t.OPEN){"number"==typeof e&&(e=e.toString());var i=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},n);this.extensions[f.extensionName]||(i.compress=!1),this._sender.send(e||p.EMPTY_BUFFER,i,r)}else{if(!r)throw new Error("not opened");r(new Error("not opened"))}}},{key:"terminate",value:function(){this.readyState!==t.CLOSED&&(this.readyState!==t.CONNECTING?this.finalize(!0):this._req&&!this._req.aborted&&(this._req.abort(),this.emit("error",new Error("closed before the connection is established")),this.finalize(!0)))}},{key:"CONNECTING",get:function(){return t.CONNECTING}},{key:"CLOSING",get:function(){return t.CLOSING}},{key:"CLOSED",get:function(){return t.CLOSED}},{key:"OPEN",get:function(){return t.OPEN}},{key:"bufferedAmount",get:function(){var e=0;return this._socket&&(e=this._socket.bufferSize+this._sender._bufferedBytes),e}},{key:"binaryType",get:function(){return this._binaryType},set:function(e){p.BINARY_TYPES.indexOf(e)<0||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}}]),t}(o);y.CONNECTING=0,y.OPEN=1,y.CLOSING=2,y.CLOSED=3,["open","error","close","message"].forEach(function(e){Object.defineProperty(y.prototype,"on"+e,{get:function(){for(var t=this.listeners(e),n=0;n<t.length;n++)if(t[n]._listener)return t[n]._listener},set:function(t){for(var n=this.listeners(e),r=0;r<n.length;r++)n[r]._listener&&this.removeListener(e,n[r]);this.addEventListener(e,t)}})}),y.prototype.addEventListener=h.addEventListener,y.prototype.removeEventListener=h.removeEventListener,e.exports=y},function(e,t){function n(e){if(!(this instanceof n))return new n(e);this.id=i++,this.ee=e}var r=Object.prototype.hasOwnProperty,i=0;n.prototype.on=function(e,t,n){return t.__ultron=this.id,this.ee.on(e,t,n),this},n.prototype.once=function(e,t,n){return t.__ultron=this.id,this.ee.once(e,t,n),this},n.prototype.remove=function(){var e,t=arguments,n=this.ee;if(1===t.length&&"string"==typeof t[0])t=t[0].split(/[, ]+/);else if(!t.length)if(n.eventNames)t=n.eventNames();else if(n._events){t=[];for(e in n._events)r.call(n._events,e)&&t.push(e);Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n._events)))}for(var i=0;i<t.length;i++)for(var o=n.listeners(t[i]),s=0;s<o.length;s++){if((e=o[s]).listener){if(e.listener.__ultron!==this.id)continue;delete e.listener.__ultron}else{if(e.__ultron!==this.id)continue;delete e.__ultron}n.removeListener(t[i],e)}return this},n.prototype.destroy=function(){return!!this.ee&&(this.remove(),this.ee=null,!0)},e.exports=n},function(e,t,n){var r=n(197),i=e.exports;for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);i.request=function(e,t){return e||(e={}),e.scheme="https",e.protocol="https:",r.request.call(this,e,t)}},function(e,t,n){(function(t){var r=n(270),i=n(271),o=n(296),s=r.Buffer,a=[8,9,10,11,12,13,14,15],u=s.from([0,0,255,255]),c=s.from([0]),l=function(){function e(t,n,r){_classCallCheck2(this,e),this._maxPayload=0|r,this._options=t||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!n,this._deflate=null,this._inflate=null,this.params=null}return _createClass(e,[{key:"offer",value:function(){var e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}},{key:"accept",value:function(e){e=this.normalizeParams(e);var t;return t=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params=t,t}},{key:"cleanup",value:function(){this._inflate&&(this._inflate.writeInProgress?this._inflate.pendingClose=!0:(this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate.writeInProgress?this._deflate.pendingClose=!0:(this._deflate.close(),this._deflate=null))}},{key:"acceptAsServer",value:function(e){var t=this,n={};if(!e.some(function(e){if(!(!1===t._options.serverNoContextTakeover&&e.server_no_context_takeover||!1===t._options.serverMaxWindowBits&&e.server_max_window_bits||"number"==typeof t._options.serverMaxWindowBits&&"number"==typeof e.server_max_window_bits&&t._options.serverMaxWindowBits>e.server_max_window_bits||"number"==typeof t._options.clientMaxWindowBits&&!e.client_max_window_bits))return(t._options.serverNoContextTakeover||e.server_no_context_takeover)&&(n.server_no_context_takeover=!0),t._options.clientNoContextTakeover&&(n.client_no_context_takeover=!0),!1!==t._options.clientNoContextTakeover&&e.client_no_context_takeover&&(n.client_no_context_takeover=!0),"number"==typeof t._options.serverMaxWindowBits?n.server_max_window_bits=t._options.serverMaxWindowBits:"number"==typeof e.server_max_window_bits&&(n.server_max_window_bits=e.server_max_window_bits),"number"==typeof t._options.clientMaxWindowBits?n.client_max_window_bits=t._options.clientMaxWindowBits:!1!==t._options.clientMaxWindowBits&&"number"==typeof e.client_max_window_bits&&(n.client_max_window_bits=e.client_max_window_bits),!0}))throw new Error("Doesn't support the offered configuration");return n}},{key:"acceptAsClient",value:function(e){var t=e[0];if(null!=this._options.clientNoContextTakeover&&!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Invalid value for "client_no_context_takeover"');if(null!=this._options.clientMaxWindowBits){if(!1===this._options.clientMaxWindowBits&&t.client_max_window_bits)throw new Error('Invalid value for "client_max_window_bits"');if("number"==typeof this._options.clientMaxWindowBits&&(!t.client_max_window_bits||t.client_max_window_bits>this._options.clientMaxWindowBits))throw new Error('Invalid value for "client_max_window_bits"')}return t}},{key:"normalizeParams",value:function(e){var t=this;return e.map(function(e){return Object.keys(e).forEach(function(n){var r=e[n];if(r.length>1)throw new Error("Multiple extension parameters for "+n);switch(r=r[0],n){case"server_no_context_takeover":case"client_no_context_takeover":if(!0!==r)throw new Error("invalid extension parameter value for "+n+" ("+r+")");e[n]=!0;break;case"server_max_window_bits":case"client_max_window_bits":if("string"==typeof r&&(r=parseInt(r,10),!~a.indexOf(r)))throw new Error("invalid extension parameter value for "+n+" ("+r+")");if(!t._isServer&&!0===r)throw new Error("Missing extension parameter value for "+n);e[n]=r;break;default:throw new Error("Not defined extension parameter ("+n+")")}}),e})}},{key:"decompress",value:function(e,t,n){var r=this,s=this._isServer?"client":"server";if(!this._inflate){var a=this.params[s+"_max_window_bits"];this._inflate=i.createInflateRaw({windowBits:"number"==typeof a?a:15})}this._inflate.writeInProgress=!0;var c,l=0,f=[],h=function(e){if(l+=e.length,r._maxPayload<1||l<=r._maxPayload)return f.push(e);(c=new Error("max payload size exceeded")).closeCode=1009,r._inflate.reset()},d=function(e){p(),n(e)},p=function(){r._inflate&&(r._inflate.removeListener("error",d),r._inflate.removeListener("data",h),r._inflate.writeInProgress=!1,(t&&r.params[s+"_no_context_takeover"]||r._inflate.pendingClose)&&(r._inflate.close(),r._inflate=null))};this._inflate.on("error",d).on("data",h),this._inflate.write(e),t&&this._inflate.write(u),this._inflate.flush(function(){p(),c?n(c):n(null,o.concat(f,l))})}},{key:"compress",value:function(e,n,r){var s=this;if(e&&0!==e.length){var a=this._isServer?"server":"client";if(!this._deflate){var u=this.params[a+"_max_window_bits"];this._deflate=i.createDeflateRaw({flush:i.Z_SYNC_FLUSH,windowBits:"number"==typeof u?u:15,memLevel:this._options.memLevel||8})}this._deflate.writeInProgress=!0;var l=0,f=[],h=function(e){l+=e.length,f.push(e)},d=function(e){p(),r(e)},p=function(){s._deflate&&(s._deflate.removeListener("error",d),s._deflate.removeListener("data",h),s._deflate.writeInProgress=!1,(n&&s.params[a+"_no_context_takeover"]||s._deflate.pendingClose)&&(s._deflate.close(),s._deflate=null))};this._deflate.on("error",d).on("data",h),this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,function(){p();var e=o.concat(f,l);n&&(e=e.slice(0,e.length-4)),r(null,e)})}else t.nextTick(r,null,c)}}],[{key:"extensionName",get:function(){return"permessage-deflate"}}]),e}();e.exports=l}).call(t,n(80))},function(e,t,n){e.exports=n(104)},function(e,t,n){(function(e,r){function i(t,n,r){function i(){for(var e;null!==(e=t.read());)s.push(e),a+=e.length;t.once("readable",i)}function o(){var n=e.concat(s,a);s=[],r(null,n),t.close()}var s=[],a=0;t.on("error",function(e){t.removeListener("end",o),t.removeListener("readable",i),r(e)}),t.on("end",o),t.end(n),i()}function o(t,n){if("string"==typeof n&&(n=new e(n)),!e.isBuffer(n))throw new TypeError("Not a string or buffer");var r=g.Z_FINISH;return t._processChunk(n,r)}function s(e){if(!(this instanceof s))return new s(e);d.call(this,e,g.DEFLATE)}function a(e){if(!(this instanceof a))return new a(e);d.call(this,e,g.INFLATE)}function u(e){if(!(this instanceof u))return new u(e);d.call(this,e,g.GZIP)}function c(e){if(!(this instanceof c))return new c(e);d.call(this,e,g.GUNZIP)}function l(e){if(!(this instanceof l))return new l(e);d.call(this,e,g.DEFLATERAW)}function f(e){if(!(this instanceof f))return new f(e);d.call(this,e,g.INFLATERAW)}function h(e){if(!(this instanceof h))return new h(e);d.call(this,e,g.UNZIP)}function d(n,r){if(this._opts=n=n||{},this._chunkSize=n.chunkSize||t.Z_DEFAULT_CHUNK,p.call(this,n),n.flush&&n.flush!==g.Z_NO_FLUSH&&n.flush!==g.Z_PARTIAL_FLUSH&&n.flush!==g.Z_SYNC_FLUSH&&n.flush!==g.Z_FULL_FLUSH&&n.flush!==g.Z_FINISH&&n.flush!==g.Z_BLOCK)throw new Error("Invalid flush flag: "+n.flush);if(this._flushFlag=n.flush||g.Z_NO_FLUSH,n.chunkSize&&(n.chunkSize<t.Z_MIN_CHUNK||n.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+n.chunkSize);if(n.windowBits&&(n.windowBits<t.Z_MIN_WINDOWBITS||n.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+n.windowBits);if(n.level&&(n.level<t.Z_MIN_LEVEL||n.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+n.level);if(n.memLevel&&(n.memLevel<t.Z_MIN_MEMLEVEL||n.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+n.memLevel);if(n.strategy&&n.strategy!=t.Z_FILTERED&&n.strategy!=t.Z_HUFFMAN_ONLY&&n.strategy!=t.Z_RLE&&n.strategy!=t.Z_FIXED&&n.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+n.strategy);if(n.dictionary&&!e.isBuffer(n.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new g.Zlib(r);var i=this;this._hadError=!1,this._binding.onerror=function(e,n){i._binding=null,i._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],i.emit("error",r)};var o=t.Z_DEFAULT_COMPRESSION;"number"==typeof n.level&&(o=n.level);var s=t.Z_DEFAULT_STRATEGY;"number"==typeof n.strategy&&(s=n.strategy),this._binding.init(n.windowBits||t.Z_DEFAULT_WINDOWBITS,o,n.memLevel||t.Z_DEFAULT_MEMLEVEL,s,n.dictionary),this._buffer=new e(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=s,this.once("end",this.close)}var p=n(272),g=n(284),_=n(79),v=n(229).ok;g.Z_MIN_WINDOWBITS=8,g.Z_MAX_WINDOWBITS=15,g.Z_DEFAULT_WINDOWBITS=15,g.Z_MIN_CHUNK=64,g.Z_MAX_CHUNK=1/0,g.Z_DEFAULT_CHUNK=16384,g.Z_MIN_MEMLEVEL=1,g.Z_MAX_MEMLEVEL=9,g.Z_DEFAULT_MEMLEVEL=8,g.Z_MIN_LEVEL=-1,g.Z_MAX_LEVEL=9,g.Z_DEFAULT_LEVEL=g.Z_DEFAULT_COMPRESSION,Object.keys(g).forEach(function(e){e.match(/^Z/)&&(t[e]=g[e])}),t.codes={Z_OK:g.Z_OK,Z_STREAM_END:g.Z_STREAM_END,Z_NEED_DICT:g.Z_NEED_DICT,Z_ERRNO:g.Z_ERRNO,Z_STREAM_ERROR:g.Z_STREAM_ERROR,Z_DATA_ERROR:g.Z_DATA_ERROR,Z_MEM_ERROR:g.Z_MEM_ERROR,Z_BUF_ERROR:g.Z_BUF_ERROR,Z_VERSION_ERROR:g.Z_VERSION_ERROR},Object.keys(t.codes).forEach(function(e){t.codes[t.codes[e]]=e}),t.Deflate=s,t.Inflate=a,t.Gzip=u,t.Gunzip=c,t.DeflateRaw=l,t.InflateRaw=f,t.Unzip=h,t.createDeflate=function(e){return new s(e)},t.createInflate=function(e){return new a(e)},t.createDeflateRaw=function(e){return new l(e)},t.createInflateRaw=function(e){return new f(e)},t.createGzip=function(e){return new u(e)},t.createGunzip=function(e){return new c(e)},t.createUnzip=function(e){return new h(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new s(t),e,n)},t.deflateSync=function(e,t){return o(new s(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new u(t),e,n)},t.gzipSync=function(e,t){return o(new u(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new l(t),e,n)},t.deflateRawSync=function(e,t){return o(new l(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new h(t),e,n)},t.unzipSync=function(e,t){return o(new h(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new a(t),e,n)},t.inflateSync=function(e,t){return o(new a(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new c(t),e,n)},t.gunzipSync=function(e,t){return o(new c(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new f(t),e,n)},t.inflateRawSync=function(e,t){return o(new f(t),e)},_.inherits(d,p),d.prototype.params=function(e,n,i){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var o=this;this.flush(g.Z_SYNC_FLUSH,function(){o._binding.params(e,n),o._hadError||(o._level=e,o._strategy=n,i&&i())})}else r.nextTick(i)},d.prototype.reset=function(){return this._binding.reset()},d.prototype._flush=function(t){this._transform(new e(0),"",t)},d.prototype.flush=function(t,n){var i=this._writableState;if(("function"==typeof t||void 0===t&&!n)&&(n=t,t=g.Z_FULL_FLUSH),i.ended)n&&r.nextTick(n);else if(i.ending)n&&this.once("end",n);else if(i.needDrain){var o=this;this.once("drain",function(){o.flush(n)})}else this._flushFlag=t,this.write(new e(0),"",n)},d.prototype.close=function(e){if(e&&r.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;r.nextTick(function(){t.emit("close")})}},d.prototype._transform=function(t,n,r){var i,o=this._writableState,s=(o.ending||o.ended)&&(!t||o.length===t.length);if(null===!t&&!e.isBuffer(t))return r(new Error("invalid input"));s?i=g.Z_FINISH:(i=this._flushFlag,t.length>=o.length&&(this._flushFlag=this._opts.flush||g.Z_NO_FLUSH));this._processChunk(t,i,r)},d.prototype._processChunk=function(t,n,r){function i(l,d){if(!u._hadError){var p=s-d;if(v(p>=0,"have should not go down"),p>0){var g=u._buffer.slice(u._offset,u._offset+p);u._offset+=p,c?u.push(g):(f.push(g),h+=g.length)}if((0===d||u._offset>=u._chunkSize)&&(s=u._chunkSize,u._offset=0,u._buffer=new e(u._chunkSize)),0===d){if(a+=o-l,o=l,!c)return!0;var _=u._binding.write(n,t,a,o,u._buffer,u._offset,u._chunkSize);return _.callback=i,void(_.buffer=t)}if(!c)return!1;r()}}var o=t&&t.length,s=this._chunkSize-this._offset,a=0,u=this,c="function"==typeof r;if(!c){var l,f=[],h=0;this.on("error",function(e){l=e});do{var d=this._binding.writeSync(n,t,a,o,this._buffer,this._offset,s)}while(!this._hadError&&i(d[0],d[1]));if(this._hadError)throw l;var p=e.concat(f,h);return this.close(),p}var g=this._binding.write(n,t,a,o,this._buffer,this._offset,s);g.buffer=t,g.callback=i},_.inherits(s,d),_.inherits(a,d),_.inherits(u,d),_.inherits(c,d),_.inherits(l,d),_.inherits(f,d),_.inherits(h,d)}).call(t,n(68).Buffer,n(80))},function(e,t,n){e.exports=n(273).Transform},function(e,t,n){(t=e.exports=n(274)).Stream=t,t.Readable=t,t.Writable=n(280),t.Duplex=n(279),t.Transform=n(282),t.PassThrough=n(283)},function(e,t,n){(function(t,r){function i(e){return L.from(e)}function o(e){return L.isBuffer(e)||e instanceof U}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?M(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function a(e,t){B=B||n(279),e=e||{},this.objectMode=!!e.objectMode,t instanceof B&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(q||(q=n(281).StringDecoder),this.decoder=new q(e.encoding),this.encoding=e.encoding)}function u(e){if(B=B||n(279),!(this instanceof u))return new u(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),j.call(this)}function c(e,t,n,r,o){var s=e._readableState;if(null===t)s.reading=!1,g(e,s);else{var a;o||(a=f(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===L.prototype||(t=i(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?l(e,s,t,!1):y(e,s)):l(e,s,t,!1))):r||(s.reading=!1)}return h(s)}function l(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e)),y(e,t)}function f(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){return e>=V?e=V:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_(e)}}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(z("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?N(v,e):v(e))}function v(e){z("emit readable"),e.emit("readable"),S(e)}function y(e,t){t.readingMore||(t.readingMore=!0,N(m,e,t))}function m(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(z("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;z("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&I(e,"data")&&(t.flowing=!0,S(e))}}function w(e){z("readable nexttick read 0"),e.read(0)}function k(e,t){t.resumeScheduled||(t.resumeScheduled=!0,N(E,e,t))}function E(e,t){t.reading||(z("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(z("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=T(e,t.buffer,t.decoder),n}function T(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?O(e,t):C(e,t),r}function O(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}function C(e,t){var n=L.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,N(R,t,e))}function R(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var N=n(100);e.exports=u;var B,M=n(71);u.ReadableState=a;n(96).EventEmitter;var I=function(e,t){return e.listeners(t).length},j=n(275),L=n(103).Buffer,U=t.Uint8Array||function(){},D=n(105);D.inherits=n(97);var F=n(276),z=void 0;z=F&&F.debuglog?F.debuglog("stream"):function(){};var q,H=n(277),G=n(278);D.inherits(u,j);var K=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),u.prototype.destroy=G.destroy,u.prototype._undestroy=G.undestroy,u.prototype._destroy=function(e,t){this.push(null),t(e)},u.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=L.from(e,t),t=""),n=!0),c(this,e,t,!1,n)},u.prototype.unshift=function(e){return c(this,e,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(e){return q||(q=n(281).StringDecoder),this._readableState.decoder=new q(e),this._readableState.encoding=e,this};var V=8388608;u.prototype.read=function(e){z("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return z("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):_(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&A(this),null;var r=t.needReadable;z("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&z("length less than watermark",r=!0),t.ended||t.reading?z("reading or ended",r=!1):r&&(z("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t)));var i;return null===(i=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(e,t){function n(e,t){z("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){z("onend"),e.end()}function o(){z("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",n),h.removeListener("end",i),h.removeListener("end",f),h.removeListener("data",a),_=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function a(t){z("ondata"),v=!1,!1!==e.write(t)||v||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==P(d.pipes,e))&&!_&&(z("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,v=!0),h.pause())}function u(t){z("onerror",t),f(),e.removeListener("error",u),0===I(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){z("onfinish"),e.removeListener("close",c),f()}function f(){z("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,z("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:f;d.endEmitted?N(p):h.once("end",p),e.on("unpipe",n);var g=b(h);e.on("drain",g);var _=!1,v=!1;return h.on("data",a),s(e,"error",u),e.once("close",c),e.once("finish",l),e.emit("pipe",h),d.flowing||(z("pipe resume"),h.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=P(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},u.prototype.on=function(e,t){var n=j.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):N(w,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(z("resume"),e.flowing=!0,k(this,e)),this},u.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(z("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){z("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<K.length;o++)e.on(K[o],r.emit.bind(r,K[o]));return r._read=function(t){z("wrapped _read",t),n&&(n=!1,e.resume())},r},u._fromList=x}).call(t,function(){return this}(),n(80))},function(e,t,n){e.exports=n(96).EventEmitter},function(e,t){},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=n(103).Buffer;e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}()},function(e,t,n){function r(e,t){e.emit("error",t)}var i=n(100);e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;o||s?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i(r,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);c.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var s=n(100),a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var u=n(105);u.inherits=n(97);var c=n(274),l=n(280);u.inherits(r,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var d=f[h];r.prototype[d]||(r.prototype[d]=l.prototype[d])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),s(t,e)}},function(e,t,n){(function(t,r,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){O(t,e)}}function s(e){return M.from(e)}function a(e){return M.isBuffer(e)||e instanceof I}function u(){}function c(e,t){A=A||n(279),e=e||{},this.objectMode=!!e.objectMode,t instanceof A&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(e){if(A=A||n(279),!(L.call(l,this)||this instanceof A))return new l(e);this._writableState=new c(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),B.call(this)}function f(e,t){var n=new Error("write after end");e.emit("error",n),C(t,n)}function h(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),C(r,o),i=!1),i}function d(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=M.from(t,n)),t}function p(e,t,n,r,i,o){if(!n){var s=d(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,a,r,i,o);return u}function g(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function _(e,t,n,r,i){--t.pendingcb,n?(C(i,r),C(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),x(e,t))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(v(n),t)_(e,n,r,t,i);else{var o=k(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?R(m,e,n,o,i):m(e,n,o,i)}}function m(e,t,n,r){n||b(e,t),t.pendingcb--,r(),x(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,g(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t)}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(g(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function S(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,C(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function x(e,t){var n=k(t);return n&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function T(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?C(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function O(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var C=n(100);e.exports=l;var A,R=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:C;l.WritableState=c;var P=n(105);P.inherits=n(97);var N={deprecate:n(113)},B=n(275),M=n(103).Buffer,I=i.Uint8Array||function(){},j=n(278);P.inherits(l,B),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,"buffer",{get:N.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var L;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!L.call(this,e)||e&&e._writableState instanceof c}})):L=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=a(e)&&!r.objectMode;return o&&!M.isBuffer(e)&&(e=s(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?f(this,n):(o||h(this,r,e,n))&&(r.pendingcb++,i=p(this,r,o,e,t,n)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},l.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||T(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=j.destroy,l.prototype._undestroy=j.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(80),n(111).setImmediate,function(){return this}())},function(e,t,n){function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(_.isEncoding===v||!v(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=l,this.end=f,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=h,this.end=d,t=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function a(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function u(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(n+2)}}function c(e){var t=this.lastTotal-this.lastNeed,n=u(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function f(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var _=n(103).Buffer,v=_.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},o.prototype.text=function(e,t){var n=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(t)})}function s(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var a=n(279),u=n(105);u.inherits=n(97),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;a.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}e.exports=r;var i=n(282),o=n(105);o.inherits=n(97),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){(function(e,r){function i(e){if(e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function o(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}var s=n(285),a=n(286),u=n(287),c=n(292),l=n(295);for(var f in l)t[f]=l[f];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,i.prototype.init=function(e,n,r,i,o){switch(this.windowBits=e,this.level=n,this.memLevel=r,this.strategy=i,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:s=u.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:var s=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}s===t.Z_OK?(this.write_in_progress=!1,this.init_done=!0):this._error(s)},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===t.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},i.prototype.write=function(t,n,r,i,o,s,a){this._writeCheck(),this.write_in_progress=!0;var u=this;return e.nextTick(function(){u.write_in_progress=!1;var e=u._write(t,n,r,i,o,s,a);u.callback(e[0],e[1]),u.pending_close&&u.close()}),this},i.prototype.writeSync=function(e,t,n,r,i,o,s){return this._writeCheck(),this._write(e,t,n,r,i,o,s)},i.prototype._write=function(e,n,i,s,a,l,f){if(this.write_in_progress=!0,e!==t.Z_NO_FLUSH&&e!==t.Z_PARTIAL_FLUSH&&e!==t.Z_SYNC_FLUSH&&e!==t.Z_FULL_FLUSH&&e!==t.Z_FINISH&&e!==t.Z_BLOCK)throw new Error("Invalid flush value");null==n&&(n=new r(0),s=0,i=0),a._set?a.set=a._set:a.set=o;var h=this.strm;switch(h.avail_in=s,h.input=n,h.next_in=i,h.avail_out=f,h.output=a,h.next_out=l,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:d=u.deflate(h,e);break;case t.UNZIP:case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:var d=c.inflate(h,e);break;default:throw new Error("Unknown mode "+this.mode)}return d!==t.Z_STREAM_END&&d!==t.Z_OK&&this._error(d),this.write_in_progress=!1,[h.avail_in,h.avail_out]},i.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?u.deflateEnd(this.strm):c.inflateEnd(this.strm),this.mode=t.NONE)},i.prototype.reset=function(){switch(this.mode){case t.DEFLATE:case t.DEFLATERAW:e=u.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:var e=c.inflateReset(this.strm)}e!==t.Z_OK&&this._error(e)},i.prototype._error=function(e){this.onerror(s[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},t.Zlib=i}).call(t,n(80),n(68).Buffer)},function(e,t){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){function r(e,t){return e.msg=C[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(S.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function a(e,t){x._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function u(e,t){e.pending_buf[e.pending++]=t}function c(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function l(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,S.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=T(e.adler,t,i,n):2===e.state.wrap&&(e.adler=O(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function f(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-re?e.strstart-(e.w_size-re):0,c=e.window,l=e.w_mask,f=e.prev,h=e.strstart+ne,d=c[o+s-1],p=c[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,c[n+s]===p&&c[n+s-1]===d&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<h);if(r=ne-(h-o),o=h-ne,r>s){if(e.match_start=t,s=r,r>=a)break;d=c[o+s-1],p=c[o+s]}}}while((t=f[t&l])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function h(e){var t,n,r,i,o,s=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-re)){S.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=s?r-s:0}while(--n);t=n=s;do{r=e.prev[--t],e.prev[t]=r>=s?r-s:0}while(--n);i+=s}if(0===e.strm.avail_in)break;if(n=l(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=te)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+te-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<te)););}while(e.lookahead<re&&0!==e.strm.avail_in)}function d(e,t){for(var n,r;;){if(e.lookahead<re){if(h(e),e.lookahead<re&&t===A)return he;if(0===e.lookahead)break}if(n=0,e.lookahead>=te&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-re&&(e.match_length=f(e,n)),e.match_length>=te)if(r=x._tr_tally(e,e.strstart-e.match_start,e.match_length-te),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=te){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(a(e,!1),0===e.strm.avail_out))return he}return e.insert=e.strstart<te-1?e.strstart:te-1,t===N?(a(e,!0),0===e.strm.avail_out?pe:ge):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?he:de}function p(e,t){for(var n,r,i;;){if(e.lookahead<re){if(h(e),e.lookahead<re&&t===A)return he;if(0===e.lookahead)break}if(n=0,e.lookahead>=te&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=te-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-re&&(e.match_length=f(e,n),e.match_length<=5&&(e.strategy===F||e.match_length===te&&e.strstart-e.match_start>4096)&&(e.match_length=te-1)),e.prev_length>=te&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-te,r=x._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-te),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=te-1,e.strstart++,r&&(a(e,!1),0===e.strm.avail_out))return he}else if(e.match_available){if((r=x._tr_tally(e,0,e.window[e.strstart-1]))&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return he}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=x._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<te-1?e.strstart:te-1,t===N?(a(e,!0),0===e.strm.avail_out?pe:ge):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?he:de}function g(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=ne){if(h(e),e.lookahead<=ne&&t===A)return he;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=te&&e.strstart>0&&(i=e.strstart-1,(r=s[i])===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+ne;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=ne-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=te?(n=x._tr_tally(e,1,e.match_length-te),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(a(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===N?(a(e,!0),0===e.strm.avail_out?pe:ge):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?he:de}function _(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===A)return he;break}if(e.match_length=0,n=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===N?(a(e,!0),0===e.strm.avail_out?pe:ge):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?he:de}function v(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function y(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=E[e.level].max_lazy,e.good_match=E[e.level].good_length,e.nice_match=E[e.level].nice_length,e.max_chain_length=E[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=te-1,e.match_available=0,e.ins_h=0}function m(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=V,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*Q),this.dyn_dtree=new S.Buf16(2*(2*J+1)),this.bl_tree=new S.Buf16(2*(2*$+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(ee+1),this.heap=new S.Buf16(2*X+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*X+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=K,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?oe:le,e.adler=2===t.wrap?0:1,t.last_flush=A,x._tr_init(t),M):r(e,j)}function w(e){var t=b(e);return t===M&&y(e.state),t}function k(e,t,n,i,o,s){if(!e)return j;var a=1;if(t===D&&(t=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),o<1||o>W||n!==V||i<8||i>15||t<0||t>9||s<0||s>H)return r(e,j);8===i&&(i=9);var u=new m;return e.state=u,u.strm=e,u.wrap=a,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+te-1)/te),u.window=new S.Buf8(2*u.w_size),u.head=new S.Buf16(u.hash_size),u.prev=new S.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new S.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=n,w(e)}var E,S=n(288),x=n(289),T=n(290),O=n(291),C=n(285),A=0,R=1,P=3,N=4,B=5,M=0,I=1,j=-2,L=-3,U=-5,D=-1,F=1,z=2,q=3,H=4,G=0,K=2,V=8,W=9,Z=15,Y=8,X=286,J=30,$=19,Q=2*X+1,ee=15,te=3,ne=258,re=ne+te+1,ie=32,oe=42,se=69,ae=73,ue=91,ce=103,le=113,fe=666,he=1,de=2,pe=3,ge=4,_e=3;E=[new v(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===A)return he;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,a(e,!1),0===e.strm.avail_out))return he;if(e.strstart-e.block_start>=e.w_size-re&&(a(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===N?(a(e,!0),0===e.strm.avail_out?pe:ge):(e.strstart>e.block_start&&(a(e,!1),e.strm.avail_out),he)}),new v(4,4,8,4,d),new v(4,5,16,8,d),new v(4,6,32,32,d),new v(4,4,16,16,p),new v(8,16,32,32,p),new v(8,16,128,128,p),new v(8,32,128,256,p),new v(32,128,258,1024,p),new v(32,258,258,4096,p)],t.deflateInit=function(e,t){return k(e,t,V,Z,Y,G)},t.deflateInit2=k,t.deflateReset=w,t.deflateResetKeep=b,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?j:(e.state.gzhead=t,M):j},t.deflate=function(e,t){var n,a,l,f;if(!e||!e.state||t>B||t<0)return e?r(e,j):j;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===fe&&t!==N)return r(e,0===e.avail_out?U:j);if(a.strm=e,n=a.last_flush,a.last_flush=t,a.status===oe)if(2===a.wrap)e.adler=0,u(a,31),u(a,139),u(a,8),a.gzhead?(u(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),u(a,255&a.gzhead.time),u(a,a.gzhead.time>>8&255),u(a,a.gzhead.time>>16&255),u(a,a.gzhead.time>>24&255),u(a,9===a.level?2:a.strategy>=z||a.level<2?4:0),u(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(u(a,255&a.gzhead.extra.length),u(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=O(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=se):(u(a,0),u(a,0),u(a,0),u(a,0),u(a,0),u(a,9===a.level?2:a.strategy>=z||a.level<2?4:0),u(a,_e),a.status=le);else{var h=V+(a.w_bits-8<<4)<<8;h|=(a.strategy>=z||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(h|=ie),h+=31-h%31,a.status=le,c(a,h),0!==a.strstart&&(c(a,e.adler>>>16),c(a,65535&e.adler)),e.adler=1}if(a.status===se)if(a.gzhead.extra){for(l=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>l&&(e.adler=O(e.adler,a.pending_buf,a.pending-l,l)),s(e),l=a.pending,a.pending!==a.pending_buf_size));)u(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>l&&(e.adler=O(e.adler,a.pending_buf,a.pending-l,l)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=ae)}else a.status=ae;if(a.status===ae)if(a.gzhead.name){l=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>l&&(e.adler=O(e.adler,a.pending_buf,a.pending-l,l)),s(e),l=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,u(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>l&&(e.adler=O(e.adler,a.pending_buf,a.pending-l,l)),0===f&&(a.gzindex=0,a.status=ue)}else a.status=ue;if(a.status===ue)if(a.gzhead.comment){l=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>l&&(e.adler=O(e.adler,a.pending_buf,a.pending-l,l)),s(e),l=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,u(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>l&&(e.adler=O(e.adler,a.pending_buf,a.pending-l,l)),0===f&&(a.status=ce)}else a.status=ce;if(a.status===ce&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(e),a.pending+2<=a.pending_buf_size&&(u(a,255&e.adler),u(a,e.adler>>8&255),e.adler=0,a.status=le)):a.status=le),0!==a.pending){if(s(e),0===e.avail_out)return a.last_flush=-1,M}else if(0===e.avail_in&&i(t)<=i(n)&&t!==N)return r(e,U);if(a.status===fe&&0!==e.avail_in)return r(e,U);if(0!==e.avail_in||0!==a.lookahead||t!==A&&a.status!==fe){var d=a.strategy===z?_(a,t):a.strategy===q?g(a,t):E[a.level].func(a,t);if(d!==pe&&d!==ge||(a.status=fe),d===he||d===pe)return 0===e.avail_out&&(a.last_flush=-1),M;if(d===de&&(t===R?x._tr_align(a):t!==B&&(x._tr_stored_block(a,0,0,!1),t===P&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(e),0===e.avail_out))return a.last_flush=-1,M}return t!==N?M:a.wrap<=0?I:(2===a.wrap?(u(a,255&e.adler),u(a,e.adler>>8&255),u(a,e.adler>>16&255),u(a,e.adler>>24&255),u(a,255&e.total_in),u(a,e.total_in>>8&255),u(a,e.total_in>>16&255),u(a,e.total_in>>24&255)):(c(a,e.adler>>>16),c(a,65535&e.adler)),s(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?M:I)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==oe&&t!==se&&t!==ae&&t!==ue&&t!==ce&&t!==le&&t!==fe?r(e,j):(e.state=null,t===le?r(e,L):M):j},t.deflateSetDictionary=function(e,t){var n,r,i,s,a,u,c,l,f=t.length;if(!e||!e.state)return j;if(n=e.state,2===(s=n.wrap)||1===s&&n.status!==oe||n.lookahead)return j;for(1===s&&(e.adler=T(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new S.Buf8(n.w_size),S.arraySet(l,t,f-n.w_size,n.w_size,0),t=l,f=n.w_size),a=e.avail_in,u=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=t,h(n);n.lookahead>=te;){r=n.strstart,i=n.lookahead-(te-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+te-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=te-1,h(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=te-1,n.match_available=0,e.next_in=u,e.input=c,e.avail_in=a,n.wrap=s,M},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==(void 0===n?"undefined":_typeof(n)))throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],s.set(o,i),i+=o.length;return s}},i={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)},function(e,t,n){function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function s(e){return e<256?te[e]:te[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function u(e,t,n){e.bi_valid>H-n?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>H-e.bi_valid,e.bi_valid+=n-H):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function c(e,t,n){u(e,n[2*t],n[2*t+1])}function l(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function f(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function h(e,t){var n,r,i,o,s,a,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=q;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<z;n++)(o=u[2*u[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,g++),u[2*r+1]=o,r>c||(e.bl_count[o]++,s=0,r>=d&&(s=h[r-d]),a=u[2*r],e.opt_len+=a*(o+s),f&&(e.static_len+=a*(l[2*r+1]+s)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>c||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}function d(e,t,n){var r,i,o=new Array(q+1),s=0;for(r=1;r<=q;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=l(o[a]++,a))}}function p(){var e,t,n,r,o,s=new Array(q+1);for(n=0,r=0;r<j-1;r++)for(re[r]=n,e=0;e<1<<Y[r];e++)ne[n++]=r;for(ne[n-1]=r,o=0,r=0;r<16;r++)for(ie[r]=o,e=0;e<1<<X[r];e++)te[o++]=r;for(o>>=7;r<D;r++)for(ie[r]=o<<7,e=0;e<1<<X[r]-7;e++)te[256+o++]=r;for(t=0;t<=q;t++)s[t]=0;for(e=0;e<=143;)Q[2*e+1]=8,e++,s[8]++;for(;e<=255;)Q[2*e+1]=9,e++,s[9]++;for(;e<=279;)Q[2*e+1]=7,e++,s[7]++;for(;e<=287;)Q[2*e+1]=8,e++,s[8]++;for(d(Q,U+1,s),e=0;e<D;e++)ee[2*e+1]=5,ee[2*e]=l(e,5);oe=new i(Q,Y,L+1,U,q),se=new i(ee,X,0,D,q),ae=new i(new Array(0),J,0,F,G)}function g(e){var t;for(t=0;t<U;t++)e.dyn_ltree[2*t]=0;for(t=0;t<D;t++)e.dyn_dtree[2*t]=0;for(t=0;t<F;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*K]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function _(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){_(e),r&&(a(e,n),a(e,~n)),C.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function m(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function b(e,t,n){var r,i,o,a,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?c(e,i,t):(c(e,(o=ne[i])+L+1,t),0!==(a=Y[o])&&u(e,i-=re[o],a),c(e,o=s(--r),n),0!==(a=X[o])&&u(e,r-=ie[o],a))}while(l<e.last_lit);c(e,K,t)}function w(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=z,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)m(e,o,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],m(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,m(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],h(e,t),d(o,c,e.bl_count)}function k(e,t,n){var r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<u&&i===s||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*V]++):a<=10?e.bl_tree[2*W]++:e.bl_tree[2*Z]++,a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))}function E(e,t,n){var r,i,o=-1,s=t[1],a=0,l=7,f=4;for(0===s&&(l=138,f=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<l&&i===s)){if(a<f)do{c(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(c(e,i,e.bl_tree),a--),c(e,V,e.bl_tree),u(e,a-3,2)):a<=10?(c(e,W,e.bl_tree),u(e,a-3,3)):(c(e,Z,e.bl_tree),u(e,a-11,7));a=0,o=i,0===s?(l=138,f=3):i===s?(l=6,f=3):(l=7,f=4)}}function S(e){var t;for(k(e,e.dyn_ltree,e.l_desc.max_code),k(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=F-1;t>=3&&0===e.bl_tree[2*$[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function x(e,t,n,r){var i;for(u(e,t-257,5),u(e,n-1,5),u(e,r-4,4),i=0;i<r;i++)u(e,e.bl_tree[2*$[i]+1],3);E(e,e.dyn_ltree,t-1),E(e,e.dyn_dtree,n-1)}function T(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return R;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return P;for(t=32;t<L;t++)if(0!==e.dyn_ltree[2*t])return P;return R}function O(e,t,n,r){u(e,(B<<1)+(r?1:0),3),v(e,t,n,!0)}var C=n(288),A=4,R=0,P=1,N=2,B=0,M=1,I=2,j=29,L=256,U=L+1+j,D=30,F=19,z=2*U+1,q=15,H=16,G=7,K=256,V=16,W=17,Z=18,Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(U+2));r(Q);var ee=new Array(2*D);r(ee);var te=new Array(512);r(te);var ne=new Array(256);r(ne);var re=new Array(j);r(re);var ie=new Array(D);r(ie);var oe,se,ae,ue=!1;t._tr_init=function(e){ue||(p(),ue=!0),e.l_desc=new o(e.dyn_ltree,oe),e.d_desc=new o(e.dyn_dtree,se),e.bl_desc=new o(e.bl_tree,ae),e.bi_buf=0,e.bi_valid=0,g(e)},t._tr_stored_block=O,t._tr_flush_block=function(e,t,n,r){var i,o,s=0;e.level>0?(e.strm.data_type===N&&(e.strm.data_type=T(e)),w(e,e.l_desc),w(e,e.d_desc),s=S(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?O(e,t,n,r):e.strategy===A||o===i?(u(e,(M<<1)+(r?1:0),3),b(e,Q,ee)):(u(e,(I<<1)+(r?1:0),3),x(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),b(e,e.dyn_ltree,e.dyn_dtree)),g(e),r&&_(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ne[n]+L+1)]++,e.dyn_dtree[2*s(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){u(e,M<<1,3),c(e,K,Q),f(e)}},function(e,t){e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},function(e,t){var n=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,r,i){var o=n,s=i+r;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},function(e,t,n){function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=N,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new d.Buf32(le),t.distcode=t.distdyn=new d.Buf32(fe),t.sane=1,t.back=-1,S):O}function s(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):O}function a(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?O:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,s(e))):O}function u(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,(n=a(e,t))!==S&&(e.state=null),n):O}function c(e){if(de){var t;for(f=new d.Buf32(512),h=new d.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(v(m,e.lens,0,288,f,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;v(b,e.lens,0,32,h,0,e.work,{bits:5}),de=!1}e.lencode=f,e.lenbits=9,e.distcode=h,e.distbits=5}function l(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new d.Buf8(o.wsize)),r>=o.wsize?(d.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),d.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(d.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var f,h,d=n(288),p=n(290),g=n(291),_=n(293),v=n(294),y=0,m=1,b=2,w=4,k=5,E=6,S=0,x=1,T=2,O=-2,C=-3,A=-4,R=-5,P=8,N=1,B=2,M=3,I=4,j=5,L=6,U=7,D=8,F=9,z=10,q=11,H=12,G=13,K=14,V=15,W=16,Z=17,Y=18,X=19,J=20,$=21,Q=22,ee=23,te=24,ne=25,re=26,ie=27,oe=28,se=29,ae=30,ue=31,ce=32,le=852,fe=592,he=15,de=!0;t.inflateReset=s,t.inflateReset2=a,t.inflateResetKeep=o,t.inflateInit=function(e){return u(e,he)},t.inflateInit2=u,t.inflate=function(e,t){var n,i,o,s,a,u,f,h,le,fe,he,de,pe,ge,_e,ve,ye,me,be,we,ke,Ee,Se,xe,Te=0,Oe=new d.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return O;(n=e.state).mode===H&&(n.mode=G),a=e.next_out,o=e.output,f=e.avail_out,s=e.next_in,i=e.input,u=e.avail_in,h=n.hold,le=n.bits,fe=u,he=f,Ee=S;e:for(;;)switch(n.mode){case N:if(0===n.wrap){n.mode=G;break}for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(2&n.wrap&&35615===h){n.check=0,Oe[0]=255&h,Oe[1]=h>>>8&255,n.check=g(n.check,Oe,2,0),h=0,le=0,n.mode=B;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=ae;break}if((15&h)!==P){e.msg="unknown compression method",n.mode=ae;break}if(h>>>=4,le-=4,ke=8+(15&h),0===n.wbits)n.wbits=ke;else if(ke>n.wbits){e.msg="invalid window size",n.mode=ae;break}n.dmax=1<<ke,e.adler=n.check=1,n.mode=512&h?z:H,h=0,le=0;break;case B:for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(n.flags=h,(255&n.flags)!==P){e.msg="unknown compression method",n.mode=ae;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=ae;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(Oe[0]=255&h,Oe[1]=h>>>8&255,n.check=g(n.check,Oe,2,0)),h=0,le=0,n.mode=M;case M:for(;le<32;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}n.head&&(n.head.time=h),512&n.flags&&(Oe[0]=255&h,Oe[1]=h>>>8&255,Oe[2]=h>>>16&255,Oe[3]=h>>>24&255,n.check=g(n.check,Oe,4,0)),h=0,le=0,n.mode=I;case I:for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(Oe[0]=255&h,Oe[1]=h>>>8&255,n.check=g(n.check,Oe,2,0)),h=0,le=0,n.mode=j;case j:if(1024&n.flags){for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(Oe[0]=255&h,Oe[1]=h>>>8&255,n.check=g(n.check,Oe,2,0)),h=0,le=0}else n.head&&(n.head.extra=null);n.mode=L;case L:if(1024&n.flags&&((de=n.length)>u&&(de=u),de&&(n.head&&(ke=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),d.arraySet(n.head.extra,i,s,de,ke)),512&n.flags&&(n.check=g(n.check,i,de,s)),u-=de,s+=de,n.length-=de),n.length))break e;n.length=0,n.mode=U;case U:if(2048&n.flags){if(0===u)break e;de=0;do{ke=i[s+de++],n.head&&ke&&n.length<65536&&(n.head.name+=String.fromCharCode(ke))}while(ke&&de<u);if(512&n.flags&&(n.check=g(n.check,i,de,s)),u-=de,s+=de,ke)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=D;case D:if(4096&n.flags){if(0===u)break e;de=0;do{ke=i[s+de++],n.head&&ke&&n.length<65536&&(n.head.comment+=String.fromCharCode(ke))}while(ke&&de<u);if(512&n.flags&&(n.check=g(n.check,i,de,s)),u-=de,s+=de,ke)break e}else n.head&&(n.head.comment=null);n.mode=F;case F:if(512&n.flags){for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=ae;break}h=0,le=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=H;break;case z:for(;le<32;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}e.adler=n.check=r(h),h=0,le=0,n.mode=q;case q:if(0===n.havedict)return e.next_out=a,e.avail_out=f,e.next_in=s,e.avail_in=u,n.hold=h,n.bits=le,T;e.adler=n.check=1,n.mode=H;case H:if(t===k||t===E)break e;case G:if(n.last){h>>>=7&le,le-=7&le,n.mode=ie;break}for(;le<3;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}switch(n.last=1&h,h>>>=1,le-=1,3&h){case 0:n.mode=K;break;case 1:if(c(n),n.mode=J,t===E){h>>>=2,le-=2;break e}break;case 2:n.mode=Z;break;case 3:e.msg="invalid block type",n.mode=ae}h>>>=2,le-=2;break;case K:for(h>>>=7&le,le-=7&le;le<32;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=ae;break}if(n.length=65535&h,h=0,le=0,n.mode=V,t===E)break e;case V:n.mode=W;case W:if(de=n.length){if(de>u&&(de=u),de>f&&(de=f),0===de)break e;d.arraySet(o,i,s,de,a),u-=de,s+=de,f-=de,a+=de,n.length-=de;break}n.mode=H;break;case Z:for(;le<14;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(n.nlen=257+(31&h),h>>>=5,le-=5,n.ndist=1+(31&h),h>>>=5,le-=5,n.ncode=4+(15&h),h>>>=4,le-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=ae;break}n.have=0,n.mode=Y;case Y:for(;n.have<n.ncode;){for(;le<3;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}n.lens[Ce[n.have++]]=7&h,h>>>=3,le-=3}for(;n.have<19;)n.lens[Ce[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},Ee=v(y,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid code lengths set",n.mode=ae;break}n.have=0,n.mode=X;case X:for(;n.have<n.nlen+n.ndist;){for(;Te=n.lencode[h&(1<<n.lenbits)-1],_e=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(_e<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(ye<16)h>>>=_e,le-=_e,n.lens[n.have++]=ye;else{if(16===ye){for(xe=_e+2;le<xe;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(h>>>=_e,le-=_e,0===n.have){e.msg="invalid bit length repeat",n.mode=ae;break}ke=n.lens[n.have-1],de=3+(3&h),h>>>=2,le-=2}else if(17===ye){for(xe=_e+3;le<xe;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}le-=_e,ke=0,de=3+(7&(h>>>=_e)),h>>>=3,le-=3}else{for(xe=_e+7;le<xe;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}le-=_e,ke=0,de=11+(127&(h>>>=_e)),h>>>=7,le-=7}if(n.have+de>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=ae;break}for(;de--;)n.lens[n.have++]=ke}}if(n.mode===ae)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=ae;break}if(n.lenbits=9,Se={bits:n.lenbits},Ee=v(m,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid literal/lengths set",n.mode=ae;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},Ee=v(b,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,Ee){e.msg="invalid distances set",n.mode=ae;break}if(n.mode=J,t===E)break e;case J:n.mode=$;case $:if(u>=6&&f>=258){e.next_out=a,e.avail_out=f,e.next_in=s,e.avail_in=u,n.hold=h,n.bits=le,_(e,he),a=e.next_out,o=e.output,f=e.avail_out,s=e.next_in,i=e.input,u=e.avail_in,h=n.hold,le=n.bits,n.mode===H&&(n.back=-1);break}for(n.back=0;Te=n.lencode[h&(1<<n.lenbits)-1],_e=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(_e<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(ve&&0==(240&ve)){for(me=_e,be=ve,we=ye;Te=n.lencode[we+((h&(1<<me+be)-1)>>me)],_e=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(me+_e<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}h>>>=me,le-=me,n.back+=me}if(h>>>=_e,le-=_e,n.back+=_e,n.length=ye,0===ve){n.mode=re;break}if(32&ve){n.back=-1,n.mode=H;break}if(64&ve){e.msg="invalid literal/length code",n.mode=ae;break}n.extra=15&ve,n.mode=Q;case Q:if(n.extra){for(xe=n.extra;le<xe;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,le-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ee;case ee:for(;Te=n.distcode[h&(1<<n.distbits)-1],_e=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(_e<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(0==(240&ve)){for(me=_e,be=ve,we=ye;Te=n.distcode[we+((h&(1<<me+be)-1)>>me)],_e=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(me+_e<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}h>>>=me,le-=me,n.back+=me}if(h>>>=_e,le-=_e,n.back+=_e,64&ve){e.msg="invalid distance code",n.mode=ae;break}n.offset=ye,n.extra=15&ve,n.mode=te;case te:if(n.extra){for(xe=n.extra;le<xe;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,le-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=ae;break}n.mode=ne;case ne:if(0===f)break e;if(de=he-f,n.offset>de){if((de=n.offset-de)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=ae;break}de>n.wnext?(de-=n.wnext,pe=n.wsize-de):pe=n.wnext-de,de>n.length&&(de=n.length),ge=n.window}else ge=o,pe=a-n.offset,de=n.length;de>f&&(de=f),f-=de,n.length-=de;do{o[a++]=ge[pe++]}while(--de);0===n.length&&(n.mode=$);break;case re:if(0===f)break e;o[a++]=n.length,f--,n.mode=$;break;case ie:if(n.wrap){for(;le<32;){if(0===u)break e;u--,h|=i[s++]<<le,le+=8}if(he-=f,e.total_out+=he,n.total+=he,he&&(e.adler=n.check=n.flags?g(n.check,o,he,a-he):p(n.check,o,he,a-he)),he=f,(n.flags?h:r(h))!==n.check){e.msg="incorrect data check",n.mode=ae;break}h=0,le=0}n.mode=oe;case oe:if(n.wrap&&n.flags){for(;le<32;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=ae;break}h=0,le=0}n.mode=se;case se:Ee=x;break e;case ae:Ee=C;break e;case ue:return A;case ce:default:return O}return e.next_out=a,e.avail_out=f,e.next_in=s,e.avail_in=u,n.hold=h,n.bits=le,(n.wsize||he!==e.avail_out&&n.mode<ae&&(n.mode<ie||t!==w))&&l(e,e.output,e.next_out,he-e.avail_out)?(n.mode=ue,A):(fe-=e.avail_in,he-=e.avail_out,e.total_in+=fe,e.total_out+=he,n.total+=he,n.wrap&&he&&(e.adler=n.check=n.flags?g(n.check,o,he,e.next_out-he):p(n.check,o,he,e.next_out-he)),e.data_type=n.bits+(n.last?64:0)+(n.mode===H?128:0)+(n.mode===J||n.mode===V?256:0),(0===fe&&0===he||t===w)&&Ee===S&&(Ee=R),Ee)},t.inflateEnd=function(e){if(!e||!e.state)return O;var t=e.state;return t.window&&(t.window=null),e.state=null,S},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?O:(n.head=t,t.done=!1,S):O},t.inflateSetDictionary=function(e,t){var n,r,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==q?O:n.mode===q&&(r=1,(r=p(r,t,i,0))!==n.check)?C:l(e,t,i,i)?(n.mode=ue,A):(n.havedict=1,S):O},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t){e.exports=function(e,t){var n,r,i,o,s,a,u,c,l,f,h,d,p,g,_,v,y,m,b,w,k,E,S,x,T;n=e.state,r=e.next_in,x=e.input,i=r+(e.avail_in-5),o=e.next_out,T=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,h=n.window,d=n.hold,p=n.bits,g=n.lencode,_=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(d+=x[r++]<<p,p+=8,d+=x[r++]<<p,p+=8),m=g[d&v];t:for(;;){if(b=m>>>24,d>>>=b,p-=b,0===(b=m>>>16&255))T[o++]=65535&m;else{if(!(16&b)){if(0==(64&b)){m=g[(65535&m)+(d&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&m,(b&=15)&&(p<b&&(d+=x[r++]<<p,p+=8),w+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=x[r++]<<p,p+=8,d+=x[r++]<<p,p+=8),m=_[d&y];n:for(;;){if(b=m>>>24,d>>>=b,p-=b,!(16&(b=m>>>16&255))){if(0==(64&b)){m=_[(65535&m)+(d&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&m,b&=15,p<b&&(d+=x[r++]<<p,(p+=8)<b&&(d+=x[r++]<<p,p+=8)),(k+=d&(1<<b)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=b,p-=b,b=o-s,k>b){if((b=k-b)>l&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,S=h,0===f){if(E+=c-b,b<w){w-=b;do{T[o++]=h[E++]}while(--b);E=o-k,S=T}}else if(f<b){if(E+=c+f-b,(b-=f)<w){w-=b;do{T[o++]=h[E++]}while(--b);if(E=0,f<w){w-=b=f;do{T[o++]=h[E++]}while(--b);E=o-k,S=T}}}else if(E+=f-b,b<w){w-=b;do{T[o++]=h[E++]}while(--b);E=o-k,S=T}for(;w>2;)T[o++]=S[E++],T[o++]=S[E++],T[o++]=S[E++],w-=3;w&&(T[o++]=S[E++],w>1&&(T[o++]=S[E++]))}else{E=o-k;do{T[o++]=T[E++],T[o++]=T[E++],T[o++]=T[E++],w-=3}while(w>2);w&&(T[o++]=T[E++],w>1&&(T[o++]=T[E++]))}break}}break}}while(r<i&&o<a);r-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=d,n.bits=p}},function(e,t,n){var r=n(288),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,c,l,f,h){var d,p,g,_,v,y,m,b,w,k=h.bits,E=0,S=0,x=0,T=0,O=0,C=0,A=0,R=0,P=0,N=0,B=null,M=0,I=new r.Buf16(16),j=new r.Buf16(16),L=null,U=0;for(E=0;E<=15;E++)I[E]=0;for(S=0;S<u;S++)I[t[n+S]]++;for(O=k,T=15;T>=1&&0===I[T];T--);if(O>T&&(O=T),0===T)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(x=1;x<T&&0===I[x];x++);for(O<x&&(O=x),R=1,E=1;E<=15;E++)if(R<<=1,(R-=I[E])<0)return-1;if(R>0&&(0===e||1!==T))return-1;for(j[1]=0,E=1;E<15;E++)j[E+1]=j[E]+I[E];for(S=0;S<u;S++)0!==t[n+S]&&(f[j[t[n+S]]++]=S);if(0===e?(B=L=f,y=19):1===e?(B=i,M-=257,L=o,U-=257,y=256):(B=s,L=a,y=-1),N=0,S=0,E=x,v=l,C=O,A=0,g=-1,P=1<<O,_=P-1,1===e&&P>852||2===e&&P>592)return 1;for(var D=0;;){D++,m=E-A,f[S]<y?(b=0,w=f[S]):f[S]>y?(b=L[U+f[S]],w=B[M+f[S]]):(b=96,w=0),d=1<<E-A,x=p=1<<C;do{c[v+(N>>A)+(p-=d)]=m<<24|b<<16|w|0}while(0!==p);for(d=1<<E-1;N&d;)d>>=1;if(0!==d?(N&=d-1,N+=d):N=0,S++,0==--I[E]){if(E===T)break;E=t[n+f[S]]}if(E>O&&(N&_)!==g){for(0===A&&(A=O),v+=x,R=1<<(C=E-A);C+A<T&&!((R-=I[C+A])<=0);)C++,R<<=1;if(P+=1<<C,1===e&&P>852||2===e&&P>592)return 1;c[g=N&_]=O<<24|C<<16|v-l|0}}return 0!==N&&(c[v+N]=E-A<<24|64<<16|0),h.bits=O,0}},function(e,t){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){var r=n(270).Buffer,i=function(e,t){for(var n=r.allocUnsafe(t),i=0,o=0;o<e.length;o++){var s=e[o];s.copy(n,i),i+=s.length}return n};try{var o=n(297);e.exports=Object.assign({concat:i},o.BufferUtil||o)}catch(t){var s=function(e,t,n,r,i){for(var o=0;o<i;o++)n[r+o]=e[o]^t[3&o]},a=function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]^=t[3&r]};e.exports={concat:i,mask:s,unmask:a}}},function(e,t,n){try{e.exports=n(244)("bufferutil")}catch(t){e.exports=n(298)}},function(e,t){e.exports.BufferUtil={merge:function(e,t){for(var n=0,r=0,i=t.length;n<i;++n){var o=t[n];o.copy(e,r),r+=o.length}},mask:function(e,t,n,r,i){for(var o,s=t.readUInt32LE(0,!0),a=0;a<i-3;a+=4)(o=s^e.readUInt32LE(a,!0))<0&&(o=4294967296+o),n.writeUInt32LE(o,r+a,!0);switch(i%4){case 3:n[r+a+2]=e[a+2]^t[2];case 2:n[r+a+1]=e[a+1]^t[1];case 1:n[r+a]=e[a]^t[0]}},unmask:function(e,t){for(var n,r=t.readUInt32LE(0,!0),i=e.length,o=0;o<i-3;o+=4)(n=r^e.readUInt32LE(o,!0))<0&&(n=4294967296+n),e.writeUInt32LE(n,o,!0);switch(i%4){case 3:e[o+2]=e[o+2]^t[2];case 2:e[o+1]=e[o+1]^t[1];case 1:e[o]=e[o]^t[0]}}}},function(e,t){var n=function e(t,n){_classCallCheck2(this,e),this.target=n,this.type=t},r=function(e){function t(e,n){_classCallCheck2(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"message",n));return r.data=e,r}return _inherits(t,e),t}(n),i=function(e){function t(e,n,r){_classCallCheck2(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"close",r));return i.wasClean=void 0===e||1e3===e,i.reason=n,i.target=r,i.type="close",i.code=e,i}return _inherits(t,e),t}(n),o=function(e){function t(e){return _classCallCheck2(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"open",e))}return _inherits(t,e),t}(n),s={addEventListener:function(e,t){function n(e){t.call(this,new r(e,this))}function s(e,n){t.call(this,new i(e,n,this))}function a(e){e.type="error",e.target=this,t.call(this,e)}function u(){t.call(this,new o(this))}"function"==typeof t&&("message"===e?(n._listener=t,this.on(e,n)):"close"===e?(s._listener=t,this.on(e,s)):"error"===e?(a._listener=t,this.on(e,a)):"open"===e?(u._listener=t,this.on(e,u)):this.on(e,t))},removeEventListener:function(e,t){for(var n=this.listeners(e),r=0;r<n.length;r++)n[r]!==t&&n[r]._listener!==t||this.removeListener(e,n[r])}};e.exports=s},function(e,t){e.exports={format:function(e){return Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)||(n=[n]),n.map(function(e){return[t].concat(Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)||(n=[n]),n.map(function(e){return!0===e?t:t+"="+e}).join("; ")})).join("; ")}).join(", ")}).join(", ")},parse:function(e){var t={};return(e=e||"").split(",").forEach(function(e){var n=e.split(";"),r=n.shift().trim(),i=t[r]=t[r]||[],o={};n.forEach(function(e){var t=e.trim().split("="),n=t[0],r=t[1];void 0===r?r=!0:('"'===r[0]&&(r=r.slice(1)),'"'===r[r.length-1]&&(r=r.slice(0,r.length-1))),(o[n]=o[n]||[]).push(r)}),i.push(o)}),t}}},function(e,t,n){var r=n(270).Buffer;t.BINARY_TYPES=["nodebuffer","arraybuffer","fragments"],t.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",t.EMPTY_BUFFER=r.alloc(0),t.NOOP=function(){}},function(e,t,n){function r(e,t){return 1===e.length?e[0]:e.length>1?u.concat(e,t):l.EMPTY_BUFFER}function i(e){return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}var o=n(270),s=n(269),a=n(303),u=n(296),c=n(306),l=n(301),f=o.Buffer,h=0,d=function(){function e(t,n,r){_classCallCheck2(this,e),this._binaryType=r||l.BINARY_TYPES[0],this._extensions=t||{},this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._fragmented=0,this._masked=!1,this._fin=!1,this._mask=null,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._cleanupCallback=null,this._hadError=!1,this._dead=!1,this._loop=!1,this.onmessage=null,this.onclose=null,this.onerror=null,this.onping=null,this.onpong=null,this._state=h}return _createClass(e,[{key:"readBuffer",value:function(e){var t,n,r=0;if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length)return t=this._buffers[0].slice(0,e),this._buffers[0]=this._buffers[0].slice(e),t;for(t=f.allocUnsafe(e);e>0;)e>=(n=this._buffers[0].length)?(this._buffers[0].copy(t,r),r+=n,this._buffers.shift()):(this._buffers[0].copy(t,r,0,e),this._buffers[0]=this._buffers[0].slice(e)),e-=n;return t}},{key:"hasBufferedBytes",value:function(e){return this._bufferedBytes>=e||(this._loop=!1,this._dead&&this.cleanup(this._cleanupCallback),!1)}},{key:"add",value:function(e){this._dead||(this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop())}},{key:"startLoop",value:function(){for(this._loop=!0;this._loop;)switch(this._state){case h:this.getInfo();break;case 1:this.getPayloadLength16();break;case 2:this.getPayloadLength64();break;case 3:this.getMask();break;case 4:this.getData();break;default:this._loop=!1}}},{key:"getInfo",value:function(){if(this.hasBufferedBytes(2)){var e=this.readBuffer(2);if(0==(48&e[0])){var t=64==(64&e[0]);if(!t||this._extensions[s.extensionName]){if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return void this.error(new Error("RSV1 must be clear"),1002);if(!this._fragmented)return void this.error(new Error("invalid opcode: "+this._opcode),1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void this.error(new Error("invalid opcode: "+this._opcode),1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return void this.error(new Error("invalid opcode: "+this._opcode),1002);if(!this._fin)return void this.error(new Error("FIN must be set"),1002);if(t)return void this.error(new Error("RSV1 must be clear"),1002);if(this._payloadLength>125)return void this.error(new Error("invalid payload length"),1002)}this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength()}else this.error(new Error("RSV1 must be clear"),1002)}else this.error(new Error("RSV2 and RSV3 must be clear"),1002)}}},{key:"getPayloadLength16",value:function(){this.hasBufferedBytes(2)&&(this._payloadLength=this.readBuffer(2).readUInt16BE(0,!0),this.haveLength())}},{key:"getPayloadLength64",value:function(){if(this.hasBufferedBytes(8)){var e=this.readBuffer(8),t=e.readUInt32BE(0,!0);t>Math.pow(2,21)-1?this.error(new Error("max payload size exceeded"),1009):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4,!0),this.haveLength())}}},{key:"haveLength",value:function(){this._opcode<8&&this.maxPayloadExceeded(this._payloadLength)||(this._masked?this._state=3:this._state=4)}},{key:"getMask",value:function(){this.hasBufferedBytes(4)&&(this._mask=this.readBuffer(4),this._state=4)}},{key:"getData",value:function(){var e=l.EMPTY_BUFFER;if(this._payloadLength){if(!this.hasBufferedBytes(this._payloadLength))return;e=this.readBuffer(this._payloadLength),this._masked&&u.unmask(e,this._mask)}this._opcode>7?this.controlMessage(e):this._compressed?(this._state=5,this.decompress(e)):this.pushFragment(e)&&this.dataMessage()}},{key:"decompress",value:function(e){var t=this;this._extensions[s.extensionName].decompress(e,this._fin,function(e,n){e?t.error(e,1009===e.closeCode?1009:1007):(t.pushFragment(n)&&t.dataMessage(),t.startLoop())})}},{key:"dataMessage",value:function(){if(this._fin){var e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var n;n="nodebuffer"===this._binaryType?r(t,e):"arraybuffer"===this._binaryType?i(r(t,e)):t,this.onmessage(n)}else{var o=r(t,e);if(!a(o))return void this.error(new Error("invalid utf8 sequence"),1007);this.onmessage(o.toString())}}this._state=h}},{key:"controlMessage",value:function(e){if(8!==this._opcode)9===this._opcode?this.onping(e):this.onpong(e),this._state=h;else if(0===e.length)this.onclose(1e3,""),this._loop=!1,this.cleanup(this._cleanupCallback);else if(1===e.length)this.error(new Error("invalid payload length"),1002);else{var t=e.readUInt16BE(0,!0);if(!c.isValidErrorCode(t))return void this.error(new Error("invalid status code: "+t),1002);var n=e.slice(2);if(!a(n))return void this.error(new Error("invalid utf8 sequence"),1007);this.onclose(t,n.toString()),this._loop=!1,this.cleanup(this._cleanupCallback)}}},{key:"error",value:function(e,t){this.onerror(e,t),this._hadError=!0,this._loop=!1,this.cleanup(this._cleanupCallback)}},{key:"maxPayloadExceeded",value:function(e){if(0===e||this._maxPayload<1)return!1;var t=this._totalPayloadLength+e;return t<=this._maxPayload?(this._totalPayloadLength=t,!1):(this.error(new Error("max payload size exceeded"),1009),!0)}},{key:"pushFragment",value:function(e){if(0===e.length)return!0;var t=this._messageLength+e.length;return this._maxPayload<1||t<=this._maxPayload?(this._messageLength=t,this._fragments.push(e),!0):(this.error(new Error("max payload size exceeded"),1009),!1)}},{key:"cleanup",value:function(e){this._dead=!0,this._hadError||!this._loop&&5!==this._state?(this._extensions=null,this._fragments=null,this._buffers=null,this._mask=null,this._cleanupCallback=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.onping=null,this.onpong=null,e&&e()):this._cleanupCallback=e}}]),e}();e.exports=d},function(e,t,n){try{var r=n(304);e.exports="object"===(void 0===r?"undefined":_typeof(r))?r.Validation.isValidUTF8:r}catch(t){e.exports=function(){return!0}}},function(e,t,n){try{e.exports=n(244)("validation")}catch(t){e.exports=n(305)}},function(e,t){t.Validation={isValidUTF8:function(e){return!0}}},function(e,t){e.exports={isValidErrorCode:function(e){return e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},1e3:"normal",1001:"going away",1002:"protocol error",1003:"unsupported data",1004:"reserved",1005:"reserved for extensions",1006:"reserved for extensions",1007:"inconsistent or invalid data",1008:"policy violation",1009:"message too big",1010:"extension handshake missing",1011:"an unexpected condition prevented the request from being fulfilled",1012:"service restart",1013:"try again later"}},function(e,t,n){function r(e){var t=c.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}var i=n(270),o=n(72),s=n(269),a=n(296),u=n(306),c=i.Buffer,l=function(){function e(t,n){_classCallCheck2(this,e),this._extensions=n||{},this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[],this.onerror=null}return _createClass(e,[{key:"close",value:function(e,t,n,r){if(void 0!==e&&("number"!=typeof e||!u.isValidErrorCode(e)))throw new Error("first argument must be a valid error code number");var i=c.allocUnsafe(2+(t?c.byteLength(t):0));i.writeUInt16BE(e||1e3,0,!0),i.length>2&&i.write(t,2),this._deflating?this.enqueue([this.doClose,i,n,r]):this.doClose(i,n,r)}},{key:"doClose",value:function(t,n,r){this.sendFrame(e.frame(t,{fin:!0,rsv1:!1,opcode:8,mask:n,readOnly:!1}),r)}},{key:"ping",value:function(e,t){var n=!0;c.isBuffer(e)||(e instanceof ArrayBuffer?e=c.from(e):ArrayBuffer.isView(e)?e=r(e):(e=c.from(e),n=!1)),this._deflating?this.enqueue([this.doPing,e,t,n]):this.doPing(e,t,n)}},{key:"doPing",value:function(t,n,r){this.sendFrame(e.frame(t,{fin:!0,rsv1:!1,opcode:9,mask:n,readOnly:r}))}},{key:"pong",value:function(e,t){var n=!0;c.isBuffer(e)||(e instanceof ArrayBuffer?e=c.from(e):ArrayBuffer.isView(e)?e=r(e):(e=c.from(e),n=!1)),this._deflating?this.enqueue([this.doPong,e,t,n]):this.doPong(e,t,n)}},{key:"doPong",value:function(t,n,r){this.sendFrame(e.frame(t,{fin:!0,rsv1:!1,opcode:10,mask:n,readOnly:r}))}},{key:"send",value:function(t,n,i){var o=n.binary?2:1,a=n.compress,u=!0;c.isBuffer(t)||(t instanceof ArrayBuffer?t=c.from(t):ArrayBuffer.isView(t)?t=r(t):(t=c.from(t),u=!1));var l=this._extensions[s.extensionName];if(this._firstFragment?(this._firstFragment=!1,a&&l&&(a=t.length>=l._threshold),this._compress=a):(a=!1,o=0),n.fin&&(this._firstFragment=!0),l){var f={fin:n.fin,rsv1:a,opcode:o,mask:n.mask,readOnly:u};this._deflating?this.enqueue([this.dispatch,t,this._compress,f,i]):this.dispatch(t,this._compress,f,i)}else this.sendFrame(e.frame(t,{fin:n.fin,rsv1:!1,opcode:o,mask:n.mask,readOnly:u}),i)}},{key:"dispatch",value:function(t,n,r,i){var o=this;if(n){var a=this._extensions[s.extensionName];this._deflating=!0,a.compress(t,r.fin,function(t,n){t?i?i(t):o.onerror(t):(r.readOnly=!1,o.sendFrame(e.frame(n,r),i),o._deflating=!1,o.dequeue())})}else this.sendFrame(e.frame(t,r),i)}},{key:"dequeue",value:function(){for(;!this._deflating&&this._queue.length;){var e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}},{key:"enqueue",value:function(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}},{key:"sendFrame",value:function(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}],[{key:"frame",value:function(e,t){var n=e.length<1024||t.mask&&t.readOnly,r=t.mask?6:2,i=e.length;e.length>=65536?(r+=8,i=127):e.length>125&&(r+=2,i=126);var s=c.allocUnsafe(n?e.length+r:r);if(s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),126===i?s.writeUInt16BE(e.length,2,!0):127===i&&(s.writeUInt32BE(0,2,!0),s.writeUInt32BE(e.length,6,!0)),!t.mask)return s[1]=i,n?(e.copy(s,r),[s]):[s,e];var u=o.randomBytes(4);return s[1]=128|i,s[r-4]=u[0],s[r-3]=u[1],s[r-2]=u[2],s[r-1]=u[3],n?(a.mask(e,u,s,r,e.length),[s]):(a.mask(e,u,e,0,e.length),[s,e])}}]),e}();e.exports=l},function(e,t,n){function r(){this.destroy()}function i(e,t){var n=e.perMessageDeflate,r={};if(n&&t[h.extensionName]){var i=new h(!0!==n?n:{},!0,e.maxPayload);i.accept(t[h.extensionName]),r[h.extensionName]=i}return r}function o(e,t,n){e.writable&&(n=n||l.STATUS_CODES[t],e.write("HTTP/1.1 "+t+" "+l.STATUS_CODES[t]+"\r\nConnection: close\r\nContent-type: text/html\r\nContent-Length: "+_.byteLength(n)+"\r\n\r\n"+n)),e.removeListener("error",r),e.destroy()}var s=n(270),a=n(96),u=n(72),c=n(267),l=n(197),f=n(14),h=n(269),d=n(300),p=n(301),g=n(266),_=s.Buffer,v=function(e){function t(e,n){_classCallCheck2(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError("missing or invalid options");return null!=e.port?(r._server=l.createServer(function(e,t){var n=l.STATUS_CODES[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)}),r._server.allowHalfOpen=!1,r._server.listen(e.port,e.host,e.backlog,n)):e.server&&(r._server=e.server),r._server&&(r._ultron=new c(r._server),r._ultron.on("listening",function(){return r.emit("listening")}),r._ultron.on("error",function(e){return r.emit("error",e)}),r._ultron.on("upgrade",function(e,t,n){r.handleUpgrade(e,t,n,function(t){r.emit("connection",t,e)})})),e.clientTracking&&(r.clients=new Set),r.options=e,r}return _inherits(t,e),_createClass(t,[{key:"close",value:function(e){if(this.clients){var t=!0,n=!1,r=void 0;try{for(var i,o=this.clients[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)i.value.terminate()}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}var s=this._server;if(s&&(this._ultron.destroy(),this._ultron=this._server=null,null!=this.options.port))return s.close(e);e&&e()}},{key:"shouldHandle",value:function(e){return!this.options.path||f.parse(e.url).pathname===this.options.path}},{key:"handleUpgrade",value:function(e,t,n,i){var s=this;t.on("error",r);var a=+e.headers["sec-websocket-version"];if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==a&&13!==a||!this.shouldHandle(e))return o(t,400);var u=(e.headers["sec-websocket-protocol"]||"").split(/, */);if(this.options.handleProtocols){if(!1===(u=this.options.handleProtocols(u,e)))return o(t,401)}else u=u[0];if(this.options.verifyClient){var c={origin:e.headers[8===a?"sec-websocket-origin":"origin"],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(c,function(r,c,l){if(!r)return o(t,c||401,l);s.completeUpgrade(u,a,e,t,n,i)});if(!this.options.verifyClient(c))return o(t,401)}this.completeUpgrade(u,a,e,t,n,i)}},{key:"completeUpgrade",value:function(e,t,n,s,a,c){var l=this;if(!s.readable||!s.writable)return s.destroy();var f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+u.createHash("sha1").update(n.headers["sec-websocket-key"]+p.GUID,"binary").digest("base64")];e&&f.push("Sec-WebSocket-Protocol: "+e);var h,_=d.parse(n.headers["sec-websocket-extensions"]);try{h=i(this.options,_)}catch(e){return o(s,400)}var v=Object.keys(h);if(v.length){var y=v.reduce(function(e,t){return e[t]=[h[t].params],e},{});f.push("Sec-WebSocket-Extensions: "+d.format(y))}this.emit("headers",f,n),s.write(f.concat("","").join("\r\n"));var m=new g([s,a],null,{maxPayload:this.options.maxPayload,protocolVersion:t,extensions:h,protocol:e});this.clients&&(this.clients.add(m),m.on("close",function(){return l.clients.delete(m)})),s.removeListener("error",r),c(m)}}]),t}(a);e.exports=v}])});
//# sourceMappingURL=eve.min.js.map
