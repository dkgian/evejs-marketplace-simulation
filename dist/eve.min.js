"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(r)},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports.eve=t():e.eve=t()}(void 0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){t.Agent=n(1),t.ServiceManager=n(20),t.TransportManager=n(61),t.module={BabbleModule:n(62),PatternModule:n(104),RequestModule:n(105),RPCModule:n(106)},t.transport={Transport:n(107),AMQPTransport:n(108),DistribusTransport:n(111),HTTPTransport:n(157),LocalTransport:n(179),PubNubTransport:n(181),DBusTransport:n(183),WebSocketTransport:n(223),connection:{Connection:n(110),AMQPConnection:n(109),DistribusConnection:n(156),HTTPConnection:n(178),LocalConnection:n(180),PubNubConnection:n(182),DBusConnection:n(184),WebSocketConnection:n(224)}},t.hypertimer=n(22),t.util=n(13),t.Agent.registerModule(t.module.BabbleModule),t.Agent.registerModule(t.module.PatternModule),t.Agent.registerModule(t.module.RequestModule),t.Agent.registerModule(t.module.RPCModule),t.TransportManager.registerType(t.transport.AMQPTransport),t.TransportManager.registerType(t.transport.DistribusTransport),t.TransportManager.registerType(t.transport.HTTPTransport),t.TransportManager.registerType(t.transport.LocalTransport),t.TransportManager.registerType(t.transport.PubNubTransport),t.TransportManager.registerType(t.transport.DBusTransport),t.TransportManager.registerType(t.transport.WebSocketTransport),t.system=new t.ServiceManager,t.system.transports.add(new t.transport.LocalTransport),t.Agent.getTransportById=function(e){return t.system.transports.get(e)}},function(e,t,n){function r(e){this.id=e?e.toString():s(),this.connections=[],this.defaultConnection=null,this.ready=o.resolve([])}function i(e){var t=r.modules[e];if(!t)throw new Error('Unknown module "'+e+'". Choose from: '+Object.keys(r.modules).map(JSON.stringify).join(", "));return t}var o=n(2),s=n(12),a=(n(13),n(14));r.modules={},r.registerModule=function(e){var t=e.prototype.type;if("function"!=typeof e)throw new Error("Constructor function expected");if(!t)throw new Error('Field "prototype.type" missing in transport constructor');if(t in r.modules&&r.modules[t]!==e)throw new Error('Module of type "'+t+'" already exists');r.modules[t]=e},r.getTransportById=function(e){throw new Error('Transport with id "'+e+'" not found')},r.prototype.extend=function(e,t){if(Array.isArray(e)){var n=[].concat(e);n.sort(function(e,t){return"pattern"==e?-1:"pattern"==t?1:0});for(var r=0;r<n.length;r++)this.extend(n[r],t)}else{var o=i(e),s=new o(this,t),a=s.mixin(),c=this;Object.keys(a).forEach(function(e){if(void 0!==c[e]&&"_receive"!==e)throw new Error('Conflict: agent already has a property "'+prop+'"')}),Object.keys(a).forEach(function(e){c[e]=a[e]})}return this},r.prototype.loadModule=function(e,t,n){var r=void 0!==t?Object.create(t):{};r.extend=!1;var o=i(e),s=new o(this,t,n),a=s.mixin();return this._receive=a._receive,s},r.prototype.send=function(e,t){var n=e.indexOf("://");if(-1!==n){var r=a.parse(e);return"http:"==r.protocol||"ws:"==r.protocol||"https:"==r.protocol?this._sendByProtocol(r.protocol.slice(0,-1),e,t):this._sendByNetworkId(r.host,r.path,t)}var i=e.indexOf("@");if(-1!=i){var s=e.substring(0,i),c=e.substring(i+1);return this._sendByTransportId(c,s,t)}var u=this.defaultConnection;return u?u.send(e,t):o.reject(new Error("No transport found"))},r.prototype._sendByNetworkId=function(e,t,n){for(var r=0;r<this.connections.length;r++){var i=this.connections[r];if(i.transport.networkId==e)return i.send(t,n)}return o.reject(new Error('No transport found with networkId "'+e+'"'))},r.prototype._sendByProtocol=function(e,t,n){e="https"==e?"http":e;for(var r=0;r<this.connections.length;r++){var i=this.connections[r];if(i.transport.type==e)return i.send(t,n)}return o.reject(new Error('No transport found for protocol "'+e+'"'))},r.prototype._sendByTransportId=function(e,t,n){for(var r=0;r<this.connections.length;r++){var i=this.connections[r];if(i.transport.id==e)return i.send(t,n)}return o.reject(new Error('No transport found with id "'+e+'"'))},r.prototype.receive=function(e,t){},r.prototype._receive=function(e,t){return this.receive(e,t)},r.prototype.connect=function(e,t){if(Array.isArray(e)){var n=this;return e.map(function(e){return n._connect(e,t)})}return"string"==typeof e?this._connect(r.getTransportById(e),t):this._connect(e,t)},r.prototype._connect=function(e,t){var n=this,r=function(e,t){return n._receive(e,t)},i=e.connect(t||this.id,r);if(this.connections.push(i),this.defaultConnection){if(e["default"]){if(this.defaultConnection["default"])throw new Error("Cannot connect to a second default transport");this.defaultConnection=i}}else this.defaultConnection=i;return this._updateReady(),i},r.prototype.disconnect=function(e){var t,n;if(e){if(Array.isArray(e))for(t=0;t<this.connections.length;)n=this.connections[t],-1!==e.indexOf(n.transport)?this._disconnect(n):t++;else if("string"==typeof e)this.disconnect(r.getTransportById(e));else for(t=0;t<this.connections.length;t++)if(n=this.connections[t],n.transport===e){this._disconnect(n);break}}else for(;n=this.connections[0];)this._disconnect(n)},r.prototype._disconnect=function(e){var t=this.connections.indexOf(e);-1!==t&&(e.close(),this.connections.splice(t,1),this.defaultConnection===e&&(this.defaultConnection=this.connections[this.connections.length-1]||null)),this._updateReady()},r.prototype._updateReady=function(){this.ready=o.all(this.connections.map(function(e){return e.ready}))},e.exports=r},function(e,t,n){e.exports=n(3)},function(e,t,n){e.exports=n(4),n(6),n(7),n(8),n(9),n(11)},function(e,t,n){function r(){}function i(e){try{return e.then}catch(t){return g=t,y}}function o(e,t){try{return e(t)}catch(n){return g=n,y}}function s(e,t,n){try{e(t,n)}catch(r){return g=r,y}}function a(e){if("object"!==_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,e!==r&&v(e,this)}function c(e,t,n){return new e.constructor(function(i,o){var s=new a(r);s.then(i,o),u(e,new p(t,n,s))})}function u(e,t){for(;3===e._81;)e=e._65;return a._10&&a._10(e),0===e._81?0===e._45?(e._45=1,void(e._54=t)):1===e._45?(e._45=2,void(e._54=[e._54,t])):void e._54.push(t):void f(e,t)}function f(e,t){_(function(){var n=1===e._81?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._81?l(t.promise,e._65):h(t.promise,e._65));var r=o(n,e._65);r===y?h(t.promise,g):l(t.promise,r)})}function l(e,t){if(t===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===("undefined"==typeof t?"undefined":_typeof(t))||"function"==typeof t)){var n=i(t);if(n===y)return h(e,g);if(n===e.then&&t instanceof a)return e._81=3,e._65=t,void d(e);if("function"==typeof n)return void v(n.bind(t),e)}e._81=1,e._65=t,d(e)}function h(e,t){e._81=2,e._65=t,a._97&&a._97(e,t),d(e)}function d(e){if(1===e._45&&(u(e,e._54),e._54=null),2===e._45){for(var t=0;t<e._54.length;t++)u(e,e._54[t]);e._54=null}}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function v(e,t){var n=!1,r=s(e,function(e){n||(n=!0,l(t,e))},function(e){n||(n=!0,h(t,e))});n||r!==y||(n=!0,h(t,g))}var _=n(5),g=null,y={};e.exports=a,a._10=null,a._97=null,a._61=r,a.prototype.then=function(e,t){if(this.constructor!==a)return c(this,e,t);var n=new a(r);return u(this,new p(e,t,n)),n}},function(e,t){(function(t){function n(e){a.length||(s(),c=!0),a[a.length]=e}function r(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>f){for(var t=0,n=a.length-u;n>t;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,c=!1}function i(e){var t=1,n=new l(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var s,a=[],c=!1,u=0,f=1024,l=t.MutationObserver||t.WebKitMutationObserver;s="function"==typeof l?i(r):o(r),n.requestFlush=s,n.makeRequestCallFromTimer=o}).call(t,function(){return this}())},function(e,t,n){var r=n(4);e.exports=r,r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,n){var r=n(4);e.exports=r,r.prototype["finally"]=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},function(e,t,n){function r(e){var t=new i(i._61);return t._81=1,t._65=e,t}var i=n(4);e.exports=i;var o=r(!0),s=r(!1),a=r(null),c=r(void 0),u=r(0),f=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return a;if(void 0===e)return c;if(e===!0)return o;if(e===!1)return s;if(0===e)return u;if(""===e)return f;if("object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(n){return new i(function(e,t){t(n)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(s,a){if(a&&("object"===("undefined"==typeof a?"undefined":_typeof(a))||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._81;)a=a._65;return 1===a._81?r(s,a._65):(2===a._81&&n(a._65),void a.then(function(e){r(s,e)},n))}var c=a.then;if("function"==typeof c){var u=new i(c.bind(a));return void u.then(function(e){r(s,e)},n)}}t[s]=a,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,s=0;s<t.length;s++)r(s,t[s])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype["catch"]=function(e){return this.then(null,e)}},function(e,t,n){function r(e,t){for(var n=[],r=0;t>r;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([a]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}function i(e){for(var t=Math.max(e.length-1,3),n=[],r=0;t>r;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+a+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}var o=n(4),s=n(10);e.exports=o,o.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?r(e,t):i(e)};var a="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(i){if(null===n||"undefined"==typeof n)return new o(function(e,t){t(i)});s(function(){n.call(r,i)})}}},o.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){s(function(){e.call(t,null,n)})},function(n){s(function(){e.call(t,n)})})}},function(e,t,n){function r(){if(c.length)throw c.shift()}function i(e){var t;t=a.length?a.pop():new o,t.task=e,s(t)}function o(){this.task=null}var s=n(5),a=[],c=[],u=s.makeRequestCallFromTimer(r);e.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(c.push(e),u())}finally{this.task=null,a[a.length]=this}}},function(e,t,n){var r=n(4);e.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},r.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},r.prototype.getState=function(){return 3===this._81?this._65.getState():-1===this._81||-2===this._81?0:this._81}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},function(e,t){t=e.exports=function(){for(var e,n="",r=0;32>r;r++)e=16*t.random()|0,r>4&&21>r&&!(r%4)&&(n+="-"),n+=(12===r?4:16===r?3&e|8:e).toString(16);return n};var n=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;t.isUUID=function(e){return n.test(e)},t.random=function(){return Math.random()}},function(e,t){t.isPromise=function(e){return e&&"function"==typeof e.then&&"function"==typeof e["catch"]},t.normalizeURL=function(e){return"/"==e[e.length-1]?e.substring(0,e.length-1):e}},function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&u(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return c(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function u(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e}function f(e){return null===e}function l(e){return null==e}var h=n(15);t.parse=i,t.resolve=s,t.resolveObject=a,t.format=o,t.Url=r;var d=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],_=["{","}","|","\\","^","`"].concat(v),g=["'"].concat(_),y=["%","/","?",";","#"].concat(g),m=["/","?","#"],b=255,w=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=n(17);r.prototype.parse=function(e,t,n){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+("undefined"==typeof e?"undefined":_typeof(e)));var r=e;r=r.trim();var i=d.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||i&&x[i]||(r=r.substr(2),this.slashes=!0)}if(!x[i]&&(s||i&&!T[i])){for(var a=-1,u=0;u<m.length;u++){var f=r.indexOf(m[u]);-1!==f&&(-1===a||a>f)&&(a=f)}var l,p;p=-1===a?r.lastIndexOf("@"):r.lastIndexOf("@",a),-1!==p&&(l=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(l)),a=-1;for(var u=0;u<y.length;u++){var f=r.indexOf(y[u]);-1!==f&&(-1===a||a>f)&&(a=f)}-1===a&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var _=this.hostname.split(/\./),u=0,A=_.length;A>u;u++){var O=_[u];if(O&&!O.match(w)){for(var C="",R=0,N=O.length;N>R;R++)C+=O.charCodeAt(R)>127?"x":O[R];if(!C.match(w)){var I=_.slice(0,u),P=_.slice(u+1),B=O.match(E);B&&(I.push(B[1]),P.unshift(B[2])),P.length&&(r="/"+P.join(".")+r),this.hostname=I.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var j=this.hostname.split("."),L=[],u=0;u<j.length;++u){var M=j[u];L.push(M.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(M):M)}this.hostname=L.join(".")}var D=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+D,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!k[o])for(var u=0,A=g.length;A>u;u++){var U=g[u],z=encodeURIComponent(U);z===U&&(z=escape(U)),r=r.split(U).join(z)}var H=r.indexOf("#");-1!==H&&(this.hash=r.substr(H),r=r.slice(0,H));var q=r.indexOf("?");if(-1!==q?(this.search=r.substr(q),this.query=r.substr(q+1),t&&(this.query=S.parse(this.query)),r=r.slice(0,q)):t&&(this.search="",this.query={}),r&&(this.pathname=r),T[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",M=this.search||"";this.path=D+M}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||T[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+n+s+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),T[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!T[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||x[e.protocol])n.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var o=n.pathname||"",s=n.search||"";n.path=o+s}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=u||a||n.host&&e.pathname,d=h,p=n.pathname&&n.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],v=n.protocol&&!T[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),h=h&&(""===i[0]||""===p[0])),u)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,p=i;else if(i.length)p||(p=[]),p.pop(),p=p.concat(i),n.search=e.search,n.query=e.query;else if(!l(e.search)){if(v){n.hostname=n.host=p.shift();var _=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;_&&(n.auth=_.shift(),n.host=n.hostname=_.shift())}return n.search=e.search,n.query=e.query,f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=p.slice(-1)[0],y=(n.host||e.host)&&("."===g||".."===g)||""===g,m=0,b=p.length;b>=0;b--)g=p[b],"."==g?p.splice(b,1):".."===g?(p.splice(b,1),m++):m&&(p.splice(b,1),m--);if(!h&&!d)for(;m--;m)p.unshift("..");!h||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),y&&"/"!==p.join("/").substr(-1)&&p.push("");var w=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(v){n.hostname=n.host=w?"":p.length?p.shift():"";var _=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;_&&(n.auth=_.shift(),n.host=n.hostname=_.shift())}return h=h||n.host&&p.length,h&&!w&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var r;(function(e,i){!function(o){function s(e){throw RangeError(I[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function c(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(N,".");var i=e.split("."),o=a(i,t).join(".");return r+o}function u(e){for(var t,n,r=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function f(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=j(e>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function l(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:w}function h(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?B(e/T):e>>1,e+=B(e/t);e>P*k>>1;r+=w)e=B(e/P);return B(r+(P+1)*e/(e+x))}function p(e){var t,n,r,i,o,a,c,u,h,p,v=[],_=e.length,g=0,y=A,m=S;for(n=e.lastIndexOf(O),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&s("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;_>i;){for(o=g,a=1,c=w;i>=_&&s("invalid-input"),u=l(e.charCodeAt(i++)),(u>=w||u>B((b-g)/a))&&s("overflow"),g+=u*a,h=m>=c?E:c>=m+k?k:c-m,!(h>u);c+=w)p=w-h,a>B(b/p)&&s("overflow"),a*=p;t=v.length+1,m=d(g-o,t,0==o),B(g/t)>b-y&&s("overflow"),y+=B(g/t),g%=t,v.splice(g++,0,y)}return f(v)}function v(e){var t,n,r,i,o,a,c,f,l,p,v,_,g,y,m,x=[];for(e=u(e),_=e.length,t=A,n=0,o=S,a=0;_>a;++a)v=e[a],128>v&&x.push(j(v));for(r=i=x.length,i&&x.push(O);_>r;){for(c=b,a=0;_>a;++a)v=e[a],v>=t&&c>v&&(c=v);for(g=r+1,c-t>B((b-n)/g)&&s("overflow"),n+=(c-t)*g,t=c,a=0;_>a;++a)if(v=e[a],t>v&&++n>b&&s("overflow"),v==t){for(f=n,l=w;p=o>=l?E:l>=o+k?k:l-o,!(p>f);l+=w)m=f-p,y=w-p,x.push(j(h(p+m%y,0))),f=B(m/y);x.push(j(h(f,0))),o=d(n,g,r==i),n=0,++r}++n,++t}return x.join("")}function _(e){return c(e,function(e){return C.test(e)?p(e.slice(4).toLowerCase()):e})}function g(e){return c(e,function(e){return R.test(e)?"xn--"+v(e):e})}var y=("object"==("undefined"==typeof t?"undefined":_typeof(t))&&t&&!t.nodeType&&t,"object"==("undefined"==typeof e?"undefined":_typeof(e))&&e&&!e.nodeType&&e,"object"==("undefined"==typeof i?"undefined":_typeof(i))&&i);(y.global===y||y.window===y||y.self===y)&&(o=y);var m,b=2147483647,w=36,E=1,k=26,x=38,T=700,S=72,A=128,O="-",C=/^xn--/,R=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=w-E,B=Math.floor,j=String.fromCharCode;m={version:"1.3.2",ucs2:{decode:u,encode:f},decode:p,encode:v,toASCII:g,toUnicode:_},r=function(){return m}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(16)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){t.decode=t.parse=n(18),t.encode=t.stringify=n(19)},function(e,t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var u=0;c>u;++u){var f,l,h,d,p=e[u].replace(s,"%20"),v=p.indexOf(r);v>=0?(f=p.substr(0,v),l=p.substr(v+1)):(f=p,l=""),h=decodeURIComponent(f),d=decodeURIComponent(l),n(o,h)?Array.isArray(o[h])?o[h].push(d):o[h]=[o[h],d]:o[h]=d}return o}},function(e,t){var n=function(e){switch("undefined"==typeof e?"undefined":_typeof(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===("undefined"==typeof e?"undefined":_typeof(e))?Object.keys(e).map(function(i){var o=encodeURIComponent(n(i))+r;return Array.isArray(e[i])?e[i].map(function(e){return o+encodeURIComponent(n(e))}).join(t):o+encodeURIComponent(n(e[i]))}).join(t):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(e)):""}},function(e,t,n){function r(e){this.transports=new s,this.timer=o(),this.random=Math.random,this.init(e)}var i=n(21),o=n(22),s=n(61),a={transports:!0,timer:!0,random:!0};r.prototype.init=function(e){if(this.transports.clear(),e){if(e.transports&&this.transports.load(e.transports),e.timer&&this.timer.config(e.timer),e.random)if(e.random.deterministic){var t=e.random.seed||"random seed";this.random=i(t,e.random)}else this.random=Math.random;for(var n in e)e.hasOwnProperty(n)&&!a[n]&&console.log('WARNING: Unknown configuration option "'+n+'"')}},r.prototype.clear=function(){this.transports.clear()},e.exports=r},function(e,t){(function(t){function n(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a>i;)s[i]=i++;for(i=0;a>i;i++)s[i]=s[o=v&o+e[i%n]+(t=s[i])],s[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,s=r.S;e--;)t=s[i=v&i+1],n=n*a+s[v&(s[i]=s[o=v&o+t])+(s[o]=t)];return r.i=i,r.j=o,n})(a)}function r(e,t){var n,i=[],o=("undefined"==typeof e?"undefined":_typeof(e))[0];if(t&&"o"==o)for(n in e)try{i.push(r(e[n],t-1))}catch(s){}return i.length?i:"s"==o?e:e+"\x00"}function i(e,t){for(var n,r=e+"",i=0;i<r.length;)t[v&i]=v&(n^=19*t[v&i])+r.charCodeAt(i++);return s(t)}function o(e){try{return l.crypto.getRandomValues(e=new Uint8Array(a)),s(e)}catch(t){return[+new Date,l,l.navigator&&l.navigator.plugins,l.screen,s(f)]}}function s(e){return String.fromCharCode.apply(0,e)}var a=256,c=6,u=52,f=[],l="undefined"==typeof t?window:t,h=Math.pow(a,c),d=Math.pow(2,u),p=2*d,v=a-1,_=Math.random;e.exports=function(t,u){if(u&&u.global===!0)return u.global=!1,Math.random=e.exports(t,u),u.global=!0,Math.random;var l=u&&u.entropy||!1,v=[],_=(i(r(l?[t,s(f)]:0 in arguments?t:o(),3),v),new n(v));return i(s(_.S),f),function(){for(var e=_.g(c),t=h,n=0;d>e;)e=(e+n)*a,t*=a,n=_.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t}},e.exports.resetGlobal=function(){Math.random=_},i(Math.random(),f)}).call(t,function(){return this}())},function(e,t,n){e.exports=n(23)},function(e,t,n){function r(e){function t(){return{paced:g,rate:y,deterministic:m,time:b,master:w,port:E}}function n(e){if(N||e.master)for(var t in e)if("master"!==t&&"slave"!==t)throw new Error('Cannot apply configuration option "'+t+'", timer is configured as slave.')}function r(e){if("deterministic"in e&&(m=e.deterministic?!0:!1),"paced"in e&&(g=e.paced?!0:!1),"time"in e&&(T=_(e.time),x=c.systemNow(),f(T),b=new Date(T).toISOString()),"rate"in e){var n=Number(e.rate);if(isNaN(n)||0>=n)throw new TypeError("Invalid rate "+JSON.stringify(e.rate)+". Rate must be a positive number");T=I.now(),x=c.systemNow(),y=n}if("master"in e&&(N&&(N.destroy(),N=null),w=e.master,null!=e.master)){var i=function(e){var n=t();r(e);var i=t();I.emit("config",i,n)};N=a(e.master),N.on("change",function(e){i({time:e})}),N.on("config",function(e){i(e)}),N.on("error",function(e){I.emit("error",e)})}"port"in e&&(R&&(R.destroy(),R=null),E=e.port,e.port&&(R=s(I.now,I.config,e.port),R.on("error",function(e){I.emit("error",e)}))),v(),R&&R.broadcastConfig()}function f(e){for(var t=0;t<S.length;t++){var n=S[t];n.type===u.INTERVAL&&l(n,e)}}function l(e,t){e.occurrence=Math.round((t-e.firstTime)/e.interval),e.time=e.firstTime+e.occurrence*e.interval}function h(e){if(S.length>0){for(var t=S.length-1;t>=0&&S[t].time>e.time;)t--;S.splice(t+1,0,e)}else S.push(e)}function d(e,t){function n(){e.type===u.INTERVAL&&A[e.id]&&(e.occurrence++,e.time=e.firstTime+e.occurrence*e.interval,h(e)),delete A[e.id],t&&t()}A[e.id]=e;try{0==e.callback.length?(e.callback(),n()):e.callback(n)}catch(r){o(I,"error")?I.emit("error",r):console.log("Error",r),n()}}function p(e){for(var t=0;t<S.length&&(S[t].time<=e||!isFinite(S[t].time));)t++;var n=S.splice(0,t);return 0==m&&c.shuffle(n),n}function v(){if(g||!(Object.keys(A).length>0)){var e=S[0];if(O&&(clearTimeout(O),O=null),k&&e){var t=function(){g||(T=n>T&&isFinite(n)?n:T);var e=p(n);if(g)e.forEach(function(e){d(e)}),v();else{var t=function r(){var t=e.shift();t?d(t,r):v()};t()}},n=e.time,r=n-I.now(),i=g?r/y:0;O=setTimeout(t,Math.round(i))}}}function _(e){var t="number"==typeof e?e:e instanceof Date?e.valueOf():new Date(e).valueOf();if(isNaN(t))throw new TypeError("Invalid date "+JSON.stringify(e)+". Date, number, or ISOString expected");return t}var g=!0,y=1,m=!0,b=null,w=null,E=null,k=!1,x=null,T=c.systemNow(),S=[],A={},O=null,C=0,R=null,N=null,I=i({});return I.config=function(e){return e&&(n(e),r(e)),t()},I.now=function(){if(g){if(k){var e=c.systemNow()-x,t=e*y;return T+t}return T}return T},I["continue"]=function(){x=c.systemNow(),k=!0,v()},I.pause=function(){T=I.now(),x=null,k=!1,v()},I.getTime=function(){return new Date(I.now())},I.valueOf=I.getTime,I.toString=function(){return I.getTime().toString()},I.setTimeout=function(e,t){var n=C++,r=I.now()+t;if(isNaN(r))throw new TypeError("delay must be a number");return h({id:n,type:u.TIMEOUT,time:r,callback:e}),v(),n},I.setTrigger=function(e,t){var n=C++,r=_(t);return h({id:n,type:u.TRIGGER,time:r,callback:e}),v(),n},I.setInterval=function(e,t,n){var r=C++,i=Number(t);if(isNaN(i))throw new TypeError("interval must be a number");(0>i||!isFinite(i))&&(i=0);var o=void 0!=n?_(n):null,s=I.now(),a=null!=o?o:s+i,c={id:r,type:u.INTERVAL,interval:i,time:a,firstTime:null!=o?o:a,occurrence:0,callback:e};return s>a&&l(c,s),h(c),v(),r},I.clearTimeout=function(e){if(A[e])return void delete A[e];for(var t=0;t<S.length;t++)if(S[t].id===e){S.splice(t,1),v();break}},I.clearTrigger=I.clearTimeout,I.clearInterval=I.clearTimeout,I.list=function(){
return S.map(function(e){return e.id})},I.clear=function(){A={},S=[],v()},I.destroy=function(){I.clear(),N&&N.destroy(),R&&R.destroy()},Object.defineProperty(I,"running",{get:function(){return k}}),I.config(e),I["continue"](),I}var i=n(24),o=n(39),s=n(41).createMaster,a=n(57).createSlave,c=n(60),u={TIMEOUT:0,INTERVAL:1,TRIGGER:2};e.exports=r},function(e,t,n){var r,i,o,s,a,c,u,f=n(25),l=n(38),h=Function.prototype.apply,d=Function.prototype.call,p=Object.create,v=Object.defineProperty,_=Object.defineProperties,g=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return l(t),g.call(this,"__ee__")?n=this.__ee__:(n=y.value=p(null),v(this,"__ee__",y),y.value=null),n[e]?"object"===_typeof(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return l(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),h.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(l(t),!g.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(r=n[e],"object"===("undefined"==typeof r?"undefined":_typeof(r)))for(o=0;i=r[o];++o)(i===t||i.__eeOnceListener__===t)&&(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else(r===t||r.__eeOnceListener__===t)&&delete n[e];return this},s=function(e){var t,n,r,i,o;if(g.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"===("undefined"==typeof i?"undefined":_typeof(i))){for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)h.call(r,this,o)}else switch(arguments.length){case 1:d.call(i,this);break;case 2:d.call(i,this,arguments[1]);break;case 3:d.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];h.call(i,this,o)}},a={on:r,once:i,off:o,emit:s},c={on:f(r),once:f(i),off:f(o),emit:f(s)},u=_({},c),e.exports=t=function(e){return null==e?p(u):_(Object(e),c)},t.methods=a},function(e,t,n){var r,i=n(26),o=n(33),s=n(34),a=n(35);r=e.exports=function(e,t){var n,r,s,c,u;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],null==e?(n=s=!0,r=!1):(n=a.call(e,"c"),r=a.call(e,"e"),s=a.call(e,"w")),u={value:t,configurable:n,enumerable:r,writable:s},c?i(o(c),u):u},r.gs=function(e,t,n){var r,c,u,f;return"string"!=typeof e?(u=n,n=t,t=e,e=null):u=arguments[3],null==t?t=void 0:s(t)?null==n?n=void 0:s(n)||(u=n,n=void 0):(u=t,t=n=void 0),null==e?(r=!0,c=!1):(r=a.call(e,"c"),c=a.call(e,"e")),f={get:t,set:n,configurable:r,enumerable:c},u?i(o(u),f):f}},function(e,t,n){e.exports=n(27)()?Object.assign:n(28)},function(e,t){e.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){var r=n(29),i=n(32),o=Math.max;e.exports=function(e,t){var n,s,a,c=o(arguments.length,2);for(e=Object(i(e)),a=function(r){try{e[r]=t[r]}catch(i){n||(n=i)}},s=1;c>s;++s)t=arguments[s],r(t).forEach(a);if(void 0!==n)throw n;return e}},function(e,t,n){e.exports=n(30)()?Object.keys:n(31)},function(e,t){e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t){var n=Object.keys;e.exports=function(e){return n(null==e?e:Object(e))}},function(e,t){e.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},function(e,t){var n=Array.prototype.forEach,r=Object.create,i=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=r(null);return n.call(arguments,function(e){null!=e&&i(Object(e),t)}),t}},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,n){e.exports=n(36)()?String.prototype.contains:n(37)},function(e,t){var n="razdwatrzy";e.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},function(e,t){var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){var r=n(40),i=n(32),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t;return i(e),t=arguments[1],arguments.length>1?o.call(e,"__ee__")&&Boolean(e.__ee__[t]):e.hasOwnProperty("__ee__")&&!r(e.__ee__)}},function(e,t,n){var r=n(32),i=Object.prototype.propertyIsEnumerable;e.exports=function(e){var t;r(e);for(t in e)if(i.call(e,t))return!1;return!0}},function(e,t,n){var r=n(42),i=n(44),o=n(53)("hypertimer:master");t.createMaster=function(e,t,n){function s(){var e=t();return delete e.time,delete e.master,delete e.port,e}var a=new r.Server({port:n});return a.on("connection",function(t){o("new connection");var n=i(t);n.on("time",function(t,n){var r=e();n(r),o("send time "+new Date(r).toISOString())});var r=s();o("send config",r),n.send("config",r),t.emitter=n}),a.broadcast=function(e,t){o("broadcast",e,t),a.clients.forEach(function(n){n.emitter.send(e,t)})},a.broadcastConfig=function(){a.broadcast("config",s())},a.destroy=function(){a.close(),o("destroyed")},o("listening at ws://localhost:"+n),a}},function(e,t,n){e.exports="undefined"==typeof window||"undefined"==typeof window.WebSocket?n(43):window.WebSocket},function(e,t){function n(e,t,n){var r;return r=t?new i(e,t):new i(e)}var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;e.exports=i?n:null,i&&(n.prototype=i.prototype)},function(e,t,n){var r=n(24),i=n(45),o=n(53)("hypertimer:socket"),s=6e4;e.exports=function(e){function t(t,n){var r={event:t,data:n};o("send",r),e.send(JSON.stringify(r))}function n(t,n){return new i(function(r,i){var c=a(),f={event:t,id:c,data:n};u[c]={resolve:r,reject:i,timeout:setTimeout(function(){delete u[c],i(new Error("Timeout"))},s)},o("request",f),e.send(JSON.stringify(f))})["catch"](function(e){console.log("ERROR",e)})}function a(){return f++}var c=r({socket:e,send:t,request:n});e.onmessage=function(t){var n=t.data,r=JSON.parse(n);o("receive",r);var i=u[r.id];i?(clearTimeout(i.timeout),delete u[r.id],i.resolve(r.data)):"id"in r?c.emit(r.event,r.data,function(t){var n={id:r.id,data:t};e.readyState===e.OPEN||e.readyState===e.CONNECTING?(o("reply",n),e.send(JSON.stringify(n))):o("cancel reply",n,"(socket is closed)")}):c.emit(r.event,r.data)};var u={},f=0;return c}},function(e,t,n){e.exports="undefined"==typeof window||"undefined"==typeof window.Promise?n(46):window.Promise},function(e,t,n){e.exports=n(47)},function(e,t,n){e.exports=n(48),n(49),n(50),n(51),n(52)},function(e,t,n){function r(){}function i(e){try{return e.then}catch(t){return _=t,g}}function o(e,t){try{return e(t)}catch(n){return _=n,g}}function s(e,t,n){try{e(t,n)}catch(r){return _=r,g}}function a(e){if("object"!==_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==r&&p(e,this)}function c(e,t,n){return new e.constructor(function(i,o){var s=new a(r);s.then(i,o),u(e,new d(t,n,s))})}function u(e,t){for(;3===e._37;)e=e._12;return 0===e._37?void e._59.push(t):void v(function(){var n=1===e._37?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._37?f(t.promise,e._12):l(t.promise,e._12));var r=o(n,e._12);r===g?l(t.promise,_):f(t.promise,r)})}function f(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===("undefined"==typeof t?"undefined":_typeof(t))||"function"==typeof t)){var n=i(t);if(n===g)return l(e,_);if(n===e.then&&t instanceof a)return e._37=3,e._12=t,void h(e);if("function"==typeof n)return void p(n.bind(t),e)}e._37=1,e._12=t,h(e)}function l(e,t){e._37=2,e._12=t,h(e)}function h(e){for(var t=0;t<e._59.length;t++)u(e,e._59[t]);e._59=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function p(e,t){var n=!1,r=s(e,function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,l(t,e))});n||r!==g||(n=!0,l(t,_))}var v=n(5),_=null,g={};e.exports=a,a._99=r,a.prototype.then=function(e,t){if(this.constructor!==a)return c(this,e,t);var n=new a(r);return u(this,new d(e,t,n)),n}},function(e,t,n){var r=n(48);e.exports=r,r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,n){var r=n(48);e.exports=r,r.prototype["finally"]=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},function(e,t,n){function r(e){var t=new i(i._99);return t._37=1,t._12=e,t}var i=n(48);e.exports=i;var o=r(!0),s=r(!1),a=r(null),c=r(void 0),u=r(0),f=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return a;if(void 0===e)return c;if(e===!0)return o;if(e===!1)return s;if(0===e)return u;if(""===e)return f;if("object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(n){return new i(function(e,t){t(n)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(s,a){if(a&&("object"===("undefined"==typeof a?"undefined":_typeof(a))||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._37;)a=a._12;return 1===a._37?r(s,a._12):(2===a._37&&n(a._12),void a.then(function(e){r(s,e)},n))}var c=a.then;if("function"==typeof c){var u=new i(c.bind(a));return void u.then(function(e){r(s,e)},n)}}t[s]=a,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,s=0;s<t.length;s++)r(s,t[s])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype["catch"]=function(e){return this.then(null,e)}},function(e,t,n){var r=n(48),i=n(10);e.exports=r,r.denodeify=function(e,t){return t=t||1/0,function(){var n=this,i=Array.prototype.slice.call(arguments,0,t>0?t:0);return new r(function(t,r){i.push(function(e,n){e?r(e):t(n)});var o=e.apply(n,i);!o||"object"!==("undefined"==typeof o?"undefined":_typeof(o))&&"function"!=typeof o||"function"!=typeof o.then||t(o)})}},r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,o=this;try{return e.apply(this,arguments).nodeify(n,o)}catch(s){if(null===n||"undefined"==typeof n)return new r(function(e,t){t(s)});i(function(){n.call(o,s)})}}},r.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){i(function(){e.call(t,null,n)})},function(n){i(function(){e.call(t,n)})})}},function(e,t,n){var r="undefined"!=typeof window?window.Debug:n(54);e.exports=r||function(){return function(){}}},function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function o(){return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function a(){var e;try{e=t.storage.debug}catch(n){}return e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=n(55),t.log=o,t.formatArgs=i,t.save=s,t.load=a,t.useColors=r,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(a())},function(e,t,n){function r(){return t.colors[f++%t.colors.length]}function i(e){function n(){}function i(){var e=i,n=+new Date,o=n-(u||n);e.diff=o,e.prev=u,e.curr=n,u=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var i=t.formatters[r];if("function"==typeof i){var o=s[a];n=i.call(e,o),s.splice(a,1),a--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s));var c=i.log||t.log||console.log.bind(console);c.apply(e,s)}n.enabled=!1,i.enabled=!0;var o=t.enabled(e)?i:n;return o.namespace=e,o}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;r>i;i++)n[i]&&(e=n[i].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){t.enable("")}function a(e){var n,r;for(n=0,r=t.skips.length;r>n;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;r>n;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i,t.coerce=c,t.disable=s,t.enable=o,t.enabled=a,t.humanize=n(56),t.names=[],t.skips=[],t.formatters={};var u,f=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return o(e,u,"day")||o(e,c,"hour")||o(e,a,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,f=365.25*u;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?i(e):r(e)}},function(e,t,n){var r=n(42),i=n(45),o=n(53)("hypertimer:slave"),s=n(44),a=n(58),c=n(59),u=36e5,f=1e3,l=5;t.createSlave=function(e){function t(){function e(){var e=null;return v?i.resolve(e):n(d).then(function(t){e=t})["catch"](function(e){console.log(e)}).then(function(){return c.wait(f)}).then(function(){return e})}return c.repeat(e,l).then(function(e){o("latencies",e);var t=e.filter(function(e){return null!==e}),n=a.median(t)+a.std(t),r=t.filter(function(e){return n>e});return r.length>0?a.mean(r):null}).then(function(e){return v?i.resolve(null):d.request("time").then(function(t){var n=t+e;return d.emit("change",n),n})})["catch"](function(e){d.emit("error",e)})}function n(e){var t=Date.now();return e.request("time").then(function(n){var r=Date.now(),i=(r-t)/2,o=n+i;return p&&(p=!1,e.emit("change",o)),i})}var h=new r(e),d=s(h),p=!0,v=!1,_=null;return h.onopen=function(){o("connected"),t(),_=setInterval(t,u)},d.destroy=function(){v=!0,clearInterval(_),_=null,h.close(),o("destroyed")},d}},function(e,t){t.compare=function(e,t){return e>t?1:t>e?-1:0},t.add=function(e,t){return e+t},t.sum=function(e){return e.reduce(t.add)},t.mean=function(e){return t.sum(e)/e.length},t.std=function(e){return Math.sqrt(t.variance(e))},t.variance=function(e){if(e.length<2)return 0;var n=t.mean(e);return e.map(function(e){return Math.pow(e-n,2)}).reduce(t.add)/(e.length-1)},t.median=function(e){if(e.length<2)return e[0];var n=e.slice().sort(t.compare);return n.length%2===0?(e[e.length/2-1]+e[e.length/2])/2:e[(e.length-1)/2]}},function(e,t,n){var r=n(45);t.wait=function(e){return new r(function(t){setTimeout(t,e)})},t.repeat=function(e,t){return new r(function(n,r){function i(){t>o?(o++,e().then(function(e){s.push(e),i()})):n(s)}var o=0,s=[];i()})},t.whilst=function(e,t){return new r(function(n,r){function i(){e()?t().then(function(){i()}):n()}i()})}},function(e,t){"function"==typeof Date.now?t.systemNow=function(){return Date.now()}:t.systemNow=function(){return(new Date).valueOf()},t.shuffle=function(e){for(var t,n,r=e.length;r;t=Math.floor(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e}},function(e,t){function n(e){this.transports=[],e&&this.load(e)}n.types={},n.registerType=function(e){var t=e.prototype.type;if("function"!=typeof e)throw new Error("Constructor function expected");if(!t)throw new Error('Field "prototype.type" missing in transport constructor');if(t in n.types&&n.types[t]!==e)throw new Error('Transport type "'+t+'" already exists');n.types[t]=e},n.prototype.add=function(e){return this.transports.push(e),e},n.prototype.load=function(e){if(Array.isArray(e))return e.map(this.load.bind(this));var t=e.type;if(!t)throw new Error('Property "type" missing');var r=n.types[t];if(!r)throw new Error('Unknown type of transport "'+t+'". Choose from: '+Object.keys(n.types).join(","));var i=new r(e);return this.transports.push(i),i},n.prototype.unload=function(e){var t;if("string"==typeof e)t=this.get(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)this.unload(e[n]);else t=e;if(t){t.close();var r=this.transports.indexOf(t);-1!==r&&this.transports.splice(r,1)}},n.prototype.get=function(e){for(var t=0;t<this.transports.length;t++){var n=this.transports[t];if(n.id===e)return n}throw new Error('Transport with id "'+e+'" not found')},n.prototype.getAll=function(){return this.transports.concat([])},n.prototype.getByType=function(e){if(e){if(!(e in n.types))throw new Error('Unknown type of transport "'+e+'". Choose from: '+Object.keys(n.types).join(","));return this.transports.filter(function(t){return t.type===e})}return[].concat(this.transports)},n.prototype.clear=function(){this.transports.forEach(function(e){e.close()}),this.transports=[]},e.exports=n},function(e,t,n){function r(e,t){var n=i.babbler(e.id);n.connect({connect:function(e){},disconnect:function(e){},send:function(t,n){e.send(t,n)}}),this.babbler=n;var r=e._receive;this._receive=function(t,i){return n._receive(i),r.call(e,t,i)}}var i=n(63);r.prototype.type="babble",r.prototype.mixin=function(){var e=this.babbler;return{_receive:this._receive,ask:e.ask.bind(e),tell:e.tell.bind(e),listen:e.listen.bind(e),listenOnce:e.listenOnce.bind(e)}},e.exports=r},function(e,t,n){e.exports=n(64)},function(e,t,n){var r=n(65),i=n(100),o=n(101),s=n(98),a=n(103),c=n(102);t.babbler=function(e){return new r(e)},t.tell=function(e){return new i(e)},t.ask=function(e,n){return t.tell(e).listen(n)},t.decide=function(e,t){return new a(e,t)},t.listen=function(e){var t=new o;return e?t.then(e):t},t.then=function(e){return new s(e)},t.iif=function(e,t,n){return new c(e,t,n)},t.Babbler=r,t.block={Block:n(97),Then:n(98),Decision:n(103),IIf:n(102),Listen:n(101),Tell:n(100)},t.messagebus=n(93),t.babblify=function(e,n){var r;if(n&&void 0!==n.id)r=n.id;else{if(void 0===e.id)throw new Error('Id missing. Ensure that either actor has a property "id", or provide an id as a property in second argument params');r=e.id}["ask","tell","listen","listenOnce"].forEach(function(t){if(void 0!==e[t])throw new Error('Conflict: actor already has a property "'+t+'"')});var i=n&&n.send||"send";if("function"!=typeof e[i])throw new Error('Missing function. Function "'+i+'(to, message)" expected on actor or on params');var o=t.babbler(r),s=n&&n.receive||"receive",a=e.hasOwnProperty(s)?e[s]:null;return a?e[s]=function(t,n){return o._receive(n),a.call(e,t,n)}:e[s]=function(e,t){return o._receive(t)},o.send=function(t,n){setTimeout(function(){e[i](t,n)},0)},e.__babbler__={babbler:o,receiveOriginal:a,receiveName:s},e.ask=o.ask.bind(o),e.tell=o.tell.bind(o),e.listen=o.listen.bind(o),e.listenOnce=o.listenOnce.bind(o),e},t.unbabblify=function(e){var t=e.__babbler__;return t&&(delete e.__babbler__,delete e.ask,delete e.tell,delete e.listen,delete e.listenOnce,delete e[t.receiveName],t.receiveOriginal&&(e[t.receiveName]=t.receiveOriginal)),e}},function(e,t,n){function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!e)throw new Error("id required");this.id=e,this.listeners=[],this.conversations={},this.connect()}var i=n(66),o=n(90).Promise,s=n(93),a=n(96),c=(n(97),n(98),n(100)),u=n(101);n(102),r.prototype.isBabbler=!0,r.prototype.connect=function(e){if(this.disconnect(),e||(e=s["default"]()),"function"!=typeof e.connect)throw new Error("message bus must contain a function connect(params: {id: string, callback: function}) : string");if("function"!=typeof e.disconnect)throw new Error("message bus must contain a function disconnect(token: string)");if("function"!=typeof e.send)throw new Error("message bus must contain a function send(params: {id: string, message: *})");var t=null,n=new o(function(e,n){t=e}),r=e.connect({id:this.id,message:this._receive.bind(this),callback:t});return this.disconnect=function(){e.disconnect(r)},this.send=e.send,n},r.prototype._receive=function(e){if(e&&"id"in e&&"message"in e){var t=this,n=e.id,r=this.conversations[n];r&&r.length?r.forEach(function(t){t.deliver(e)}):(r||(r=[]),this.conversations[n]=r,this.listeners.forEach(function(i){var o=new a({id:n,self:t.id,other:e.from,context:{from:e.from},send:t.send});return r.push(o),o.deliver(e),t._process(i,o).then(function(){var e=r.indexOf(o);-1!==e&&r.splice(e,1),0===r.length&&delete t.conversations[n]})}))}},r.prototype.disconnect=function(){},r.prototype.send=function(e,t){throw new Error("Cannot send: not connected")},r.prototype.listen=function(e,t){var n=new u;this.listeners.push(n);var r=n;return e&&(r=r.iif(e)),t&&(r=r.then(t)),r},r.prototype.listenOnce=function(e,t){var n=new u;this.listeners.push(n);var r=this,i=n;return e&&(i=i.iif(e)),i=i.then(function(e){var t=r.listeners.indexOf(n);return-1!==t&&r.listeners.splice(t,1),e}),t&&(i=i.then(t)),i},r.prototype.tell=function(e,t){var n=this,r=i.v4(),o=new a({id:r,self:this.id,other:e,context:{from:e},send:n.send});this.conversations[r]=[o];var s=new c(t);return setTimeout(function(){n._process(s,o).then(function(){delete n.conversations[r]})},0),s},r.prototype.ask=function(e,t,n){return this.tell(e,t).listen(n)},r.prototype._process=function(e,t){return new o(function(n,r){function i(e,r){e.execute(t,r).then(function(e){e.block?i(e.block,e.result):n(t)})}i(e)})},e.exports=r},function(e,t,n){var r;(function(i){!function(o){function s(){var e=o.crypto||o.msCrypto;if(!h&&e&&e.getRandomValues)try{var t=new Uint8Array(16);v=h=function(){return e.getRandomValues(t),t},h()}catch(n){}if(!h){var r=new Array(16);d=h=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function a(){try{var e=n(71).randomBytes;p=h=e&&function(){return e(16)},h()}catch(t){}}function c(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>i&&(t[r+i++]=y[e])});16>i;)t[r+i++]=0;return t}function u(e,t){var n=t||0,r=g;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function f(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var o=null!=e.clockseq?e.clockseq:E,s=null!=e.msecs?e.msecs:(new Date).getTime(),a=null!=e.nsecs?e.nsecs:x+1,c=s-k+(a-x)/1e4;if(0>c&&null==e.clockseq&&(o=o+1&16383),(0>c||s>k)&&null==e.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");k=s,x=a,E=o,s+=122192928e5;var f=(1e4*(268435455&s)+a)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=255&f;var l=s/4294967296*1e4&268435455;i[r++]=l>>>8&255,i[r++]=255&l,i[r++]=l>>>24&15|16,i[r++]=l>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var h=e.node||w,d=0;6>d;d++)i[r+d]=h[d];return t?t:u(i)}function l(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new _(16):null,e=null),e=e||{};var i=e.random||(e.rng||h)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;16>o;o++)t[r+o]=i[o];return t||u(i)}var h,d,p,v;o?s():a();for(var _="function"==typeof i?i:Array,g=[],y={},m=0;256>m;m++)g[m]=(m+256).toString(16).substr(1),y[g[m]]=m;var b=h(),w=[1|b[0],b[1],b[2],b[3],b[4],b[5]],E=16383&(b[6]<<8|b[7]),k=0,x=0,T=l;T.v1=f,T.v4=l,T.parse=c,T.unparse=u,T.BufferClass=_,T._rng=h,T._mathRNG=d,T._nodeRNG=p,T._whatwgRNG=v,"undefined"!=typeof e&&e.exports?e.exports=T:(r=function(){return T}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)))}("undefined"!=typeof window?window:null)}).call(t,n(67).Buffer)},function(e,t,n){(function(e,r){function i(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function o(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t){return this instanceof e?(e.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?s(this,t):"string"==typeof t?a(this,t,arguments.length>1?arguments[1]:"utf8"):c(this,t)):arguments.length>1?new e(t,arguments[1]):new e(t)}function s(t,n){if(t=v(t,0>n?0:0|_(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)t[r]=0;return t}function a(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|y(t,n);return e=v(e,r),e.write(t,n),e}function c(t,n){if(e.isBuffer(n))return u(t,n);if(J(n))return f(t,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return l(t,n);if(n instanceof ArrayBuffer)return h(t,n)}return n.length?d(t,n):p(t,n)}function u(e,t){var n=0|_(t.length);return e=v(e,n),t.copy(e,0,0,n),e}function f(e,t){var n=0|_(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function l(e,t){var n=0|_(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function h(t,n){return e.TYPED_ARRAY_SUPPORT?(n.byteLength,t=e._augment(new Uint8Array(n))):t=l(t,new Uint8Array(n)),t}function d(e,t){var n=0|_(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function p(e,t){var n,r=0;"Buffer"===t.type&&J(t.data)&&(n=t.data,r=0|_(n.length)),e=v(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function v(t,n){e.TYPED_ARRAY_SUPPORT?(t=e._augment(new Uint8Array(n)),t.__proto__=e.prototype):(t.length=n,t._isBuffer=!0);var r=0!==n&&n<=e.poolSize>>>1;return r&&(t.parent=X),t}function _(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function g(t,n){if(!(this instanceof g))return new g(t,n);var r=new e(t,n);return delete r.parent,r}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return q(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return C(this,t,n);case"binary":return R(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+s]=a}return s}function w(e,t,n,r){return Z(q(t,e.length-n),e,n,r)}function E(e,t,n,r){return Z(V(t),e,n,r)}function k(e,t,n,r){return E(e,t,n,r)}function x(e,t,n,r){return Z(W(t),e,n,r)}function T(e,t,n,r){return Z(G(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=i+a){var c,u,f,l;switch(a){case 1:128>o&&(s=o);break;case 2:c=e[i+1],128===(192&c)&&(l=(31&o)<<6|63&c,l>127&&(s=l));break;case 3:c=e[i+1],u=e[i+2],128===(192&c)&&128===(192&u)&&(l=(15&o)<<12|(63&c)<<6|63&u,l>2047&&(55296>l||l>57343)&&(s=l));break;case 4:c=e[i+1],u=e[i+2],f=e[i+3],128===(192&c)&&128===(192&u)&&128===(192&f)&&(l=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&f,l>65535&&1114112>l&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return O(r)}function O(e){var t=e.length;if($>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=H(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,n,r,i,o,s){if(!e.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(n>o||s>n)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function j(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function D(e,t,n,r,i){return i||M(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return i||M(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,n,r,52,8),n+8}function U(e){if(e=z(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return 16>e?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;r>s;s++){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(e){return Y.toByteArray(U(e))}function Z(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var Y=n(68),K=n(69),J=n(70);t.Buffer=e,
t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,e.poolSize=8192;var X={};e.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:i(),e.TYPED_ARRAY_SUPPORT?(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array):(e.prototype.length=void 0,e.prototype.parent=void 0),e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,i=n.length,o=0,s=Math.min(r,i);s>o&&t[o]===n[o];)++o;return o!==s&&(r=t[o],i=n[o]),i>r?-1:r>i?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!J(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new e(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;r++)n+=t[r].length;var i=new e(n),o=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(i,o),o+=s.length}return i},e.byteLength=y,e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:e.compare(this,t)},e.prototype.indexOf=function(t,n){function r(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,n);if(e.isBuffer(t))return r(this,t,n);if("number"==typeof t)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,n):r(this,[t],n);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},e.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return E(this,e,t,n);case"binary":return k(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),t>n&&(n=t);var i;if(e.TYPED_ARRAY_SUPPORT)i=e._augment(this.subarray(t,n));else{var o=n-t;i=new e(o,void 0);for(var s=0;o>s;s++)i[s]=this[s+t]}return i.length&&(i.parent=this.parent||this),i},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),K.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),K.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),K.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),K.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||B(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||B(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):j(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):j(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):L(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):L(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}var o=0,s=1,a=0>e?1:0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):j(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):j(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):L(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n=0|n,r||B(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):L(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var o,s=i-r;if(this===t&&n>r&&i>n)for(o=s-1;o>=0;o--)t[o+n]=this[o+r];else if(1e3>s||!e.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)t[o+n]=this[o+r];else t._set(this.subarray(r,r+s),n);return s},e.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=q(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var t=new Uint8Array(this.length),n=0,r=t.length;r>n;n+=1)t[n]=this[n];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=e.prototype;e._augment=function(t){return t.constructor=e,t._isBuffer=!0,t._set=t.set,t.get=Q.get,t.set=Q.set,t.write=Q.write,t.toString=Q.toString,t.toLocaleString=Q.toString,t.toJSON=Q.toJSON,t.equals=Q.equals,t.compare=Q.compare,t.indexOf=Q.indexOf,t.copy=Q.copy,t.slice=Q.slice,t.readUIntLE=Q.readUIntLE,t.readUIntBE=Q.readUIntBE,t.readUInt8=Q.readUInt8,t.readUInt16LE=Q.readUInt16LE,t.readUInt16BE=Q.readUInt16BE,t.readUInt32LE=Q.readUInt32LE,t.readUInt32BE=Q.readUInt32BE,t.readIntLE=Q.readIntLE,t.readIntBE=Q.readIntBE,t.readInt8=Q.readInt8,t.readInt16LE=Q.readInt16LE,t.readInt16BE=Q.readInt16BE,t.readInt32LE=Q.readInt32LE,t.readInt32BE=Q.readInt32BE,t.readFloatLE=Q.readFloatLE,t.readFloatBE=Q.readFloatBE,t.readDoubleLE=Q.readDoubleLE,t.readDoubleBE=Q.readDoubleBE,t.writeUInt8=Q.writeUInt8,t.writeUIntLE=Q.writeUIntLE,t.writeUIntBE=Q.writeUIntBE,t.writeUInt16LE=Q.writeUInt16LE,t.writeUInt16BE=Q.writeUInt16BE,t.writeUInt32LE=Q.writeUInt32LE,t.writeUInt32BE=Q.writeUInt32BE,t.writeIntLE=Q.writeIntLE,t.writeIntBE=Q.writeIntBE,t.writeInt8=Q.writeInt8,t.writeInt16LE=Q.writeInt16LE,t.writeInt16BE=Q.writeInt16BE,t.writeInt32LE=Q.writeInt32LE,t.writeInt32BE=Q.writeInt32BE,t.writeFloatLE=Q.writeFloatLE,t.writeFloatBE=Q.writeFloatBE,t.writeDoubleLE=Q.writeDoubleLE,t.writeDoubleBE=Q.writeDoubleBE,t.fill=Q.fill,t.inspect=Q.inspect,t.toArrayBuffer=Q.toArrayBuffer,t};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(67).Buffer,function(){return this}())},function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){function t(e){var t=e.charCodeAt(0);return t===s||t===l?62:t===a||t===h?63:c>t?-1:c+10>t?t-c+26+26:f+26>t?t-f:u+26>t?t-u+26:void 0}function n(e){function n(e){u[l++]=e}var r,i,s,a,c,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=e.length;c="="===e.charAt(f-2)?2:"="===e.charAt(f-1)?1:0,u=new o(3*e.length/4-c),s=c>0?e.length-4:e.length;var l=0;for(r=0,i=0;s>r;r+=4,i+=3)a=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===c?(a=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&a)):1===c&&(a=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(a>>8&255),n(255&a)),u}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,s,a=e.length%3,c="";for(i=0,s=e.length-a;s>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],c+=n(o);switch(a){case 1:o=e[e.length-1],c+=t(o>>2),c+=t(o<<4&63),c+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],c+=t(o>>10),c+=t(o>>4&63),c+=t(o<<2&63),c+="="}return c}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),c="0".charCodeAt(0),u="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}(t)},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=e[t+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+e[t+l],l+=h,f-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,r),o-=u}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,f=(1<<u)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+l>=1?h/c:h*Math.pow(2,1-l),t*c>=2&&(s++,c/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*c-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+d]=255&s,d+=p,s/=256,u-=8);e[n+d-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){function r(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function i(e,t){for(var n in e)t(e[n],n)}var o=n(72);t.createHash=n(74),t.createHmac=n(87),t.randomBytes=function(t,n){if(!n||!n.call)return new e(o(t));try{n.call(this,void 0,new e(o(t)))}catch(r){n(r)}},t.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var s=n(88)(t);t.pbkdf2=s.pbkdf2,t.pbkdf2Sync=s.pbkdf2Sync,i(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(e){t[e]=function(){r("sorry,",e,"is not implemented yet")}})}).call(t,n(67).Buffer)},function(e,t,n){(function(t,r){!function(){var i=("undefined"==typeof window?t:window)||{};_crypto=i.crypto||i.msCrypto||n(73),e.exports=function(e){if(_crypto.getRandomValues){var t=new r(e);return _crypto.getRandomValues(t),t}if(_crypto.randomBytes)return _crypto.randomBytes(e);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(t,function(){return this}(),n(67).Buffer)},function(e,t){},function(e,t,n){(function(t){function r(e){return function(){var n=[],r={update:function(e,r){return t.isBuffer(e)||(e=new t(e,r)),n.push(e),this},digest:function(r){var i=t.concat(n),o=e(i);return n=null,r?o.toString(r):o}};return r}}var i=n(75),o=r(n(84)),s=r(n(86));e.exports=function(e){return"md5"===e?new o:"rmd160"===e?new s:i(e)}}).call(t,n(67).Buffer)},function(e,t,n){var t=e.exports=function(e){var n=t[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n},r=n(67).Buffer,i=n(76)(r);t.sha1=n(77)(r,i),t.sha256=n(82)(r,i),t.sha512=n(83)(r,i)},function(e,t){e.exports=function(e){function t(t,n){this._block=new e(t),this._finalSize=n,this._blockSize=t,this._len=0,this._s=0}return t.prototype.init=function(){this._s=0,this._len=0},t.prototype.update=function(t,n){"string"==typeof t&&(n=n||"utf8",t=new e(t,n));for(var r=this._len+=t.length,i=this._s=this._s||0,o=0,s=this._block;r>i;){for(var a=Math.min(t.length,o+this._blockSize-i%this._blockSize),c=a-o,u=0;c>u;u++)s[i%this._blockSize+u]=t[u+o];i+=c,o+=c,i%this._blockSize===0&&this._update(s)}return this._s=i,this},t.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var n=this._update(this._block)||this._hash();return e?n.toString(e):n},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t}},function(e,t,n){var r=n(78).inherits;e.exports=function(e,t){function n(){return p.length?p.pop().init():this instanceof n?(this._w=d,t.call(this,64,56),this._h=null,void this.init()):new n}function i(e,t,n,r){return 20>e?t&n|~t&r:40>e?t^n^r:60>e?t&n|t&r|n&r:t^n^r}function o(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function s(e,t){return e+t|0}function a(e,t){return e<<t|e>>>32-t}var c=0,u=4,f=8,l=12,h=16,d=new("undefined"==typeof Int32Array?Array:Int32Array)(80),p=[];return r(n,t),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,t.prototype.init.call(this),this},n.prototype._POOL=p,n.prototype._update=function(e){var t,n,r,c,u,f,l,h,d,p;t=f=this._a,n=l=this._b,r=h=this._c,c=d=this._d,u=p=this._e;for(var v=this._w,_=0;80>_;_++){var g=v[_]=16>_?e.readInt32BE(4*_):a(v[_-3]^v[_-8]^v[_-14]^v[_-16],1),y=s(s(a(t,5),i(_,n,r,c)),s(s(u,g),o(_)));u=c,c=r,r=a(n,30),n=t,t=y}this._a=s(t,f),this._b=s(n,l),this._c=s(r,h),this._d=s(c,d),this._e=s(u,p)},n.prototype._hash=function(){p.length<100&&p.push(this);var t=new e(20);return t.writeInt32BE(0|this._a,c),t.writeInt32BE(0|this._b,u),t.writeInt32BE(0|this._c,f),t.writeInt32BE(0|this._d,l),t.writeInt32BE(0|this._e,h),t},n}},function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return m(i)||(i=c(e,i,r)),i}var o=u(e,n);if(o)return o;var s=Object.keys(n),v=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),T(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(S(n)){var _=n.name?": "+n.name:"";return e.stylize("[Function"+_+"]","special")}if(E(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return f(n)}var g="",y=!1,b=["{","}"];if(p(n)&&(y=!0,b=["[","]"]),S(n)){var w=n.name?": "+n.name:"";g=" [Function"+w+"]"}if(E(n)&&(g=" "+RegExp.prototype.toString.call(n)),x(n)&&(g=" "+Date.prototype.toUTCString.call(n)),T(n)&&(g=" "+f(n)),0===s.length&&(!y||0==n.length))return b[0]+g+b[1];if(0>r)return E(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var k;return k=y?l(e,n,r,v,s):s.map(function(t){return h(e,n,r,v,t,y)}),e.seen.pop(),d(k,g,b)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,i){for(var o=[],s=0,a=t.length;a>s;++s)N(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}function h(e,t,n,r,i,o){var s,a,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),N(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=_(n)?c(e,u.value,null):c(e,u.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function _(e){return null===e}function g(e){return null==e}function y(e){return"number"==typeof e}function m(e){return"string"==typeof e}function b(e){return"symbol"===("undefined"==typeof e?"undefined":_typeof(e))}function w(e){return void 0===e}function E(e){return k(e)&&"[object RegExp]"===O(e)}function k(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e}function x(e){return k(e)&&"[object Date]"===O(e)}function T(e){return k(e)&&("[object Error]"===O(e)||e instanceof Error)}function S(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===("undefined"==typeof e?"undefined":_typeof(e))||"undefined"==typeof e}function O(e){return Object.prototype.toString.call(e)}function C(e){return 10>e?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(e).replace(I,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),a=r[n];o>n;a=r[++n])s+=_(a)||!k(a)?" "+a:" "+i(a);return s},t.deprecate=function(n,i){function o(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),s=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var s=!1;return o};var P,B={};t.debuglog=function(e){if(w(P)&&(P=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!B[e])if(new RegExp("\\b"+e+"\\b","i").test(P)){var n=r.pid;B[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else B[e]=function(){};return B[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=v,t.isNull=_,t.isNullOrUndefined=g,t.isNumber=y,t.isString=m,t.isSymbol=b,t.isUndefined=w,t.isRegExp=E,t.isObject=k,t.isDate=x,t.isError=T,t.isFunction=S,t.isPrimitive=A,t.isBuffer=n(80);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))},t.inherits=n(81),t._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(79))},function(e,t){function n(){l&&u&&(l=!1,u.length?f=u.concat(f):h=-1,f.length&&r())}function r(){if(!l){var e=s(n);l=!0;for(var t=f.length;t;){for(u=f,f=[];++h<t;)u&&u[h].run();h=-1,t=f.length}u=null,l=!1,a(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var s,a,c=e.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(e){a=function(){throw new Error("clearTimeout is not defined")}}}();var u,f=[],l=!1,h=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new i(e,t)),1!==f.length||l||s(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=o,c.addListener=o,c.once=o,c.off=o,c.removeListener=o,c.removeAllListeners=o,c.emit=o,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var r=n(78).inherits;e.exports=function(e,t){function n(){this.init(),this._w=d,t.call(this,64,56)}function i(e,t){return e>>>t|e<<32-t}function o(e,t){return e>>>t}function s(e,t,n){return e&t^~e&n}function a(e,t,n){return e&t^e&n^t&n}function c(e){return i(e,2)^i(e,13)^i(e,22)}function u(e){return i(e,6)^i(e,11)^i(e,25)}function f(e){return i(e,7)^i(e,18)^o(e,3)}function l(e){return i(e,17)^i(e,19)^o(e,10)}var h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=new Array(64);return r(n,t),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(e){var t,n,r,i,o,d,p,v,_,g,y=this._w;t=0|this._a,n=0|this._b,r=0|this._c,i=0|this._d,o=0|this._e,d=0|this._f,p=0|this._g,v=0|this._h;for(var m=0;64>m;m++){var b=y[m]=16>m?e.readInt32BE(4*m):l(y[m-2])+y[m-7]+f(y[m-15])+y[m-16];_=v+u(o)+s(o,d,p)+h[m]+b,g=c(t)+a(t,n,r),v=p,p=d,d=o,o=i+_,i=r,r=n,n=t,t=_+g}this._a=t+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0,this._f=d+this._f|0,this._g=p+this._g|0,this._h=v+this._h|0},n.prototype._hash=function(){var t=new e(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},n}},function(e,t,n){var r=n(78).inherits;e.exports=function(e,t){function n(){this.init(),this._w=c,t.call(this,128,112)}function i(e,t,n){return e>>>n|t<<32-n}function o(e,t,n){return e&t^~e&n}function s(e,t,n){return e&t^e&n^t&n}var a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],c=new Array(160);return r(n,t),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(e){var t,n,r,c,u,f,l,h,d,p,v,_,g,y,m,b,w=this._w;t=0|this._a,n=0|this._b,r=0|this._c,c=0|this._d,u=0|this._e,f=0|this._f,l=0|this._g,h=0|this._h,d=0|this._al,p=0|this._bl,v=0|this._cl,_=0|this._dl,g=0|this._el,y=0|this._fl,m=0|this._gl,b=0|this._hl;for(var E=0;80>E;E++){var k,x,T=2*E;if(16>E)k=w[T]=e.readInt32BE(4*T),x=w[T+1]=e.readInt32BE(4*T+4);else{var S=w[T-30],A=w[T-30+1],O=i(S,A,1)^i(S,A,8)^S>>>7,C=i(A,S,1)^i(A,S,8)^i(A,S,7);S=w[T-4],A=w[T-4+1];var R=i(S,A,19)^i(A,S,29)^S>>>6,N=i(A,S,19)^i(S,A,29)^i(A,S,6),I=w[T-14],P=w[T-14+1],B=w[T-32],j=w[T-32+1];x=C+P,k=O+I+(C>>>0>x>>>0?1:0),x+=N,k=k+R+(N>>>0>x>>>0?1:0),x+=j,k=k+B+(j>>>0>x>>>0?1:0),w[T]=k,w[T+1]=x}var L=s(t,n,r),M=s(d,p,v),D=i(t,d,28)^i(d,t,2)^i(d,t,7),F=i(d,t,28)^i(t,d,2)^i(t,d,7),U=i(u,g,14)^i(u,g,18)^i(g,u,9),z=i(g,u,14)^i(g,u,18)^i(u,g,9),H=a[T],q=a[T+1],V=o(u,f,l),G=o(g,y,m),W=b+z,Z=h+U+(b>>>0>W>>>0?1:0);W+=G,Z=Z+V+(G>>>0>W>>>0?1:0),W+=q,Z=Z+H+(q>>>0>W>>>0?1:0),W+=x,Z=Z+k+(x>>>0>W>>>0?1:0);var Y=F+M,K=D+L+(F>>>0>Y>>>0?1:0);h=l,b=m,l=f,m=y,f=u,y=g,g=_+W|0,u=c+Z+(_>>>0>g>>>0?1:0)|0,c=r,_=v,r=n,v=p,n=t,p=d,d=W+Y|0,t=Z+K+(W>>>0>d>>>0?1:0)|0}this._al=this._al+d|0,this._bl=this._bl+p|0,this._cl=this._cl+v|0,this._dl=this._dl+_|0,this._el=this._el+g|0,this._fl=this._fl+y|0,this._gl=this._gl+m|0,this._hl=this._hl+b|0,this._a=this._a+t+(this._al>>>0<d>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+r+(this._cl>>>0<v>>>0?1:0)|0,this._d=this._d+c+(this._dl>>>0<_>>>0?1:0)|0,this._e=this._e+u+(this._el>>>0<g>>>0?1:0)|0,this._f=this._f+f+(this._fl>>>0<y>>>0?1:0)|0,this._g=this._g+l+(this._gl>>>0<m>>>0?1:0)|0,this._h=this._h+h+(this._hl>>>0<b>>>0?1:0)|0},n.prototype._hash=function(){
function t(e,t,r){n.writeInt32BE(e,r),n.writeInt32BE(t,r+4)}var n=new e(64);return t(this._a,this._al,0),t(this._b,this._bl,8),t(this._c,this._cl,16),t(this._d,this._dl,24),t(this._e,this._el,32),t(this._f,this._fl,40),t(this._g,this._gl,48),t(this._h,this._hl,56),n},n}},function(e,t,n){function r(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,r=-271733879,i=-1732584194,f=271733878,l=0;l<e.length;l+=16){var h=n,d=r,p=i,v=f;n=o(n,r,i,f,e[l+0],7,-680876936),f=o(f,n,r,i,e[l+1],12,-389564586),i=o(i,f,n,r,e[l+2],17,606105819),r=o(r,i,f,n,e[l+3],22,-1044525330),n=o(n,r,i,f,e[l+4],7,-176418897),f=o(f,n,r,i,e[l+5],12,1200080426),i=o(i,f,n,r,e[l+6],17,-1473231341),r=o(r,i,f,n,e[l+7],22,-45705983),n=o(n,r,i,f,e[l+8],7,1770035416),f=o(f,n,r,i,e[l+9],12,-1958414417),i=o(i,f,n,r,e[l+10],17,-42063),r=o(r,i,f,n,e[l+11],22,-1990404162),n=o(n,r,i,f,e[l+12],7,1804603682),f=o(f,n,r,i,e[l+13],12,-40341101),i=o(i,f,n,r,e[l+14],17,-1502002290),r=o(r,i,f,n,e[l+15],22,1236535329),n=s(n,r,i,f,e[l+1],5,-165796510),f=s(f,n,r,i,e[l+6],9,-1069501632),i=s(i,f,n,r,e[l+11],14,643717713),r=s(r,i,f,n,e[l+0],20,-373897302),n=s(n,r,i,f,e[l+5],5,-701558691),f=s(f,n,r,i,e[l+10],9,38016083),i=s(i,f,n,r,e[l+15],14,-660478335),r=s(r,i,f,n,e[l+4],20,-405537848),n=s(n,r,i,f,e[l+9],5,568446438),f=s(f,n,r,i,e[l+14],9,-1019803690),i=s(i,f,n,r,e[l+3],14,-187363961),r=s(r,i,f,n,e[l+8],20,1163531501),n=s(n,r,i,f,e[l+13],5,-1444681467),f=s(f,n,r,i,e[l+2],9,-51403784),i=s(i,f,n,r,e[l+7],14,1735328473),r=s(r,i,f,n,e[l+12],20,-1926607734),n=a(n,r,i,f,e[l+5],4,-378558),f=a(f,n,r,i,e[l+8],11,-2022574463),i=a(i,f,n,r,e[l+11],16,1839030562),r=a(r,i,f,n,e[l+14],23,-35309556),n=a(n,r,i,f,e[l+1],4,-1530992060),f=a(f,n,r,i,e[l+4],11,1272893353),i=a(i,f,n,r,e[l+7],16,-155497632),r=a(r,i,f,n,e[l+10],23,-1094730640),n=a(n,r,i,f,e[l+13],4,681279174),f=a(f,n,r,i,e[l+0],11,-358537222),i=a(i,f,n,r,e[l+3],16,-722521979),r=a(r,i,f,n,e[l+6],23,76029189),n=a(n,r,i,f,e[l+9],4,-640364487),f=a(f,n,r,i,e[l+12],11,-421815835),i=a(i,f,n,r,e[l+15],16,530742520),r=a(r,i,f,n,e[l+2],23,-995338651),n=c(n,r,i,f,e[l+0],6,-198630844),f=c(f,n,r,i,e[l+7],10,1126891415),i=c(i,f,n,r,e[l+14],15,-1416354905),r=c(r,i,f,n,e[l+5],21,-57434055),n=c(n,r,i,f,e[l+12],6,1700485571),f=c(f,n,r,i,e[l+3],10,-1894986606),i=c(i,f,n,r,e[l+10],15,-1051523),r=c(r,i,f,n,e[l+1],21,-2054922799),n=c(n,r,i,f,e[l+8],6,1873313359),f=c(f,n,r,i,e[l+15],10,-30611744),i=c(i,f,n,r,e[l+6],15,-1560198380),r=c(r,i,f,n,e[l+13],21,1309151649),n=c(n,r,i,f,e[l+4],6,-145523070),f=c(f,n,r,i,e[l+11],10,-1120210379),i=c(i,f,n,r,e[l+2],15,718787259),r=c(r,i,f,n,e[l+9],21,-343485551),n=u(n,h),r=u(r,d),i=u(i,p),f=u(f,v)}return Array(n,r,i,f)}function i(e,t,n,r,i,o){return u(f(u(u(t,e),u(r,o)),i),n)}function o(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function c(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}function u(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function f(e,t){return e<<t|e>>>32-t}var l=n(85);e.exports=function(e){return l.hash(e,r,16)}},function(e,t,n){(function(t){function n(e,n){if(e.length%o!==0){var r=e.length+(o-e.length%o);e=t.concat([e,s],r)}for(var i=[],a=n?e.readInt32BE:e.readInt32LE,c=0;c<e.length;c+=o)i.push(a.call(e,c));return i}function r(e,n,r){for(var i=new t(n),o=r?i.writeInt32BE:i.writeInt32LE,s=0;s<e.length;s++)o.call(i,e[s],4*s,!0);return i}function i(e,i,o,s){t.isBuffer(e)||(e=new t(e));var c=i(n(e,s),e.length*a);return r(c,o,s)}var o=4,s=new t(o);s.fill(0);var a=8;e.exports={hash:i}}).call(t,n(67).Buffer)},function(e,t,n){(function(t){function n(e,t,n){return e^t^n}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return(e|~t)^n}function o(e,t,n){return e&n|t&~n}function s(e,t,n){return e^(t|~n)}function a(e,t){return e<<t|e>>>32-t}function c(e){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof e&&(e=new t(e,"utf8"));var r=v(e),i=8*e.length,o=8*e.length;r[i>>>5]|=128<<24-i%32,r[(i+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var s=0;s<r.length;s+=16)g(n,r,s);for(var s=0;5>s;s++){var a=n[s];n[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var c=_(n);return new t(c)}e.exports=c;var u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0],v=function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},_=function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},g=function(e,t,c){for(var v=0;16>v;v++){var _=c+v,g=t[_];t[_]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8)}var y,m,b,w,E,k,x,T,S,A;k=y=e[0],x=m=e[1],T=b=e[2],S=w=e[3],A=E=e[4];for(var O,v=0;80>v;v+=1)O=y+t[c+u[v]]|0,O+=16>v?n(m,b,w)+d[0]:32>v?r(m,b,w)+d[1]:48>v?i(m,b,w)+d[2]:64>v?o(m,b,w)+d[3]:s(m,b,w)+d[4],O=0|O,O=a(O,l[v]),O=O+E|0,y=E,E=w,w=a(b,10),b=m,m=O,O=k+t[c+f[v]]|0,O+=16>v?s(x,T,S)+p[0]:32>v?o(x,T,S)+p[1]:48>v?i(x,T,S)+p[2]:64>v?r(x,T,S)+p[3]:n(x,T,S)+p[4],O=0|O,O=a(O,h[v]),O=O+A|0,k=A,A=S,S=a(T,10),T=x,x=O;O=e[1]+b+S|0,e[1]=e[2]+w+A|0,e[2]=e[3]+E+k|0,e[3]=e[4]+y+x|0,e[4]=e[0]+m+T|0,e[0]=O}}).call(t,n(67).Buffer)},function(e,t,n){(function(t){function r(e,n){if(!(this instanceof r))return new r(e,n);this._opad=c,this._alg=e;var s="sha512"===e?128:64;n=this._key=t.isBuffer(n)?n:new t(n),n.length>s?n=i(e).update(n).digest():n.length<s&&(n=t.concat([n,o],s));for(var a=this._ipad=new t(s),c=this._opad=new t(s),u=0;s>u;u++)a[u]=54^n[u],c[u]=92^n[u];this._hash=i(e).update(a)}var i=n(74),o=new t(128);o.fill(0),e.exports=r,r.prototype.update=function(e,t){return this._hash.update(e,t),this},r.prototype.digest=function(e){var t=this._hash.digest();return i(this._alg).update(this._opad).update(t).digest(e)}}).call(t,n(67).Buffer)},function(e,t,n){var r=n(89);e.exports=function(e,t){t=t||{};var n=r(e);return t.pbkdf2=n.pbkdf2,t.pbkdf2Sync=n.pbkdf2Sync,t}},function(e,t,n){(function(t){e.exports=function(e){function n(e,t,n,i,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=r(e,t,n,i,o)}catch(c){return s(c)}s(void 0,a)})}function r(n,r,i,o,s){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(0>i)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(0>o)throw new TypeError("Bad key length");s=s||"sha1",t.isBuffer(n)||(n=new t(n)),t.isBuffer(r)||(r=new t(r));var a,c,u,f=1,l=new t(o),h=new t(r.length+4);r.copy(h,0,0,r.length);for(var d=1;f>=d;d++){h.writeUInt32BE(d,r.length);var p=e.createHmac(s,n).update(h).digest();if(!a&&(a=p.length,u=new t(a),f=Math.ceil(o/a),c=o-(f-1)*a,o>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");p.copy(u,0,0,a);for(var v=1;i>v;v++){p=e.createHmac(s,n).update(p).digest();for(var _=0;a>_;_++)u[_]^=p[_]}var g=(d-1)*a,y=d==f?c:a;u.copy(l,g,0,y)}return l}return{pbkdf2:n,pbkdf2Sync:r}}}).call(t,n(67).Buffer)},function(e,t,n){var r;(function(e,i,o){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){function s(e){return"function"==typeof e||"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e}function a(e){return"function"==typeof e}function c(e){J=e}function u(e){ee=e}function f(){return function(){e.nextTick(v)}}function l(){return function(){K(v)}}function h(){var e=0,t=new re(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=v,function(){e.port2.postMessage(0)}}function p(){return function(){setTimeout(v,1)}}function v(){for(var e=0;Q>e;e+=2){var t=se[e],n=se[e+1];t(n),se[e]=void 0,se[e+1]=void 0}Q=0}function _(){try{var e=n(91);return K=e.runOnLoop||e.runOnContext,l()}catch(t){return p()}}function g(e,t){var n=this,r=new this.constructor(m);void 0===r[ue]&&D(r);var i=n._state;if(i){var o=arguments[i-1];ee(function(){j(i,r,o,n._result)})}else N(n,r,e,t);return r}function y(e){var t=this;if(e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.constructor===t)return e;var n=new t(m);return A(n,e),n}function m(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function w(){return new TypeError("A promises callback cannot return that same promise.")}function E(e){try{return e.then}catch(t){return de.error=t,de}}function k(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function x(e,t,n){ee(function(e){var r=!1,i=k(n,t,function(n){r||(r=!0,t!==n?A(e,n):C(e,n))},function(t){r||(r=!0,R(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,R(e,i))},e)}function T(e,t){t._state===le?C(e,t._result):t._state===he?R(e,t._result):N(t,void 0,function(t){A(e,t)},function(t){R(e,t)})}function S(e,t,n){t.constructor===e.constructor&&n===ae&&constructor.resolve===ce?T(e,t):n===de?R(e,de.error):void 0===n?C(e,t):a(n)?x(e,t,n):C(e,t)}function A(e,t){e===t?R(e,b()):s(t)?S(e,t,E(t)):C(e,t)}function O(e){e._onerror&&e._onerror(e._result),I(e)}function C(e,t){e._state===fe&&(e._result=t,e._state=le,0!==e._subscribers.length&&ee(I,e))}function R(e,t){e._state===fe&&(e._state=he,e._result=t,ee(O,e))}function N(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+le]=n,i[o+he]=r,0===o&&e._state&&ee(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?j(n,r,i,o):i(o);e._subscribers.length=0}}function P(){this.error=null}function B(e,t){try{return e(t)}catch(n){return pe.error=n,pe}}function j(e,t,n,r){var i,o,s,c,u=a(n);if(u){if(i=B(n,r),i===pe?(c=!0,o=i.error,i=null):s=!0,t===i)return void R(t,w())}else i=r,s=!0;t._state!==fe||(u&&s?A(t,i):c?R(t,o):e===le?C(t,i):e===he&&R(t,i))}function L(e,t){try{t(function(t){A(e,t)},function(t){R(e,t)})}catch(n){R(e,n)}}function M(){return ve++}function D(e){e[ue]=ve++,e._state=void 0,e._result=void 0,e._subscribers=[]}function F(e){return new be(this,e).promise}function U(e){var t=this;return new t($(e)?function(n,r){for(var i=e.length,o=0;i>o;o++)t.resolve(e[o]).then(n,r)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function z(e){var t=this,n=new t(m);return R(n,e),n}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(e){this[ue]=M(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&H(),this instanceof V?L(this,e):q())}function G(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[ue]||D(this.promise),$(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&C(this.promise,this._result))):R(this.promise,W())}function W(){return new Error("Array Methods must be provided an Array")}function Z(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=me)}var Y;Y=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var K,J,X,$=Y,Q=0,ee=function(e,t){se[Q]=e,se[Q+1]=t,Q+=2,2===Q&&(J?J(v):X())},te="undefined"!=typeof window?window:void 0,ne=te||{},re=ne.MutationObserver||ne.WebKitMutationObserver,ie="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),oe="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,se=new Array(1e3);X=ie?f():re?h():oe?d():void 0===te?_():p();var ae=g,ce=y,ue=Math.random().toString(36).substring(16),fe=void 0,le=1,he=2,de=new P,pe=new P,ve=0,_e=F,ge=U,ye=z,me=V;V.all=_e,V.race=ge,V.resolve=ce,V.reject=ye,V._setScheduler=c,V._setAsap=u,V._asap=ee,V.prototype={constructor:V,then:ae,"catch":function(e){return this.then(null,e)}};var be=G;G.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===fe&&e>n;n++)this._eachEntry(t[n],n)},G.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===ce){var i=E(e);if(i===ae&&e._state!==fe)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===me){var o=new n(m);S(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(r(e),t)},G.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===fe&&(this._remaining--,e===he?R(r,n):this._result[t]=n),0===this._remaining&&C(r,this._result)},G.prototype._willSettleAt=function(e,t){var n=this;N(e,void 0,function(e){n._settledAt(le,t,e)},function(e){n._settledAt(he,t,e)})};var we=Z,Ee={Promise:me,polyfill:we};n(92).amd?(r=function(){return Ee}.call(t,n,t,o),!(void 0!==r&&(o.exports=r))):"undefined"!=typeof o&&o.exports?o.exports=Ee:"undefined"!=typeof this&&(this.ES6Promise=Ee),we()}).call(this)}).call(t,n(79),function(){return this}(),n(16)(e))},function(e,t){},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){var r=n(90).Promise;t["pubsub-js"]=function(){var e=n(94);return{connect:function(t){var n=e.subscribe(t.id,function(e,n){t.message(n)});return"function"==typeof t.callback&&t.callback(),n},disconnect:function(t){e.unsubscribe(t)},send:function(t,n){e.publish(t,n)}}},t.pubnub=function(e){var t;if("undefined"!=typeof window){if("undefined"==typeof window.PUBNUB)throw new Error("Please load pubnub first in the browser");t=window.PUBNUB}else t=n(95);var i=t.init(e);return{connect:function(e){return i.subscribe({channel:e.id,message:e.message,connect:e.callback}),e.id},disconnect:function(e){i.unsubscribe(e)},send:function(e,t){return new r(function(n,r){i.publish({channel:e,message:t,callback:n})})}}},t["default"]=t["pubsub-js"]},function(e,t,n){var r,i,o;!function(n,s){i=[t],r=s,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o));var a={};n.PubSub=a,s(a)}("object"===("undefined"==typeof window?"undefined":_typeof(window))&&window||this,function(e){function t(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function n(e){return function(){throw e}}function r(e,t,r){try{e(t,r)}catch(i){setTimeout(n(i),0)}}function i(e,t,n){e(t,n)}function o(e,t,n,o){var s,a=u[t],c=o?i:r;if(u.hasOwnProperty(t))for(s in a)a.hasOwnProperty(s)&&c(a[s],e,n)}function s(e,t,n){return function(){var r=String(e),i=r.lastIndexOf(".");for(o(e,e,t,n);-1!==i;)r=r.substr(0,i),i=r.lastIndexOf("."),o(e,r,t,n)}}function a(e){for(var n=String(e),r=Boolean(u.hasOwnProperty(n)&&t(u[n])),i=n.lastIndexOf(".");!r&&-1!==i;)n=n.substr(0,i),i=n.lastIndexOf("."),r=Boolean(u.hasOwnProperty(n)&&t(u[n]));return r}function c(e,t,n,r){var i=s(e,t,r),o=a(e);return o?(n===!0?i():setTimeout(i,0),!0):!1}var u={},f=-1;e.publish=function(t,n){return c(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return c(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,t){if("function"!=typeof t)return!1;u.hasOwnProperty(e)||(u[e]={});var n="uid_"+String(++f);return u[e][n]=t,n},e.clearAllSubscriptions=function(){u={}},e.clearSubscriptions=function(e){var t;for(t in u)u.hasOwnProperty(t)&&0===t.indexOf(e)&&delete u[t]},e.unsubscribe=function(e){var t,n,r,i="string"==typeof e&&u.hasOwnProperty(e),o=!i&&"string"==typeof e,s="function"==typeof e,a=!1;if(i)return void delete u[e];for(t in u)if(u.hasOwnProperty(t)){if(n=u[t],o&&n[e]){delete n[e],a=e;break}if(s)for(r in n)n.hasOwnProperty(r)&&n[r]===e&&(delete n[r],a=!0)}return a}})},function(e,t){!function(){function i(){return"x"+ ++B+ +new Date}function o(){return+new Date}function s(e,t){var n=e.join(q),r=[];return t?(d(t,function(e,t){var n="object"==("undefined"==typeof t?"undefined":_typeof(t))?JSON.stringify(t):t;"undefined"!=typeof t&&null!=t&&_(n).length>0&&r.push(e+"="+_(n))}),n+="?"+r.join(V)):n}function a(e,t){var n,r=0,i=function s(){r+t>o()?(clearTimeout(n),n=setTimeout(s,t)):(r=o(),e())};return i}function c(e,t){var n=[];return d(e||[],function(e){t(e)&&n.push(e)}),n}function u(e,t){return e.replace(Y,function(e,n){return t[n]||e})}function f(e,t){return setTimeout(e,t)}function l(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});return e&&e(t),t}function h(e){return!!e&&"string"!=typeof e&&(Array.isArray&&Array.isArray(e)||"number"==typeof e.length)}function d(e,t){if(e&&t)if(h(e))for(var n=0,r=e.length;r>n;)t.call(e[n],e[n],n++);else for(var n in e)e.hasOwnProperty&&e.hasOwnProperty(n)&&t.call(e[n],n,e[n])}function p(e,t){var n=[];return d(e||[],function(e,r){n.push(t(e,r))}),n}function v(e){return encodeURIComponent(e).replace(/[!'()*~]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function _(e){return encodeURIComponent(e)}function g(e,t){var n=[];return d(e,function(e,r){t?e.search("-pnpres")<0&&r.subscribed&&n.push(e):r.subscribed&&n.push(e)}),n.sort()}function y(e,t){var n=[];return d(e,function(e,r){t?e.search("-pnpres")<0&&r.subscribed&&n.push(e):r.subscribed&&n.push(e)}),n.sort()}function m(){f(function(){j||(j=1,d(L,function(e){e()}))},H)}function b(e){return msg=e||{apns:{}},msg.getPubnubMessage=function(){var e={};if(Object.keys(msg.apns).length){e.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var t in msg.apns)e.pn_apns[t]=msg.apns[t];var n=["badge","alert"];for(var t in n)delete e.pn_apns[n[t]]}msg.gcm&&(e.pn_gcm={data:msg.gcm});for(var t in msg)e[t]=msg[t];var r=["apns","gcm","publish","channel","callback","error"];for(var t in r)delete e[r[t]];return e},msg.publish=function(){var e=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:e,channel:msg.channel,callback:msg.callback,error:msg.error})},msg}function w(e){function t(e){return e||(e={}),d(Ie,function(t,n){t in e||(e[t]=n)}),e}function r(e){var t=[];return d(e,function(e,n){t.push(e)}),t}function b(e){return r(e).sort()}function w(e){var t="",n=b(e);for(var r in n){var i=n[r];t+=i+"="+v(e[i]),r!=n.length-1&&(t+="&")}return t}function E(e,t,n){var r=!1;if("undefined"==typeof e)return t;if("number"==typeof e)r=e>G||0==e?!1:!0;else{if("boolean"==typeof e)return e?W:0;r=!0}return r?(n&&n("Presence Heartbeat value invalid. Valid range ( x > "+G+" or x = 0). Current Value : "+(t||G)),t||G):e}function x(e,t){return Ve.encrypt(e,t||Me)||e}function T(e,t){return Ve.decrypt(e,t||Me)||Ve.decrypt(e,Me)||e}function S(){return clearTimeout(Te),!Ae||Ae>=500||1>Ae||!g(Ee,!0).length&&!y(ke,!0).length?void(Oe=!1):(Oe=!0,void Ge.presence_heartbeat({callback:function(e){Te=f(S,Ae*H)},error:function(e){Pe&&Pe("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(e)),Te=f(S,Ae*H)}}))}function A(){!Oe&&S()}function O(e){if(Ce){if(!de.length)return}else{if(e&&(de.sending=0),de.sending||!de.length)return;de.sending=1}Ne(de.shift())}function C(e){var t=0;return d(y(ke),function(n){var r=ke[n];r&&(t++,(e||function(){})(r))}),t}function R(e){var t=0;return d(g(Ee),function(n){var r=Ee[n];r&&(t++,(e||function(){})(r))}),t}function N(e,t,n){if("object"==("undefined"==typeof e?"undefined":_typeof(e))){if(e.error){var r={};return e.message&&(r.message=e.message),e.payload&&(r.payload=e.payload),void(n&&n(r))}if(e.payload)return void(e.next_page?t&&t(e.payload,e.next_page):t&&t(e.payload))}t&&t(e)}function I(e,t){if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&e.error){var n={};return e.message&&(n.message=e.message),e.payload&&(n.payload=e.payload),void(t&&t(n))}t&&t(e)}function P(e,n,r,i){var n=e.callback||n,o=e.error||Pe,s=je();i=i||{},i.auth||(i.auth=e.auth_key||oe);var a=[fe,"v1","channel-registration","sub-key",ie];a.push.apply(a,r),s&&(i.callback=s),Ne({callback:s,data:t(i),success:function(e){N(e,n,o)},fail:function(e){I(e,o)},url:a})}function B(){Be()||q(1,{error:"Offline. Please check your network settings. "}),J&&clearTimeout(J),J=f(B,H)}function F(){te&&Ge.time(function(e){Y(function(){},e),e||q(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),X&&clearTimeout(X),X=f(F,ee)})}function q(e,t){ye&&ye(e,t),ye=null,clearTimeout(J),clearTimeout(X)}function V(e){var t=o()-ve;return t-e/1e4}function Y(e,t){function n(t){if(t){var n=t/1e4,i=(o()-r)/2;ve=o()-(n+i),e&&e(ve)}}var r=o();t&&n(t)||Ge.time(n)}var J,X,$=+e.windowing||D,Q=(+e.timeout||U)*H,ee=(+e.keepalive||z)*H,te=e.timecheck||0,ne=e.noleave||0,re=e.publish_key,ie=e.subscribe_key,oe=e.auth_key||"",se=e.secret_key||"",ae=e.hmac_SHA256,ce=e.ssl?"s":"",ue="http"+ce+"://"+(e.origin||"pubsub.pubnub.com"),fe=K(ue),le=K(ue),he=function(){},de=[],pe=!0,ve=0,_e=0,ge=0,ye=0,me=e.restore||0,be=0,we=!1,Ee={},ke={},xe={},Te=null,Se=E(e.heartbeat||e.pnexpires||0,e.error),Ae=e.heartbeat_interval||Se/2-1,Oe=!1,Ce=e.no_wait_for_pending,Re=e["compatible_3.5"]||!1,Ne=e.xdr,Ie=e.params||{},Pe=e.error||function(){},Be=e._is_online||function(){return 1},je=e.jsonp_cb||function(){return 0},Le=e.db||{get:function(){},set:function(){}},Me=e.cipher_key,De=e.uuid||!e.unique_uuid&&Le&&Le.get(ie+"uuid")||"",Fe=e.instance_id||!1,Ue="",ze=e.shutdown,He="undefined"!=typeof e.use_send_beacon?e.use_send_beacon:!0,qe=He?e.sendBeacon:null;2===Se&&(Ae=1);var Ve=e.crypto_obj||{encrypt:function(e,t){return e},decrypt:function(e,t){return e}},Ge={LEAVE:function(e,n,r,i,o){var a,c,u={uuid:De,auth:r||oe},f=K(ue),i=i||function(){},l=o||function(){},h=je();if(e.indexOf(M)>0)return!0;if(Re){if(!ce)return!1;if("0"==h)return!1}return ne?!1:("0"!=h&&(u.callback=h),Fe&&(u.instanceid=Ue),a=[f,"v2","presence","sub_key",ie,"channel",_(e),"leave"],c=t(u),qe&&(url_string=s(a,c),qe(url_string))?(i&&i({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Ne({blocking:n||ce,callback:h,data:c,success:function(e){N(e,i,l)},fail:function(e){I(e,l)},url:a}),!0))},LEAVE_GROUP:function(e,n,r,i,o){var a,c,u={uuid:De,auth:r||oe},f=K(ue),i=i||function(){},l=o||function(){},h=je();if(e.indexOf(M)>0)return!0;if(Re){if(!ce)return!1;if("0"==h)return!1}return ne?!1:("0"!=h&&(u.callback=h),e&&e.length>0&&(u["channel-group"]=e),Fe&&(u.instanceid=Ue),a=[f,"v2","presence","sub_key",ie,"channel",_(","),"leave"],c=t(u),qe&&(url_string=s(a,c),qe(url_string))?(i&&i({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Ne({blocking:n||ce,callback:h,data:c,success:function(e){N(e,i,l)},fail:function(e){I(e,l)},url:a}),!0))},set_resumed:function(e){we=e},get_cipher_key:function(){return Me},set_cipher_key:function(e){Me=e},raw_encrypt:function(e,t){return x(e,t)},raw_decrypt:function(e,t){return T(e,t)},get_heartbeat:function(){return Se},set_heartbeat:function(e,t){Se=E(e,Se,Pe),Ae=t||Se/2-1,2==Se&&(Ae=1),he(),S()},get_heartbeat_interval:function(){return Ae},set_heartbeat_interval:function(e){Ae=e,S()},get_version:function(){return Z},getGcmMessageObject:function(e){return{data:e}},getApnsMessageObject:function(e){var t={aps:{badge:1,alert:""}};for(k in e)k[t]=e[k];return t},newPnMessage:function(){var e={};gcm&&(e.pn_gcm=gcm),apns&&(e.pn_apns=apns);for(k in n)e[k]=n[k];return e},_add_param:function(e,t){Ie[e]=t},channel_group:function We(e,t){var n,We,r=e.channel_group,t=t||e.callback,i=e.channels||e.channel,o=e.cloak,s=[],a={},c=e.mode||"add";if(r){var u=r.split(":");u.length>1?(n="*"===u[0]?null:u[0],We=u[1]):We=u[0]}n&&s.push("namespace")&&s.push(_(n)),s.push("channel-group"),We&&"*"!==We&&s.push(We),i?(h(i)&&(i=i.join(",")),a[c]=i,a.cloak=pe?"true":"false"):"remove"===c&&s.push("remove"),"undefined"!=typeof o&&(a.cloak=o?"true":"false"),P(e,t,s,a)},channel_group_list_groups:function(e,t){var n;n=e.namespace||e.ns||e.channel_group||null,n&&(e.channel_group=n+":*"),Ge.channel_group(e,t)},channel_group_list_channels:function(e,t){return e.channel_group?void Ge.channel_group(e,t):Pe("Missing Channel Group")},channel_group_remove_channel:function(e,t){return e.channel_group?e.channel||e.channels?(e.mode="remove",void Ge.channel_group(e,t)):Pe("Missing Channel"):Pe("Missing Channel Group")},channel_group_remove_group:function(e,t){return e.channel_group?e.channel?Pe("Use channel_group_remove_channel if you want to remove a channel from a group."):(e.mode="remove",void Ge.channel_group(e,t)):Pe("Missing Channel Group")},channel_group_add_channel:function(e,t){return e.channel_group?e.channel||e.channels?void Ge.channel_group(e,t):Pe("Missing Channel"):Pe("Missing Channel Group")},channel_group_cloak:function(e,t){return"undefined"==typeof e.cloak?void t(pe):(pe=e.cloak,void Ge.channel_group(e,t))},channel_group_list_namespaces:function(e,t){var n=["namespace"];P(e,t,n)},channel_group_remove_namespace:function(e,t){var n=["namespace",e.namespace,"remove"];P(e,t,n)},history:function(e,n){var n=e.callback||n,r=e.count||e.limit||100,i=e.reverse||"false",o=e.error||function(){},s=e.auth_key||oe,a=e.cipher_key,c=e.channel,u=e.channel_group,f=e.start,l=e.end,h=e.include_token,d=e.string_message_token||!1,p={},v=je();return c||u?n?ie?(p.stringtoken="true",p.count=r,p.reverse=i,p.auth=s,u&&(p["channel-group"]=u,c||(c=",")),v&&(p.callback=v),f&&(p.start=f),l&&(p.end=l),h&&(p.include_token="true"),d&&(p.string_message_token="true"),void Ne({callback:v,data:t(p),success:function(e){if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&e.error)return void o({message:e.message,payload:e.payload});for(var t=e[0],r=[],i=0;i<t.length;i++)if(h){var s=T(t[i].message,a),c=t[i].timetoken;try{r.push({message:JSON.parse(s),timetoken:c})}catch(u){r.push({message:s,timetoken:c})}}else{var s=T(t[i],a);try{r.push(JSON.parse(s))}catch(u){r.push(s)}}n([r,e[1],e[2]])},fail:function(e){I(e,o)},url:[fe,"v2","history","sub-key",ie,"channel",_(c)]})):Pe("Missing Subscribe Key"):Pe("Missing Callback"):Pe("Missing Channel")},replay:function(e,n){var r,n=n||e.callback||function(){},i=e.auth_key||oe,o=e.source,s=e.destination,a=e.stop,c=e.start,u=e.end,f=e.reverse,l=e.limit,h=je(),d={};return o?s?re?ie?("0"!=h&&(d.callback=h),a&&(d.stop="all"),f&&(d.reverse="true"),c&&(d.start=c),u&&(d.end=u),l&&(d.count=l),d.auth=i,r=[fe,"v1","replay",re,ie,o,s],void Ne({callback:h,success:function(e){N(e,n,err)},fail:function(){n([0,"Disconnected"])},url:r,data:t(d)})):Pe("Missing Subscribe Key"):Pe("Missing Publish Key"):Pe("Missing Destination Channel"):Pe("Missing Source Channel")},auth:function(e){oe=e,he()},time:function(e){var n=je(),r={uuid:De,auth:oe};Fe&&(r.instanceid=Ue),Ne({callback:n,data:t(r),url:[fe,"time",n],success:function(t){e(t[0])},fail:function(){e(0)}})},publish:function(e,n){var r=e.message;if(!r)return Pe("Missing Message");var i,o,n=n||e.callback||r.callback||e.success||function(){},s=e.channel||r.channel,a=e.auth_key||oe,c=e.cipher_key,u=e.error||r.error||function(){},f=e.post||!1,l="store_in_history"in e?e.store_in_history:!0,h=je(),d="push";return e.prepend&&(d="unshift"),s?re?ie?(r.getPubnubMessage&&(r=r.getPubnubMessage()),r=JSON.stringify(x(r,c)),o=[fe,"publish",re,ie,0,_(s),h,_(r)],i={uuid:De,auth:a},l||(i.store="0"),Fe&&(i.instanceid=Ue),de[d]({callback:h,url:o,data:t(i),fail:function(e){I(e,u),O(1)},success:function(e){N(e,n,u),O(1)},mode:f?"POST":"GET"}),void O()):Pe("Missing Subscribe Key"):Pe("Missing Publish Key"):Pe("Missing Channel")},unsubscribe:function(e,t){var n=e.channel,r=e.channel_group,i=e.auth_key||oe,t=t||e.callback||function(){},o=e.error||function(){};if(be=0,me=1,!n&&!r)return Pe("Missing Channel or Channel Group");if(!ie)return Pe("Missing Subscribe Key");if(n){var s=h(n)?n:(""+n).split(","),a=[],c=[];if(d(s,function(e){Ee[e]&&a.push(e)}),0==a.length)return void t({action:"leave"});d(a,function(e){c.push(e+M)}),d(a.concat(c),function(e){e in Ee&&(Ee[e]=0),e in xe&&delete xe[e]});var u=!0;j&&(u=Ge.LEAVE(a.join(","),0,i,t,o)),u||t({action:"leave"})}if(r){var f=h(r)?r:(""+r).split(","),l=[],p=[];if(d(f,function(e){ke[e]&&l.push(e)}),0==l.length)return void t({action:"leave"});d(l,function(e){p.push(e+M)}),d(l.concat(p),function(e){e in ke&&(ke[e]=0),e in xe&&delete xe[e]});var u=!0;j&&(u=Ge.LEAVE_GROUP(l.join(","),0,i,t,o)),u||t({action:"leave"})}he()},subscribe:function(e,n){function r(e){e?f(he,x):(fe=K(ue,1),le=K(ue,1),f(function(){Ge.time(r)},H)),R(function(t){return e&&t.disconnected?(t.disconnected=0,t.reconnect(t.name)):void(e||t.disconnected||(t.disconnected=1,t.disconnect(t.name)))}),C(function(t){return e&&t.disconnected?(t.disconnected=0,t.reconnect(t.name)):void(e||t.disconnected||(t.disconnected=1,t.disconnect(t.name)))})}function i(){var e=je(),n=g(Ee).join(","),o=y(ke).join(",");if(n||o){n||(n=","),q();var s=t({uuid:De,auth:oe});o&&(s["channel-group"]=o);var a=JSON.stringify(xe);a.length>2&&(s.state=JSON.stringify(xe)),Se&&(s.heartbeat=Se),Fe&&(s.instanceid=Ue),A(),ye=Ne({timeout:k,callback:e,fail:function(e){e&&e.error&&e.service?(I(e,h),r(1)):Ge.time(function(t){!t&&I(e,h),r(t)})},data:t(s),url:[le,"subscribe",ie,_(n),e,be],success:function(e){if(!e||"object"==("undefined"==typeof e?"undefined":_typeof(e))&&"error"in e&&e.error)return h(e.error),f(he,H);if(v(e[1]),be=!be&&me&&Le.get(ie)||e[1],R(function(e){e.connected||(e.connected=1,e.connect(e.name))}),C(function(e){e.connected||(e.connected=1,e.connect(e.name))}),we&&!me)return be=0,we=!1,Le.set(ie,0),void f(i,x);w&&(be=1e4,w=0),Le.set(ie,e[1]);var t=function(){var t="",n="";e.length>3?(t=e[3],n=e[2]):t=e.length>2?e[2]:p(g(Ee),function(t){return p(Array(e[0].length).join(",").split(","),function(){return t})}).join(",");var r=t.split(","),i=n?n.split(","):[];return function(){var e=r.shift()||ge,t=i.shift(),n={};t?(e&&e.indexOf("-pnpres")>=0&&t.indexOf("-pnpres")<0&&(t+="-pnpres"),n=ke[t]||Ee[t]||{callback:function(){}}):n=Ee[e];var o=[n.callback||_e,e.split(M)[0]];return t&&o.push(t.split(M)[0]),o}}(),n=V(+e[1]);d(e[0],function(r){var i=t(),o=T(r,Ee[i[1]]?Ee[i[1]].cipher_key:null);i[0]&&i[0](o,e,i[2]||i[1],n,i[1])}),f(i,x)}})}}var s=e.channel,a=e.channel_group,n=n||e.callback,n=n||e.message,c=e.connect||function(){},u=e.reconnect||function(){},l=e.disconnect||function(){},h=e.error||h||function(){},v=e.idle||function(){},m=e.presence||0,b=e.noheresync||0,w=e.backfill||0,E=e.timetoken||0,k=e.timeout||Q,x=e.windowing||$,S=e.state,O=e.heartbeat||e.pnexpires,N=e.heartbeat_interval,P=e.restore||me;return oe=e.auth_key||oe,me=P,be=E,s||a?n?ie?((O||0===O||N||0===N)&&Ge.set_heartbeat(O,N),s&&d((s.join?s.join(","):""+s).split(","),function(r){var i=Ee[r]||{};Ee[ge=r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:_e=n,cipher_key:e.cipher_key,connect:c,disconnect:l,reconnect:u},S&&(r in S?xe[r]=S[r]:xe[r]=S),m&&(Ge.subscribe({channel:r+M,callback:m,restore:P}),i.subscribed||b||Ge.here_now({channel:r,data:t({uuid:De,auth:oe}),callback:function(e){d("uuids"in e?e.uuids:[],function(t){m({action:"join",uuid:t,timestamp:Math.floor(o()/1e3),occupancy:e.occupancy||1},e,r)})}}))}),a&&d((a.join?a.join(","):""+a).split(","),function(r){var i=ke[r]||{};ke[r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:_e=n,cipher_key:e.cipher_key,connect:c,disconnect:l,reconnect:u},m&&(Ge.subscribe({channel_group:r+M,callback:m,restore:P,auth_key:oe}),i.subscribed||b||Ge.here_now({channel_group:r,data:t({uuid:De,auth:oe}),callback:function(e){d("uuids"in e?e.uuids:[],function(t){m({action:"join",uuid:t,timestamp:Math.floor(o()/1e3),occupancy:e.occupancy||1},e,r)})}}))}),he=function(){q(),f(i,x)},j?void he():L.push(he)):Pe("Missing Subscribe Key"):Pe("Missing Callback"):Pe("Missing Channel")},here_now:function(e,n){var n=e.callback||n,r=e.debug,i=e.error||function(){},o=e.auth_key||oe,s=e.channel,a=e.channel_group,c=je(),u="uuids"in e?e.uuids:!0,f=e.state,l={uuid:De,auth:o};if(u||(l.disable_uuids=1),f&&(l.state=1),!n)return Pe("Missing Callback");if(!ie)return Pe("Missing Subscribe Key");var h=[fe,"v2","presence","sub_key",ie];s&&h.push("channel")&&h.push(_(s)),"0"!=c&&(l.callback=c),a&&(l["channel-group"]=a,!s&&h.push("channel")&&h.push(",")),Fe&&(l.instanceid=Ue),Ne({callback:c,data:t(l),success:function(e){N(e,n,i)},fail:function(e){I(e,i)},debug:r,url:h})},where_now:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.auth_key||oe,o=je(),s=e.uuid||De,a={auth:i};return n?ie?("0"!=o&&(a.callback=o),Fe&&(a.instanceid=Ue),void Ne({callback:o,data:t(a),success:function(e){N(e,n,r)},fail:function(e){I(e,r)},url:[fe,"v2","presence","sub_key",ie,"uuid",_(s)]})):Pe("Missing Subscribe Key"):Pe("Missing Callback")},state:function Ze(e,n){var r,n=e.callback||n||function(e){},i=e.error||function(){},o=e.auth_key||oe,s=je(),Ze=e.state,a=e.uuid||De,c=e.channel,u=e.channel_group,f=t({auth:o});return ie?a?c||u?("0"!=s&&(f.callback=s),"undefined"!=typeof c&&Ee[c]&&Ee[c].subscribed&&Ze&&(xe[c]=Ze),"undefined"!=typeof u&&ke[u]&&ke[u].subscribed&&(Ze&&(xe[u]=Ze),f["channel-group"]=u,c||(c=",")),f.state=JSON.stringify(Ze),Fe&&(f.instanceid=Ue),r=Ze?[fe,"v2","presence","sub-key",ie,"channel",c,"uuid",a,"data"]:[fe,"v2","presence","sub-key",ie,"channel",c,"uuid",_(a)],void Ne({callback:s,data:t(f),success:function(e){N(e,n,i)},fail:function(e){I(e,i)},url:r})):Pe("Missing Channel"):Pe("Missing UUID"):Pe("Missing Subscribe Key")},grant:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.channel||e.channels,o=e.channel_group,s=je(),a=e.ttl,c=e.read?"1":"0",u=e.write?"1":"0",f=e.manage?"1":"0",l=e.auth_key||e.auth_keys;if(!n)return Pe("Missing Callback");if(!ie)return Pe("Missing Subscribe Key");if(!re)return Pe("Missing Publish Key");if(!se)return Pe("Missing Secret Key");var d=Math.floor((new Date).getTime()/1e3),p=ie+"\n"+re+"\ngrant\n",v={w:u,r:c,timestamp:d};e.manage&&(v.m=f),h(i)&&(i=i.join(",")),h(l)&&(l=l.join(",")),"undefined"!=typeof i&&null!=i&&i.length>0&&(v.channel=i),"undefined"!=typeof o&&null!=o&&o.length>0&&(v["channel-group"]=o),"0"!=s&&(v.callback=s),(a||0===a)&&(v.ttl=a),l&&(v.auth=l),v=t(v),l||delete v.auth,p+=w(v);var _=ae(p,se);_=_.replace(/\+/g,"-"),_=_.replace(/\//g,"_"),v.signature=_,Ne({callback:s,data:v,success:function(e){N(e,n,r)},fail:function(e){I(e,r)},url:[fe,"v1","auth","grant","sub-key",ie]})},mobile_gw_provision:function(e){var t,n,r=e.callback||function(){},i=e.auth_key||oe,o=e.error||function(){},s=je(),a=e.channel,c=e.op,u=e.gw_type,f=e.device_id;return f?u?c?a?re?ie?(n=[fe,"v1/push/sub-key",ie,"devices",f],t={uuid:De,auth:i,type:u},"add"==c?t.add=a:"remove"==c&&(t.remove=a),Fe&&(data.instanceid=Ue),void Ne({callback:s,data:t,success:function(e){N(e,r,o)},fail:function(e){I(e,o)},url:n})):Pe("Missing Subscribe Key"):Pe("Missing Publish Key"):Pe("Missing gw destination Channel (channel)"):Pe("Missing GW Operation (op: add or remove)"):Pe("Missing GW Type (gw_type: gcm or apns)"):Pe("Missing Device ID (device_id)")},audit:function(e,n){var n=e.callback||n,r=e.error||function(){},i=e.channel,o=e.channel_group,s=e.auth_key,a=je();if(!n)return Pe("Missing Callback");if(!ie)return Pe("Missing Subscribe Key");if(!re)return Pe("Missing Publish Key");if(!se)return Pe("Missing Secret Key");var c=Math.floor((new Date).getTime()/1e3),u=ie+"\n"+re+"\naudit\n",f={timestamp:c};"0"!=a&&(f.callback=a),"undefined"!=typeof i&&null!=i&&i.length>0&&(f.channel=i),"undefined"!=typeof o&&null!=o&&o.length>0&&(f["channel-group"]=o),s&&(f.auth=s),f=t(f),s||delete f.auth,u+=w(f);var l=ae(u,se);l=l.replace(/\+/g,"-"),l=l.replace(/\//g,"_"),f.signature=l,Ne({callback:a,data:f,success:function(e){N(e,n,r)},fail:function(e){I(e,r)},url:[fe,"v1","auth","audit","sub-key",ie]})},revoke:function(e,t){e.read=!1,e.write=!1,Ge.grant(e,t)},set_uuid:function(e){De=e,he()},get_uuid:function(){return De},isArray:function(e){return h(e)},get_subscribed_channels:function(){return g(Ee,!0)},presence_heartbeat:function(e){var n=e.callback||function(){},r=e.error||function(){},i=je(),o={uuid:De,auth:oe},s=JSON.stringify(xe);s.length>2&&(o.state=JSON.stringify(xe)),Se>0&&320>Se&&(o.heartbeat=Se),"0"!=i&&(o.callback=i);var a=_(g(Ee,!0).join(",")),c=y(ke,!0).join(",");a||(a=","),c&&(o["channel-group"]=c),Fe&&(o.instanceid=Ue),Ne({callback:i,data:t(o),url:[fe,"v2","presence","sub-key",ie,"channel",a,"heartbeat"],success:function(e){N(e,n,r)},fail:function(e){I(e,r)}})},stop_timers:function(){clearTimeout(J),clearTimeout(X),clearTimeout(Te)},shutdown:function(){Ge.stop_timers(),ze&&ze()},xdr:Ne,ready:m,db:Le,uuid:l,map:p,each:d,"each-channel":R,grep:c,offline:function(){q(1,{message:"Offline. Please check your network settings."})},supplant:u,now:o,unique:i,updater:a};return De||(De=Ge.uuid()),Ue||(Ue=Ge.uuid()),Le.set(ie+"uuid",De),J=f(B,H),X=f(F,ee),Te=f(A,(Ae-3)*H),Y(),Ge}function E(){function e(e){return r.SHA256(e).toString(r.enc.Hex)}function t(e){return e=e||{},e.hasOwnProperty("encryptKey")||(e.encryptKey=l.encryptKey),e.hasOwnProperty("keyEncoding")||(e.keyEncoding=l.keyEncoding),e.hasOwnProperty("keyLength")||(e.keyLength=l.keyLength),e.hasOwnProperty("mode")||(e.mode=l.mode),-1==c.indexOf(e.keyEncoding.toLowerCase())&&(e.keyEncoding=l.keyEncoding),-1==u.indexOf(parseInt(e.keyLength,10))&&(e.keyLength=l.keyLength),-1==f.indexOf(e.mode.toLowerCase())&&(e.mode=l.mode),e}function n(e,t){return"base64"==t.keyEncoding?r.enc.Base64.parse(e):"hex"==t.keyEncoding?r.enc.Hex.parse(e):e}function i(t,i){return t=n(t,i),i.encryptKey?r.enc.Utf8.parse(e(t).slice(0,32)):t}function o(e){return"ecb"==e.mode?r.mode.ECB:r.mode.CBC}function s(e){return"cbc"==e.mode?r.enc.Utf8.parse(a):null}var a="0123456789012345",c=["hex","utf8","base64","binary"],u=[128,256],f=["ecb","cbc"],l={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(e,n,a){if(!n)return e;a=t(a);var c=s(a),u=o(a),f=i(n,a),l=JSON.stringify(e),h=r.AES.encrypt(l,f,{iv:c,mode:u}).ciphertext,d=h.toString(r.enc.Base64);return d||e},decrypt:function(e,n,a){if(!n)return e;a=t(a);var c=s(a),u=o(a),f=i(n,a);try{var l=r.enc.Base64.parse(e),h=r.AES.decrypt({ciphertext:l},f,{iv:c,mode:u}).toString(r.enc.Utf8),d=JSON.parse(h);return d}catch(p){return}}}}function x(e){var t,n=function(){if(!i){i=1,clearTimeout(a);try{response=JSON.parse(t.responseText)}catch(e){return d(1)}l(response)}},r=0,i=0,o=e.timeout||F,a=f(function(){d(1)},o),c=e.data||{},u=e.fail||function(){},l=e.success||function(){},h=!0,d=function(e,n){r||(r=1,clearTimeout(a),t&&(t.onerror=t.onload=null,t.abort&&t.abort(),t=null),e&&u(n))};try{t="undefined"!=typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest,t.onerror=t.onabort=function(){d(1,t.responseText||{error:"Network Connection Error"})},t.onload=t.onloadend=n,t.onreadystatechange=function(){if(t&&4==t.readyState)switch(t.status){case 200:break;default:try{response=JSON.parse(t.responseText),d(1,response)}catch(e){return d(1,{status:t.status,payload:null,message:t.responseText})}return}},c.pnsdk=J,url=s(e.url,c),t.open("GET",url,h),
h&&(t.timeout=o),t.send()}catch(p){return d(0),x(e)}return d}function T(e,t,n){d(e.split(","),function(e){var r=function(e){e||(e=window.event),n(e)||(e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())};t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r})}function S(e){console.error(e)}function A(e,t,n){return n?void e.setAttribute(t,n):e&&e.getAttribute&&e.getAttribute(t)}function O(e){return document.getElementById(e)}function C(e,t){var n=[];return d(e.split(/\s+/),function(e){d((t||document).getElementsByTagName(e),function(e){n.push(e)})}),n}function R(e,t){for(var n in t)if(t.hasOwnProperty(n))try{e.style[n]=t[n]+("|width|height|top|left|".indexOf(n)>0&&"number"==typeof t[n]?"px":"")}catch(r){}}function N(e){return document.createElement(e)}function I(e,t){var n=r.HmacSHA256(e,t);return n.toString(r.enc.Base64)}function P(e){e.db=X,e.xdr=x,e.error=e.error||S,e.hmac_SHA256=I,e.crypto_obj=E(),e.params={pnsdk:J},SELF=function(e){return P(e)};var t=w(e);for(var n in t)t.hasOwnProperty(n)&&(SELF[n]=t[n]);return SELF.init=SELF,SELF.$=O,SELF.attr=A,SELF.search=C,SELF.bind=T,SELF.css=R,SELF.create=N,SELF.crypto_obj=E(),"undefined"!=typeof window&&T("beforeunload",window,function(){return SELF["each-channel"](function(e){SELF.LEAVE(e.name,1)}),!0}),e.notest?SELF:("undefined"!=typeof window&&T("offline",window,SELF.offline),"undefined"!=typeof document&&T("offline",document,SELF.offline),SELF.ready(),SELF)}var B=1,j=!1,L=[],M="-pnpres",D=10,F=15e3,U=310,z=60,H=1e3,q="/",V="&",G=5,W=30,Z="'3.9.2'".replace(/'/g,""),Y=/{([\w\-]+)}/g,K=function(){var e=20,t=Math.floor(Math.random()*e);return function(n,r){return n.indexOf("pubsub.")>0&&n.replace("pubsub","ps"+(r?l().split("-")[0]:++t<e?t:t=1))||n}}();"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports={PN_API:w,unique:i,PNmessage:b,DEF_TIMEOUT:F,timeout:f,build_url:s,each:d,uuid:l,URLBIT:q});var B=1,J="PubNub-JS-Modern/3.9.2",X=function(){var e="undefined"!=typeof localStorage&&localStorage;return{get:function(t){try{return e?e.getItem(t):-1==document.cookie.indexOf(t)?null:((document.cookie||"").match(RegExp(t+"=([^;]+)"))||[])[1]||null}catch(n){return}},set:function(t,n){try{if(e)return e.setItem(t,n)&&0;document.cookie=t+"="+n+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(r){return}}}}();P.init=P,P.secure=P,P.crypto_obj=E(),PUBNUB=P({}),"undefined"!=typeof e&&(e.exports=P)||"undefined"!=typeof t&&(t.PUBNUB=P)||(PUBNUB=P)}(),function(){var e=PUBNUB.ws=function(t,n){if(!(this instanceof e))return new e(t,n);var r=this,t=r.url=t||"",i=(r.protocol=n||"Sec-WebSocket-Protocol",t.split("/")),o={ssl:"wss:"===i[0],origin:i[2],publish_key:i[3],subscribe_key:i[4],channel:i[5]};return r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,t?(r.pubnub=PUBNUB.init(o),r.pubnub.setup=o,r.setup=o,void r.pubnub.subscribe({restore:!1,channel:o.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(e){r.onmessage({data:e})},connect:function(){r.readyState=r.OPEN,r.onopen()}})):(r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r)};e.prototype.send=function(e){var t=this;t.pubnub.publish({channel:t.pubnub.setup.channel,message:e,callback:function(e){t.onsend({data:e})}})},e.prototype.close=function(){var e=this;e.pubnub.unsubscribe({channel:e.pubnub.setup.channel}),e.readyState=e.CLOSED,e.onclose({})}}();var r=r||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;e>i;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;e>i;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;t>r;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new s.init(n,t)}},f=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,i=e.min(4*t,i),t){for(var c=0;t>c;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);!function(e){for(var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,n=t.algo,s=[],a=[],c=function(e){return 4294967296*(e-(0|e))|0},u=2,f=0;64>f;){var l;e:{l=u;for(var h=e.sqrt(l),d=2;h>=d;d++)if(!(l%d)){l=!1;break e}l=!0}l&&(8>f&&(s[f]=c(e.pow(u,.5))),a[f]=c(e.pow(u,1/3)),f++),u++}var p=[],n=n.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],u=n[5],f=n[6],l=n[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var d=p[h-15],v=p[h-2];p[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[h-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+p[h-16]}d=l+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&f)+a[h]+p[h],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),l=f,f=u,u=c,c=s+d|0,s=o,o=i,i=r,r=d+v|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+f|0,n[7]=n[7]+l|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=e.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(n),t.HmacSHA256=o._createHmacHelper(n)}(Math),function(){var e=r,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),s=this._iKey=n.clone(),a=o.words,c=s.words,u=0;r>u;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=r,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;n>i;i+=3)for(var o=(t[i>>>2]>>>24-8*(i%4)&255)<<16|(t[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|t[i+2>>>2]>>>24-8*((i+2)%4)&255,s=0;4>s&&n>i+.75*s;s++)e.push(r.charAt(o>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(n=i));for(var i=[],o=0,s=0;n>s;s++)if(s%4){var a=r.indexOf(e.charAt(s-1))<<2*(s%4),c=r.indexOf(e.charAt(s))>>>6-2*(s%4);i[o>>>2]|=(a|c)<<24-8*(o%4),o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,o,s){return e=e+(t&n|~t&r)+i+s,(e<<o|e>>>32-o)+t}function n(e,t,n,r,i,o,s){return e=e+(t&r|n&~r)+i+s,(e<<o|e>>>32-o)+t}function i(e,t,n,r,i,o,s){return e=e+(t^n^r)+i+s,(e<<o|e>>>32-o)+t}function o(e,t,n,r,i,o,s){return e=e+(n^(t|~r))+i+s,(e<<o|e>>>32-o)+t}for(var s=r,a=s.lib,c=a.WordArray,u=a.Hasher,a=s.algo,f=[],l=0;64>l;l++)f[l]=4294967296*e.abs(e.sin(l+1))|0;a=a.MD5=u.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var s=0;16>s;s++){var a=r+s,c=e[a];e[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var s=this._hash.words,a=e[r+0],c=e[r+1],u=e[r+2],l=e[r+3],h=e[r+4],d=e[r+5],p=e[r+6],v=e[r+7],_=e[r+8],g=e[r+9],y=e[r+10],m=e[r+11],b=e[r+12],w=e[r+13],E=e[r+14],k=e[r+15],x=s[0],T=s[1],S=s[2],A=s[3],x=t(x,T,S,A,a,7,f[0]),A=t(A,x,T,S,c,12,f[1]),S=t(S,A,x,T,u,17,f[2]),T=t(T,S,A,x,l,22,f[3]),x=t(x,T,S,A,h,7,f[4]),A=t(A,x,T,S,d,12,f[5]),S=t(S,A,x,T,p,17,f[6]),T=t(T,S,A,x,v,22,f[7]),x=t(x,T,S,A,_,7,f[8]),A=t(A,x,T,S,g,12,f[9]),S=t(S,A,x,T,y,17,f[10]),T=t(T,S,A,x,m,22,f[11]),x=t(x,T,S,A,b,7,f[12]),A=t(A,x,T,S,w,12,f[13]),S=t(S,A,x,T,E,17,f[14]),T=t(T,S,A,x,k,22,f[15]),x=n(x,T,S,A,c,5,f[16]),A=n(A,x,T,S,p,9,f[17]),S=n(S,A,x,T,m,14,f[18]),T=n(T,S,A,x,a,20,f[19]),x=n(x,T,S,A,d,5,f[20]),A=n(A,x,T,S,y,9,f[21]),S=n(S,A,x,T,k,14,f[22]),T=n(T,S,A,x,h,20,f[23]),x=n(x,T,S,A,g,5,f[24]),A=n(A,x,T,S,E,9,f[25]),S=n(S,A,x,T,l,14,f[26]),T=n(T,S,A,x,_,20,f[27]),x=n(x,T,S,A,w,5,f[28]),A=n(A,x,T,S,u,9,f[29]),S=n(S,A,x,T,v,14,f[30]),T=n(T,S,A,x,b,20,f[31]),x=i(x,T,S,A,d,4,f[32]),A=i(A,x,T,S,_,11,f[33]),S=i(S,A,x,T,m,16,f[34]),T=i(T,S,A,x,E,23,f[35]),x=i(x,T,S,A,c,4,f[36]),A=i(A,x,T,S,h,11,f[37]),S=i(S,A,x,T,v,16,f[38]),T=i(T,S,A,x,y,23,f[39]),x=i(x,T,S,A,w,4,f[40]),A=i(A,x,T,S,a,11,f[41]),S=i(S,A,x,T,l,16,f[42]),T=i(T,S,A,x,p,23,f[43]),x=i(x,T,S,A,g,4,f[44]),A=i(A,x,T,S,b,11,f[45]),S=i(S,A,x,T,k,16,f[46]),T=i(T,S,A,x,u,23,f[47]),x=o(x,T,S,A,a,6,f[48]),A=o(A,x,T,S,v,10,f[49]),S=o(S,A,x,T,E,15,f[50]),T=o(T,S,A,x,d,21,f[51]),x=o(x,T,S,A,b,6,f[52]),A=o(A,x,T,S,l,10,f[53]),S=o(S,A,x,T,y,15,f[54]),T=o(T,S,A,x,c,21,f[55]),x=o(x,T,S,A,_,6,f[56]),A=o(A,x,T,S,k,10,f[57]),S=o(S,A,x,T,p,15,f[58]),T=o(T,S,A,x,w,21,f[59]),x=o(x,T,S,A,h,6,f[60]),A=o(A,x,T,S,m,10,f[61]),S=o(S,A,x,T,u,15,f[62]),T=o(T,S,A,x,g,21,f[63]);s[0]=s[0]+x|0,s[1]=s[1]+T|0,s[2]=s[2]+S|0,s[3]=s[3]+A|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=u._createHelper(a),s.HmacMD5=u._createHmacHelper(a)}(Math),function(){var e=r,t=e.lib,n=t.Base,i=t.WordArray,t=e.algo,o=t.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),o=i.create(),s=o.words,a=n.keySize,n=n.iterations;s.length<a;){c&&r.update(c);var c=r.update(e).finalize(t);r.reset();for(var u=1;n>u;u++)c=r.finalize(c),r.reset();o.concat(c)}return o.sigBytes=4*a,o}});e.EvpKDF=function(e,t,n){return o.create(n).compute(e,t)}}(),r.lib.Cipher||function(e){var t=r,n=t.lib,i=n.Base,o=n.WordArray,s=n.BufferedBlockAlgorithm,a=t.enc.Base64,c=t.algo.EvpKDF,u=n.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?v:p).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?v:p).decrypt(e,t,n,r)}}}});n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=t.mode={},l=function(t,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var o=0;r>o;o++)t[n+o]^=i[o]},h=(n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();h.Encryptor=h.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;l.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),h.Decryptor=h.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),l.call(this,e,t,r),this._prevBlock=i}}),f=f.CBC=h,h=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,i=[],s=0;n>s;s+=4)i.push(r);n=o.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:h}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){e=a.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=o.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},p=n.SerializableCipher=i.extend({cfg:i.extend({format:f}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,d.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=o.random(8)),e=c.create({keySize:t+n}).compute(e,r),n=o.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},v=n.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=p.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],o=[],s=[],a=[],c=[],u=[],f=[],l=[],h=[],d=[],p=[],v=0;256>v;v++)p[v]=128>v?v<<1:v<<1^283;for(var _=0,g=0,v=0;256>v;v++){var y=g^g<<1^g<<2^g<<3^g<<4,y=y>>>8^255&y^99;i[_]=y,o[y]=_;var m=p[_],b=p[m],w=p[b],E=257*p[y]^16843008*y;s[_]=E<<24|E>>>8,a[_]=E<<16|E>>>16,c[_]=E<<8|E>>>24,u[_]=E,E=16843009*w^65537*b^257*m^16843008*_,f[y]=E<<24|E>>>8,l[y]=E<<16|E>>>16,h[y]=E<<8|E>>>24,d[y]=E,_?(_=m^p[p[p[w^m]]],g^=p[p[g]]):_=g=1}var k=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],o=0;e>o;o++)if(n>o)r[o]=t[o];else{var s=r[o-1];o%n?n>6&&4==o%n&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=k[o/n|0]<<24),r[o]=r[o-n]^s}for(t=this._invKeySchedule=[],n=0;e>n;n++)o=e-n,s=n%4?r[o]:r[o-4],t[n]=4>n||4>=o?s:f[i[s>>>24]]^l[i[s>>>16&255]]^h[i[s>>>8&255]]^d[i[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,f,l,h,d,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var c=this._nRounds,u=e[t]^n[0],f=e[t+1]^n[1],l=e[t+2]^n[2],h=e[t+3]^n[3],d=4,p=1;c>p;p++)var v=r[u>>>24]^i[f>>>16&255]^o[l>>>8&255]^s[255&h]^n[d++],_=r[f>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&u]^n[d++],g=r[l>>>24]^i[h>>>16&255]^o[u>>>8&255]^s[255&f]^n[d++],h=r[h>>>24]^i[u>>>16&255]^o[f>>>8&255]^s[255&l]^n[d++],u=v,f=_,l=g;v=(a[u>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[d++],_=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^n[d++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&f])^n[d++],h=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^n[d++],e[t]=v,e[t+1]=_,e[t+2]=g,e[t+3]=h},keySize:8});e.AES=t._createHelper(n)}(),r.mode.ECB=function(){var e=r.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}()},function(e,t,n){function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.id=e&&e.id||i.v4(),this.self=e&&e.self||null,this.other=e&&e.other||null,this.context=e&&e.context||{},this._send=e&&e.send||null,this._inbox=[],this._receivers=[]}var i=n(66),o=n(90).Promise;r.prototype.isConversation=!0,r.prototype.send=function(e){return this._send(this.other,{id:this.id,from:this.self,to:this.other,message:e})},r.prototype.deliver=function(e){if(this._receivers.length){var t=this._receivers.shift();t(e.message)}else this._inbox.push(e.message)},r.prototype.receive=function(){var e=this;return this._inbox.length?o.resolve(this._inbox.shift()):new o(function(t){e._receivers.push(t)})},e.exports=r},function(e,t){function n(){this.next=null,this.previous=null}n.prototype.isBlock=!0,n.prototype.execute=function(e,t){throw new Error("Cannot run an abstract Block")},e.exports=n},function(e,t,n){function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof e)throw new TypeError("Parameter callback must be a Function");this.callback=e}var i=n(90).Promise,o=n(97),s=n(99).isPromise;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.isThen=!0,r.prototype.execute=function(e,t){var n=this,r=this.callback(t,e.context),o=s(r)?r:i.resolve(r);return o.then(function(e){return{result:e,block:n.next}})},o.prototype.then=function(e){if("function"==typeof e&&(e=new r(e)),!e||!e.isBlock)throw new TypeError("Parameter next must be a Block or function");return e.previous=this,this.next=e,e},e.exports=r},function(e,t){t.isPromise=function(e){return e&&"function"==typeof e.then&&"function"==typeof e["catch"]}},function(e,t,n){function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.message=e}var i=n(90).Promise,o=n(97),s=n(99).isPromise;n(98),n(101),r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.isTell=!0,r.prototype.execute=function(e,t){var n,r=this;if("function"==typeof this.message){var o=this.message(t,e.context);n=s(o)?o:i.resolve(o)}else n=i.resolve(this.message);return n.then(function(t){var n=e.send(t),o=s(n)?n:i.resolve(n);return o.then(function(){return{result:t,block:r.next}})})},o.prototype.tell=function(e){var t=new r(e);return this.then(t)},o.prototype.ask=function(e,t){return this.tell(e).listen(t)},e.exports=r},function(e,t,n){function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}var i=(n(90).Promise,n(97));n(98);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.isListen=!0,r.prototype.execute=function(e,t){var n=this;return e.receive().then(function(e){return{result:e,block:n.next}})},i.prototype.listen=function(e){var t=new r,n=this.then(t);return e&&(n=n.then(e)),n},e.exports=r},function(e,t,n){function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"==typeof e?this.condition=e:e instanceof RegExp?this.condition=function(t,n){return e.test(t)}:this.condition=function(t,n){return t==e},t&&!t.isBlock)throw new TypeError("Parameter trueBlock must be a Block");if(n&&!n.isBlock)throw new TypeError("Parameter falseBlock must be a Block");this.trueBlock=t||null,this.falseBlock=n||null}var i=n(90).Promise,o=n(97),s=n(99).isPromise;n(98),r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.isIIf=!0,r.prototype.execute=function(e,t){var n=this,r=this.condition(t,e.context),o=s(r)?r:i.resolve(r);return o.then(function(e){var r=e?n.trueBlock||n.next:n.falseBlock;return{result:t,block:r}})},o.prototype.iif=function(e,t,n){var i=new r(e,t,n);return this.then(i)},e.exports=r},function(e,t,n){function r(e,t){var n,i;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"==typeof e?(n=e,i=t):(n=null,i=e),n){if("function"!=typeof n)throw new TypeError("Parameter decision must be a function")}else n=function(e,t){return e};if(i&&"function"==typeof i)throw new TypeError("Parameter choices must be an object");if(this.decision=n,this.choices={},i){var o=this;Object.keys(i).forEach(function(e){o.addChoice(e,i[e])})}}var i=n(90).Promise,o=n(97),s=n(99).isPromise;n(98),r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.isDecision=!0,r.prototype.execute=function(e,t){var n=this,r=this.decision(t,e.context),o=s(r)?r:i.resolve(r);return o.then(function(e){var r=n.choices[e];if(r||(r=n.choices["default"]),!r)throw new Error('Block with id "'+e+'" not found');return{result:t,block:r}})},r.prototype.addChoice=function(e,t){if("string"!=typeof e)throw new TypeError("String expected as choice id");if(!t||!t.isBlock)throw new TypeError("Block expected as choice");if(e in this.choices)throw new Error('Choice with id "'+e+'" already exists');for(var n=t;n&&n.previous;)n=n.previous;return this.choices[e]=n,this},o.prototype.decide=function(e,t){var n=new r(e,t);return this.then(n)},e.exports=r},function(e,t){function n(e,t){this.agent=e,this.stopPropagation=t&&t.stopPropagation||!1,this.receiveOriginal=e._receive,this.listeners=[]}n.prototype.type="pattern",n.prototype.receive=function(e,t){for(var n,r=[],i=0,o=this.listeners.length;o>i;i++){var s=this.listeners[i],a=s.pattern,c=a instanceof Function&&a(t)||a instanceof RegExp&&a.test(t)||a==t;if(c&&(n=s.callback.call(this.agent,e,t),r.push(n),this.stopPropagation))return r[0]}return n=this.receiveOriginal.call(this.agent,e,t),r.push(n),r[0]},n.prototype.listen=function(e,t){this.listeners.push({pattern:e,callback:t})},n.prototype.unlisten=function(e,t){for(var n=0,r=this.listeners.length;r>n;n++){var i=this.listeners[n];if(i.pattern===e&&i.callback===t){this.listeners.splice(n,1);break}}},n.prototype.mixin=function(){return{_receive:this.receive.bind(this),listen:this.listen.bind(this),unlisten:this.unlisten.bind(this)}},e.exports=n},function(e,t,n){function r(e,t){this.agent=e,this.receiveOriginal=e._receive,this.timeout=t&&t.timeout||a,this.queue=[]}var i=n(12),o=n(2),s=n(13),a=6e4;r.prototype.type="request",r.prototype.receive=function(e,t){var n=this.agent;if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var r=t,i=this.queue[r.id];if(i)return clearTimeout(i.timeout),delete this.queue[r.id],r.error?i.reject(new Error(r.error)):i.resolve(r.message),!0;if("request"==t.type)try{var o=this.receiveOriginal.call(n,e,t.message);s.isPromise(o)?o.then(function(r){n.send(e,{type:"request",id:t.id,message:r})})["catch"](function(r){n.send(e,{type:"request",id:t.id,error:r.message||r.toString()})}):n.send(e,{type:"request",id:t.id,message:o})}catch(a){n.send(e,{type:"request",id:t.id,error:a.message||a.toString()})}}else this.receiveOriginal&&this.receiveOriginal.call(n,e,t)},r.prototype.request=function(e,t){var n=this;return new o(function(r,o){var s=i(),a={type:"request",id:s,message:t};n.queue[s]={resolve:r,reject:o,timeout:setTimeout(function(){delete n.queue[s],o(new Error("Timeout"))},n.timeout)},n.agent.send(e,a)["catch"](function(e){o(e)})})},r.prototype.mixin=function(){return{_receive:this.receive.bind(this),request:this.request.bind(this)}},e.exports=r},function(e,t,n){function r(e,t,n){this.agent=e,this.receiveOriginal=e._receive,this.queue={},this.promiseTimeout=n&&n.timeout||1500,t instanceof Array?this.functionsFromArray(t):t instanceof Object?this.availableFunctions=t:console.log("cannot use RPC with the supplied functions",t)}var i=n(12),o=n(2),s=n(13);r.prototype.type="rpc",r.prototype.functionsFromArray=function(e){this.availableFunctions={};for(var t=0;t<e.length;t++){var n=e[t];this.availableFunctions[n]=this.agent[n]}},r.prototype.request=function(e,t){var n=this;return new o(function(r,o){"object"!=("undefined"==typeof t?"undefined":_typeof(t))&&o(new TypeError("Message must be an object")),"2.0"!==t.jsonrpc&&(t.jsonrpc="2.0"),void 0===t.id&&(t.id=i()),void 0===t.method&&o(new Error('Property "method" expected')),void 0===t.params&&(t.params={}),n.queue[t.id]={resolve:r,reject:o,timeout:setTimeout(function(){delete n.queue[t.id],o(new Error("RPC Promise Timeout surpassed. Timeout: "+n.promiseTimeout/1e3+"s"))},n.promiseTimeout)};var a=n.agent.send(e,t);1==s.isPromise(a)&&a["catch"](function(e){o(e)})})},r.prototype.receive=function(e,t){"object"==("undefined"==typeof t?"undefined":_typeof(t))&&"2.0"==t.jsonrpc?this._receive(e,t):this.receiveOriginal.call(this.agent,e,t)},r.prototype._receive=function(e,t){var n={jsonrpc:"2.0",id:t.id};if(void 0!==t.method){var r=this.availableFunctions[t.method];if(void 0!==r){var i=r.call(this.agent,t.params,e)||null;if(s.isPromise(i)){var o=this;i.then(function(t){n.result=t,o.agent.send(e,n)})["catch"](function(t){n.error=t.message||t.toString(),o.agent.send(e,n)})}else n.result=i,this.agent.send(e,n)}else{var a=new Error("Cannot find function: "+t.method);n.error=a.message||a.toString(),this.agent.send(e,n)}}else if(void 0!==t.result||void 0!==t.error){var c=this.queue[t.id];void 0!==c&&(void 0!=t.error?"object"==("undefined"==typeof t?"undefined":_typeof(t))?c.reject(t.error):c.reject(new Error(t.error)):c.resolve(t.result))}else{var a=new Error("No method or result defined. Message:"+JSON.stringify(t));n.error=a.message||a.toString(),this.agent.send(e,n)}},r.prototype.mixin=function(){return{_receive:this.receive.bind(this),request:this.request.bind(this)}},e.exports=r},function(e,t){function n(e){this.id=e&&e.id||null,this["default"]=e&&e["default"]||!1}n.prototype.type=null,n.prototype.connect=function(e,t){throw new Error('Cannot invoke abstract function "connect"')},n.prototype.close=function(){throw new Error('Cannot invoke abstract function "close"')},e.exports=n},function(e,t,n){function r(e){this.id=e.id||null,this.url=e.url||e.host&&"amqp://"+e.host||null,this["default"]=e["default"]||!1,this.networkId=this.url,this.connection=null,this.config=e}var i=n(2),o=n(107),s=n(109);r.prototype=new o,r.prototype.type="amqp",r.prototype.connect=function(e,t){var r=n(!function(){var e=new Error('Cannot find module "amqplib/callback_api"');throw e.code="MODULE_NOT_FOUND",e}()),o=this,a=new i(function(e,t){null==o.connection?r.connect(o.url,function(t,n){null!=t?console.error(t):(o.connection=n,e())}):e()});return new s(o,e,t,a)},r.prototype.close=function(){null!=this.connection&&(this.connection.close(),this.connection=null)},e.exports=r},function(e,t,n){(function(t){function r(e,t,n,r){this.transport=e,this.id=t,this.channel=null;var o=this;this.ready=new i(function(e,t){r.then(function(){o.transport.connection.createChannel(function(r,i){null!=r?(console.error(r),t()):(o.channel=i,i.assertQueue(o.id),i.consume(o.id,function(e){if(null!==e&&e.content&&""!=e.content.toString()){var t=JSON.parse(e.content.toString());t.to!=o.id?console.warn("Received message not meant for me?",t):n(t.from,t.message),i.ack(e)}}),e())})})})}var i=n(2);n(110);r.prototype.send=function(e,n){if(null!=this.channel){var r={from:this.id,to:e,message:n};this.channel.sendToQueue(e,new t(JSON.stringify(r),"utf-8"))}else console.log("No channel open")},r.prototype.close=function(){null!=this.channel&&this.channel.close(),this.channel=null},e.exports=r}).call(t,n(67).Buffer)},function(e,t,n){function r(e,t,n){throw new Error("Cannot create an abstract Connection")}var i=n(2);r.prototype.ready=i.reject(new Error("Cannot get abstract property ready")),r.prototype.send=function(e,t){throw new Error("Cannot call abstract function send")},r.prototype.close=function(){throw new Error('Cannot call abstract function "close"')},e.exports=r},function(e,t,n){function r(e){this.id=e&&e.id||null,this["default"]=e&&e["default"]||!1,this.host=e&&e.host||new i.Host(e),this.networkId=this.host.networkId}var i=n(112),o=n(107),s=n(156);r.prototype=new o,r.prototype.type="distribus",r.prototype.connect=function(e,t){return new s(this,e,t)},r.prototype.close=function(){this.host.close(),this.host=null},e.exports=r},function(e,t,n){t.Host=n(113),t.Promise=n(116)},function(e,t,n){function r(e){var t=this;this.peers={},this.addresses={},this.channels={},this.options={reconnectTimeout:3e5,reconnectDelay:1e3,reconnectDecay:2},this.server=null,this.address=null,this.port=null,this.connections={},this.timers={},this.send=function(e,n,r){var i=t.peers[n];return i?(i.emit("message",e,r),u.resolve(null)):t.find(n).then(function(i){var a=t.connections[i];if(a){var c={method:"send",params:{from:e,to:n,message:r}};return a.request(c)["catch"](function(e){if(0===e.toString().indexOf("Error: Peer not found"))throw delete t.addresses[n],o(n)})}throw s(n,i)})},this.config(e)}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function o(e){return new Error("Peer not found (id: "+e+")");
}function s(e,t){return new Error("Peer unreachable (id: "+e+", url: "+t+")")}var a=n(114),c=n(114).Server,u=(n(115),n(116)),f=n(154),l=n(155);r.prototype.config=function(e){if(e&&(i(this.options,e),e.networkId)){if(null===this.networkId)throw new Error("Cannot replace networkId once set");this.networkId=e.networkId}return i({},this.options)},r.prototype.create=function(e){if(e in this.peers)throw new Error("Id already exists (id: "+e+")");var t=new l(e,this.send);return this.peers[e]=t,t},r.prototype.remove=function(e){e instanceof l?delete this.peers[e.id]:e&&delete this.peers[e]},r.prototype.get=function(e){return this.peers[e]||null},r.prototype.find=function(e){var t=this;if(e in t.peers)return u.resolve(t.url||null);var n=t.addresses[e];return n?u.resolve(n):new u(function(n,r){function i(r){var i=t.connections[r];return i.request({method:"find",params:{id:e}}).then(function(r){r&&!s&&(s=!0,t.addresses[e]=r,n(r))})}var s=!1,a=Object.keys(t.connections).map(i);u.all(a).then(function(){s&&0!=a.length||r(o(e))})})},r.prototype.listen=function(e,t){var n=this;return new u(function(r,i){return n.server?void i(new Error("Server already listening")):(n.server=new c({port:t},function(){n.address=e,n.port=t,n.url="ws://"+e+":"+t,r(n)}),n.server.on("connection",function(e){e=f(e),e.onerror=function(e){},e.onclose=function(){var t=n._findUrl(e);delete n.connections[t],n.timers[t]=setTimeout(function(){delete n.timers[t],n._forgetPeers(t)},n.options.reconnectTimeout)},e.onrequest=function(t){return n._onRequest(e,t)}}),void n.server.on("error",function(e){i(e)}))})},r.prototype._onRequest=function(e,t){var n,r=this;switch(t.method){case"greeting":n=t.params&&t.params.url;var i=t.params.networkId||null;return null===i||i===r.networkId?!n||n in this.connections?u.resolve({networkId:r.networkId}):(this.connections[n]=e,this._broadcastJoin(n).then(function(){return u.resolve({networkId:r.networkId})})):u.reject(new Error("Network id mismatch ("+i+" !== "+r.networkId+")"));case"join":return n=t.params&&t.params.url,this.join(n).then(function(e){return u.resolve()});case"goodbye":return n=this._findUrl(e),this._forgetPeers(n),this._disconnect(n),u.resolve("goodbye");case"hosts":return t.params&&t.params.urls&&this.join(t.params.urls),u.resolve(Object.keys(this.connections));case"find":var s=t.params&&t.params.id;return u.resolve(this.peers[s]?this.url:null);case"send":var a=t.params&&t.params.from,c=t.params&&t.params.to,f=t.params&&t.params.message,l=this.peers[c];return l?(l.emit("message",a,f),u.resolve(null)):u.reject(o(c).toString());case"publish":var h=t.params&&t.params.channel,f=t.params&&t.params.message;return this._publish(h,f),u.resolve({result:null,error:null});case"ping":return u.resolve({result:t.params,error:null});default:return u.reject('Unknown method "'+t.method+'"')}},r.prototype._findUrl=function(e){for(var t in this.connections)if(this.connections.hasOwnProperty(t)&&this.connections[t]===e)return t;return null},r.prototype._forgetPeers=function(e){for(var t in this.addresses)this.addresses.hasOwnProperty(t)&&this.addresses[t]===e&&delete this.addresses[t]},r.prototype.join=function(e){var t=this;return!e||e in t.connections?u.resolve(t):t._connect(e).then(function(){return t._broadcastJoin(e)}).then(function(e){return t})},r.prototype._connect=function(e){var t=this;return new u(function(n,r){var i=new a(e);f(i),t.connections[e]=i,i.onrequest=function(e){return t._onRequest(i,e)},i.onclose=function(){t.connections[e]&&(delete t.connections[e],t._reconnect(e))},i.onopen=function(){i.request({method:"greeting",params:{url:t.url,networkId:t.networkId}}).then(function(e){t.networkId=e.networkId,n(i)})["catch"](function(n){delete t.connections[e],i.close(),r(n)})},i.onerror=function(n){delete t.connections[e],r(n),i.close()}})},r.prototype._reconnect=function(e){function t(i,o){n.timers[e]=setTimeout(function(){delete n.timers[e];var s=(new Date).valueOf();s-r<n.options.reconnectTimeout?n._connect(e)["catch"](function(e){t(i/n.options.reconnectDecay,o+1)}):n._forgetPeers(e)},i)}var n=this,r=(new Date).valueOf();t(n.options.reconnectDelay,0)},r.prototype._broadcastJoin=function(e){function t(t){var r=n.connections[t];return r.request({method:"join",params:{url:e}})["catch"](function(e){}).then(function(){return t})}var n=this,r=Object.keys(n.connections).filter(function(t){return t!==e});return u.all(r.map(t))},r.prototype.close=function(){var e=this;if(this.server){var t=function(){return e.addresses={},e.server&&(e.server.close(),e.server=null,e.address=null,e.port=null,e.url=null),e},n=Object.keys(this.connections);return u.all(n.map(function(t){return e._disconnect(t)})).then(t)}u.resolve(this)},r.prototype._disconnect=function(e){var t=this.connections[e];return t?(delete this.connections[e],this.timers[e]&&(clearTimeout(this.timers[e]),delete this.timers[e]),t.request({method:"goodbye"})["catch"](function(e){}).then(function(){t.close()})):void u.resolve()},r.prototype.publish=function(e,t){this._publish(e,t);for(var n in this.connections)if(this.connections.hasOwnProperty(n)){var r=this.connections[n];r.notify({method:"publish",params:{channel:e,message:t}})}},r.prototype._publish=function(e,t){var n=this.channels[e];n&&n.forEach(function(e){e(t)})},r.prototype.subscribe=function(e,t){var n=this.channels[e];n||(n=[],this.channels[e]=n),n.push(t)},r.prototype.unsubscribe=function(e,t){var n=this.channels[e];if(n){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this.channels[e])}},e.exports=r},function(e,t){function n(e,t,n){var r;return r=t?new i(e,t):new i(e)}var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;e.exports=i?n:null,i&&(n.prototype=i.prototype)},function(e,t,n){var r;(function(i){!function(o){function s(){var e=o.crypto||o.msCrypto;if(!h&&e&&e.getRandomValues)try{var t=new Uint8Array(16);v=h=function(){return e.getRandomValues(t),t},h()}catch(n){}if(!h){var r=new Array(16);d=h=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function a(){try{var e=n(71).randomBytes;p=h=e&&function(){return e(16)},h()}catch(t){}}function c(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>i&&(t[r+i++]=y[e])});16>i;)t[r+i++]=0;return t}function u(e,t){var n=t||0,r=g;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function f(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var o=null!=e.clockseq?e.clockseq:E,s=null!=e.msecs?e.msecs:(new Date).getTime(),a=null!=e.nsecs?e.nsecs:x+1,c=s-k+(a-x)/1e4;if(0>c&&null==e.clockseq&&(o=o+1&16383),(0>c||s>k)&&null==e.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");k=s,x=a,E=o,s+=122192928e5;var f=(1e4*(268435455&s)+a)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=255&f;var l=s/4294967296*1e4&268435455;i[r++]=l>>>8&255,i[r++]=255&l,i[r++]=l>>>24&15|16,i[r++]=l>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var h=e.node||w,d=0;6>d;d++)i[r+d]=h[d];return t?t:u(i)}function l(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new _(16):null,e=null),e=e||{};var i=e.random||(e.rng||h)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;16>o;o++)t[r+o]=i[o];return t||u(i)}var h,d,p,v;o?s():a();for(var _="function"==typeof i?i:Array,g=[],y={},m=0;256>m;m++)g[m]=(m+256).toString(16).substr(1),y[g[m]]=m;var b=h(),w=[1|b[0],b[1],b[2],b[3],b[4],b[5]],E=16383&(b[6]<<8|b[7]),k=0,x=0,T=l;T.v1=f,T.v4=l,T.parse=c,T.unparse=u,T.BufferClass=_,T._rng=h,T._mathRNG=d,T._nodeRNG=p,T._whatwgRNG=v,"undefined"!=typeof e&&e.exports?e.exports=T:(r=function(){return T}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)))}("undefined"!=typeof window?window:null)}).call(t,n(67).Buffer)},function(e,t,n){e.exports=n(117)},function(e,t,n){var r=n(118)();e.exports=r},function(e,t,n){(function(t){e.exports=function(){function e(e){return void 0===e?!1:e instanceof i}function r(e,t){return e instanceof p?t>=0:!1}function i(e){if("function"!=typeof e)throw new x("the promise constructor requires a resolver function");if(this.constructor!==i)throw new x("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,e!==l&&this._resolveFromResolver(e)}function o(e,t){return s(e,p,t===!0&&e._isBound()?e._boundTo:void 0).promise()}function s(t,n,r){var o=null;return y(t)?o=t:(o=i._cast(t,void 0),o!==t?o._setBoundTo(r):e(o)||(o=null)),null!==o?new n(o,r):{promise:function(){return I("expecting an array, a promise or a thenable")}}}var a=n(119),c=n(120),u=n(122),f=n(125),l=function(){},h={},d={e:null},p=n(126)(i,l),v=n(127)(),_=n(128)(d),g=n(129),y=c.isArray,m=c.errorObj,b=c.tryCatch1,w=c.tryCatch2,E=c.tryCatchApply,k=f.RangeError,x=f.TypeError,T=f.CancellationError,S=f.TimeoutError,A=f.RejectionError,O=f.originatesFromRejection,C=f.markAsOriginatingFromRejection,R=f.canAttach,N=c.thrower,I=n(130)(i),P=function(){return new x("circular promise resolution chain")};i.prototype.bind=function(e){var t=new i(l);return t._setTrace(this),t._follow(this),t._setBoundTo(e),this._cancellable()&&(t._setCancellable(),t._cancellationParent=this),t},i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;t-1>n;++n){var o=arguments[n];if("function"!=typeof o){var s=new x("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(s),void u.invoke(this._reject,this,s)}r[i++]=o}r.length=i,e=arguments[n],this._resetTrace();var a=new _(r,e,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,e,void 0,void 0,void 0)},i.prototype.then=function(e,t,n){return this._then(e,t,n,void 0,void 0)},i.prototype.done=function(e,t,n){var r=this._then(e,t,n,void 0,void 0);r._setIsFinal()},i.prototype.spread=function(e,t){return this._then(e,t,void 0,h,void 0)},i.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},i.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this._settledValue,e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this._settledValue,e.isRejected=!0),e},i.prototype.all=function(){return o(this,!0)},i.is=e,i.all=function(e){return o(e,!1)},i.join=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;++n)t[n]=arguments[n];return s(t,p,void 0).promise()},i.resolve=i.fulfilled=function(e){var t=new i(l);return t._setTrace(void 0),t._tryFollow(e)?t:(t._cleanValues(),t._setFulfilled(),t._settledValue=e,t)},i.reject=i.rejected=function(e){var t=new i(l);if(t._setTrace(void 0),C(e),t._cleanValues(),t._setRejected(),t._settledValue=e,!R(e)){var n=new Error(e+"");t._setCarriedStackTrace(n)}return t._ensurePossibleRejectionHandled(),t},i.prototype.error=function(e){return this.caught(O,e)},i.prototype._resolveFromSyncValue=function(e){if(e===m)this._cleanValues(),this._setRejected(),this._settledValue=e.e,this._ensurePossibleRejectionHandled();else{var t=i._cast(e,void 0);t instanceof i?this._follow(t):(this._cleanValues(),this._setFulfilled(),this._settledValue=e)}},i.method=function(e){if("function"!=typeof e)throw new x("fn must be a function");return function(){var t;switch(arguments.length){case 0:t=b(e,this,void 0);break;case 1:t=b(e,this,arguments[0]);break;case 2:t=w(e,this,arguments[0],arguments[1]);break;default:for(var n=arguments.length,r=new Array(n),o=0;n>o;++o)r[o]=arguments[o];t=E(e,r,this)}var s=new i(l);return s._setTrace(void 0),s._resolveFromSyncValue(t),s}},i.attempt=i["try"]=function(e,t,n){if("function"!=typeof e)return I("fn must be a function");var r=y(t)?E(e,t,n):b(e,n,t),o=new i(l);return o._setTrace(void 0),o._resolveFromSyncValue(r),o},i.defer=i.pending=function(){var e=new i(l);return e._setTrace(void 0),new g(e)},i.bind=function(e){var t=new i(l);return t._setTrace(void 0),t._setFulfilled(),t._setBoundTo(e),t},i.cast=function(e){var t=i._cast(e,void 0);return t instanceof i?t:i.resolve(t)},i.onPossiblyUnhandledRejection=function(e){v.possiblyUnhandledRejection="function"==typeof e?e:void 0};var B;i.onUnhandledRejectionHandled=function(e){B="function"==typeof e?e:void 0};var j=!("undefined"==typeof t||"string"!=typeof t.execPath||"object"!==_typeof(t.env)||!t.env.BLUEBIRD_DEBUG&&"development"!==t.env.NODE_ENV);i.longStackTraces=function(){if(u.haveItemsQueued()&&j===!1)throw new Error("cannot enable long stack traces after promises have been created");j=v.isSupported()},i.hasLongStackTraces=function(){return j&&v.isSupported()},i.prototype._setProxyHandlers=function(e,t){var n=this._length();if(n>=524282&&(n=0,this._setLength(0)),0===n)this._promise0=t,this._receiver0=e;else{var r=n-5;this[r+3]=t,this[r+4]=e,this[r+0]=this[r+1]=this[r+2]=void 0}this._setLength(n+5)},i.prototype._proxyPromiseArray=function(e,t){this._setProxyHandlers(e,t)},i.prototype._proxyPromise=function(e){e._setProxied(),this._setProxyHandlers(e,-1)},i.prototype._then=function(e,t,n,r,o){var s=void 0!==o,a=s?o:new i(l);if(j&&!s){var c=this._peekContext()===this._traceParent;a._traceParent=c?this._traceParent:this,a._setTrace(this)}!s&&this._isBound()&&a._setBoundTo(this._boundTo);var f=this._addCallbacks(e,t,n,a,r);return!s&&this._cancellable()&&(a._setCancellable(),a._cancellationParent=this),this.isResolved()&&u.invoke(this._queueSettleAt,this,f),a},i.prototype._length=function(){return 524287&this._bitField},i.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},i.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},i.prototype._setLength=function(e){this._bitField=-524288&this._bitField|524287&e},i.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},i.prototype._setRejected=function(){this._bitField=134217728|this._bitField},i.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},i.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},i.prototype._isFinal=function(){return(33554432&this._bitField)>0},i.prototype._cancellable=function(){return(67108864&this._bitField)>0},i.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},i.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},i.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},i.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},i.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},i.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},i.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},i.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},i.prototype._setCarriedStackTrace=function(e){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=e},i.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},i.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},i.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},i.prototype._receiverAt=function(e){var t;return t=0===e?this._receiver0:this[e+4-5],this._isBound()&&void 0===t?this._boundTo:t},i.prototype._promiseAt=function(e){return 0===e?this._promise0:this[e+3-5]},i.prototype._fulfillmentHandlerAt=function(e){return 0===e?this._fulfillmentHandler0:this[e+0-5]},i.prototype._rejectionHandlerAt=function(e){return 0===e?this._rejectionHandler0:this[e+1-5]},i.prototype._unsetAt=function(e){0===e?(this._rejectionHandler0=this._progressHandler0=this._promise0=this._receiver0=void 0,this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0)):this[e-5+0]=this[e-5+1]=this[e-5+2]=this[e-5+3]=this[e-5+4]=void 0},i.prototype._resolveFromResolver=function(e){function t(e){r._tryFollow(e)||r._fulfill(e)}function n(e){var t=R(e)?e:new Error(e+"");r._attachExtraTrace(t),C(e),r._reject(e,t===e?void 0:t)}var r=this;this._setTrace(void 0),this._pushContext();var i=w(e,void 0,t,n);if(this._popContext(),void 0!==i&&i===m){var o=i.e,s=R(o)?o:new Error(o+"");r._reject(o,s)}},i.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=524282&&(o=0,this._setLength(0)),0===o)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof e||this._isCarryingStackTrace()||(this._fulfillmentHandler0=e),"function"==typeof t&&(this._rejectionHandler0=t),"function"==typeof n&&(this._progressHandler0=n);else{var s=o-5;this[s+3]=r,this[s+4]=i,this[s+0]="function"==typeof e?e:void 0,this[s+1]="function"==typeof t?t:void 0,this[s+2]="function"==typeof n?n:void 0}return this._setLength(o+5),o},i.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=8388608|this._bitField,this._boundTo=e):this._bitField=-8388609&this._bitField},i.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},i.prototype._spreadSlowCase=function(e,t,n,r){var i=s(n,p,r).promise()._then(function(){return e.apply(r,arguments)},void 0,void 0,h,void 0);t._follow(i)},i.prototype._callSpread=function(t,n,r,o){var s=this._isBound()?this._boundTo:void 0;if(y(r))for(var a=0,c=r.length;c>a;++a)if(e(i._cast(r[a],void 0)))return void this._spreadSlowCase(t,n,r,s);return o&&n._pushContext(),E(t,r,s)},i.prototype._callHandler=function(e,t,n,r,i){var o;return t!==h||this.isRejected()?(i&&n._pushContext(),o=b(e,t,r)):o=this._callSpread(e,n,r,i),i&&n._popContext(),o},i.prototype._settlePromiseFromHandler=function(t,n,r,o){if(!e(o))return void t.call(n,r,o);var s=j,a=this._callHandler(t,n,o,r,s);if(!o._isFollowing())if(a===m||a===o||a===d){var c=a===o?P():a.e,u=R(c)?c:new Error(c+"");a!==d&&o._attachExtraTrace(u),o._rejectUnchecked(c,u)}else{var f=i._cast(a,o);if(e(f)){if(f.isRejected()&&!f._isCarryingStackTrace()&&!R(f._settledValue)){var u=new Error(f._settledValue+"");o._attachExtraTrace(u),f._setCarriedStackTrace(u)}o._follow(f),f._cancellable()&&(o._cancellationParent=f,o._setCancellable())}else o._fulfillUnchecked(a)}},i.prototype._follow=function(e){this._setFollowing(),e.isPending()?(e._cancellable()&&(this._cancellationParent=e,this._setCancellable()),e._proxyPromise(this)):e.isFulfilled()?this._fulfillUnchecked(e._settledValue):this._rejectUnchecked(e._settledValue,e._getCarriedStackTrace()),e._isRejectionUnhandled()&&e._unsetRejectionIsUnhandled(),j&&null==e._traceParent&&(e._traceParent=this)},i.prototype._tryFollow=function(t){if(this._isFollowingOrFulfilledOrRejected()||t===this)return!1;var n=i._cast(t,void 0);return e(n)?(this._follow(n),!0):!1},i.prototype._resetTrace=function(){j&&(this._trace=new v(void 0===this._peekContext()))},i.prototype._setTrace=function(e){if(j){var t=this._peekContext();this._traceParent=t;var n=void 0===t;void 0!==e&&e._traceParent===t?this._trace=e._trace:this._trace=new v(n)}return this},i.prototype._attachExtraTrace=function(e){if(j){var t=this,n=e.stack;n="string"==typeof n?n.split("\n"):[];for(var r=1;null!=t&&null!=t._trace;)n=v.combine(n,t._trace.stack.split("\n")),t=t._traceParent;var i=Error.stackTraceLimit+r,o=n.length;o>i&&(n.length=i),n.length<=r?e.stack="(No stack trace)":e.stack=n.join("\n")}},i.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},i.prototype._fulfill=function(e){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(e)},i.prototype._reject=function(e,t){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(e,t)},i.prototype._settlePromiseAt=function(e){var t=this.isFulfilled()?this._fulfillmentHandlerAt(e):this._rejectionHandlerAt(e),n=this._settledValue,o=this._receiverAt(e),s=this._promiseAt(e);if("function"==typeof t)this._settlePromiseFromHandler(t,o,n,s);else{var a=!1,c=this.isFulfilled();void 0!==o&&(o instanceof i&&o._isProxied()?(o._unsetProxied(),c?o._fulfillUnchecked(n):o._rejectUnchecked(n,this._getCarriedStackTrace()),a=!0):r(o,s)&&(c?o._promiseFulfilled(n,s):o._promiseRejected(n,s),a=!0)),a||(c?s._fulfill(n):s._reject(n,this._getCarriedStackTrace()))}e>=256&&this._queueGC()},i.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},i.prototype._setProxied=function(){this._bitField=4194304|this._bitField},i.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},i.prototype._isGcQueued=function(){return-1073741824===(-1073741824&this._bitField)},i.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},i.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},i.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),u.invokeLater(this._gc,this,void 0))},i.prototype._gc=function(){var e=this._length();this._unsetAt(0);for(var t=0;e>t;t++)delete this[t];this._setLength(0),this._unsetGcQueued()},i.prototype._queueSettleAt=function(e){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),u.invoke(this._settlePromiseAt,this,e)},i.prototype._fulfillUnchecked=function(e){if(this.isPending()){if(e===this){var t=P();return this._attachExtraTrace(t),this._rejectUnchecked(t,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=e;var n=this._length();n>0&&u.invoke(this._settlePromises,this,n)}},i.prototype._rejectUncheckedCheckError=function(e){var t=R(e)?e:new Error(e+"");this._rejectUnchecked(e,t===e?void 0:t)},i.prototype._rejectUnchecked=function(e,t){if(this.isPending()){if(e===this){var n=P();return this._attachExtraTrace(n),this._rejectUnchecked(n)}if(this._cleanValues(),this._setRejected(),this._settledValue=e,this._isFinal())return void u.invokeLater(N,void 0,void 0===t?e:t);var r=this._length();void 0!==t&&this._setCarriedStackTrace(t),r>0?u.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}},i.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},i.prototype._settlePromises=function(){for(var e=this._length(),t=0;e>t;t+=5)this._settlePromiseAt(t)},i.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==v.possiblyUnhandledRejection&&u.invokeLater(this._notifyUnhandledRejection,this,void 0)},i.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof B&&u.invokeLater(B,void 0,this)},i.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue,t=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==t&&(this._unsetCarriedStackTrace(),e=t),"function"==typeof v.possiblyUnhandledRejection&&v.possiblyUnhandledRejection(e,this)}};var L=[];i.prototype._peekContext=function(){var e=L.length-1;return e>=0?L[e]:void 0},i.prototype._pushContext=function(){j&&L.push(this)},i.prototype._popContext=function(){j&&L.pop()};var M=a.Promise;return i.noConflict=function(){return a.Promise===i&&(a.Promise=M),i},v.isSupported()||(i.longStackTraces=function(){},j=!1),i._makeSelfResolutionError=P,n(131)(i,d),n(132)(i),n(133)(i,l),n(134)(i),i.RangeError=k,i.CancellationError=T,i.TimeoutError=S,i.TypeError=x,i.RejectionError=A,c.toFastProperties(i),c.toFastProperties(i.prototype),n(135)(i,l),n(136)(i,s,p),n(138)(i,l),n(139)(i),n(140)(i,s,p,I),n(141)(i,I,l),n(143)(i,p,l,I),n(144)(i),n(145)(i,l),n(146)(i,p),n(148)(i,s,p,I,l),n(149)(i,s,p),n(151)(i,s,p,I),n(152)(i,r),n(153)(i,l),i.prototype=i.prototype,i}}).call(t,n(79))},function(e,t){(function(t){e.exports=function(){if(void 0!==this)return this;try{return t}catch(e){}try{return window}catch(e){}try{return self}catch(e){}}()}).call(t,function(){return this}())},function(e,t,n){function r(e){"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("Bluebird: "+e)}function i(e,t,n){try{return e.call(t,n)}catch(r){return m.e=r,m}}function o(e,t,n,r){try{return e.call(t,n,r)}catch(i){return m.e=i,m}}function s(e,t,n){try{return e.apply(n,t)}catch(r){return m.e=r,m}}function a(e){return"string"==typeof e?e:""+e}function c(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function u(e){return!c(e)}function f(e){return c(e)?new Error(a(e)):e}function l(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=e[n];return i[n]=t,i}function h(e,t,n){if(c(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return _.defineProperty(e,t,r),e}function d(e){throw e}function p(e){function t(){}return t.prototype=e,t}var v=n(119),_=n(121),g=function(){try{var e={};return _.defineProperty(e,"f",{get:function(){return 3}}),3===e.f}catch(t){return!1}}(),y=function(){return"undefined"!=typeof window&&null!==window&&"undefined"!=typeof window.document&&"undefined"!=typeof navigator&&null!==navigator&&"string"==typeof navigator.appName&&window===v?!1:!0}(),m={e:{}},b=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},w=function(){return"string"!==this}.call("string"),E={thrower:d,isArray:_.isArray,haveGetters:g,notEnumerableProp:h,isPrimitive:c,isObject:u,canEvaluate:y,deprecated:r,errorObj:m,tryCatch1:i,tryCatch2:o,tryCatchApply:s,inherits:b,withAppended:l,asString:a,maybeWrapAsError:f,wrapsPrimitiveReceiver:w,toFastProperties:p};e.exports=E},function(e,t){var n=function(){return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,s=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},a=function(e,t,n){return e[t]=n.value,e},c=function(e){return e},u=function(e){try{return Object(e).constructor.prototype}catch(t){return o}},f=function(e){try{return"[object Array]"===i.call(e)}catch(t){return!1}};e.exports={isArray:f,keys:s,defineProperty:a,freeze:c,getPrototypeOf:u,isES5:n}}},function(e,t,n){function r(){this._isTickUsed=!1,this._length=0,this._lateBuffer=new o,this._functionBuffer=new o(75e3);var e=this;this.consumeFunctionBuffer=function(){e._consumeFunctionBuffer()}}var i=n(123),o=n(124),s=n(120).errorObj,a=n(120).tryCatch1,c=n(119).process;r.prototype.haveItemsQueued=function(){return this._length>0},r.prototype.invokeLater=function(e,t,n){void 0===c||null==c.domain||e.domain||(e=c.domain.bind(e)),this._lateBuffer.push(e,t,n),this._queueTick()},r.prototype.invoke=function(e,t,n){void 0===c||null==c.domain||e.domain||(e=c.domain.bind(e));var r=this._functionBuffer;r.push(e,t,n),this._length=r.length(),this._queueTick()},r.prototype._consumeFunctionBuffer=function(){for(var e=this._functionBuffer;e.length()>0;){var t=e.shift(),n=e.shift(),r=e.shift();t.call(n,r)}this._reset(),this._consumeLateBuffer()},r.prototype._consumeLateBuffer=function(){for(var e=this._lateBuffer;e.length()>0;){var t=e.shift(),n=e.shift(),r=e.shift(),i=a(t,n,r);if(i===s){if(this._queueTick(),null==t.domain)throw i.e;t.domain.emit("error",i.e)}}},r.prototype._queueTick=function(){this._isTickUsed||(i(this.consumeFunctionBuffer),this._isTickUsed=!0)},r.prototype._reset=function(){this._isTickUsed=!1,this._length=0},e.exports=new r},function(e,t,n){(function(t){var r,i=n(119);if("undefined"!=typeof t&&null!==t&&"function"==typeof t.cwd&&"function"==typeof t.nextTick&&"string"==typeof t.version)r=function(e){t.nextTick(e)};else if("function"!=typeof i.MutationObserver&&"function"!=typeof i.WebkitMutationObserver&&"function"!=typeof i.WebKitMutationObserver||"undefined"==typeof document||"function"!=typeof document.createElement)if("function"==typeof i.postMessage&&"function"!=typeof i.importScripts&&"function"==typeof i.addEventListener&&"function"==typeof i.removeEventListener){var o="bluebird_message_key_"+Math.random();r=function(){function e(e){if(e.source===i&&e.data===o){var n=t;t=void 0,n()}}var t=void 0;return i.addEventListener("message",e,!1),function(e){t=e,i.postMessage(o,"*")}}()}else r="function"==typeof i.MessageChannel?function(){var e=void 0,t=new i.MessageChannel;return t.port1.onmessage=function(){var t=e;e=void 0,t()},function(n){e=n,t.port2.postMessage(null)}}():i.setTimeout?function(e){setTimeout(e,4)}:function(e){e()};else r=function(){var e=i.MutationObserver||i.WebkitMutationObserver||i.WebKitMutationObserver,t=document.createElement("div"),n=void 0,r=new e(function(){var e=n;n=void 0,e()});return r.observe(t,{attributes:!0}),function(e){n=e,t.setAttribute("class","foo")}}();e.exports=r}).call(t,n(79))},function(e,t){function n(e,t,n,r,i){for(var o=0;i>o;++o)n[o+r]=e[o+t]}function r(e){return e>>>=0,e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e+1}function i(e){return"number"!=typeof e?16:r(Math.min(Math.max(16,e),1073741824))}function o(e){this._capacity=i(e),this._length=0,this._front=0,this._makeCapacity()}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},o.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},o.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},o.prototype.length=function(){return this._length},o.prototype._makeCapacity=function(){for(var e=this._capacity,t=0;e>t;++t)this[t]=void 0},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<3)},o.prototype._resizeTo=function(e){var t=this._front,r=this._capacity,i=new Array(r),o=this.length();if(n(this,0,i,0,r),this._capacity=e,this._makeCapacity(),this._front=0,r>=t+o)n(i,t,this,0,o);else{var s=o-(t+o&r-1);n(i,t,this,0,s),n(i,0,this,s,o-s)}},e.exports=o},function(e,t,n){function r(e){try{d(e,"isAsync",!0)}catch(t){}}function i(e){return null==e?!1:e instanceof c||e.isAsync===!0}function o(e){return e instanceof p}function s(e){return o(e)}function a(e,t){function n(r){return this instanceof n?(this.message="string"==typeof r?r:t,this.name=e,void(p.captureStackTrace&&p.captureStackTrace(this,this.constructor))):new n(r)}return h(n,p),n}function c(e){this.name="RejectionError",this.message=e,this.cause=e,this.isAsync=!0,e instanceof p?(this.message=e.message,this.stack=e.stack):p.captureStackTrace&&p.captureStackTrace(this,this.constructor)}var u=n(119),f=n(121).freeze,l=n(120),h=l.inherits,d=l.notEnumerableProp,p=u.Error,v=u.TypeError;"function"!=typeof v&&(v=a("TypeError","type error"));var _=u.RangeError;"function"!=typeof _&&(_=a("RangeError","range error"));var g=a("CancellationError","cancellation error"),y=a("TimeoutError","timeout error");h(c,p);var m="__BluebirdErrorTypes__",b=u[m];b||(b=f({CancellationError:g,TimeoutError:y,RejectionError:c}),d(u,m,b)),e.exports={Error:p,TypeError:v,RangeError:_,CancellationError:b.CancellationError,RejectionError:b.RejectionError,TimeoutError:b.TimeoutError,originatesFromRejection:i,markAsOriginatingFromRejection:r,canAttach:s}},function(e,t,n){e.exports=function(e,t){function r(e){switch(e){case-1:return;case-2:return[];case-3:return{};
}}function i(n,r){var i=this._promise=new e(t),o=void 0;n instanceof e&&(o=n,n._cancellable()&&(i._setCancellable(),i._cancellationParent=n),n._isBound()&&i._setBoundTo(r)),i._setTrace(o),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var o=n(125).canAttach,s=n(120),a=n(122),c={}.hasOwnProperty,u=s.isArray;return i.PropertiesPromiseArray=function(){},i.prototype.length=function(){return this._length},i.prototype.promise=function(){return this._promise},i.prototype._init=function(t,n){var o=this._values;if(o instanceof e){if(!o.isFulfilled())return o.isPending()?void o._then(this._init,this._reject,void 0,this,n):(o._unsetRejectionIsUnhandled(),void this._reject(o._settledValue));if(o=o._settledValue,!u(o)){var s=new e.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(s)}this._values=o}if(0===o.length)return void this._resolve(r(n));var f,l=o.length,h=l;f=this instanceof i.PropertiesPromiseArray?this._values:new Array(l);for(var d=!1,p=0;l>p;++p){var v=o[p];if(void 0!==v||c.call(o,p)){var _=e._cast(v,void 0);_ instanceof e?_.isPending()?_._proxyPromiseArray(this,p):(_._unsetRejectionIsUnhandled(),d=!0):d=!0,f[p]=_}else h--}if(0===h)return void(-2===n?this._resolve(f):this._resolve(r(n)));if(this._values=f,this._length=h,d){var g=h===l?this._scanDirectValues:this._scanDirectValuesHoled;a.invoke(g,this,l)}},i.prototype._settlePromiseAt=function(t){var n=this._values[t];n instanceof e?n.isFulfilled()?this._promiseFulfilled(n._settledValue,t):n.isRejected()&&this._promiseRejected(n._settledValue,t):this._promiseFulfilled(n,t)},i.prototype._scanDirectValuesHoled=function(e){for(var t=0;e>t&&!this._isResolved();++t)c.call(this._values,t)&&this._settlePromiseAt(t)},i.prototype._scanDirectValues=function(e){for(var t=0;e>t&&!this._isResolved();++t)this._settlePromiseAt(t)},i.prototype._isResolved=function(){return null===this._values},i.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},i.prototype.__hardReject__=i.prototype._reject=function(e){this._values=null;var t=o(e)?e:new Error(e+"");this._promise._attachExtraTrace(t),this._promise._reject(e,t)},i.prototype._promiseProgressed=function(e,t){this._isResolved()||this._promise._progress({index:t,value:e})},i.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){this._values[t]=e;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)}},i.prototype._promiseRejected=function(e,t){this._isResolved()||(this._totalResolved++,this._reject(e))},i}},function(e,t,n){e.exports=function(){function e(e){var n;if("function"==typeof e)n="[function "+(e.name||"anonymous")+"]";else{n=e.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(n))try{var i=JSON.stringify(e);n=i}catch(o){}0===n.length&&(n="(empty array)")}return"(<"+t(n)+">, no stack trace)"}function t(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function r(e,t){this.captureStackTrace(r,t)}var i=n(120).inherits,o=n(121).defineProperty,s=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),a=null,c=null;i(r,Error),r.prototype.captureStackTrace=function(e,t){u(this,e,t)},r.possiblyUnhandledRejection=function(e){if("object"===("undefined"==typeof console?"undefined":_typeof(console))){var t;if("object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e){var n=e.stack;t="Possibly unhandled "+c(n,e)}else t="Possibly unhandled "+String(e);"function"==typeof console.error||"object"===_typeof(console.error)?console.error(t):("function"==typeof console.log||"object"===_typeof(console.log))&&console.log(t)}},r.combine=function(e,t){for(var n=e.length-1,r=t.length-1;r>=0;--r){var i=t[r];if(e[n]!==i)break;e.pop(),n--}e.push("From previous event:");for(var o=e.concat(t),c=[],r=0,u=o.length;u>r;++r)s.test(o[r])||r>0&&!a.test(o[r])&&"From previous event:"!==o[r]||c.push(o[r]);return c},r.isSupported=function(){return"function"==typeof u};var u=function f(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){a=/^\s*at\s*/,c=function(t,n){return"string"==typeof t?t:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:e(n)};var t=Error.captureStackTrace;return function(e,n){t(e,n)}}var n=new Error;if("string"==typeof n.stack&&"function"==typeof"".startsWith&&n.stack.startsWith("stackDetection@")&&"stackDetection"===f.name){o(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),a=/@/;var r=/[@\n]/;return c=function(t,n){return"string"==typeof t?n.name+". "+n.message+"\n"+t:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:e(n)},function(e){for(var t=(new Error).stack,n=t.split(r),i=n.length,o="",s=0;i>s;s+=2)o+=n[s],o+="@",o+=n[s+1],o+="\n";e.stack=o}}return c=function(t,n){return"string"==typeof t?t:"object"!==("undefined"==typeof n?"undefined":_typeof(n))&&"function"!=typeof n||void 0===n.name||void 0===n.message?e(n):n.name+". "+n.message},null}();return r}},function(e,t,n){e.exports=function(e){function t(e,t,n){this._instances=e,this._callback=t,this._promise=n}function r(e,t){var n={},r=s(e,n,t);if(r===a)return r;var i=c(n);return i.length?(a.e=new u("Catch filter must inherit from Error or be a simple predicate function"),a):r}var i=n(120),o=n(125),s=i.tryCatch1,a=i.errorObj,c=n(121).keys,u=o.TypeError;return t.prototype.doFilter=function(t){for(var n=this._callback,i=this._promise,c=i._isBound()?i._boundTo:void 0,u=0,f=this._instances.length;f>u;++u){var l=this._instances[u],h=l===Error||null!=l&&l.prototype instanceof Error;if(h&&t instanceof l){var d=s(n,c,t);return d===a?(e.e=d.e,e):d}if("function"==typeof l&&!h){var p=r(l,t);if(p===a){var v=o.canAttach(a.e)?a.e:new Error(a.e+"");this._promise._attachExtraTrace(v),t=a.e;break}if(p){var d=s(n,c,t);return d===a?(e.e=d.e,e):d}}}return e.e=t,e},t}},function(e,t,n){function r(e){return e instanceof Error&&p.getPrototypeOf(e)===Error.prototype}function i(e){var t;return t=r(e)?new l(e):e,u.markAsOriginatingFromRejection(t),t}function o(e){function t(t,n){if(null!==e){if(t){var r=i(c(t));e._attachExtraTrace(r),e._reject(r)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;o>a;++a)s[a-1]=arguments[a];e._fulfill(s)}else e._fulfill(n);e=null}}return t}var s,a=n(120),c=a.maybeWrapAsError,u=n(125),f=u.TimeoutError,l=u.RejectionError,h=n(122),d=a.haveGetters,p=n(121);if(s=d?function(e){this.promise=e}:function(e){this.promise=e,this.asCallback=o(e),this.callback=this.asCallback},d){var v={get:function(){return o(this.promise)}};p.defineProperty(s.prototype,"asCallback",v),p.defineProperty(s.prototype,"callback",v)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(e){var t=this.promise;if(void 0===t||void 0===t._tryFollow)throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");t._tryFollow(e)||h.invoke(t._fulfill,t,e)},s.prototype.reject=function(e){var t=this.promise;if(void 0===t||void 0===t._attachExtraTrace)throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");u.markAsOriginatingFromRejection(e);var n=u.canAttach(e)?e:new Error(e+"");t._attachExtraTrace(n),h.invoke(t._reject,t,e),n!==e&&h.invoke(this._setCarriedStackTrace,this,n)},s.prototype.progress=function(e){h.invoke(this.promise._progress,this.promise,e)},s.prototype.cancel=function(){h.invoke(this.promise.cancel,this.promise,void 0)},s.prototype.timeout=function(){this.reject(new f("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},s.prototype._setCarriedStackTrace=function(e){this.promise.isRejected()&&this.promise._setCarriedStackTrace(e)},e.exports=s},function(e,t,n){e.exports=function(e){function t(t){var n=new r(t),i=e.rejected(n),o=i._peekContext();return null!=o&&o._attachExtraTrace(n),i}var r=n(125).TypeError;return t}},function(e,t,n){e.exports=function(e,t){function r(){return this}function i(){throw this}function o(e){return function(){return e}}function s(e){return function(){throw e}}function a(e,t,n){var a;return a=l&&h(t)?n?o(t):s(t):n?r:i,e._then(a,d,void 0,t,void 0)}function c(n){var r=this.promise,i=this.handler,o=r._isBound()?i.call(r._boundTo):i();if(void 0!==o){var s=e._cast(o,void 0);if(s instanceof e)return a(s,n,r.isFulfilled())}return r.isRejected()?(t.e=n,t):n}function u(t){var n=this.promise,r=this.handler,i=n._isBound()?r.call(n._boundTo,t):r(t);if(void 0!==i){var o=e._cast(i,void 0);if(o instanceof e)return a(o,t,!0)}return t}var f=n(120),l=f.wrapsPrimitiveReceiver,h=f.isPrimitive,d=f.thrower;e.prototype._passThroughHandler=function(e,t){if("function"!=typeof e)return this.then();var n={promise:this,handler:e};return this._then(t?c:u,t?c:void 0,void 0,n,void 0)},e.prototype.lastly=e.prototype["finally"]=function(e){return this._passThroughHandler(e,!0)},e.prototype.tap=function(e){return this._passThroughHandler(e,!1)}}},function(e,t,n){var r=n(120),i=r.isPrimitive,o=r.wrapsPrimitiveReceiver;e.exports=function(e){var t=function(){return this},n=function(){throw this},r=function(e,t){return 1===t?function(){throw e}:2===t?function(){return e}:void 0};e.prototype["return"]=e.prototype.thenReturn=function(e){return o&&i(e)?this._then(r(e,2),void 0,void 0,void 0,void 0):this._then(t,void 0,void 0,e,void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return o&&i(e)?this._then(r(e,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,e,void 0)}}},function(e,t,n){e.exports=function(e,t){function r(e){try{return e.then}catch(t){return u.e=t,u}}function i(n,i){if(f(n)){if(n instanceof e)return n;if(o(n)){var a=new e(t);return a._setTrace(void 0),n._then(a._fulfillUnchecked,a._rejectUncheckedCheckError,a._progressUnchecked,a,null),a._setFollowing(),a}var l=r(n);if(l===u)return void 0!==i&&c(l.e)&&i._attachExtraTrace(l.e),e.reject(l.e);if("function"==typeof l)return s(n,l,i)}return n}function o(e){return l.call(e,"_promise0")}function s(t,n,r){function i(n){if(!u){if(u=!0,t===n){var i=e._makeSelfResolutionError();return void 0!==r&&r._attachExtraTrace(i),void a.promise._reject(i,void 0)}a.resolve(n)}}function o(e){if(!u){u=!0;var t=c(e)?e:new Error(e+"");void 0!==r&&r._attachExtraTrace(t),a.promise._reject(e,t)}}function s(e){if(!u){var t=a.promise;"function"==typeof t._progress&&t._progress(e)}}var a=e.defer(),u=!1;try{n.call(t,i,o,s)}catch(f){if(!u){u=!0;var l=c(f)?f:new Error(f+"");void 0!==r&&r._attachExtraTrace(l),a.promise._reject(f,l)}}return a.promise}var a=n(120),c=n(125).canAttach,u=a.errorObj,f=a.isObject,l={}.hasOwnProperty;e._cast=i}},function(e,t){e.exports=function(e){function t(e){void 0!==e?(this._bitField=e._bitField,this._settledValue=e.isResolved()?e._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}t.prototype.isFulfilled=e.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},t.prototype.isRejected=e.prototype.isRejected=function(){return(134217728&this._bitField)>0},t.prototype.isPending=e.prototype.isPending=function(){return 0===(402653184&this._bitField)},t.prototype.value=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},t.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},t.prototype.isResolved=e.prototype.isResolved=function(){return(402653184&this._bitField)>0},e.prototype.inspect=function(){return new t(this)},e.PromiseInspection=t}},function(e,t,n){var r=n(119),i=function(e,t){for(var n=arguments.length,i=new Array(n-2),o=2;n>o;++o)i[o-2]=arguments[o];r.setTimeout(function(){e.apply(void 0,i)},t)};e.exports=function(e,t){var r=(n(120),n(125)),o=(n(130)(e),e.TimeoutError),s=function(e,t,n){if(e.isPending()){"string"!=typeof t&&(t="operation timed out after "+n+" ms");var i=new o(t);r.markAsOriginatingFromRejection(i),e._attachExtraTrace(i),e._rejectUnchecked(i)}},a=function(e,t){t._fulfill(e)},c=e.delay=function(n,r){void 0===r&&(r=n,n=void 0),r=+r;var o=e._cast(n,void 0),s=new e(t);return o instanceof e?(o._isBound()&&s._setBoundTo(o._boundTo),o._cancellable()&&(s._setCancellable(),s._cancellationParent=o),s._setTrace(o),s._follow(o),s.then(function(t){return e.delay(t,r)})):(s._setTrace(void 0),i(a,r,n,s),s)};e.prototype.delay=function(e){return c(this,e)},e.prototype.timeout=function(n,r){n=+n;var o=new e(t);return o._setTrace(this),this._isBound()&&o._setBoundTo(this._boundTo),this._cancellable()&&(o._setCancellable(),o._cancellationParent=this),o._follow(this),i(s,n,o,r,n),o}}},function(e,t,n){e.exports=function(e,t,r){function i(e,n){var r=t(e,o,n===!0&&e._isBound()?e._boundTo:void 0),i=r.promise();return i.isRejected()?i:(r.setHowMany(1),r.setUnwrap(),r.init(),i)}var o=n(137)(r);e.any=function(e){return i(e,!1)},e.prototype.any=function(){return i(this,!0)}}},function(e,t,n){e.exports=function(e){function t(e,t){this.constructor$(e,t),this._howMany=0,this._unwrap=!1,this._initialized=!1}var r=n(120),i=n(125).RangeError,o=r.inherits,s=r.isArray;return o(t,e),t.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-2);var e=s(this._values);if(this._holes=e?this._values.length-this.length():0,!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()){var t="(Promise.some) input array contains less than "+this._howMany+" promises";this._reject(new i(t))}}},t.prototype.init=function(){this._initialized=!0,this._init()},t.prototype.setUnwrap=function(){this._unwrap=!0},t.prototype.howMany=function(){return this._howMany},t.prototype.setHowMany=function(e){this._isResolved()||(this._howMany=e)},t.prototype._promiseFulfilled=function(e){this._isResolved()||(this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values)))},t.prototype._promiseRejected=function(e){this._isResolved()||(this._addRejected(e),this.howMany()>this._canPossiblyFulfill()&&(this._values.length===this.length()?this._reject([]):this._reject(this._values.slice(this.length()+this._holes))))},t.prototype._fulfilled=function(){return this._totalResolved},t.prototype._rejected=function(){return this._values.length-this.length()-this._holes},t.prototype._addRejected=function(e){this._values.push(e)},t.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},t.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},t}},function(e,t,n){e.exports=function(e,t){function r(n,r){var c=e._cast(n,void 0);if(c instanceof e)return s(c);if(!o(n))return i("expecting an array, a promise or a thenable");var u=new e(t);u._setTrace(r),void 0!==r&&(r._isBound()&&u._setBoundTo(r._boundTo),r._cancellable()&&(u._setCancellable(),u._cancellationParent=r));for(var f=u._fulfill,l=u._reject,h=0,d=n.length;d>h;++h){var p=n[h];(void 0!==p||a.call(n,h))&&e.cast(p)._then(f,l,void 0,u,null)}return u}var i=n(130)(e),o=n(120).isArray,s=function(e){return e.then(function(t){return r(t,e)})},a={}.hasOwnProperty;e.race=function(e){return r(e,void 0)},e.prototype.race=function(){return r(this,void 0)}}},function(e,t){e.exports=function(e){function t(e){var t="string"==typeof this?this:""+this;return e[t]}e.prototype.call=function(e){for(var t=arguments.length,n=new Array(t-1),r=1;t>r;++r)n[r-1]=arguments[r];return this._then(function(t){return t[e].apply(t,n)},void 0,void 0,void 0,void 0)},e.prototype.get=function(e){return this._then(t,void 0,void 0,e,void 0)}}},function(e,t,n){e.exports=function(e){function t(t){for(var n=this instanceof e?this._settledValue:this,r=n.length,i=new Array(r),o=0,s=0;r>s;++s)t[s]&&(i[o++]=n[s]);return i.length=o,i}var r=(n(120).isArray,{ref:null});e.filter=function(n,i){return e.map(n,i,r)._then(t,void 0,void 0,r.ref,void 0)},e.prototype.filter=function(e){return this.map(e,r)._then(t,void 0,void 0,r.ref,void 0)}}},function(e,t,n){e.exports=function(e,t,r){var i=n(142)(e,r),o=n(125),s=o.TypeError,a=n(120).deprecated;e.coroutine=function(e){if("function"!=typeof e)throw new s("generatorFunction must be a function");var t=i;return function(){var n=e.apply(this,arguments),r=new t(void 0,void 0);return r._generator=n,r._next(void 0),r.promise()}},e.coroutine.addYieldHandler=i.addYieldHandler,e.spawn=function(n){if(a("Promise.spawn is deprecated. Use Promise.coroutine instead."),"function"!=typeof n)return t("generatorFunction must be a function");var r=new i(n,this),o=r.promise();return r._run(e.spawn),o}}},function(e,t,n){e.exports=function(e,t){function r(t){for(var n=l,i=u,o=e,s=n.length,a=0;s>a;++a){var c=f(n[a],void 0,t);if(c===i)return o.reject(i.e);var h=o._cast(c,r,void 0);if(h instanceof o)return h}return null}function i(n,r){var i=this._promise=new e(t);i._setTrace(void 0),this._generatorFunction=n,this._receiver=r,this._generator=void 0}var o=n(125),s=o.TypeError,a=n(120),c=a.isArray,u=a.errorObj,f=a.tryCatch1,l=[];return i.prototype.promise=function(){return this._promise},i.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},i.prototype._continue=function h(t){if(t===u){this._generator=void 0;var n=o.canAttach(t.e)?t.e:new Error(t.e+"");return this._promise._attachExtraTrace(n),void this._promise._reject(t.e,n)}var i=t.value;if(t.done===!0)this._generator=void 0,this._promise._tryFollow(i)||this._promise._fulfill(i);else{var a=e._cast(i,h,void 0);if(!(a instanceof e)&&(a=c(a)?e.all(a):r(a),null===a))return void this._throw(new s("A value was yielded that could not be treated as a promise"));a._then(this._next,this._throw,void 0,this,null)}},i.prototype._throw=function(e){o.canAttach(e)&&this._promise._attachExtraTrace(e),this._continue(f(this._generator["throw"],this._generator,e))},i.prototype._next=function(e){this._continue(f(this._generator.next,this._generator,e))},i.addYieldHandler=function(e){if("function"!=typeof e)throw new s("fn must be a function");l.push(e)},i}},function(e,t,n){e.exports=function(e,t,r,i){function o(e){return s(e,this[0],this[1],this[2])}function s(t,n,s,c){if("function"!=typeof n)return i("fn must be a function");var u=void 0;s===!0?t._isBound()&&(u=t._boundTo):s!==!1&&(u=s);var f=void 0!==c;if(f&&(c.ref=t),t instanceof e){var h=[n,u,c];return t._then(o,void 0,void 0,h,void 0)}if(!l(t))return i("expecting an array, a promise or a thenable");var d=new e(r);void 0!==u&&d._setBoundTo(u),d._setTrace(void 0);var p=new a(d,n,t,u,f);return p.init(),d}function a(e,t,n,r,i){this.shouldUnwrapItems=i,this.index=0,this.items=n,this.callback=t,this.receiver=r,this.promise=e,this.result=new Array(n.length)}var c=e.all,u=n(120),f=n(125).canAttach,l=u.isArray,h=e._cast,d={};u.inherits(a,t),a.prototype.init=function(){for(var t=this.items,n=t.length,r=this.result,i=!1,o=0;n>o;++o){var s=h(t[o],void 0);s instanceof e?s.isPending()?(r[o]=d,s._proxyPromiseArray(this,o)):s.isFulfilled()?r[o]=s.value():(s._unsetRejectionIsUnhandled(),i||(this.reject(s.reason()),i=!0)):r[o]=s}i||this.iterate()},a.prototype.isResolved=function(){return null===this.promise},a.prototype._promiseProgressed=function(e){this.isResolved()||this.promise._progress(e)},a.prototype._promiseFulfilled=function(e,t){this.isResolved()||(this.result[t]=e,this.shouldUnwrapItems&&(this.items[t]=e),this.index===t&&this.iterate())},a.prototype._promiseRejected=function(e){this.reject(e)},a.prototype.reject=function(e){if(!this.isResolved()){var t=f(e)?e:new Error(e+"");this.promise._attachExtraTrace(t),this.promise._reject(e,t)}},a.prototype.iterate=function(){for(var e=this.index,t=this.items,n=this.result,r=t.length,n=this.result,i=this.receiver,o=this.callback;r>e;++e){var s=n[e];if(s===d)return void(this.index=e);try{n[e]=o.call(i,s,e,r)}catch(a){return this.reject(a)}}this.promise._follow(c(n)),this.items=this.result=this.callback=this.promise=null},e.prototype.map=function(e,t){return s(this,e,!0,t)},e.map=function(e,t,n){return s(e,t,!1,n)}}},function(e,t,n){e.exports=function(e){function t(e){throw e}function r(e,n){var r=this,i=void 0===e?c(r,n,null):a(r,n,null,e);i===u&&s.invokeLater(t,void 0,i.e)}function i(e,n){var r=this,i=c(r,n,e);i===u&&s.invokeLater(t,void 0,i.e)}var o=n(120),s=n(122),a=o.tryCatch2,c=o.tryCatch1,u=o.errorObj;e.prototype.nodeify=function(e){return"function"==typeof e&&this._then(r,i,void 0,e,this._isBound()?this._boundTo:null),this}}},function(e,t,n){e.exports=function(e,t){function r(e){return e.__isPromisified__===!0}function i(e,t){var n=t+"Async"in e;return n?r(e[t+"Async"]):!1}function o(e){for(var t=0;t<e.length;t+=2){var n=e[t];if(E.test(n))for(var r=n.replace(E,""),i=0;i<e.length;i+=2)if(e[i]===r)throw new w("Cannot promisify an API that has normal methods with Async-suffix")}}function s(e){for(var t=[e],n=Math.max(0,e-1-5),r=e-1;r>=n;--r)r!==e&&t.push(r);for(var r=e+1;5>=r;++r)t.push(r);return t}function a(e){for(var t=new Array(e),n=0;n<t.length;++n)t[n]="_arg"+n;return t.join(", ")}function c(e){return"number"==typeof e.length?Math.max(Math.min(e.length,1024),0):0}function u(e){return x.test(e)?"."+e:"['"+e.replace(/(['\\])/g,"\\$1")+"']"}function f(n,r,i,o){function f(e){for(var t=new Array(e),i=0,o=t.length;o>i;++i)t[i]="arguments["+i+"]";var s=e>0?",":"";return"string"==typeof n&&r===d?"this"+u(n)+"("+t.join(",")+s+" fn);break;":(void 0===r?"callback("+t.join(",")+s+" fn);":"callback.call("+(r===d?"this":"receiver")+", "+t.join(",")+s+" fn);")+"break;"}function l(){for(var e="",t=0;t<p.length;++t)e+="case "+p[t]+":"+f(p[t]);return e+="default: var args = new Array(len + 1);var i = 0;for (var i = 0; i < len; ++i) {    args[i] = arguments[i];}args[i] = fn;"+("string"==typeof n?"this"+u(n)+".apply(":"callback.apply(")+(r===d?"this":"receiver")+", args); break;"}var h=Math.max(0,c(o)-1),p=s(h),v="string"==typeof i?i+"Async":"promisified";return x.test(v)||(v="promisified"),new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","var ret = function "+v+"("+a(h)+') {"use strict";var len = arguments.length;var promise = new Promise(INTERNAL);promise._setTrace(void 0);var fn = nodebackForPromise(promise);try {switch(len) {'+l()+"}}catch(e){ var wrapped = maybeWrapAsError(e);promise._attachExtraTrace(wrapped);promise._reject(wrapped);}return promise;}; ret.__isPromisified__ = true; return ret;")(e,n,r,g,y,_,t)}function l(n,r){function i(){var i=r;r===d&&(i=this),"string"==typeof n&&(n=i[n]);var o=new e(t);o._setTrace(void 0);var s=_(o);try{n.apply(i,g(arguments,s))}catch(a){var c=y(a);o._attachExtraTrace(c),o._reject(c)}return o}return i.__isPromisified__=!0,i}function h(e,t,n){if(n){for(var r=k(e),i=0,o=r.length;o>i;i+=2){var s=r[i],a=r[i+1],c=s+"Async";e[c]=T(s,d,s,a)}return p.toFastProperties(e),e}return T(e,t,void 0,e)}var d={},p=n(120),v=n(121),_=n(129)._nodebackForPromise,g=p.withAppended,y=p.maybeWrapAsError,m=p.canEvaluate,b=p.deprecated,w=n(125).TypeError,E=new RegExp("Async$"),k=function(){if(v.isES5){var e=Object.create,t=Object.getOwnPropertyDescriptor;return function(n){for(var s=[],a=e(null),c=n;null!==n;){for(var u=v.keys(n),f=0,l=u.length;l>f;++f){var h=u[f];if(!a[h]){a[h]=!0;var d=t(n,h);null==d||"function"!=typeof d.value||r(d.value)||i(c,h)||s.push(h,d.value)}}n=v.getPrototypeOf(n)}return o(s),s}}return function(e){var t=[];for(var n in e){var s=e[n];"function"!=typeof s||r(s)||i(e,n)||t.push(n,s)}return o(t),t}}(),x=/^[a-z$_][a-z$_0-9]*$/i,T=m?f:l;e.promisify=function(e,t){if("object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e)return b("Promise.promisify for promisifying entire objects is deprecated. Use Promise.promisifyAll instead."),h(e,t,!0);if("function"!=typeof e)throw new w("fn must be a function");return r(e)?e:h(e,arguments.length<2?d:t,!1)},e.promisifyAll=function(e){if("function"!=typeof e&&"object"!==("undefined"==typeof e?"undefined":_typeof(e)))throw new w("the target of promisifyAll must be an object or a function");return h(e,void 0,!0)}}},function(e,t,n){e.exports=function(e,t){function r(t,n){var r,o=e._cast(t,void 0);return a(o)?(o instanceof e?r=o._then(e.props,void 0,void 0,void 0,void 0):(r=new i(o,n===!0&&o._isBound()?o._boundTo:void 0).promise(),n=!1),n===!0&&o._isBound()&&r._setBoundTo(o._boundTo),r):s("cannot await properties of a non-object")}var i=n(147)(e,t),o=n(120),s=n(130)(e),a=o.isObject;e.prototype.props=function(){return r(this,!0)},e.props=function(e){return r(e,!1)}}},function(e,t,n){e.exports=function(e,t){function r(e,t){for(var n=s.keys(e),r=new Array(n.length),i=0,o=r.length;o>i;++i)r[i]=e[n[i]];if(this.constructor$(r,t),!this._isResolved())for(var i=0,o=n.length;o>i;++i)r.push(n[i])}var i=n(120),o=i.inherits,s=n(121);return o(r,t),r.prototype._init=function(){this._init$(void 0,-3)},r.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){for(var r={},i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o];this._resolve(r)}}},r.prototype._promiseProgressed=function(e,t){this._isResolved()||this._promise._progress({key:this._values[t+this.length()],value:e})},t.PropertiesPromiseArray=r,r}},function(e,t){e.exports=function(e,t,n,r,i){function o(t,n,r,o,s){this.promise=new e(i),this.index=n,this.length=o.length,this.items=o,this.callback=t,this.receiver=s,this.accum=r}function s(e,t){var n=this,r=void 0;"function"!=typeof n&&(r=n.receiver,n=n.fn);var i=e.length,s=void 0,a=0;void 0!==t?(s=t,a=0):(a=1,i>0&&(s=e[0]));var c=a;if(c>=i)return s;var u=new o(n,c,s,e,r);return u.iterate(),u.promise}function a(e){var t=this.fn,n=this.initialValue;return s.call(t,e,n)}function c(e,t,n,r){return n._then(function(n){return u(e,t,n,r)},void 0,void 0,void 0,void 0)}function u(i,o,u,f){if("function"!=typeof o)return r("fn must be a function");if(f===!0&&i._isBound()&&(o={fn:o,receiver:i._boundTo}),void 0!==u){if(u instanceof e){if(!u.isFulfilled())return c(i,o,u,f);u=u._settledValue}return t(i,n,f===!0&&i._isBound()?i._boundTo:void 0).promise()._then(a,void 0,void 0,{fn:o,initialValue:u},void 0)}return t(i,n,f===!0&&i._isBound()?i._boundTo:void 0).promise()._then(s,void 0,void 0,o,void 0)}o.prototype.reject=function(e){this.promise._reject(e)},o.prototype.fulfill=function(e,t){this.accum=e,this.index=t+1,this.iterate()},o.prototype.iterate=function(){for(var t=this.index,n=this.length,r=this.items,i=this.accum,o=this.receiver,s=this.callback;n>t;++t)if(i=s.call(o,i,r[t],t,n),i=e._cast(i,void 0),i instanceof e)return void i._then(this.fulfill,this.reject,void 0,this,t);this.promise._fulfill(i)},e.reduce=function(e,t,n){return u(e,t,n,!1)},e.prototype.reduce=function(e,t){return u(this,e,t,!0)}}},function(e,t,n){e.exports=function(e,t,r){function i(e,n){return t(e,o,n===!0&&e._isBound()?e._boundTo:void 0).promise()}var o=n(150)(e,r);e.settle=function(e){return i(e,!1)},e.prototype.settle=function(){return i(this,!0)}}},function(e,t,n){e.exports=function(e,t){function r(e,t){this.constructor$(e,t)}var i=e.PromiseInspection,o=n(120),s=o.inherits;return s(r,t),r.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){var n=new i;n._bitField=268435456,n._settledValue=e,this._promiseResolved(t,n)}},r.prototype._promiseRejected=function(e,t){if(!this._isResolved()){var n=new i;n._bitField=134217728,n._settledValue=e,this._promiseResolved(t,n)}},r}},function(e,t,n){e.exports=function(e,t,r,i){function o(e,n,r){if((0|n)!==n||0>n)return i("expecting a positive integer");var o=t(e,s,r===!0&&e._isBound()?e._boundTo:void 0),a=o.promise();return a.isRejected()?a:(o.setHowMany(n),o.init(),a)}var s=n(137)(r);e.some=function(e,t){return o(e,t,!1)},e.prototype.some=function(e){return o(this,e,!0)}}},function(e,t,n){e.exports=function(e,t){var r=n(120),i=n(122),o=n(125),s=r.tryCatch1,a=r.errorObj;e.prototype.progressed=function(e){return this._then(void 0,void 0,e,void 0,void 0)},e.prototype._progress=function(e){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(e)},e.prototype._progressHandlerAt=function(e){return 0===e?this._progressHandler0:this[e+2-5]},e.prototype._doProgressWith=function(t){var n=t.value,r=t.handler,i=t.promise,c=t.receiver;this._pushContext();var u=s(r,c,n);if(this._popContext(),u===a){if(null!=u.e&&"StopProgressPropagation"!==u.e.name){var f=o.canAttach(u.e)?u.e:new Error(u.e+"");i._attachExtraTrace(f),i._progress(u.e)}}else u instanceof e?u._then(i._progress,null,null,i,void 0):i._progress(u)},e.prototype._progressUnchecked=function(n){if(this.isPending())for(var r=this._length(),o=this._progress,s=0;r>s;s+=5){var a=this._progressHandlerAt(s),c=this._promiseAt(s);if(c instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:c,receiver:this._receiverAt(s),value:n}):i.invoke(o,c,n);else{var u=this._receiverAt(s);"function"==typeof a?a.call(u,n,c):u instanceof e&&u._isProxied()?u._progressUnchecked(n):t(u,c)&&u._promiseProgressed(n,c)}}}}},function(e,t,n){e.exports=function(e,t){var r=n(125),i=n(122),o=r.CancellationError;e.prototype._cancel=function(){if(!this.isCancellable())return this;for(var e,t=this;void 0!==(e=t._cancellationParent)&&e.isCancellable();)t=e;var n=new o;t._attachExtraTrace(n),t._rejectUnchecked(n)},e.prototype.cancel=function(){return this.isCancellable()?(i.invokeLater(this._cancel,this,void 0),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var n=new e(t);return n._setTrace(this),n._follow(this),n._unsetCancellable(),this._isBound()&&n._setBoundTo(this._boundTo),n},e.prototype.fork=function(e,t,n){var r=this._then(e,t,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}}},function(e,t,n){function r(e){return function(){var t={};if("request"in e)throw new Error("Socket already has a request property");var n=e;return e.onmessage=function(r){var i=r.data;if("{"==i.charAt(0)){var o=JSON.parse(i),s=t[o.id];if(s)clearTimeout(s.timeout),delete t[o.id],o.error?s.reject(new Error(o.error)):s.resolve(o.message);else if("id"in o)try{n.onrequest(o.message).then(function(t){var n={id:o.id,message:t,error:null};e.send(JSON.stringify(n))})["catch"](function(t){var n={id:o.id,message:null,error:t.message||t.toString()};e.send(JSON.stringify(n))})}catch(a){var c={id:o.id,message:null,error:a.message||a.toString()};e.send(JSON.stringify(c))}else n.onrequest(o.message)}},n.request=function(n){return new o(function(r,o){var a=i.v1(),c={id:a,message:n};t[a]={resolve:r,reject:o,timeout:setTimeout(function(){delete t[a],o(new Error("Timeout"))},s)},e.send(JSON.stringify(c))})},n.notify=function(t){return new o(function(n,r){var i={message:t};e.send(JSON.stringify(i),function(){n(null)})})},n.onrequest=function(e){return o.reject("No onrequest handler implemented")},n}()}var i=n(115),o=n(116),s=6e4;e.exports=r},function(e,t){function n(e,t){this.id=e,this._send=t,this.listeners={}}n.prototype.send=function(e,t){return this._send(this.id,e,t)},n.prototype.on=function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)},n.prototype.emit=function(e,t,n){var r=this.listeners[e];if(r)for(var i=0,o=r.length;o>i;i++){var s=r[i];s(t,n)}},e.exports=n},function(e,t,n){function r(e,t,n){this.transport=e,this.id=t;
var r=this.transport.host.create(t);r.on("message",n),this.ready=i.resolve(this)}var i=n(2);n(110);r.prototype.send=function(e,t){return this.transport.host.send(this.id,e,t)},r.prototype.close=function(){this.transport.host.remove(this.id)},e.exports=r},function(e,t,n){function r(e){this.id=e&&e.id||null,this.networkId=null,this.agents={},this.outstandingRequests={},this.outstandingMessages={},this.url=e&&e.url||"http://127.0.0.1:3000/agents/:id",this.parsedUrl=u.parse(this.url),this.remoteUrl=e&&e.remoteUrl,this.localShortcut=e&&e.localShortcut===!1?!1:!0,this.httpTimeout=e&&e.httpTimeout||2e3,this.httpResponseTimeout=e&&e.httpResponseTimeout||200,this.port=e&&e.port||this.parsedUrl.port||3e3,this.path=this.parsedUrl.pathname.replace(":id",""),"undefined"!=typeof window&&(this.send=this.webSend)}var i=n(158),o=n(2),s=n(107),a=n(178),c=n(12),u=n(14);r.prototype=new s,r.prototype.type="http",r.prototype.getAgentId=function(e){return e.pathname.slice(e.pathname.lastIndexOf("/")+1)},r.prototype.connect=function(e,t){return void 0===this.server&&"undefined"==typeof window&&this.initiateServer(),this.outstandingRequests[e]={},this.outstandingMessages[e]={},new a(this,e,t)},r.prototype.send=function(e,t,n){var r=this;return new o(function(o,s){var a=u.parse(t),f=u.parse(e),l=r.getAgentId(f),h=c();if(1==r.localShortcut){var d=r.getAgentId(a),p=a.pathname.replace(d,"");if(a.hostname==f.hostname&&a.port==f.port&&p==r.path&&void 0!==r.agents[d])return r.agents[d](l,n),void o()}if("object"==("undefined"==typeof n?"undefined":_typeof(n))){var v=r.outstandingRequests[l];if(void 0!==v[n.id]){var _=v[n.id];return _.response.end(JSON.stringify(n)),clearTimeout(_.timeout),delete v[n.id],void o()}n=JSON.stringify(n)}var g={host:a.hostname,port:a.port,path:a.path,method:"POST",headers:{"x-eve-senderurl":e,"Content-type":"text/plain"}},y=i.request(g,function(e){e.setEncoding("utf8"),clearTimeout(r.outstandingMessages[l][h].timeout),e.on("data",function(e){var n;try{n=JSON.parse(e)}catch(i){n=e}return"object"==("undefined"==typeof n?"undefined":_typeof(n))&&void 0!==n.__httpError__?void s(new Error(n.__httpError__)):(r.agents[l](t,n),void o())})});r.outstandingMessages[l][h]={timeout:setTimeout(function(){y.abort(),s(new Error("Cannot connect to "+t))},r.httpTimeout),reject:s},y.on("error",function(e){s(e)}),y.write(n),y.end()})},r.prototype.webSend=function(e,t,n){var r=this;return new o(function(i,o){"object"==("undefined"==typeof n?"undefined":_typeof(n))&&(n=JSON.stringify(n));var s=r.getAgentId(u.parse(e)),a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e="";a.responseText.length>0&&(e=JSON.parse(a.responseText)),r.agents[s](t,e),i()}else 4==a.readyState&&o(new Error("http.status:"+a.status))},a.open("POST",t,!0),a.setRequestHeader("Content-Type","text/plain"),a.send(n)})},r.prototype.processRequest=function(e,t){var n=this,r=e.url,i={};i["Access-Control-Allow-Origin"]="*",i["Access-Control-Allow-Credentials"]=!0,i["Content-Type"]="text/plain";var o=n.getAgentId(u.parse(r)),s="unknown";void 0!==e.headers["x-eve-senderurl"]&&(s=e.headers["x-eve-senderurl"]);var a="";e.on("data",function(t){a+=t,a.length>3e7&&e.connection.destroy()}),e.on("end",function(){var e,r=!1;try{e=JSON.parse(a)}catch(c){e=a}r=e.jsonrpc&&"2.0"==e.jsonrpc||r,r=e.type&&"request"==e.type||r,t.writeHead(200,i);var u=n.agents[o];if(void 0===u){var f=new Error('Agent: "'+o+'" does not exist.');t.end(JSON.stringify({__httpError__:f.message||f.toString()}))}else 1==r?(n.outstandingRequests[o][e.id]={response:t,timeout:setTimeout(function(){t.end("timeout"),delete n.outstandingRequests[o][e.id]},n.httpResponseTimeout)},u(s,e)):(t.end(""),void 0!==u&&u(s,e))})},r.prototype.initiateServer=function(){if(void 0===this.server){var e=this;this.server=i.createServer(function(t,n){if("OPTIONS"==t.method){var r={};r["Access-Control-Allow-Origin"]="*",r["Access-Control-Allow-Methods"]="POST, OPTIONS",r["Access-Control-Allow-Credentials"]=!0,r["Access-Control-Max-Age"]="86400",r["Access-Control-Allow-Headers"]="X-Requested-With, Access-Control-Allow-Origin, X-HTTP-Method-Override, Content-Type, Authorization, Accept",n.writeHead(200,r),n.end()}else"POST"==t.method&&e.processRequest(t,n)}),this.server.on("error",function(t){throw"EADDRINUSE"==t.code?new Error("ERROR: Could not start HTTP server. Port "+e.port+" is occupied."):new Error(t)}),this.server.listen(this.port,function(){console.log("Server listening at ",e.url)})}else this.server.close(),this.server=void 0,this.initiateServer()},r.prototype.close=function(){for(var e in this.outstandingRequests)if(this.outstandingRequests.hasOwnProperty(e)){var t=this.outstandingRequests[e];for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],i=new Error("Server shutting down.");r.response.end(JSON.stringify({__httpError__:i.message||i.toString()}))}}this.server&&this.server.close(),this.server=null},e.exports=r},function(e,t,n){var r=e.exports,i=(n(159).EventEmitter,n(160)),o=n(14);r.request=function(e,t){"string"==typeof e&&(e=o.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.protocol||(e.scheme?e.protocol=e.scheme+":":e.protocol=window.location.protocol),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https:"==e.protocol?443:80);var n=new i(new s,e);return t&&n.on("response",t),n},r.get=function(e,t){e.method="GET";var n=r.request(e,t);return n.end(),n},r.Agent=function(){},r.Agent.defaultMaxSockets=4;var s=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var n=new window.ActiveXObject(e[t]);return function(){if(n){var r=n;return n=null,r}return new window.ActiveXObject(e[t])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,c=0;i>c;c++)u[c].apply(this,a);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){var r=n(161),i=n(176),o=n(177),s=n(81),a=e.exports=function(e,t){var n=this;n.writable=!0,n.xhr=e,n.body=[],n.uri=(t.protocol||"http:")+"//"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(r){}if(t.responseType)try{e.responseType=t.responseType}catch(r){}if(e.open(t.method||"GET",n.uri,!0),e.onerror=function(e){n.emit("error",new Error("Network error"))},n._headers={},t.headers)for(var s=c(t.headers),a=0;a<s.length;a++){var u=s[a];if(n.isSafeRequestHeader(u)){var f=t.headers[u];n.setHeader(u,f)}}t.auth&&this.setHeader("Authorization","Basic "+o.btoa(t.auth));var l=new i;l.on("close",function(){n.emit("close")}),l.on("ready",function(){n.emit("response",l)}),l.on("error",function(e){n.emit("error",e)}),e.onreadystatechange=function(){e.__aborted||l.handle(e)}};s(a,r),a.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},a.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},a.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},a.prototype.write=function(e){this.body.push(e)},a.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},a.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=c(this._headers),n=0;n<t.length;n++){var r=t[n],i=this._headers[r];if(u(i))for(var o=0;o<i.length;o++)this.xhr.setRequestHeader(r,i[o]);else this.xhr.setRequestHeader(r,i)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(u(this.body[0])){for(var s=[],n=0;n<this.body.length;n++)s.push.apply(s,this.body[n]);this.xhr.send(s)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var a=0,n=0;n<this.body.length;n++)a+=this.body[n].length;for(var s=new this.body[0].constructor(a),f=0,n=0;n<this.body.length;n++)for(var h=this.body[n],o=0;o<h.length;o++)s[f++]=h[o];this.xhr.send(s)}else if(l(this.body[0]))this.xhr.send(this.body[0]);else{for(var s="",n=0;n<this.body.length;n++)s+=this.body[n].toString();this.xhr.send(s)}},a.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],a.prototype.isSafeRequestHeader=function(e){return e?-1===f(a.unsafeHeaders,e.toLowerCase()):!1};var c=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},f=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},l=function(e){return"undefined"!=typeof Blob&&e instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&e instanceof FormData?!0:void 0}},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(159).EventEmitter,o=n(81);o(r,i),r.Readable=n(162),r.Writable=n(172),r.Duplex=n(173),r.Transform=n(174),r.PassThrough=n(175),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function o(){f||(f=!0,e.end())}function s(){f||(f=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(c(),0===i.listenerCount(this,"error"))throw e}function c(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",o),u.removeListener("close",s),u.removeListener("error",a),e.removeListener("error",a),u.removeListener("end",c),u.removeListener("close",c),e.removeListener("close",c)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(u.on("end",o),u.on("close",s));var f=!1;return u.on("error",a),e.on("error",a),u.on("end",c),u.on("close",c),e.on("close",c),e.emit("pipe",u),e}},function(e,t,n){(function(r){t=e.exports=n(163),t.Stream=n(161),t.Readable=t,t.Writable=n(168),t.Duplex=n(167),t.Transform=n(170),t.PassThrough=n(171),r.browser||"disable"!==r.env.READABLE_STREAM||(e.exports=n(161))}).call(t,n(79))},function(e,t,n){(function(t){function r(e,t){var r=n(167);e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(O||(O=n(169).StringDecoder),this.decoder=new O(e.encoding),this.encoding=e.encoding)}function i(e){n(167);return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void S.call(this)):new i(e)}function o(e,t,n,r,i){var o=u(t,n);if(o)e.emit("error",o);else if(A.isNullOrUndefined(n))t.reading=!1,t.ended||f(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e)),d(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=R)e=R;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function c(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||A.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e,t){var n=null;return A.isBuffer(t)||A.isString(t)||A.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,l(e)}function l(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(C("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?t.nextTick(function(){h(e)}):h(e))}function h(e){C("emit readable"),e.emit("readable"),y(e)}function d(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){p(e,n)}))}function p(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(C("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;C("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T.listenerCount(e,"data")&&(t.flowing=!0,y(e))}}function _(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(function(){g(e,n)}))}function g(e,t){t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;if(C("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function m(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):x.concat(r,i),r.length=0;else if(e<r[0].length){var a=r[0];n=a.slice(0,e),r[0]=a.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new x(e);for(var c=0,u=0,f=r.length;f>u&&e>c;u++){var a=r[0],l=Math.min(e-c,a.length);o?n+=a.slice(0,l):a.copy(n,c,0,l),l<a.length?r[0]=a.slice(l):r.shift(),c+=l}}return n}function b(e){var n=e._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function E(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}e.exports=i;var k=n(164),x=n(67).Buffer;i.ReadableState=r;var T=n(159).EventEmitter;T.listenerCount||(T.listenerCount=function(e,t){return e.listeners(t).length});var S=n(161),A=n(165);A.inherits=n(81);var O,C=n(166);C=C&&C.debuglog?C.debuglog("stream"):function(){},A.inherits(i,S),i.prototype.push=function(e,t){var n=this._readableState;return A.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new x(e,t),t="")),o(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(e){return O||(O=n(169).StringDecoder),this._readableState.decoder=new O(e),this._readableState.encoding=e,this};var R=8388608;i.prototype.read=function(e){C("read",e);var t=this._readableState,n=e;if((!A.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return C("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?b(this):l(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&b(this),null;var r=t.needReadable;C("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,C("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,C("reading or ended",r)),r&&(C("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=c(n,t));var i;return i=e>0?m(e,t):null,A.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&b(this),A.isNull(i)||this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,n){function r(e){C("onunpipe"),e===l&&o()}function i(){C("onend"),e.end()}function o(){C("cleanup"),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("drain",_),e.removeListener("error",a),e.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",o),l.removeListener("data",s),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||_()}function s(t){C("ondata");var n=e.write(t);!1===n&&(C("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function a(t){C("onerror",t),f(),e.removeListener("error",a),0===T.listenerCount(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",u),f()}function u(){C("onfinish"),e.removeListener("close",c),f()}function f(){C("unpipe"),l.unpipe(e)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,C("pipe count=%d opts=%j",h.pipesCount,n);var d=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,p=d?i:o;h.endEmitted?t.nextTick(p):l.once("end",p),e.on("unpipe",r);var _=v(l);return e.on("drain",_),l.on("data",s),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",c),e.once("finish",u),e.emit("pipe",l),h.flowing||(C("pipe resume"),l.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=E(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,n){var r=S.prototype.on.call(this,e,n);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&l(this,i);else{var o=this;t.nextTick(function(){C("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(C("resume"),e.flowing=!0,e.reading||(C("resume read 0"),this.read(0)),_(this,e)),this},i.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(C("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(C("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)A.isFunction(e[i])&&A.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){C("wrapped _read",t),n&&(n=!1,e.resume())},r},i._fromList=m}).call(t,n(79))},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===_(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function c(e){return"symbol"===("undefined"==typeof e?"undefined":_typeof(e))}function u(e){return void 0===e}function f(e){return"[object RegExp]"===_(e)}function l(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e}function h(e){return"[object Date]"===_(e)}function d(e){return"[object Error]"===_(e)||e instanceof Error}function p(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===("undefined"==typeof e?"undefined":_typeof(e))||"undefined"==typeof e}function _(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=s,t.isString=a,t.isSymbol=c,t.isUndefined=u,t.isRegExp=f,t.isObject=l,t.isDate=h,t.isError=d,t.isFunction=p,t.isPrimitive=v,t.isBuffer=e.isBuffer}).call(t,n(67).Buffer)},function(e,t){},function(e,t,n){(function(t){function r(e){return this instanceof r?(c.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}function o(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}e.exports=r;var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},a=n(165);a.inherits=n(81);var c=n(163),u=n(168);a.inherits(r,c),o(s(u.prototype),function(e){r.prototype[e]||(r.prototype[e]=u.prototype[e])})}).call(t,n(79))},function(e,t,n){(function(t){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(e,t){var r=n(167);e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var t=n(167);return this instanceof o||this instanceof t?(this._writableState=new i(e,this),this.writable=!0,void k.call(this)):new o(e)}function s(e,n,r){var i=new Error("write after end");e.emit("error",i),t.nextTick(function(){r(i)})}function a(e,n,r,i){var o=!0;if(!(E.isBuffer(r)||E.isString(r)||E.isNullOrUndefined(r)||n.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),t.nextTick(function(){i(s)}),o=!1}return o}function c(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&E.isString(t)&&(t=new w(t,n)),t}function u(e,t,n,i,o){n=c(t,n,i),E.isBuffer(n)&&(i="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new r(n,i,o)):f(e,t,!1,s,n,i,o),a}function f(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function l(e,n,r,i,o){r?t.nextTick(function(){n.pendingcb--,o(i)}):(n.pendingcb--,o(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,n){var r=e._writableState,i=r.sync,o=r.writecb;if(h(r),n)l(e,r,i,n,o);else{var s=g(e,r);s||r.corked||r.bufferProcessing||!r.buffer.length||_(e,r),i?t.nextTick(function(){p(e,r,s,o)}):p(e,r,s,o)}}function p(e,t,n,r){n||v(e,t),t.pendingcb--,r(),m(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,f(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],o=i.chunk,s=i.encoding,a=i.callback,c=t.objectMode?1:o.length;if(f(e,t,!1,c,o,s,a),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function g(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function m(e,t){var n=g(e,t);return n&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),n}function b(e,n,r){n.ending=!0,m(e,n),r&&(n.finished?t.nextTick(r):e.once("finish",r)),n.ended=!0}e.exports=o;var w=n(67).Buffer;o.WritableState=i;var E=n(165);E.inherits=n(81);var k=n(161);E.inherits(o,k),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return E.isFunction(t)&&(n=t,t=null),E.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),E.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):a(this,r,e,n)&&(r.pendingcb++,i=u(this,r,e,t,n)),i},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||_(this,e))},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var r=this._writableState;E.isFunction(e)?(n=e,e=null,t=null):E.isFunction(t)&&(n=t,t=null),E.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||b(this,r,n)}}).call(t,n(79))},function(e,t,n){function r(e){if(e&&!c(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=n(67).Buffer,c=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),
e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},function(e,t,n){function r(e,t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,c.isNullOrUndefined(n)||e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new r(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){c.isFunction(this._flush)?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=o;var a=n(167),c=n(165);c.inherits=n(81),c.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;c.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},function(e,t,n){function r(e){return this instanceof r?void i.call(this,e):new r(e)}e.exports=r;var i=n(170),o=n(165);o.inherits=n(81),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(168)},function(e,t,n){e.exports=n(167)},function(e,t,n){e.exports=n(170)},function(e,t,n){e.exports=n(171)},function(e,t,n){function r(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),n={},r=0;r<t.length;r++){var i=t[r];if(""!==i){var o=i.match(/^([^:]+):\s*(.*)/);if(o){var s=o[1].toLowerCase(),a=o[2];void 0!==n[s]?c(n[s])?n[s].push(a):n[s]=[n[s],a]:n[s]=a}else n[i]=!0}}return n}var i=n(161),o=n(78),s=e.exports=function(e){this.offset=0,this.readable=!0};o.inherits(s,i);var a={streaming:!0,status2:!0};s.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},s.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},s.prototype.handle=function(e){if(2===e.readyState&&a.status2){try{this.statusCode=e.status,this.headers=r(e)}catch(t){a.status2=!1}a.status2&&this.emit("ready")}else if(a.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=r(e),this.emit("ready"))}catch(t){}try{this._emitData(e)}catch(t){a.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},s.prototype._emitData=function(e){var t=this.getResponse(e);return t.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){!function(){function e(e){this.message=e}var n=t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",n.btoa||(n.btoa=function(t){for(var n,i,o=0,s=r,a="";t.charAt(0|o)||(s="=",o%1);a+=s.charAt(63&n>>8-o%1*8)){if(i=t.charCodeAt(o+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|i}return a}),n.atob||(n.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,o=0,s=0,a="";i=t.charAt(s++);~i&&(n=o%4?64*n+i:i,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)i=r.indexOf(i);return a})}()},function(e,t,n){function r(e,t,n){if(this.transport=e,this.id=t,this.id in this.transport.agents)throw new Error("Agent with id "+t+" already exists");this.transport.agents[this.id]=n,this.ready=i.resolve(this)}var i=n(2);n(110);r.prototype.send=function(e,t){var n,r=this.transport.url.replace(":id",this.id),i=-1!==e.indexOf("://");return i?n=e:void 0!==this.transport.remoteUrl?n=this.transport.remoteUrl.replace(":id",e):console.log("ERROR: no remote URL specified. Cannot send over HTTP.",e),this.transport.send(r,n,t)},r.prototype.close=function(){delete this.transport.agents[this.id]},e.exports=r},function(e,t,n){function r(e){this.id=e&&e.id||null,this.networkId=this.id||null,this["default"]=e&&e["default"]||!1,this.agents={}}var i=n(107),o=n(180);r.prototype=new i,r.prototype.type="local",r.prototype.connect=function(e,t){return new o(this,e,t)},r.prototype.close=function(){this.agents={}},e.exports=r},function(e,t,n){function r(e,t,n){if(this.transport=e,this.id=t,this.id in this.transport.agents)throw new Error("Agent with id "+t+" already exists");this.transport.agents[this.id]=n,this.ready=i.resolve(this)}var i=n(2);n(110);r.prototype.send=function(e,t){var n=this.transport.agents[e];return n?(n(this.id,t),i.resolve()):i.reject(new Error("Agent with id "+e+" not found"))},r.prototype.close=function(){delete this.transport.agents[this.id]},e.exports=r},function(e,t,n){function r(e){this.id=e.id||null,this.networkId=e.publish_key||null,this["default"]=e["default"]||!1,this.pubnub=i().init(e)}function i(){if("undefined"!=typeof window){if("undefined"==typeof window.PUBNUB)throw new Error("Please load pubnub first in the browser");return window.PUBNUB}return n(95)}var o=n(107),s=n(182);r.prototype=new o,r.prototype.type="pubnub",r.prototype.connect=function(e,t){return new s(this,e,t)},r.prototype.close=function(){this.pubnub=null},e.exports=r},function(e,t,n){function r(e,t,n){this.id=t,this.transport=e;var r=this;this.ready=new i(function(i,o){e.pubnub.subscribe({channel:t,message:function(e){n(e.from,e.message)},connect:function(){i(r)}})})}var i=n(2);n(110);r.prototype.send=function(e,t){var n=this;return new i(function(r,i){n.transport.pubnub.publish({channel:e,message:{from:n.id,to:e,message:t},callback:r,error:i})})},r.prototype.close=function(){this.transport.pubnub.unsubscribe({channel:this.id})},e.exports=r},function(e,t,n){function r(e){}var i=n(107),o=n(184);r.prototype=new i,r.prototype.type="dbus",r.prototype.connect=function(e,t){return new o(this,e,t)},r.prototype.close=function(){},e.exports=r},function(e,t,n){function r(e,t,n){this.id=t,this.url="dbus:"+a+u+t,this.transport=e;this.ready=new o(function(e,r){l.requestName(a,4,function(i,o){if(i&&console.log("ERROR: Could not request service name ${serviceName}, the error was:",i),1!==o&&3!==o&&4!==o)return console.log("ERROR: Failed to request service name "+a+". Check what return code "+o+" means."),void r();var s={name:c,methods:{receive:["ss","",["Message","Sender"],[]]}},f={receive:function(e,t){n(t,e)}};l.exportInterface(f,u+t,s),e()})})}function i(e){if(e.startsWith("dbus:")){var t=e.substring(e.indexOf(":")+1,e.indexOf("/")),n=e.substring(e.indexOf("/"));return{serviceName:t,objectName:n}}return{serviceName:a,objectName:u+e}}var o=n(2),s=(n(110),n(185)),a="com.almende.eve",c="com.almende.eve.agent",u="/com/almende/eve/agent/",f=s.sessionBus(),l=s.sessionBus();r.prototype.send=function(e,t){var n=this,r=i(e);if(!r.objectName)return o.reject();var s=r.objectName,a=r.serviceName;return new o(function(e,r){var i=f.getService(a);i.getInterface(s,c,function(i,o){return i?(console.log(i),void r()):void o.receive(t,n.url,function(t,n){t?(console.log(t),r()):e()})})})},r.prototype.close=function(){},e.exports=r},function(e,t,n){(function(t){function r(e){if(e.stream)return e.stream;var r=e.host,i=e.port,o=e.socket;if(o)return s.createConnection(o);if(i)return s.createConnection(i,r);var a=e.busAddress||t.env.DBUS_SESSION_BUS_ADDRESS;if(!a)throw new Error("unknown bus address");var c=a.split(";");for(var u in c){var f=c[u],l=f.split(":"),h=l[0],d={};l[1].split(",").map(function(e){var t=e.split("=");d[t[0]]=t[1]});try{switch(h.toLowerCase()){case"tcp":return r=d.host||"localhost",i=d.port,s.createConnection(i,r);case"unix":if(d.socket)return s.createConnection(d.socket);if(d["abstract"]){var p=n(203);return p.connect("\x00"+d["abstract"])}if(d.path)return s.createConnection(d.path);throw new Error("not enough parameters for 'unix' connection - you need to specify 'socket' or 'abstract' or 'path' parameter");case"unixexec":for(var v=n(209),_=n(!function(){var e=new Error('Cannot find module "child_process"');throw e.code="MODULE_NOT_FOUND",e}()).spawn,g=[],y=1;d["arg"+y];y++)g.push(d["arg"+y]);return _(d.path,g),v.duplex(child.stdin,child.stdout);default:throw new Error("unknown address type:"+h)}}catch(m){if(u<c.length-1){console&&console.warn instanceof Function&&console.warn(m.message);continue}throw m}}}function i(e){var t=new o;e||(e={});var n=t.stream=r(e);n.setNoDelay(),n.on("error",function(e){t.emit("error",e)}),n.on("end",function(){t.emit("end"),t.message=function(){console.warn("Didn't write bytes to closed stream")}}),t.end=function(){return n.end(),t};var i=e.server?f:u;return i(n,e,function(e,r){return e?t.emit("error"):(t.guid=r,t.emit("connect"),void c.unmarshalMessages(n,function(e){t.emit("message",e)}))}),t._messages=[],t.message=function(e){t._messages.push(e)},t.once("connect",function(){t.state="connected";for(var e=0;e<t._messages.length;++e)n.write(c.marshall(t._messages[e]));t._messages.length=0,t.message=function(e){n.write(c.marshall(e))}}),t}var o=n(159).EventEmitter,s=n(!function(){var e=new Error('Cannot find module "net"');throw e.code="MODULE_NOT_FOUND",e}()),a=n(186),c=n(187),u=n(197),f=n(201),l=(n(202),n(217));e.exports=i,e.exports.createClient=function(e){var t=i(e||{});return new l(t,e||{})},e.exports.systemBus=function(){return e.exports.createClient({socket:"/var/run/dbus/system_bus_socket"})},e.exports.sessionBus=function(t){return e.exports.createClient(t)},e.exports.messageType=a.messageType,e.exports.createConnection=e.exports;var h=n(222);e.exports.createServer=h.createServer}).call(t,n(79))},function(e,t){e.exports={messageType:{invalid:0,methodCall:1,methodReturn:2,error:3,signal:4},headerTypeName:[null,"path","interface","member","errorName","replySerial","destination","sender","signature"],fieldSignature:{path:"o","interface":"s",member:"s",errorName:"s",replySerial:"u",destination:"s",sender:"s",signature:"g"},headerTypeId:{path:1,"interface":2,member:3,errorName:4,replySerial:5,destination:6,sender:7,signature:8},protocolVersion:1,flags:{noReplyExpected:1,noAutoStart:2},endianness:{le:108,be:66},messageSignature:"yyyyuua(yv)",defaultAuthMethods:["EXTERNAL","DBUS_COOKIE_SHA1","ANONYMOUS"]}},function(e,t,n){(function(t){var r=n(188),i=n(186),o=(n(190),n(194)),s=(n(195),n(196));e.exports.unmarshalMessages=function(e,t){var n,r,a,c,u=0,f=0,l=0;e.on("readable",function(){for(;;)if(0==u){if(n=e.read(16),!n)break;u=1,a=n.readUInt32LE(12),c=a+7>>3<<3,l=n.readUInt32LE(4),f=c+l}else{if(r=e.read(f),!r)break;u=0;var h=new o(r),d=h.readArray(s[0].child[0],a);h.align(3);var p,v={};v.serial=n.readUInt32LE(8);for(var _=0;_<d.length;++_)p=i.headerTypeName[d[_][0]],v[p]=d[_][1][1][0];v.type=n[1],v.flags=n[2],l>0&&v.signature&&(v.body=h.read(v.signature)),t(v)}})},e.exports.unmarshall=function(e){for(var t=new o(e),n=t.read("yyyyuua(yv)"),r={},s=0;s<n[6].length;++s)headerName=i.headerTypeName[n[6][s][0]],r[headerName]=n[6][s][1][1][0];return r.type=n[1],r.flags=n[2],r.serial=n[5],t.align(3),r.body=t.read(r.signature),r},e.exports.marshall=function(e){e.serial||(e.serial=1);var n,o=e.flags||0,s=e.type||i.messageType.methodCall,a=0;e.body&&(n=r(e.signature,e.body),a=n.length);var c=[i.endianness.le,s,o,i.protocolVersion,a,e.serial],u=r("yyyyuu",c),f=[];i.headerTypeName.forEach(function(t){var n=e[t];n&&f.push([i.headerTypeId[t],[i.fieldSignature[t],n]])});var l=r("a(yv)",[f],12),h=u.length+l.length+7>>3<<3,d=h+a,p=t(d);return p.fill(0),u.copy(p),l.copy(p,u.length),a>0&&n.copy(p,h),p}}).call(t,n(67).Buffer)},function(e,t,n){(function(t){function r(e,t,n){if(t.length!==n.length)throw new Error("Invalid struct data");for(var r=0;r<t.length;++r)i(e,t[r],n[r]);return e}function i(e,t,n){switch(t.type){case"(":case"{":f(e,8),r(e,t.child,n);break;case"a":var u=c();u._offset=e._offset;var l=u._offset;o(u,"u",0);var h=u._offset-4-l;-1!==["x","t","d","{","("].indexOf(t.child[0].type)&&f(u,8);for(var d=u._offset,p=0;p<n.length;++p)i(u,t.child[0],n[p]);var v=u.buffer(),_=u._offset-d;v.writeUInt32LE(_,h),e.put(v),e._offset+=v.length;break;case"v":s.equal(n.length,2,"variant data should be [signature, data]");var g={type:"g",child:[]};if(i(e,g,n[0]),1==n[0].length){var y={type:n[0],child:[]};i(e,y,n[1])}else{var m=a(n[0]);r(e,m,n[1])}break;default:return o(e,t.type,n)}}function o(e,n,r){if("undefined"==typeof r)throw new Error("Serialisation of JS 'undefined' type is not supported by d-bus");if(null===r)throw new Error("Serialisation of null value is not supported by d-bus");if(t.isBuffer(r)&&(r=buffer.toString()),-1!=l.indexOf(n)&&"string"!=typeof r)throw new Error("Expected string or buffer argument, got "+JSON.stringify(r)+" of type '"+n+"'");var i=u.MakeSimpleMarshaller(n);return i.marshall(e,r),e}var s=n(189),a=n(190),c=n(191),u=n(192),f=n(193).align,l=(e.exports=function(e,t,n){"undefined"==typeof n&&(n=0);var i=a(e);if(!Array.isArray(t)||t.length!==i.length)throw new Error("message body does not match message signature. Body:"+JSON.stringify(t)+", signature:"+e);var o=c();o._offset=n;var s=r(o,i,t).buffer();return s},["g","o","s"])}).call(t,n(67).Buffer)},function(e,t,n){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);o>i;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return r>n?-1:n>r?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function s(e){return i(e)?!1:"function"!=typeof t.ArrayBuffer?!1:"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e?e instanceof DataView?!0:e.buffer&&e.buffer instanceof ArrayBuffer?!0:!1:!1}function a(e){if(b.isFunction(e)){if(k)return e.name;var t=e.toString(),n=t.match(T);return n&&n[1]}}function c(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(k||!b.isFunction(e))return b.inspect(e);var t=a(e),n=t?": "+t:"";return"[Function"+n+"]"}function f(e){return c(u(e.actual),128)+" "+e.operator+" "+c(u(e.expected),128)}function l(e,t,n,r,i){throw new x.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function h(e,t){e||l(e,!0,t,"==",x.ok)}function d(e,t,n,a){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(b.isDate(e)&&b.isDate(t))return e.getTime()===t.getTime();if(b.isRegExp(e)&&b.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))||null!==t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))){if(s(e)&&s(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;a=a||{actual:[],expected:[]};var c=a.actual.indexOf(e);return-1!==c&&c===a.expected.indexOf(t)?!0:(a.actual.push(e),a.expected.push(t),v(e,t,n,a))}return n?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function v(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(b.isPrimitive(e)||b.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=p(e),o=p(t);if(i&&!o||!i&&o)return!1;if(i)return e=E.call(e),t=E.call(t),d(e,t,n);var s,a,c=S(e),u=S(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),a=c.length-1;a>=0;a--)if(c[a]!==u[a])return!1;for(a=c.length-1;a>=0;a--)if(s=c[a],!d(e[s],t[s],n,r))return!1;return!0}function _(e,t,n){d(e,t,!0)&&l(e,t,n,"notDeepStrictEqual",_)}function g(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function y(e){var t;try{e()}catch(n){t=n}return t}function m(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=y(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&l(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&b.isError(i),a=!e&&i&&!n;if((s&&o&&g(i,n)||a)&&l(i,n,"Got unwanted exception"+r),e&&i&&n&&!g(i,n)||!e&&i)throw i}var b=n(78),w=Object.prototype.hasOwnProperty,E=Array.prototype.slice,k=function(){return"foo"===function(){}.name}(),x=e.exports=h,T=/\s*function\s+([^\(\s]*)\s*/;x.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=a(t),o=r.indexOf("\n"+i);if(o>=0){var s=r.indexOf("\n",o+1);r=r.substring(s+1)}this.stack=r}}},b.inherits(x.AssertionError,Error),x.fail=l,x.ok=h,x.equal=function(e,t,n){e!=t&&l(e,t,n,"==",x.equal)},x.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",x.notEqual)},x.deepEqual=function(e,t,n){d(e,t,!1)||l(e,t,n,"deepEqual",x.deepEqual)},x.deepStrictEqual=function(e,t,n){d(e,t,!0)||l(e,t,n,"deepStrictEqual",x.deepStrictEqual)},x.notDeepEqual=function(e,t,n){d(e,t,!1)&&l(e,t,n,"notDeepEqual",x.notDeepEqual)},x.notDeepStrictEqual=_,x.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",x.strictEqual)},x.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",x.notStrictEqual)},x["throws"]=function(e,t,n){m(!0,e,t,n)},x.doesNotThrow=function(e,t,n){m(!1,e,t,n)},x.ifError=function(e){if(e)throw e};var S=Object.keys||function(e){var t=[];for(var n in e)w.call(e,n)&&t.push(n);return t}}).call(t,function(){return this}())},function(e,t){var n={"{":"}","(":")"},r={};"(){}ybnqiuxtdsogarvehm*?@&^".split("").forEach(function(e){r[e]=!0});e.exports=function(e){function t(){if(s<e.length){var t=e[s];return++s,t}return null}function i(o){function s(e){if(!e)throw new Error("Bad signature: unexpected end");return e}if(!r[o])throw new Error('Unknown type: "'+o+'" in signature "'+e+'"');var a,c={type:o,child:[]};switch(o){case"a":return a=t(),s(a),c.child.push(i(a)),c;case"{":case"(":for(;null!==(a=t())&&a!==n[o];)c.child.push(i(a));return s(a),c}return c}for(var o,s=0,a=[];null!==(o=t());)a.push(i(o));return a};e.exports.fromTree=function(t){for(var r="",i=0;i<t.length;++i)r+=0===t[i].child.length?t[i].type:"a"===t[i].type?"a"+e.exports.fromTree(t[i].child):t[i].type+e.exports.fromTree(t[i].child)+n[t[i].type];return r}},function(e,t,n){(function(t){function n(){if(!(this instanceof n))return new n;var e=[],r=0;this.put=function(t){return e.push({buffer:t}),r+=t.length,this},this.word8=function(t){return e.push({bytes:1,value:t}),r+=1,this},this.floatle=function(t){return e.push({bytes:"float",endian:"little",value:t}),r+=4,this},[8,16,24,32,64].forEach(function(t){this["word"+t+"be"]=function(n){return e.push({endian:"big",bytes:t/8,value:n}),r+=t/8,this},this["word"+t+"le"]=function(n){return e.push({endian:"little",bytes:t/8,value:n}),r+=t/8,this}}.bind(this)),this.pad=function(t){return e.push({endian:"big",bytes:t,value:0}),r+=t,this},this.length=function(){return r},this.buffer=function(){var n=new t(r),i=0;return e.forEach(function(e){if(e.buffer)e.buffer.copy(n,i,0),i+=e.buffer.length;else if("float"==e.bytes){var t=Math.abs(e.value),r=1*(e.value>=0),o=Math.ceil(Math.log(t)/Math.LN2),s=t/(1<<o);console.dir([r,o,s]),console.log(e.value),n[i++]=r<<7&~~(o/2),n[i++]=(1&o)<<7&~~(s/65536),n[i++]=0,n[i++]=0,i+=4}else for(var a="big"===e.endian,c=a?[8*(e.bytes-1),-8]:[0,8],u=c[0];a?u>=0:u<8*e.bytes;u+=c[1])u>=32?n[i++]=255&Math.floor(e.value/Math.pow(2,u)):n[i++]=e.value>>u&255}),n},this.write=function(e){e.write(this.buffer())}}e.exports=n}).call(t,n(67).Buffer)},function(e,t,n){(function(e){var r=n(193).align,i=n(190),o=function(t){function n(e){if("string"!=typeof e)throw new Error("Data: "+e+" was not of type string");if(-1!==e.indexOf("\x00"))throw new Error("String contains null byte")}function o(e){if(e.length>255)throw new Error("Data: "+e+" is too long for signature type ("+e.length+" > 255)");for(var t=0,n=0;n<e.length;++n){if(t>32)throw new Error("Maximum container type nesting exceeded in signature type:"+e);switch(e[n]){case"(":++t;break;case")":--t}}i(e)}var u={};switch(t){case"o":case"s":u.check=function(e){n(e)},u.marshall=function(t,n){this.check(n),r(t,4),buff=new e(n,"utf8"),t.word32le(buff.length).put(buff).word8(0),t._offset+=5+buff.length};break;case"g":u.check=function(e){n(e),o(e)},u.marshall=function(t,n){this.check(n),buff=new e(n,"ascii"),t.word8(n.length).put(buff).word8(0),t._offset+=2+buff.length};break;case"y":u.check=function(e){a(e),s(0,255,e)},u.marshall=function(e,t){this.check(t),e.word8(t),e._offset++};break;case"b":u.check=function(e){c(e)},u.marshall=function(e,t){this.check(t),t=t?1:0,r(e,4),e.word32le(t),e._offset+=4};break;case"n":u.check=function(e){a(e),s(-32768,32767,e)},u.marshall=function(t,n){this.check(n),r(t,2),buff=new e(2),buff.writeInt16LE(parseInt(n),0),t.put(buff),t._offset+=2};break;case"q":u.check=function(e){a(e),s(0,65535,e)},u.marshall=function(e,t){this.check(t),r(e,2),e.word16le(t),e._offset+=2};break;case"i":u.check=function(e){a(e),s(-2147483648,2147483647,e)},u.marshall=function(t,n){this.check(n),r(t,4),buff=new e(4),buff.writeInt32LE(parseInt(n),0),t.put(buff),t._offset+=4};break;case"u":u.check=function(e){a(e),s(0,4294967295,e)},u.marshall=function(e,t){this.check(t),r(e,4),e.word32le(t),e._offset+=4};break;case"t":u.check=function(e){throw new Error("64 Bit integers not supported")},u.marshall=function(e,t){this.check(t),r(e,8),e.word64le(t),e._offset+=8};break;case"x":u.check=function(e){throw new Error("64 Bit integers not supported")},u.marshall=function(e,t){this.check(t),e.word64le(t),e._offset+=8};break;case"d":u.check=function(e){if("number"!=typeof e)throw new Error("Data: "+e+" was not of type number");if(Number.isNaN(e))throw new Error("Data: "+e+" was not a number");if(!Number.isFinite(e))throw new Error("Number outside range")},u.marshall=function(t,n){this.check(n),r(t,8),buff=new e(8),buff.writeDoubleLE(parseFloat(n),0),t.put(buff),t._offset+=8};break;default:throw new Error("Unknown data type format: "+type)}return u};t.MakeSimpleMarshaller=o;var s=function(e,t,n){if(n>t||e>n)throw new Error("Number outside range")},a=function(e){if("number"!=typeof e)throw new Error("Data: "+e+" was not of type number");if(Math.floor(e)!==e)throw new Error("Data: "+e+" was not an integer")},c=function(e){if("boolean"!=typeof e&&0!==e&&1!==e)throw new Error("Data: "+e+" was not of type boolean")}}).call(t,n(67).Buffer)},function(e,t,n){(function(e){function n(t,n){var r=n-t._offset%n;if(0!==r&&r!==n){var i=e(r);i.fill(0),t.put(e(i)),t._offset+=r}}t.align=n}).call(t,n(67).Buffer)},function(e,t,n){function r(e,t,n){this.options=n||{ayBuffer:!0},this.buffer=e,this.startPos=t?t:0,this.pos=0}var i={};"ybnquigsoxtd".split(" ").forEach(function(e){i[e]=!0}),r.prototype.align=function(e){var t=(1<<e)-1,n=this.pos+this.startPos+t>>e<<e;this.pos=n-this.startPos},r.prototype.readInt8=function(){return this.pos++,this.buffer[this.pos-1]},r.prototype.readSInt16=function(){this.align(1);var e=this.buffer.readInt16LE(this.pos);return this.pos+=2,e},r.prototype.readInt16=function(){this.align(1);var e=this.buffer.readUInt16LE(this.pos);return this.pos+=2,e},r.prototype.readSInt32=function(){this.align(2);var e=this.buffer.readInt32LE(this.pos);return this.pos+=4,e},r.prototype.readInt32=function(){this.align(2);var e=this.buffer.readUInt32LE(this.pos);return this.pos+=4,e},r.prototype.readDouble=function(){this.align(3);var e=this.buffer.readDoubleLE(this.pos);return this.pos+=8,e},r.prototype.readString=function(e){if(0===e)return this.pos++,"";var t=this.buffer.toString("utf8",this.pos,this.pos+e);return this.pos+=e+1,t};var o=n(190);r.prototype.readTree=function(e){switch(e.type){case"(":case"{":case"r":return this.align(3),this.readStruct(e.child);case"a":if(!e.child||1!=e.child.length)throw new Error("Incorrect array element signature");var t=this.readInt32();return this.readArray(e.child[0],t);case"v":return this.readVariant();default:return this.readSimpleType(e.type)}},r.prototype.read=function(e){var t=o(e);return this.readStruct(t)},r.prototype.readVariant=function(){var e=this.readSimpleType("g"),t=o(e);return[t,this.readStruct(t)]},r.prototype.readStruct=function(e){for(var t=[],n=0;n<e.length;++n)t.push(this.readTree(e[n]));return t},r.prototype.readArray=function(e,t){var n,r=this.pos;if("y"===e.type&&this.options.ayBuffer)return this.pos+=t,this.buffer.slice(r,this.pos);-1!=["x","t","d","{","(","r"].indexOf(e.type)&&this.align(3);var i=this.pos+t;for(n=[];this.pos<i;)n.push(this.readTree(e));return n},r.prototype.readSimpleType=function(e){switch(e){case"y":return this.readInt8();case"b":return this.readInt32()?!0:!1;case"n":return this.readSInt16();case"q":return this.readInt16();case"u":return this.readInt32();case"i":return this.readSInt32();case"g":var t=this.readInt8();return this.readString(t);case"s":case"o":var t=this.readInt32();return this.readString(t);case"x":return this.align(3),this.readInt32()+4294967296*this.readInt32();case"t":this.align(3);var n=this.readInt32(),r=this.readInt32();return 2147483648&r?-(4294967296*(~r>>>0)+(~n>>>0)+1):n+4294967296*r;case"d":return this.readDouble();default:throw new Error("Unsupported type: "+e)}return result},e.exports=r},function(e,t,n){(function(t){var r=n(194);e.exports=function(e,n,i,o){if(i||(i=0),""===n)return new t;var s=new r(e,i,o);return s.read(n)}}).call(t,n(67).Buffer)},function(e,t){},function(e,t,n){(function(t,r){function i(e){var t=u.createHash("sha1");return t.update(e),t.digest("hex")}function o(){return t.env[t.platform.match(/$win/)?"USERPROFILE":"HOME"]}function s(e,n,r){var i=l.join(o(),".dbus-keyrings");0===e.length&&(e="org_freedesktop_general");var s=l.join(i,e);f.stat(i,function(e,i){return e?r(e):22&i.mode?r(new Error("User keyrings directory is writeable by other users. Aborting authentication")):t.hasOwnProperty("getuid")&&i.uid!=t.getuid()?r(new Error("Keyrings directory is not owned by the current user. Aborting authentication!")):void f.readFile(s,"ascii",function(e,t){if(e)return r(e);lines=t.split("\n");for(var i=0;i<lines.length;++i){var o=lines[i].split(" ");if(n==o[0])return r(null,o[2])}return r(new Error("cookie not found"))})})}function a(e){return r(e.toString(),"ascii").toString("hex")}function c(e,n,o){function f(){d(e,function(t){var r=t.toString("ascii").match(/^([A-Za-z]+) (.*)/);return r&&"OK"===r[1]?(e.write("BEGIN\r\n"),o(null,r[2])):n.empty?o(t):void c(e,n,o)})}if(0===n.length)return o(new Error("No authentication methods left to try"));var l=n.shift();if(t.hasOwnProperty("getuid"))var h=a(t.getuid());else var h=a(0);switch(l){case"EXTERNAL":e.write("AUTH "+l+" "+h+"\r\n"),f();break;case"DBUS_COOKIE_SHA1":e.write("AUTH "+l+" "+h+"\r\n"),d(e,function(t){var n=new r(t.toString().split(" ")[1].trim(),"hex").toString().split(" "),c=n[0],l=n[1],h=n[2],d=u.randomBytes(16).toString("hex");s(c,l,function(t,n){if(t)return o(t);var r=i([h,d,n].join(":")),s=a(d+r);e.write("DATA "+s+"\r\n"),f()})});break;case"ANONYMOUS":e.write("AUTH ANONYMOUS \r\n"),f();break;default:console.error("Unsupported auth method: "+l),f()}}var u=n(71),f=n(198),l=n(199),h=n(186),d=n(200);e.exports=function(e,t,n){var r;r=t.authMethods?t.authMethods:h.defaultAuthMethods,e.write("\x00"),c(e,r.slice(),n)}}).call(t,n(79),n(67).Buffer)},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===s(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;s>c;c++)if(i[c]!==o[c]){a=c;break}for(var u=[],c=a;c<i.length;c++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(t,n(79))},function(e,t,n){(function(t){e.exports=function(e,n){function r(){for(;;){var o=e.read(1);if(!o)return;var s=o[0];if(10===s){try{n(new t(i))}catch(a){e.emit("error",a)}return void e.removeListener("readable",r)}i.push(s)}}var i=[];e.on("readable",r)}}).call(t,n(67).Buffer)},function(e,t,n){(function(t){var r=(n(191),n(71),n(198),n(200));e.exports=function(e,n,i){e.name="SERVER SERVER",r(e,function(n){console.log(["hello string: ",n.toString(),n]),e.write("REJECTED EXTERNAL DBUS_COOKIE_SHA1 ANONYMOUS\r\n"),r(e,function(n){e.write("DATA "+t("org_freedesktop_general 642038150 b9ce247a275f427c8586e4c9de9bb951").toString("hex")+"\r\n"),r(e,function(t){e.write("OK 6f72675f667265656465736b746f705f67656e6572616c20353631303331333937206239636532343761323735663432376338353836653463396465396262393531\r\n"),r(e,function(e){console.log(["AFTER begin: ",e.toString()]),i(null)})})})})}}).call(t,n(67).Buffer)},function(e,t,n){(function(t){e.exports=function(){return new t("6c01 0001 0000 0000 0100 0000 6d00 00000101 6f00 1500 0000 2f6f 7267 2f66 72656564 6573 6b74 6f70 2f44 4275 7300 00000301 7300 0500 0000 4865 6c6c 6f00 00000201 7300 1400 0000 6f72 672e 6672 65656465 736b 746f 702e 4442 7573 0000 00000601 7300 1400 0000 6f72 672e 6672 6565"+"6465 736b 746f 702e 4442 7573 0000 0000".replace(/ /g,""),"hex")}}).call(t,n(67).Buffer)},function(e,t,n){(function(e){function r(e,t){var n=new Error(t+" "+e);return n.errno=n.code=e,n.syscall=t,n}var i=n(!function(){var e=new Error('Cannot find module "net"');throw e.code="MODULE_NOT_FOUND",e}()),o=n(205)("abstract_socket.node"),s=o.socket,a=o.bind,c=o.connect,u=o.close,f=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"listen",value:function(e,n){var i=s();0>i&&this.emit(r(i,"socket"));var o={fd:i};i=a(i,e),0>i&&(u(o.fd),this.emit(r(i,"bind"))),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this,o,n)}}]),t}(i.Server);t.createServer=function(e){return new f(e)},t.connect=t.createConnection=function(t,n){var o={readable:!0,writable:!0},a=s();if(0>a){var f=new i.Socket(o);return e(function(){return f.emit("error",r(a,"socket"))}),f}var l=Object.assign({fd:a},o);if(a=c(a,t),0>a){u(l.fd);var h=new i.Socket(o);return e(function(){return h.emit("error",r(a,"connect"))}),h}var d=new i.Socket(l);return"function"==typeof n&&e(function(){return n(d)}),d}}).call(t,n(204).setImmediate)},function(e,t,n){(function(e,r){function i(e,t){this._id=e,this._clearFn=t}var o=n(79).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,c={},u=0;t.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=u++,r=arguments.length<2?!1:a.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete c[e]}}).call(t,n(204).setImmediate,n(204).clearImmediate)},function(e,t,n){(function(r,i){function o(e){"string"==typeof e?e={bindings:e}:e||(e={}),e.__proto__=l,e.module_root||(e.module_root=t.getRoot(t.getFileName())),".node"!=a.extname(e.bindings)&&(e.bindings+=".node");for(var r,i,o,s=[],u=0,f=e["try"].length;f>u;u++){r=c.apply(null,e["try"][u].map(function(t){return e[t]||t})),s.push(r);try{return i=e.path?n(206).resolve(r):n(206)(r),e.path||(i.path=r),i}catch(h){if(!/not find/i.test(h.message))throw h}}throw o=new Error("Could not locate the bindings file. Tried:\n"+s.map(function(t){return e.arrow+t}).join("\n")),o.tries=s,o}var s=n(198),a=n(199),c=a.join,u=a.dirname,f=s.existsSync||a.existsSync,l={arrow:r.env.NODE_BINDINGS_ARROW||" → ",compiled:r.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:r.platform,arch:r.arch,version:r.versions.node,bindings:"bindings.node","try":[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};e.exports=t=o,t.getFileName=function(e){var t,n=Error.prepareStackTrace,r=Error.stackTraceLimit,o={};return Error.stackTraceLimit=10,Error.prepareStackTrace=function(n,r){for(var o=0,s=r.length;s>o;o++)if(t=r[o].getFileName(),t!==i){if(!e)return;if(t!==e)return}},Error.captureStackTrace(o),o.stack,Error.prepareStackTrace=n,Error.stackTraceLimit=r,t},t.getRoot=function(e){for(var t,n=u(e);;){if("."===n&&(n=r.cwd()),f(c(n,"package.json"))||f(c(n,"node_modules")))return n;if(t===n)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');t=n,n=c(n,"..")}}}).call(t,n(79),"/index.js")},function(e,t,n){function r(e){return n(i(e))}function i(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./bindings":205,"./bindings.js":205};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=206},,,function(e,t,n){(function(e,r,i){var o=n(161).Stream,s=t,a=n(210),c=n(211),u=n(212),f=n(213),l=n(214),h=n(215),d=n(216),p=e.setImmediate||r.nextTick;s.Stream=o,s.through=a,s.from=c,s.duplex=u,s.map=f,s.pause=l,s.split=h,s.pipeline=s.connect=s.pipe=d,s.concat=s.merge=function(){var e=[].slice.call(arguments);1===e.length&&e[0]instanceof Array&&(e=e[0]);var t=new o;t.setMaxListeners(0);var n=0;return t.writable=t.readable=!0,e.length?e.forEach(function(r){r.pipe(t,{end:!1});var i=!1;r.on("end",function(){i||(i=!0,n++,n==e.length&&t.emit("end"))})}):r.nextTick(function(){t.emit("end")}),t.write=function(e){this.emit("data",e)},t.destroy=function(){e.forEach(function(e){e.destroy&&e.destroy()})},t},s.writeArray=function(e){if("function"!=typeof e)throw new Error("function writeArray (done): done must be function");var t=new o,n=[],r=!1;return t.write=function(e){n.push(e)},t.end=function(){r=!0,e(null,n)},t.writable=!0,t.readable=!1,t.destroy=function(){t.writable=t.readable=!1,r||e(new Error("destroyed before end"),n)},t},s.readArray=function(e){var t=new o,n=0,i=!1,s=!1;if(t.readable=!0,t.writable=!1,!Array.isArray(e))throw new Error("event-stream.read expects an array");return t.resume=function(){if(!s){i=!1;for(var r=e.length;r>n&&!i&&!s;)t.emit("data",e[n++]);n!=r||s||(s=!0,t.readable=!1,t.emit("end"))}},r.nextTick(t.resume),t.pause=function(){i=!0},t.destroy=function(){s=!0,t.emit("close")},t},s.readable=function(e,t){function n(r,o){r?(i.emit("error",r),t||i.emit("end")):arguments.length>1&&i.emit("data",o),p(function(){if(!(c||a||u))try{u=!0,e.call(i,s++,function(){u=!1,n.apply(null,arguments)})}catch(t){i.emit("error",t)}})}var i=new o,s=0,a=!1,c=!1,u=!1;if(i.readable=!0,i.writable=!1,"function"!=typeof e)throw new Error("event-stream.readable expects async function");return i.on("end",function(){c=!0}),i.resume=function(){a=!1,n()},r.nextTick(n),i.pause=function(){a=!0},i.destroy=function(){i.emit("end"),i.emit("close"),c=!0},i},s.mapSync=function(e){return s.through(function(t){var n;try{n=e(t)}catch(r){return this.emit("error",r)}void 0!==n&&this.emit("data",n)})},s.log=function(e){return s.through(function(t){[].slice.call(arguments);e?console.error(e,t):console.error(t),this.emit("data",t)})},s.child=function(e){return s.duplex(e.stdin,e.stdout)},s.parse=function(e){var t=!!(e?e.error:!1);return s.through(function(e){var n;try{e&&(n=JSON.parse(e.toString()))}catch(r){return t?this.emit("error",r):console.error(r,"attempting to parse:",e)}void 0!==n&&this.emit("data",n)})},s.stringify=function(){var e=n(67).Buffer;return s.mapSync(function(t){return JSON.stringify(e.isBuffer(t)?t.toString():t)+"\n"})},s.replace=function(e,t){return s.pipeline(s.split(e),s.join(t))},s.join=function(e){if("function"==typeof e)return s.wait(e);var t=!0;return s.through(function(n){return t||this.emit("data",e),t=!1,this.emit("data",n),!0})},s.wait=function(e){var t=[];return s.through(function(e){t.push(e)},function(){var n=i.isBuffer(t[0])?i.concat(t):t.join("");this.emit("data",n),this.emit("end"),e&&e(null,n)})},s.pipeable=function(){throw new Error("[EVENT-STREAM] es.pipeable is deprecated")}}).call(t,function(){return this}(),n(79),n(67).Buffer)},function(e,t,n){(function(r){function i(e,t,n){function i(){for(;u.length&&!l.paused;){var e=u.shift();if(null===e)return l.emit("end");l.emit("data",e)}}function s(){l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var a=!1,c=!1,u=[],f=!1,l=new o;return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(n&&n.autoDestroy===!1),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return f?l:(null===e&&(f=!0),u.push(e),i(),l)},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&r.nextTick(function(){l.destroy()})}),l.end=function(e){return a?void 0:(a=!0,arguments.length&&l.write(e),s(),l)},l.destroy=function(){return c?void 0:(c=!0,a=!0,u.length=0,l.writable=l.readable=!1,l.emit("close"),l)},l.pause=function(){return l.paused?void 0:(l.paused=!0,l)},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),i(),l.paused||l.emit("drain"),l},l}var o=n(161);t=e.exports=i,i.through=i}).call(t,n(79))},function(e,t,n){(function(t){var r=n(161);e.exports=function i(e){function n(){if(a.started=!0,!a.ended)for(;!a.ended&&!a.paused&&e.call(a,c++,function(){a.ended||a.paused||t.nextTick(n)}););}if(Array.isArray(e)){var o=0,s=e.length;return i(function(t){return s>o?this.emit("data",e[o++]):this.emit("end"),!0})}var a=new r,c=0;return a.ended=!1,a.started=!1,a.readable=!0,a.writable=!1,a.paused=!1,a.ended=!1,a.pause=function(){a.started=!0,a.paused=!0},a.resume=function(){a.started=!0,a.paused=!1,n()},a.on("end",function(){a.ended=!0,a.readable=!1,t.nextTick(a.destroy)}),a.destroy=function(){a.ended=!0,a.emit("close")},t.nextTick(function(){a.started||a.resume()}),a}}).call(t,n(79))},function(e,t,n){function r(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n)}function i(e,t){function n(t){function n(){return e[t].apply(e,arguments)}d[t]=n}function i(e){function n(){d.emit(e);var n=t[e];return n?n.apply(t,arguments):void t.emit(e)}d[e]=n}function f(e){function n(){var t=u.call(arguments);t.unshift(e),d.emit.apply(d,t)}t.on(e,n)}function l(){if(!p){p=!0;var e=u.call(arguments);e.unshift("end"),d.emit.apply(d,e)}}function h(e){d.emit("error",e)}var d=new o,p=!1;return r(s,n),r(a,i),r(c,f),t.on("end",l),e.on("drain",function(){d.emit("drain")}),e.on("error",h),t.on("error",h),d.writable=e.writable,d.readable=t.readable,d}var o=n(161),s=["write","end","destroy"],a=["resume","pause"],c=["data","close"],u=Array.prototype.slice;e.exports=i},function(e,t,n){(function(t){var r=n(161).Stream;e.exports=function(e,n){function i(e,t){var n=v+1;if(t===n?(void 0!==e&&c.emit.apply(c,["data",e]),v++,n++):y[t]=e,y.hasOwnProperty(n)){var r=y[n];return delete y[n],i(r,n)}l++,f===l&&(d&&(d=!1,c.emit("drain")),h&&a())}function o(e,t,n){p||(_=!0,(!e||u.opts.failures)&&i(t,n),e&&c.emit.apply(c,[g,e]),_=!1)}function s(t,n,r){return e.call(null,t,function(e,t){r(e,t,n)})}function a(e){return h=!0,c.writable=!1,void 0!==e?i(e,f):void(f==l&&(c.readable=!1,c.emit("end"),c.destroy()))}var c=new r,u=this,f=0,l=0,h=!1,d=!1,p=!1,v=0,_=!1;this.opts=n||{};var g=this.opts.failures?"failure":"error",y={};return c.writable=!0,c.readable=!0,c.write=function(e){if(h)throw new Error("map stream is not writable");_=!1,f++;try{var t=s(e,f,o);return d=t===!1,!d}catch(n){if(_)throw n;return o(n),!d}},c.end=function(e){h||a()},c.destroy=function(){h=p=!0,c.writable=c.readable=d=!1,t.nextTick(function(){c.emit("close")})},c.pause=function(){d=!0},c.resume=function(){d=!1},c}}).call(t,n(79))},function(e,t,n){e.exports=n(210)},function(e,t,n){function r(e,t,n){function r(e,n){if(t){try{n=t(n)}catch(r){return e.emit("error",r)}"undefined"!=typeof n&&e.queue(n)}else e.queue(n)}function s(t,n){var i=((null!=c?c:"")+n).split(e);c=i.pop(),u&&c.length>u&&t.emit("error",new Error("maximum buffer reached"));for(var o=0;o<i.length;o++){var s=i[o];r(t,s)}}var a=new o,c="",u=n&&n.maxLength;return"function"==typeof e&&(t=e,e=null),e||(e=/\r?\n/),i(function(e){s(this,a.write(e))},function(){a.end&&s(this,a.end()),null!=c&&r(this,c),this.queue(null)})}var i=n(210),o=n(169).StringDecoder;e.exports=r},function(e,t,n){var r=n(212);e.exports=function(){function e(t){t.length<2||(t[0].pipe(t[1]),e(t.slice(1)))}function t(){var e=[].slice.call(arguments);e.unshift("error"),s.emit.apply(s,e)}var n=[].slice.call(arguments),i=n[0],o=n[n.length-1],s=r(i,o);if(1==n.length)return n[0];if(!n.length)throw new Error("connect called with empty args");e(n);for(var a=1;a<n.length-1;a++)n[a].on("error",t);return s}},function(e,t,n){var r=n(159).EventEmitter,i=n(186),o=n(218);e.exports=function s(e,t){function a(e,t){this.name=e,this.service=t,this.as=function(e){return this.proxy[e]}}function c(e,t){this.name=e,this.bus=t,this.getObject=function(e,t){var r=new a(e,this),i=n(219);i(r,function(e,n,i){return e?t(e):(r.proxy=n,r.nodes=i,void t(null,r))})},this.getInterface=function(e,t,n){this.getObject(e,function(e,r){return e?n(e):void n(null,r.as(t))})}}if(!(this instanceof s))return new s(e);t||(t={});var u=this;this.connection=e,this.serial=1,this.cookies={},this.methodCallHandlers={},this.signals=new r,this.exportedObjects={},this.invoke=function(e,t){e.type||(e.type=i.messageType.methodCall),e.serial=u.serial,u.serial++,this.cookies[e.serial]=t,u.connection.message(e)},this.invokeDbus=function(e,t){e.path||(e.path="/org/freedesktop/DBus"),e.destination||(e.destination="org.freedesktop.DBus"),e["interface"]||(e["interface"]="org.freedesktop.DBus"),u.invoke(e,t)},this.mangle=function(e,t,n){var r={};return"object"===("undefined"==typeof e?"undefined":_typeof(e))?(r.path=e.path,r["interface"]=e["interface"],r.member=e.member):(r.path=e,r["interface"]=t,r.member=n),JSON.stringify(r)},this.sendSignal=function(e,t,n,r,o){var s={type:i.messageType.signal,serial:u.serial,"interface":t,path:e,member:n};r&&(s.signature=r,s.body=o),u.connection.message(s)},this.sendError=function(e,t,n){var r={type:i.messageType.error,replySerial:e.serial,destination:e.sender,errorName:t,signature:"s",body:[n]};this.connection.message(r)},this.sendReply=function(e,t,n){var r={type:i.messageType.methodReturn,replySerial:e.serial,destination:e.sender,signature:t,body:n};this.connection.message(r)},this.connection.on("message",function(e){var t;if(e.type==i.messageType.methodReturn||e.type==i.messageType.error){if(t=u.cookies[e.replySerial]){delete u.cookies[e.replySerial];var n={connection:u.connection,bus:u,message:e,signature:e.signature},r=e.body||[];e.type==i.messageType.methodReturn?(r=[null].concat(r),t.apply(n,r)):t.call(n,r)}}else if(e.type==i.messageType.signal)u.signals.emit(u.mangle(e),e.body,e.signature);else{if(o(e,u))return;var s,a,c;
if(s=u.exportedObjects[e.path]){if(a=s[e["interface"]]){c=a[1];var f=c[e.member];if(!f)throw console.error("Method "+e.member+" is not implemented "),new Error("Method "+e.member+" is not implemented ");try{p=f.apply(c,e.body)}catch(l){throw console.error("Caught exception while trying to execute handler: ",l),l}var h=a[0].methods[e.member][1],d={type:i.messageType.methodReturn,destination:e.sender,replySerial:e.serial};return p&&(d.signature=h,d.body=[p]),void u.connection.message(d)}console.error("Interface "+e["interface"]+" is not supported")}if(t=u.methodCallHandlers[u.mangle(e)]){var p;try{p=t[0].apply(null,e.body)}catch(l){return console.error("Caught exception while trying to execute handler: ",l),void u.sendError(l.message,l.description)}var d={type:i.messageType.methodReturn,destination:e.sender,replySerial:e.serial};p&&(d.signature=t[1],d.body=p),u.connection.message(d)}else u.sendError(e,"org.freedesktop.DBus.Error.UnknownService","Uh oh oh")}}),this.setMethodCallHandler=function(e,t,n,r){var i=u.mangle(e,t,n);u.methodCallHandlers[i]=r},this.exportInterface=function(e,t,n){var r;if(r=u.exportedObjects[t]?u.exportedObjects[t]:u.exportedObjects[t]={},r[n.name]=[n,e],"function"==typeof e.emit){var o=e.emit;e.emit=function(){var r=Array.prototype.slice.apply(arguments),s=r[0];if(!s)throw new Error("Trying to emit undefined signa");var a;if(n.signals&&n.signals[s]){a=n.signals[s];var c={type:i.messageType.signal,serial:u.serial,"interface":n.name,path:t,member:s};a[0]&&(c.signature=a[0],c.body=r.slice(1)),u.connection.message(c),u.serial++}o.apply(e,r)}}},t.direct!==!0?this.invokeDbus({member:"Hello"},function(e,t){if(e)throw new Error(e);u.name=t}):u.name=null,this.getService=function(e){return new c(e,this)},this.getObject=function(e,t,n){var r=this.getService(e);return r.getObject(t,n)},this.getInterface=function(e,t,n,r){return this.getObject(e,t,function(e,t){return e?r(e):void r(null,t.as(n))})},this.addMatch=function(e,t){return u.name?void this.invokeDbus({member:"AddMatch",signature:"s",body:[e]},t):t(null,null)},this.removeMatch=function(e,t){return u.name?void this.invokeDbus({member:"RemoveMatch",signature:"s",body:[e]},t):t(null,null)},this.getId=function(e){this.invokeDbus({member:"GetId"},e)},this.requestName=function(e,t,n){this.invokeDbus({member:"RequestName",signature:"su",body:[e,t]},function(e,t){n&&n(e,t)})},this.releaseName=function(e,t){this.invokeDbus({member:"ReleaseName",signature:"s",body:[e]},t)},this.listNames=function(e){this.invokeDbus({member:"ListNames"},e)},this.listActivatableNames=function(e){this.invokeDbus({member:"ListActivatableNames",signature:"s",body:[name]},e)},this.updateActivationEnvironment=function(e,t){this.invokeDbus({member:"UpdateActivationEnvironment",signature:"a{ss}",body:[e]},t)},this.startServiceByName=function(e,t,n){this.invokeDbus({member:"StartServiceByName",signature:"su",body:[e,t]},n)},this.getConnectionUnixUser=function(e,t){this.invokeDbus({member:"GetConnectionUnixUser",signature:"s",body:[e]},t)},this.getConnectionUnixProcessId=function(e,t){this.invokeDbus({member:"GetConnectionUnixProcessID",signature:"s",body:[e]},t)},this.getNameOwner=function(e,t){this.invokeDbus({member:"GetNameOwner",signature:"s",body:[e]},t)},this.nameHasOwner=function(e,t){this.invokeDbus({member:"NameHasOwner",signature:"s",body:[e]},t)}}},function(e,t,n){function r(e){var t,n=[],r=function(e,t,r){if(e){var o=a(e);o.forEach(function(e,o){var s=t?t[o]:r+o,a="signal"===r?"":'" direction="'+r;n.push('      <arg type="'+i([e])+'" name="'+s+a+'" />')})}};if(n.push('  <interface name="'+e.name+'">'),e.methods)for(t in e.methods){var o=e.methods[t];n.push('    <method name="'+t+'">'),r(o[0],o[2],"in"),r(o[1],o[3],"out"),n.push("    </method>")}if(e.signals)for(t in e.signals){var s=e.signals[t];n.push('    <signal name="'+t+'">'),r(s[0],s.slice(1),"signal"),n.push("    </signal>")}if(e.properties)for(t in e.properties)n.push('    <property name="'+t+'" type="'+e.properties[t]+'" access="readwrite"/>');return n.push("  </interface>"),n.join("\n")}function i(e){var t=[];return e.forEach(function(e){t.push(e.type+i(e.child)),"{"===e.type&&t.push("}"),"("===e.type&&t.push(")")}),t.join("")}var o,s=n(186),a=n(190),c='<!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"\n    "http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">';e.exports=function(e,t){if("org.freedesktop.DBus.Introspectable"===e["interface"]&&"Introspect"===e.member){"/"==e.path&&(e.path="");var n,i=[c],a={};for(var u in t.exportedObjects)if(0===u.indexOf(e.path))if(n=t.exportedObjects[e.path])a[e.path]=n;else{if("/"!=u[e.path.length])continue;var f=u.substr(e.path.length),l=f.split("/"),h=l[1];a[h]=null}var d,p=Object.keys(a).length;if(0===p)i.push("<node/>");else if(1===p)if(n=a[Object.keys(a)[0]]){i.push("<node>");for(d in n)i.push(r(n[d][0]));i.push(o),i.push("</node>")}else i.push('<node>\n  <node name="'+Object.keys(a)[0]+'"/>\n  </node>');else{i.push("<node>");for(var v in a)if(null===a[v])i.push('  <node name="'+v+'" />');else{n=a[v],i.push('  <node name="'+v+'" >');for(d in n)i.push(r(n[d][0]));i.push(o),i.push("  </node>")}i.push("</node>")}var _={type:s.messageType.methodReturn,replySerial:e.serial,destination:e.sender,signature:"s",body:[i.join("\n")]};return t.connection.message(_),1}if("org.freedesktop.DBus.Properties"===e["interface"]){var g=e.body[0],n=t.exportedObjects[e.path];if(!n||!n[g])return t.sendError(e,"org.freedesktop.DBus.Error.UnknownMethod","Uh oh oh"),1;var y=n[g][1],_={type:s.messageType.methodReturn,replySerial:e.serial,destination:e.sender};if("Get"===e.member||"Set"===e.member){var m=e.body[1],b=n[g][0].properties[m];if("Get"===e.member){var w=y[m];_.signature="v",_.body=[[b,w]]}else y[m]=1234}else if("GetAll"==e.member){_.signature="a{sv}";var E=[];for(var k in n[g][0].properties){var x=n[g][0].properties[k];E.push([k,[x,y[k]]])}_.body=[E]}return t.connection.message(_),1}if("org.freedesktop.DBus.Peer"===e["interface"]){var _={type:s.messageType.methodReturn,replySerial:e.serial,destination:e.sender};return"Ping"===e.member||"GetMachineId"===e.member&&(_.signature="s",_.body=["This is a machine id. TODO: implement"]),t.connection.message(_),1}return 0},e.exports.interfaceToXML=r,o='  <interface name="org.freedesktop.DBus.Properties">\n    <method name="Get">\n      <arg type="s" name="interface_name" direction="in"/>\n      <arg type="s" name="property_name" direction="in"/>\n      <arg type="v" name="value" direction="out"/>\n    </method>\n    <method name="GetAll">\n      <arg type="s" name="interface_name" direction="in"/>\n      <arg type="a{sv}" name="properties" direction="out"/>\n    </method>\n    <method name="Set">\n      <arg type="s" name="interface_name" direction="in"/>\n      <arg type="s" name="property_name" direction="in"/>\n      <arg type="v" name="value" direction="in"/>\n    </method>\n    <signal name="PropertiesChanged">\n      <arg type="s" name="interface_name"/>\n      <arg type="a{sv}" name="changed_properties"/>\n      <arg type="as" name="invalidated_properties"/>\n    </signal>\n  </interface>\n  <interface name="org.freedesktop.DBus.Introspectable">\n    <method name="Introspect">\n      <arg type="s" name="xml_data" direction="out"/>\n    </method>\n  </interface>\n  <interface name="org.freedesktop.DBus.Peer">\n    <method name="Ping"/>\n    <method name="GetMachineId">\n      <arg type="s" name="machine_uuid" direction="out"/>\n    </method>\n  </interface>'},function(e,t,n){var r=n(220);e.exports=function(t,n){var i=t.service.bus;i.invoke({destination:t.service.name,path:t.name,"interface":"org.freedesktop.DBus.Introspectable",member:"Introspect"},function(o,s){if(o)return n(o);var a=new r.Parser({explicitArray:!0});a.parseString(s,function(r,o){if(r)return n(r);if(!o["interface"]){if(o.node&&o.node.length>0&&o.node[0]["@"]){var s=Object.assign(t,{});return"/"!==s.name.slice(-1)&&(s.name+="/"),s.name+=o.node[0]["@"].name,e.exports(s,n)}return n(new Error("No such interface found"))}var a,c,u,f,l,h,d,p,v,_,g,y,m={},b=[],w=o["interface"],E=o.node;for(null==E&&(E=[]),a=1;a<E.length;++a)b.push(E[a]["@"].name);for(a=0;a<w.length;++a){for(p=w[a],f=p["@"].name,y=m[f]={},function(){function e(e){var t;return-1==(t=r.indexOf(e))&&(t=r.push(e)-1,o[t]=function(t){e.apply(null,t)}),o[t]}function n(e,t,n){return"type='signal',path='"+e+"',interface='"+t+"',member='"+n+"'"}var r=[],o=[];y.addListener=y.on=function(r){return function(o,s){var a=i.mangle(t.name,r,o);if(i.signals.listeners(a).length)i.signals.on(a,e(s));else{var c=n(t.name,r,o);i.addMatch(c,function(t,n){if(t)throw new Error(t);i.signals.on(a,e(s))})}}}(f),y.removeListener=function(s){return function(a,c){var u=i.mangle(t.name,s,a);if(i.signals.removeListener(u,e(c)),!i.signals.listeners(u).length){var f=n(t.name,s,a);i.removeMatch(f,function(e,t){if(e)throw new Error(e);r.length=0,o.length=0})}}}(f)}(),c=0;p.method&&c<p.method.length;++c){for(l=p.method[c],g="",T=l["@"].name,v=0;l.arg&&v<l.arg.length;++v)_=l.arg[v]["@"],"in"===_.direction&&(g+=_.type);y[T]=function(e,n,r){return function(){var o=Array.prototype.slice.apply(arguments),s="function"==typeof o[o.length-1]?o.pop():function(){},a={destination:t.service.name,path:t.name,"interface":e,member:n};""!==r&&(a.signature=r,a.body=o),i.invoke(a,s)}}(f,T,g)}for(var k=0;p.property&&k<p.property.length;++k){var x=function(e,n,r,o){Object.defineProperty(e,r,{enumerable:!0,get:function(){return function(e){i.invoke({destination:t.service.name,path:t.name,"interface":"org.freedesktop.DBus.Properties",member:"Get",signature:"ss",body:[n,r]},function(t,n){t&&e(t);var r=n[0];1===r.length?e(t,n[1][0]):e(t,n[1])})}},set:function(e){i.invoke({destination:t.service.name,path:t.name,"interface":"org.freedesktop.DBus.Properties",member:"Set",signature:"ssv",body:[n,r,[o["@"].type,e]]})}})};h=p.property[k],T=h["@"].name,x(y,f,T,h)}for(u=0;p.signal&&u<p.signal.length;++u){d=p.signal[u];var T=d["@"].name}}n(null,m,b)})})}},function(e,t,n){(function(){var e,r,i,o={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a=function(e,t){return function(){return e.apply(t,arguments)}};i=n(221),e=n(159),r=function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!=e&&0===Object.keys(e).length},t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null},.2:{explicitCharkey:!1,trim:!1,normalize:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null}},t.ValidationError=function(e){function t(e){this.message=e}return s(t,e),t.name="ValidationError",t}(Error),t.Parser=function(e){function n(e){this.parseString=a(this.parseString,this),this.reset=a(this.reset,this);var n,r,i;this.options={},i=t.defaults[.1];for(n in i)o.call(i,n)&&(r=i[n],this.options[n]=r);for(n in e)o.call(e,n)&&(r=e[n],this.options[n]=r);this.reset()}return s(n,e),n.name="Parser",n.prototype.reset=function(){var e,t,n,s,a=this;return this.removeAllListeners(),this.saxParser=i.parser(!0,{trim:!1,normalize:!1}),n=!1,this.saxParser.onerror=function(e){return n?void 0:(n=!0,a.emit("error",e))},this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,s=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){var r,i,c;if(i={},i[t]="",!a.options.ignoreAttrs){c=n.attributes;for(r in c)o.call(c,r)&&(e in i||a.options.mergeAttrs||(i[e]={}),a.options.mergeAttrs?i[r]=n.attributes[r]:i[e][r]=n.attributes[r])}return i["#name"]=n.name,s.push(i)},this.saxParser.onclosetag=function(){var e,n,i,o,c,u;return i=s.pop(),n=i["#name"],delete i["#name"],c=s[s.length-1],i[t].match(/^\s*$/)?delete i[t]:(a.options.trim&&(i[t]=i[t].trim()),a.options.normalize&&(i[t]=i[t].replace(/\s{2,}/g," ").trim()),1===Object.keys(i).length&&t in i&&!a.EXPLICIT_CHARKEY&&(i=i[t])),void 0!==a.options.emptyTag&&r(i)&&(i=a.options.emptyTag),null!=a.options.validator&&(u="/"+function(){var t,n,r;for(r=[],t=0,n=s.length;n>t;t++)e=s[t],r.push(e["#name"]);return r}().concat(n).join("/"),i=a.options.validator(u,c&&c[n],i)),s.length>0?a.options.explicitArray?(c[n]instanceof Array||(c[n]=[]),c[n].push(i)):n in c?c[n]instanceof Array?c[n].push(i):(o=c[n],c[n]=[o],c[n].push(i)):c[n]=i:(a.options.explicitRoot&&(o=i,i={},i[n]=o),a.resultObject=i,a.emit("end",a.resultObject))},this.saxParser.ontext=this.saxParser.oncdata=function(e){var n;return n=s[s.length-1],n?n[t]+=e:void 0}},n.prototype.parseString=function(e,n){if(null!=n&&"function"==typeof n&&(this.on("end",function(e){return this.reset(),n(null,e)}),this.on("error",function(e){return this.reset(),n(e)})),""===e.toString().trim())return this.emit("end",null),!0;try{return this.saxParser.write(e.toString())}catch(r){if(r instanceof t.ValidationError)return this.emit("error",r.message);throw r}},n}(e.EventEmitter)}).call(this)},function(e,t,n){(function(e){!function(t){function r(e,n){if(!(this instanceof r))return new r(e,n);var i=this;o(i),i.q=i.c="",i.bufferCheckPosition=t.MAX_BUFFER_LENGTH,i.opt=n||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=W.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(z)),i.trackPosition=i.opt.position!==!1,i.trackPosition&&(i.position=i.line=i.column=0),p(i,"onready")}function i(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,i=0,o=R.length;o>i;i++){var s=e[R[i]].length;if(s>n)switch(R[i]){case"textNode":_(e);break;case"cdata":v(e,"oncdata",e.cdata),e.cdata="";break;case"script":v(e,"onscript",e.script),e.script="";break;default:y(e,"Max buffer length exceeded: "+R[i])}r=Math.max(r,s)}var a=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=a+e.position}function o(e){for(var t=0,n=R.length;n>t;t++)e[R[t]]=""}function s(e){_(e),""!==e.cdata&&(v(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(v(e,"onscript",e.script),e.script="")}function a(e,t){return new c(e,t)}function c(e,t){if(!(this instanceof c))return new c(e,t);N.apply(this),this._parser=new r(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,P.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){return t?void n.on(e,t):(n.removeAllListeners(e),n._parser["on"+e]=t,t)},enumerable:!0,configurable:!1})})}function u(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function f(e,t){return e.test(t)}function l(e,t){return e[t]}function h(e,t){return!f(e,t)}function d(e,t){return!l(e,t)}function p(e,t,n){e[t]&&e[t](n)}function v(e,t,n){e.textNode&&_(e),p(e,t,n)}function _(e){e.textNode=g(e.opt,e.textNode),e.textNode&&p(e,"ontext",e.textNode),e.textNode=""}function g(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function y(e,t){return _(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,p(e,"onerror",t),e}function m(e){return e.sawRoot&&!e.closedRoot&&b(e,"Unclosed root tag"),e.state!==W.BEGIN&&e.state!==W.BEGIN_WHITESPACE&&e.state!==W.TEXT&&y(e,"Unexpected end"),_(e),e.c="",e.closed=!0,p(e,"onend"),r.call(e,e.strict,e.opt),e}function b(e,t){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&y(e,t)}function w(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,v(e,"onopentagstart",n)}function E(e,t){var n=e.indexOf(":"),r=0>n?["",e]:e.split(":"),i=r[0],o=r[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function k(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return void(e.attribName=e.attribValue="");if(e.opt.xmlns){var t=E(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==F)b(e,"xml: prefix must be bound to "+F+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==U)b(e,"xmlns: prefix must be bound to "+U+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,v(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function x(e,t){if(e.opt.xmlns){var n=e.tag,r=E(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(b(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){v(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,s=e.attribList.length;s>o;o++){var a=e.attribList[o],c=a[0],u=a[1],f=E(c,!0),l=f.prefix,h=f.local,d=""===l?"":n.ns[l]||"",p={name:c,value:u,prefix:l,local:h,uri:d};l&&"xmlns"!==l&&!d&&(b(e,"Unbound namespace prefix: "+JSON.stringify(l)),p.uri=l),e.tag.attributes[c]=p,v(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),v(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=W.TEXT:e.state=W.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function T(e){if(!e.tagName)return b(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=W.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=W.SCRIPT);v(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){var i=e.tags[t];if(i.name===r)break;b(e,"Unexpected close tag")}if(0>t)return b(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=W.TEXT);e.tagName=n;for(var o=e.tags.length;o-- >t;){var s=e.tag=e.tags.pop();e.tagName=e.tag.name,v(e,"onclosetag",e.tagName);var a={};for(var c in s.ns)a[c]=s.ns[c];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&s.ns!==u.ns&&Object.keys(s.ns).forEach(function(t){var n=s.ns[t];v(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=W.TEXT}function S(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(b(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function A(e,t){"<"===t?(e.state=W.OPEN_WAKA,e.startTagPosition=e.position):d(B,t)&&(b(e,"Non-whitespace before first tag."),e.textNode=t,e.state=W.TEXT)}function O(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function C(e){var t=this;if(this.error)throw this.error;if(t.closed)return y(t,"Cannot write after close. Assign an onready handler.");if(null===e)return m(t);"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(e=e.toString());for(var n=0,r="";;){if(r=O(e,n++),t.c=r,!r)break;switch(t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++),t.state){case W.BEGIN:if(t.state=W.BEGIN_WHITESPACE,"\ufeff"===r)continue;A(t,r);continue;case W.BEGIN_WHITESPACE:A(t,r);continue;case W.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=n-1;r&&"<"!==r&&"&"!==r;)r=O(e,n++),r&&t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,n-1)}"<"!==r||t.sawRoot&&t.closedRoot&&!t.strict?(!d(B,r)||t.sawRoot&&!t.closedRoot||b(t,"Text data outside of root node."),"&"===r?t.state=W.TEXT_ENTITY:t.textNode+=r):(t.state=W.OPEN_WAKA,t.startTagPosition=t.position);continue;case W.SCRIPT:"<"===r?t.state=W.SCRIPT_ENDING:t.script+=r;continue;case W.SCRIPT_ENDING:"/"===r?t.state=W.CLOSE_TAG:(t.script+="<"+r,t.state=W.SCRIPT);continue;case W.OPEN_WAKA:if("!"===r)t.state=W.SGML_DECL,t.sgmlDecl="";else if(l(B,r));else if(f(H,r))t.state=W.OPEN_TAG,t.tagName=r;else if("/"===r)t.state=W.CLOSE_TAG,t.tagName="";else if("?"===r)t.state=W.PROC_INST,t.procInstName=t.procInstBody="";else{if(b(t,"Unencoded <"),t.startTagPosition+1<t.position){var s=t.position-t.startTagPosition;r=new Array(s).join(" ")+r}t.textNode+="<"+r,t.state=W.TEXT}continue;case W.SGML_DECL:(t.sgmlDecl+r).toUpperCase()===M?(v(t,"onopencdata"),t.state=W.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+r==="--"?(t.state=W.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===D?(t.state=W.DOCTYPE,(t.doctype||t.sawRoot)&&b(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===r?(v(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=W.TEXT):l(j,r)?(t.state=W.SGML_DECL_QUOTED,t.sgmlDecl+=r):t.sgmlDecl+=r;continue;case W.SGML_DECL_QUOTED:r===t.q&&(t.state=W.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case W.DOCTYPE:">"===r?(t.state=W.TEXT,v(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,"["===r?t.state=W.DOCTYPE_DTD:l(j,r)&&(t.state=W.DOCTYPE_QUOTED,t.q=r));continue;case W.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=W.DOCTYPE);continue;case W.DOCTYPE_DTD:t.doctype+=r,"]"===r?t.state=W.DOCTYPE:l(j,r)&&(t.state=W.DOCTYPE_DTD_QUOTED,t.q=r);continue;case W.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=W.DOCTYPE_DTD,t.q="");continue;case W.COMMENT:"-"===r?t.state=W.COMMENT_ENDING:t.comment+=r;continue;case W.COMMENT_ENDING:"-"===r?(t.state=W.COMMENT_ENDED,t.comment=g(t.opt,t.comment),t.comment&&v(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=W.COMMENT);continue;case W.COMMENT_ENDED:">"!==r?(b(t,"Malformed comment"),t.comment+="--"+r,t.state=W.COMMENT):t.state=W.TEXT;continue;case W.CDATA:"]"===r?t.state=W.CDATA_ENDING:t.cdata+=r;continue;case W.CDATA_ENDING:"]"===r?t.state=W.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=W.CDATA);continue;case W.CDATA_ENDING_2:">"===r?(t.cdata&&v(t,"oncdata",t.cdata),v(t,"onclosecdata"),t.cdata="",t.state=W.TEXT):"]"===r?t.cdata+="]":(t.cdata+="]]"+r,t.state=W.CDATA);continue;case W.PROC_INST:"?"===r?t.state=W.PROC_INST_ENDING:l(B,r)?t.state=W.PROC_INST_BODY:t.procInstName+=r;continue;case W.PROC_INST_BODY:if(!t.procInstBody&&l(B,r))continue;"?"===r?t.state=W.PROC_INST_ENDING:t.procInstBody+=r;continue;case W.PROC_INST_ENDING:">"===r?(v(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=W.TEXT):(t.procInstBody+="?"+r,t.state=W.PROC_INST_BODY);continue;case W.OPEN_TAG:f(q,r)?t.tagName+=r:(w(t),">"===r?x(t):"/"===r?t.state=W.OPEN_TAG_SLASH:(d(B,r)&&b(t,"Invalid character in tag name"),t.state=W.ATTRIB));continue;case W.OPEN_TAG_SLASH:">"===r?(x(t,!0),T(t)):(b(t,"Forward-slash in opening tag not followed by >"),t.state=W.ATTRIB);continue;case W.ATTRIB:if(l(B,r))continue;">"===r?x(t):"/"===r?t.state=W.OPEN_TAG_SLASH:f(H,r)?(t.attribName=r,t.attribValue="",t.state=W.ATTRIB_NAME):b(t,"Invalid attribute name");continue;case W.ATTRIB_NAME:"="===r?t.state=W.ATTRIB_VALUE:">"===r?(b(t,"Attribute without value"),t.attribValue=t.attribName,k(t),x(t)):l(B,r)?t.state=W.ATTRIB_NAME_SAW_WHITE:f(q,r)?t.attribName+=r:b(t,"Invalid attribute name");continue;case W.ATTRIB_NAME_SAW_WHITE:if("="===r)t.state=W.ATTRIB_VALUE;else{if(l(B,r))continue;b(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",v(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===r?x(t):f(H,r)?(t.attribName=r,t.state=W.ATTRIB_NAME):(b(t,"Invalid attribute name"),t.state=W.ATTRIB)}continue;case W.ATTRIB_VALUE:if(l(B,r))continue;l(j,r)?(t.q=r,t.state=W.ATTRIB_VALUE_QUOTED):(b(t,"Unquoted attribute value"),t.state=W.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case W.ATTRIB_VALUE_QUOTED:if(r!==t.q){"&"===r?t.state=W.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}k(t),t.q="",t.state=W.ATTRIB_VALUE_CLOSED;continue;case W.ATTRIB_VALUE_CLOSED:l(B,r)?t.state=W.ATTRIB:">"===r?x(t):"/"===r?t.state=W.OPEN_TAG_SLASH:f(H,r)?(b(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=W.ATTRIB_NAME):b(t,"Invalid attribute name");continue;case W.ATTRIB_VALUE_UNQUOTED:if(d(L,r)){"&"===r?t.state=W.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}k(t),">"===r?x(t):t.state=W.ATTRIB;continue;case W.CLOSE_TAG:if(t.tagName)">"===r?T(t):f(q,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=W.SCRIPT):(d(B,r)&&b(t,"Invalid tagname in closing tag"),t.state=W.CLOSE_TAG_SAW_WHITE);else{if(l(B,r))continue;h(H,r)?t.script?(t.script+="</"+r,t.state=W.SCRIPT):b(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case W.CLOSE_TAG_SAW_WHITE:if(l(B,r))continue;">"===r?T(t):b(t,"Invalid characters in closing tag");continue;case W.TEXT_ENTITY:case W.ATTRIB_VALUE_ENTITY_Q:case W.ATTRIB_VALUE_ENTITY_U:var a,c;switch(t.state){case W.TEXT_ENTITY:a=W.TEXT,c="textNode";break;case W.ATTRIB_VALUE_ENTITY_Q:a=W.ATTRIB_VALUE_QUOTED,c="attribValue";break;case W.ATTRIB_VALUE_ENTITY_U:a=W.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===r?(t[c]+=S(t),t.entity="",t.state=a):f(t.entity.length?G:V,r)?t.entity+=r:(b(t,"Invalid character in entity name"),t[c]+="&"+t.entity+r,t.entity="",t.state=a);continue;default:throw new Error(t,"Unknown state: "+t.state)}}return t.position>=t.bufferCheckPosition&&i(t),t}t.parser=function(e,t){return new r(e,t)},t.SAXParser=r,t.SAXStream=c,t.createStream=a,t.MAX_BUFFER_LENGTH=65536;var R=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}t.prototype=e;var n=new t;return n}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){m(this)},write:C,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var N;try{N=n(161).Stream}catch(I){N=function(){}}var P=t.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});c.prototype=Object.create(N.prototype,{constructor:{value:c}}),c.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var r=n(169).StringDecoder;this._decoder=new r("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},c.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},c.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===P.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),N.prototype.on.call(n,e,t)};var B="\r\n	 ",j="'\"",L=B+">",M="[CDATA[",D="DOCTYPE",F="http://www.w3.org/XML/1998/namespace",U="http://www.w3.org/2000/xmlns/",z={xml:F,xmlns:U};B=u(B);var H=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,G=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;j=u(j),L=u(L);var W=0;t.STATE={BEGIN:W++,BEGIN_WHITESPACE:W++,TEXT:W++,TEXT_ENTITY:W++,OPEN_WAKA:W++,SGML_DECL:W++,SGML_DECL_QUOTED:W++,DOCTYPE:W++,DOCTYPE_QUOTED:W++,DOCTYPE_DTD:W++,DOCTYPE_DTD_QUOTED:W++,COMMENT_STARTING:W++,COMMENT:W++,COMMENT_ENDING:W++,COMMENT_ENDED:W++,CDATA:W++,CDATA_ENDING:W++,CDATA_ENDING_2:W++,PROC_INST:W++,PROC_INST_BODY:W++,PROC_INST_ENDING:W++,OPEN_TAG:W++,OPEN_TAG_SLASH:W++,ATTRIB:W++,ATTRIB_NAME:W++,ATTRIB_NAME_SAW_WHITE:W++,ATTRIB_VALUE:W++,ATTRIB_VALUE_QUOTED:W++,ATTRIB_VALUE_CLOSED:W++,ATTRIB_VALUE_UNQUOTED:W++,ATTRIB_VALUE_ENTITY_Q:W++,ATTRIB_VALUE_ENTITY_U:W++,CLOSE_TAG:W++,CLOSE_TAG_SAW_WHITE:W++,SCRIPT:W++,SCRIPT_ENDING:W++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(e){var n=t.ENTITIES[e],r="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r});for(var Z in t.STATE)t.STATE[t.STATE[Z]]=Z;W=t.STATE,String.fromCodePoint||!function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,r,i=16384,o=[],s=-1,a=arguments.length;if(!a)return"";for(var c="";++s<a;){var u=Number(arguments[s]);if(!isFinite(u)||0>u||u>1114111||t(u)!==u)throw RangeError("Invalid code point: "+u);
65535>=u?o.push(u):(u-=65536,n=(u>>10)+55296,r=u%1024+56320,o.push(n,r)),(s+1===a||o.length>i)&&(c+=e.apply(null,o),o.length=0)}return c};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}(t)}).call(t,n(67).Buffer)},function(e,t,n){var r=n(185),i=(n(159).EventEmitter,n(!function(){var e=new Error('Cannot find module "net"');throw e.code="MODULE_NOT_FOUND",e}()));e.exports.createServer=function(e){function t(){var t=123;this.server=i.createServer(function(n){n.idd=t,t++;var i=r({stream:n,server:!0});e&&e(i)}),this.listen=this.server.listen.bind(this.server)}return new t}},function(e,t,n){function r(e){if(this.id=e&&e.id||null,this.networkId=this.id||null,this["default"]=e&&e["default"]||!1,this.localShortcut=e&&e.localShortcut===!1?!1:!0,this.reconnectDelay=e&&e.reconnectDelay||1e4,this.httpTransport=e&&e.httpTransport,this.url=e&&e.url||null,this.server=null,null!=this.url){var t=i.parse(this.url);if("ws:"!=t.protocol)throw new Error('Invalid protocol, "ws:" expected');if(-1==this.url.indexOf(":id"))throw new Error('":id" placeholder missing in url');this.address=t.protocol+"//"+t.host,this.ready=this._initServer(this.url)}else this.address=null,this.ready=s.resolve(this);this.agents={}}var i=n(14),o=n(12),s=n(2),a=n(13),c=n(107),u=n(224);r.prototype=new c,r.prototype.type="ws",r.prototype.getUrl=function(e){return this.url?this.url.replace(":id",e):null},r.prototype._initServer=function(e){var t=n(225).Server,r=i.parse(e),o=r.port||80,a=this;return new s(function(e,n){void 0!==a.httpTransport?(console.log("WEBSOCKETS: using available server."),a.server=new t({server:a.httpTransport.server},function(){e(a)})):a.server=new t({port:o},function(){e(a)}),a.server.on("connection",a._onConnection.bind(a)),a.server.on("error",function(e){n(e)})})},r.prototype._onConnection=function(e){var t=e.upgradeReq.url,n=i.parse(t,!0),r=n.pathname,s=a.normalizeURL(this.address+r),c=n.query,u=c.id||o(),f=this.agents[s];f?f._onConnection(u,e):e.close()},r.prototype.connect=function(e,t){var n=-1!==e.indexOf("://"),r=n?e:this.getUrl(e)||e;if(r&&(r=a.normalizeURL(r)),this.agents[r])throw new Error("Agent with id "+this.id+" already exists");var i=new u(this,r,t);return this.agents[i.url]=i,i},r.prototype.close=function(){for(var e in this.agents)this.agents.hasOwnProperty(e)&&this.agents[e].close();this.agents={},this.server&&this.server.close()},e.exports=r},function(e,t,n){function r(e,t,n){this.transport=e,this.url=t?a.normalizeURL(t):i(),this.receive=n,this.sockets={},this.closed=!1,this.reconnectTimers={},this.ready=o.resolve(this)}var i=n(12),o=n(2),s="undefined"!=typeof window&&"undefined"!=typeof window.WebSocket?window.WebSocket:n(225),a=n(13);n(110);r.prototype.send=function(e,t){if(this.transport.localShortcut){var n=this.transport.agents[e];if(n)try{return n.receive(this.url,t),o.resolve()}catch(r){return o.reject(r)}}var i=this.sockets[e];if(i)try{if(i.readyState==i.CONNECTING)return new o(function(e,n){i.onopen.callbacks.push(function(){i.send(JSON.stringify(t)),e()})});if(i.readyState==i.OPEN)return i.send(JSON.stringify(t)),o.resolve();i=null}catch(r){return o.reject(r)}if(!i){var s=this;return new o(function(n,r){s._connect(e,function(e){e.send(JSON.stringify(t)),n()},function(t){r(new Error('Failed to connect to agent "'+e+'"'))})})}},r.prototype.connect=function(e){var t=this;return new o(function(n,r){t._connect(e,function(){n(t)},r)})},r.prototype._connect=function(e,t,n,r){var i=this,o=new s(e+"?id="+this.url);return i.sockets[e]=o,o.onopen=function(){r=!0,o.onopen.callbacks.forEach(function(e){e(o)}),o.onopen.callbacks=[]},o.onopen.callbacks=t?[t]:[],o.onmessage=function(t){i.receive(e,JSON.parse(t.data))},o.onclose=function(){delete i.sockets[e],r&&i._reconnect(e)},o.onerror=function(t){delete i.sockets[e],n&&n(t)},o},r.prototype._reconnect=function(e){var t=this,n=!0;0==t.closed&&null==t.reconnectTimers[e]&&(t.reconnectTimers[e]=setTimeout(function(){delete t.reconnectTimers[e],t._connect(e,null,null,n)},t.transport.reconnectDelay))},r.prototype._onConnection=function(e,t){var n=this;return t.onmessage=function(t){n.receive(e,JSON.parse(t.data))},t.onclose=function(){delete n.sockets[e]},t.onerror=function(t){delete n.sockets[e]},this.sockets[e]&&this.sockets[e].close(),this.sockets[e]=t,t},r.prototype.list=function(){return Object.keys(this.sockets)},r.prototype.close=function(){this.closed=!0;for(var e in this.sockets)this.sockets.hasOwnProperty(e)&&this.sockets[e].close();this.sockets={},delete this.transport.agents[this.url]},e.exports=r},function(e,t,n){var r=e.exports=n(226);r.Server=n(259),r.Sender=n(230),r.Receiver=n(250),r.createServer=function(e,t){var n=new r.Server(e);return"function"==typeof t&&n.on("connection",t),n},r.connect=r.createConnection=function(e,t){var n=new r(e);return"function"==typeof t&&n.on("open",t),n}},function(e,t,n){(function(t,r){function i(e,t,n){return this instanceof i==!1?new i(e,t,n):(R.call(this),t&&!Array.isArray(t)&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(n=t,t=null),"string"==typeof t&&(t=[t]),Array.isArray(t)||(t=[]),this._socket=null,this._ultron=null,this._closeReceived=!1,this.bytesReceived=0,this.readyState=null,this.supports={},this.extensions={},this._binaryType="nodebuffer",void(Array.isArray(e)?u.apply(this,e.concat(n)):f.apply(this,[e,t,n])))}function o(e,t,n){this.type="message",this.data=e,this.target=n,this.binary=t}function s(e,t,n){this.type="close",this.wasClean="undefined"==typeof e||1e3===e,this.code=e,this.reason=t,this.target=n}function a(e){this.type="open",this.target=e}function c(e,t,n){var r=t;return t&&(e&&443!=n||!e&&80!=n)&&(r=r+":"+n),r}function u(e,t,n,r){r=new k({protocolVersion:N,protocol:null,extensions:{},maxPayload:0}).merge(r),this.protocol=r.value.protocol,this.protocolVersion=r.value.protocolVersion,this.extensions=r.value.extensions,this.supports.binary="hixie-76"!==this.protocolVersion,this.upgradeReq=e,this.readyState=i.CONNECTING,this._isServer=!0,this.maxPayload=r.value.maxPayload,"hixie-76"===r.value.protocolVersion?l.call(this,A,S,t,n):l.call(this,T,x,t,n)}function f(e,n,r){if(r=new k({origin:null,protocolVersion:N,host:null,headers:null,protocol:n.join(","),agent:null,pfx:null,key:null,passphrase:null,cert:null,ca:null,ciphers:null,rejectUnauthorized:null,perMessageDeflate:!0,localAddress:null}).merge(r),8!==r.value.protocolVersion&&13!==r.value.protocolVersion)throw new Error("unsupported protocol version");var o=_.parse(e),s="ws+unix:"===o.protocol;if(!o.host&&!s)throw new Error("invalid url");var a,u="wss:"===o.protocol||"https:"===o.protocol,f=u?m:y,h=o.port||(u?443:80),d=o.auth,p={};r.value.perMessageDeflate&&(a=new C(typeof r.value.perMessageDeflate!==!0?r.value.perMessageDeflate:{},!1),p[C.extensionName]=a.offer()),this._isServer=!1,this.url=e,this.protocolVersion=r.value.protocolVersion,this.supports.binary="hixie-76"!==this.protocolVersion;var g=new t(r.value.protocolVersion+"-"+Date.now()).toString("base64"),w=b.createHash("sha1");w.update(g+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var E=w.digest("base64"),S=r.value.agent,A=c(u,o.hostname,h),R={port:h,host:o.hostname,headers:{Connection:"Upgrade",Upgrade:"websocket",Host:A,"Sec-WebSocket-Version":r.value.protocolVersion,"Sec-WebSocket-Key":g}};if(d&&(R.headers.Authorization="Basic "+new t(d).toString("base64")),r.value.protocol&&(R.headers["Sec-WebSocket-Protocol"]=r.value.protocol),r.value.host&&(R.headers.Host=r.value.host),r.value.headers)for(var I in r.value.headers)r.value.headers.hasOwnProperty(I)&&(R.headers[I]=r.value.headers[I]);Object.keys(p).length&&(R.headers["Sec-WebSocket-Extensions"]=O.format(p)),(r.isDefinedAndNonNull("pfx")||r.isDefinedAndNonNull("key")||r.isDefinedAndNonNull("passphrase")||r.isDefinedAndNonNull("cert")||r.isDefinedAndNonNull("ca")||r.isDefinedAndNonNull("ciphers")||r.isDefinedAndNonNull("rejectUnauthorized"))&&(r.isDefinedAndNonNull("pfx")&&(R.pfx=r.value.pfx),r.isDefinedAndNonNull("key")&&(R.key=r.value.key),r.isDefinedAndNonNull("passphrase")&&(R.passphrase=r.value.passphrase),r.isDefinedAndNonNull("cert")&&(R.cert=r.value.cert),r.isDefinedAndNonNull("ca")&&(R.ca=r.value.ca),r.isDefinedAndNonNull("ciphers")&&(R.ciphers=r.value.ciphers),r.isDefinedAndNonNull("rejectUnauthorized")&&(R.rejectUnauthorized=r.value.rejectUnauthorized),S||(S=new f.Agent(R))),R.path=o.path||"/",S&&(R.agent=S),s&&(R.socketPath=o.pathname),r.value.localAddress&&(R.localAddress=r.value.localAddress),r.value.origin&&(r.value.protocolVersion<13?R.headers["Sec-WebSocket-Origin"]=r.value.origin:R.headers.Origin=r.value.origin);var P=this,B=f.request(R);B.on("error",function(e){P.emit("error",e),v.call(P,e)}),B.once("response",function(e){var t;P.emit("unexpected-response",B,e)||(t=new Error("unexpected server response ("+e.statusCode+")"),B.abort(),P.emit("error",t)),v.call(P,t)}),B.once("upgrade",function(e,t,n){if(P.readyState===i.CLOSED)return P.emit("close"),P.removeAllListeners(),void t.end();var o=e.headers["sec-websocket-accept"];if("undefined"==typeof o||o!==E)return P.emit("error","invalid server key"),P.removeAllListeners(),void t.end();var s=e.headers["sec-websocket-protocol"],c=(r.value.protocol||"").split(/, */),u=null;if(!r.value.protocol&&s?u="server sent a subprotocol even though none requested":r.value.protocol&&!s?u="server sent no subprotocol even though requested":s&&-1===c.indexOf(s)&&(u="server responded with an invalid protocol"),u)return P.emit("error",u),P.removeAllListeners(),void t.end();s&&(P.protocol=s);var f=O.parse(e.headers["sec-websocket-extensions"]);if(a&&f[C.extensionName]){try{a.accept(f[C.extensionName])}catch(h){return P.emit("error","invalid extension parameter"),P.removeAllListeners(),void t.end()}P.extensions[C.extensionName]=a}l.call(P,T,x,t,n),B.removeAllListeners(),B=null,S=null}),B.end(),this.readyState=i.CONNECTING}function l(e,t,n,o){function s(e){u||f.readyState===i.CLOSED||(u=!0,n.removeListener("data",s),c.on("data",a),o&&o.length>0&&(a(o),o=null),e&&a(e))}function a(e){f.bytesReceived+=e.length,f._receiver.add(e)}var c=this._ultron=new E(n),u=!1,f=this;n.setTimeout(0),n.setNoDelay(!0),this._receiver=new e(this.extensions,this.maxPayload),this._socket=n,c.on("end",v.bind(this)),c.on("close",v.bind(this)),c.on("error",v.bind(this)),c.on("data",s),r.nextTick(s),f._receiver.ontext=function(e,t){t=t||{},f.emit("message",e,t)},f._receiver.onbinary=function(e,t){t=t||{},t.binary=!0,f.emit("message",e,t)},f._receiver.onping=function(e,t){t=t||{},f.pong(e,{mask:!f._isServer,binary:t.binary===!0},!0),f.emit("ping",e,t)},f._receiver.onpong=function(e,t){f.emit("pong",e,t||{})},f._receiver.onclose=function(e,t,n){n=n||{},f._closeReceived=!0,f.close(e,t)},f._receiver.onerror=function(e,t){f.close("undefined"!=typeof t?t:1002,""),f.emit("error",e instanceof Error?e:new Error(e))},this._sender=new t(n,this.extensions),this._sender.on("error",function(e){f.close(1002,""),f.emit("error",e)}),this.readyState=i.OPEN,this.emit("open")}function h(e){e._queue=e._queue||[]}function d(e){var t=e._queue;if("undefined"!=typeof t){delete e._queue;for(var n=0,r=t.length;r>n;++n)t[n]()}}function p(e,t,n,r){t.on("data",function(t){return e.readyState!==i.OPEN?void("function"==typeof r?r(new Error("not opened")):(delete e._queue,e.emit("error",new Error("not opened")))):(n.fin=!1,void e._sender.send(t,n))}),t.on("end",function(){return e.readyState!==i.OPEN?void("function"==typeof r?r(new Error("not opened")):(delete e._queue,e.emit("error",new Error("not opened")))):(n.fin=!0,e._sender.send(null,n),void("function"==typeof r&&r(null)))})}function v(e){if(this.readyState!==i.CLOSED){if(this.readyState=i.CLOSED,clearTimeout(this._closeTimer),this._closeTimer=null,(e||!this._closeReceived)&&(this._closeCode=1006),this.emit("close",this._closeCode||1e3,this._closeMessage||""),this._socket){this._ultron&&this._ultron.destroy(),this._socket.on("error",function(){try{this.destroy()}catch(e){}});try{e?this._socket.destroy():this._socket.end()}catch(t){}this._socket=null,this._ultron=null}this._sender&&(this._sender.removeAllListeners(),this._sender=null),this._receiver&&(this._receiver.cleanup(),this._receiver=null),this.extensions[C.extensionName]&&this.extensions[C.extensionName].cleanup(),this.extensions=null,this.removeAllListeners(),this.on("error",function(){}),delete this._queue}}var _=n(14),g=n(78),y=n(158),m=n(227),b=n(71),w=n(161),E=n(228),k=n(229),x=n(230),T=n(250),S=n(256),A=n(257),O=n(258),C=n(236),R=n(159).EventEmitter,N=13,I=3e4;g.inherits(i,R),["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e,t){i.prototype[e]=i[e]=t}),i.prototype.close=function(e,t){if(this.readyState!==i.CLOSED){if(this.readyState===i.CONNECTING)return void(this.readyState=i.CLOSED);if(this.readyState===i.CLOSING)return void(this._closeReceived&&this._isServer&&this.terminate());var n=this;try{this.readyState=i.CLOSING,this._closeCode=e,this._closeMessage=t;var r=!this._isServer;this._sender.close(e,t,r,function(e){e&&n.emit("error",e),n._closeReceived&&n._isServer?n.terminate():(clearTimeout(n._closeTimer),n._closeTimer=setTimeout(v.bind(n,!0),I))})}catch(o){this.emit("error",o)}}},i.prototype.pause=function(){if(this.readyState!==i.OPEN)throw new Error("not opened");return this._socket.pause()},i.prototype.ping=function(e,t,n){if(this.readyState!==i.OPEN){if(n===!0)return;throw new Error("not opened")}t=t||{},"undefined"==typeof t.mask&&(t.mask=!this._isServer),this._sender.ping(e,t)},i.prototype.pong=function(e,t,n){if(this.readyState!==i.OPEN){if(n===!0)return;throw new Error("not opened")}t=t||{},"undefined"==typeof t.mask&&(t.mask=!this._isServer),this._sender.pong(e,t)},i.prototype.resume=function(){if(this.readyState!==i.OPEN)throw new Error("not opened");return this._socket.resume()},i.prototype.send=function(e,n,o){if("function"==typeof n&&(o=n,n={}),this.readyState!==i.OPEN){if("function"!=typeof o)throw new Error("not opened");return void o(new Error("not opened"))}if(e||(e=""),this._queue){var s=this;return void this._queue.push(function(){s.send(e,n,o)})}n=n||{},n.fin=!0,"undefined"==typeof n.binary&&(n.binary=e instanceof ArrayBuffer||e instanceof t||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array),"undefined"==typeof n.mask&&(n.mask=!this._isServer),"undefined"==typeof n.compress&&(n.compress=!0),this.extensions[C.extensionName]||(n.compress=!1);var a="function"==typeof w.Readable?w.Readable:w.Stream;if(e instanceof a){h(this);var s=this;p(this,e,n,function(e){r.nextTick(function(){d(s)}),"function"==typeof o&&o(e)})}else this._sender.send(e,n,o)},i.prototype.stream=function(e,t){function n(s,a){try{if(o.readyState!==i.OPEN)throw new Error("not opened");e.fin=a===!0,o._sender.send(s,e),a?d(o):r.nextTick(t.bind(null,null,n))}catch(c){"function"==typeof t?t(c):(delete o._queue,o.emit("error",c))}}"function"==typeof e&&(t=e,e={});var o=this;if("function"!=typeof t)throw new Error("callback must be provided");if(this.readyState!==i.OPEN){if("function"!=typeof t)throw new Error("not opened");return void t(new Error("not opened"))}return this._queue?void this._queue.push(function(){o.stream(e,t)}):(e=e||{},"undefined"==typeof e.mask&&(e.mask=!this._isServer),"undefined"==typeof e.compress&&(e.compress=!0),this.extensions[C.extensionName]||(e.compress=!1),h(this),void r.nextTick(t.bind(null,null,n)))},i.prototype.terminate=function(){if(this.readyState!==i.CLOSED)if(this._socket){this.readyState=i.CLOSING;try{this._socket.end()}catch(e){return void v.call(this,!0)}this._closeTimer&&clearTimeout(this._closeTimer),this._closeTimer=setTimeout(v.bind(this,!0),I)}else this.readyState===i.CONNECTING&&v.call(this,!0)},Object.defineProperty(i.prototype,"bufferedAmount",{get:function(){var e=0;return this._socket&&(e=this._socket.bufferSize||0),e}}),Object.defineProperty(i.prototype,"binaryType",{get:function(){return this._binaryType},set:function(e){if("arraybuffer"!==e&&"nodebuffer"!==e)throw new SyntaxError('unsupported binaryType: must be either "nodebuffer" or "arraybuffer"');this._binaryType=e}}),["open","error","close","message"].forEach(function(e){Object.defineProperty(i.prototype,"on"+e,{get:function(){var t=this.listeners(e)[0];return t?t._listener?t._listener:t:void 0},set:function(t){this.removeAllListeners(e),this.addEventListener(e,t)}})}),i.prototype.addEventListener=function(e,t){function n(e,n){n.binary&&"arraybuffer"===this.binaryType&&(e=new Uint8Array(e).buffer),t.call(u,new o(e,!!n.binary,u))}function r(e,n){t.call(u,new s(e,n,u))}function i(e){e.type="error",e.target=u,t.call(u,e)}function c(){t.call(u,new a(u))}var u=this;"function"==typeof t&&("message"===e?(n._listener=t,this.on(e,n)):"close"===e?(r._listener=t,this.on(e,r)):"error"===e?(i._listener=t,this.on(e,i)):"open"===e?(c._listener=t,this.on(e,c)):this.on(e,t))},e.exports=i,e.exports.buildHostHeader=c}).call(t,n(67).Buffer,n(79))},function(e,t,n){var r=n(158),i=e.exports;for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);i.request=function(e,t){return e||(e={}),e.scheme="https",r.request.call(this,e,t)}},function(e,t){function n(e){return this instanceof n?(this.id=i++,void(this.ee=e)):new n(e)}var r=Object.prototype.hasOwnProperty,i=0;n.prototype.on=function(e,t,n){return t.__ultron=this.id,this.ee.on(e,t,n),this},n.prototype.once=function(e,t,n){return t.__ultron=this.id,this.ee.once(e,t,n),this},n.prototype.remove=function(){var e,t=arguments;if(1===t.length&&"string"==typeof t[0])t=t[0].split(/[, ]+/);else if(!t.length){t=[];for(e in this.ee._events)r.call(this.ee._events,e)&&t.push(e)}for(var n=0;n<t.length;n++)for(var i=this.ee.listeners(t[n]),o=0;o<i.length;o++){if(e=i[o],e.listener){if(e.listener.__ultron!==this.id)continue;delete e.listener.__ultron}else{if(e.__ultron!==this.id)continue;delete e.__ultron}this.ee.removeListener(t[n],e)}return this},n.prototype.destroy=function(){return this.ee?(this.remove(),this.ee=null,!0):!1},e.exports=n},function(e,t,n){function r(e){var t={},n=this.value={};Object.keys(e).forEach(function(r){t[r]=e[r],Object.defineProperty(n,r,{get:function(){return t[r]},configurable:!1,enumerable:!0})}),this.reset=function(){return Object.keys(e).forEach(function(n){t[n]=e[n]}),this},this.merge=function(e,n){if(e=e||{},"[object Array]"===Object.prototype.toString.call(n)){for(var r=[],i=0,o=n.length;o>i;++i){var s=n[i];s in e||r.push(s)}if(r.length>0)throw r.length>1?new Error("options "+r.slice(0,r.length-1).join(", ")+" and "+r[r.length-1]+" must be defined"):new Error("option "+r[0]+" must be defined")}return Object.keys(e).forEach(function(n){n in t&&(t[n]=e[n])}),this},this.copy=function(t){var r={};return Object.keys(e).forEach(function(e){-1!==t.indexOf(e)&&(r[e]=n[e])}),r},this.read=function(e,t){if("function"==typeof t){var n=this;i.readFile(e,function(e,r){if(e)return t(e);var i=JSON.parse(r);n.merge(i),t()})}else{var r=JSON.parse(i.readFileSync(e));this.merge(r)}return this},this.isDefined=function(e){return"undefined"!=typeof n[e]},this.isDefinedAndNonNull=function(e){return"undefined"!=typeof n[e]&&null!==n[e]},Object.freeze(n),Object.freeze(this)}var i=n(198);e.exports=r},function(e,t,n){(function(t){function r(e,t){if(this instanceof r==!1)throw new TypeError("Classes can't be function-called");c.EventEmitter.call(this),this._socket=e,this.extensions=t||{},this.firstFragment=!0,this.compress=!1,this.messageHandlers=[],this.processing=!1}function i(e,t){this[t]=(65280&e)>>8,this[t+1]=255&e}function o(e,t){this[t]=(4278190080&e)>>24,this[t+1]=(16711680&e)>>16,this[t+2]=(65280&e)>>8,this[t+3]=255&e}function s(e){for(var n=new Uint8Array(e.buffer||e),r=e.byteLength||e.length,i=e.byteOffset||0,o=new t(r),s=0;r>s;++s)o[s]=n[i+s];return o}function a(){return new t([~~(255*Math.random()),~~(255*Math.random()),~~(255*Math.random()),~~(255*Math.random())])}var c=n(159),u=n(78),f=(c.EventEmitter,n(231)),l=n(232).BufferUtil,h=n(236);u.inherits(r,c.EventEmitter),r.prototype.close=function(e,n,r,o){if("undefined"!=typeof e&&("number"!=typeof e||!f.isValidErrorCode(e)))throw new Error("first argument must be a valid error code number");e=e||1e3;var s=new t(2+(n?t.byteLength(n):0));i.call(s,e,0),s.length>2&&s.write(n,2);var a=this;this.messageHandlers.push(function(e){a.frameAndSend(8,s,!0,r),e(),"function"==typeof o&&o()}),this.flush()},r.prototype.ping=function(e,t){var n=t&&t.mask,r=this;this.messageHandlers.push(function(t){r.frameAndSend(9,e||"",!0,n),t()}),this.flush()},r.prototype.pong=function(e,t){var n=t&&t.mask,r=this;this.messageHandlers.push(function(t){r.frameAndSend(10,e||"",!0,n),t()}),this.flush()},r.prototype.send=function(e,t,n){var r=t&&t.fin===!1?!1:!0,i=t&&t.mask,o=t&&t.compress,s=t&&t.binary?2:1;this.firstFragment===!1?(s=0,o=!1):(this.firstFragment=!1,this.compress=o),r&&(this.firstFragment=!0);var a=this.compress,c=this;this.messageHandlers.push(function(t){c.applyExtensions(e,r,a,function(e,a){return e?void("function"==typeof n?n(e):c.emit("error",e)):(c.frameAndSend(s,a,r,i,o,n),void t())})}),this.flush()},r.prototype.frameAndSend=function(e,n,r,c,u,f){var h=!1;if(n){t.isBuffer(n)||(h=!0,!n||"undefined"==typeof n.byteLength&&"undefined"==typeof n.buffer?("number"==typeof n&&(n=n.toString()),n=new t(n)):n=s(n));var d=n.length,p=c?6:2,v=d;d>=65536?(p+=8,v=127):d>125&&(p+=2,v=126);var _=32768>d||c&&!h,g=_?d+p:p,y=new t(g);switch(y[0]=r?128|e:e,u&&(y[0]|=64),v){case 126:i.call(y,d,2);break;case 127:o.call(y,0,2),o.call(y,d,6)}if(c){y[1]=128|v;var m=a();if(y[p-4]=m[0],y[p-3]=m[1],y[p-2]=m[2],y[p-1]=m[3],_){l.mask(n,m,y,p,d);try{this._socket.write(y,"binary",f)}catch(b){"function"==typeof f?f(b):this.emit("error",b)}}else{l.mask(n,m,n,0,d);try{this._socket.write(y,"binary"),this._socket.write(n,"binary",f)}catch(b){"function"==typeof f?f(b):this.emit("error",b)}}}else if(y[1]=v,_){n.copy(y,p);try{this._socket.write(y,"binary",f)}catch(b){"function"==typeof f?f(b):this.emit("error",b)}}else try{this._socket.write(y,"binary"),this._socket.write(n,"binary",f)}catch(b){"function"==typeof f?f(b):this.emit("error",b)}}else try{this._socket.write(new t([e|(r?128:0),0|(c?128:0)].concat(c?[0,0,0,0]:[])),"binary",f)}catch(b){"function"==typeof f?f(b):this.emit("error",b)}},r.prototype.flush=function(){if(!this.processing){var e=this.messageHandlers.shift();if(e){this.processing=!0;var t=this;e(function(){t.processing=!1,t.flush()})}}},r.prototype.applyExtensions=function(e,t,n,r){n&&e?((e.buffer||e)instanceof ArrayBuffer&&(e=s(e)),this.extensions[h.extensionName].compress(e,t,r)):r(null,e)},e.exports=r}).call(t,n(67).Buffer)},function(e,t){e.exports={isValidErrorCode:function(e){return e>=1e3&&1011>=e&&1004!=e&&1005!=e&&1006!=e||e>=3e3&&4999>=e},1e3:"normal",1001:"going away",1002:"protocol error",1003:"unsupported data",1004:"reserved",1005:"reserved for extensions",1006:"reserved for extensions",1007:"inconsistent or invalid data",1008:"policy violation",1009:"message too big",1010:"extension handshake missing",1011:"an unexpected condition prevented the request from being fulfilled"}},function(e,t,n){try{e.exports=n(233)}catch(r){e.exports=n(235)}},function(e,t,n){try{e.exports=n(205)("bufferutil")}catch(r){e.exports=n(234)}},function(e,t){e.exports.BufferUtil={merge:function(e,t){for(var n=0,r=0,i=t.length;i>n;++n){var o=t[n];o.copy(e,r),r+=o.length}},mask:function(e,t,n,r,i){for(var o,s=t.readUInt32LE(0,!0),a=0;i-3>a;a+=4)o=s^e.readUInt32LE(a,!0),0>o&&(o=4294967296+o),n.writeUInt32LE(o,r+a,!0);switch(i%4){case 3:n[r+a+2]=e[a+2]^t[2];case 2:n[r+a+1]=e[a+1]^t[1];case 1:n[r+a]=e[a]^t[0]}},unmask:function(e,t){for(var n,r=t.readUInt32LE(0,!0),i=e.length,o=0;i-3>o;o+=4)n=r^e.readUInt32LE(o,!0),0>n&&(n=4294967296+n),e.writeUInt32LE(n,o,!0);switch(i%4){case 3:e[o+2]=e[o+2]^t[2];case 2:e[o+1]=e[o+1]^t[1];case 1:e[o]=e[o]^t[0]}}}},function(e,t){t.BufferUtil={merge:function(e,t){for(var n=0,r=0,i=t.length;i>r;++r){var o=t[r];o.copy(e,n),n+=o.length}},mask:function(e,t,n,r,i){for(var o=t.readUInt32LE(0,!0),s=0;i-3>s;s+=4){var a=o^e.readUInt32LE(s,!0);0>a&&(a=4294967296+a),n.writeUInt32LE(a,r+s,!0)}switch(i%4){case 3:n[r+s+2]=e[s+2]^t[2];case 2:n[r+s+1]=e[s+1]^t[1];case 1:n[r+s]=e[s]^t[0];case 0:}},unmask:function(e,t){for(var n=t.readUInt32LE(0,!0),r=e.length,i=0;r-3>i;i+=4){var o=n^e.readUInt32LE(i,!0);0>o&&(o=4294967296+o),e.writeUInt32LE(o,i,!0)}switch(r%4){case 3:e[i+2]=e[i+2]^t[2];case 2:e[i+1]=e[i+1]^t[1];case 1:e[i]=e[i]^t[0];case 0:}}}},function(e,t,n){(function(t){function r(e,t,n){if(this instanceof r==!1)throw new TypeError("Classes can't be function-called");this._options=e||{},this._isServer=!!t,this._inflate=null,this._deflate=null,this.params=null,this._maxPayload=n||0}var i=n(237),o=[8,9,10,11,12,13,14,15],s=15,a=8;r.extensionName="permessage-deflate",r.prototype.offer=function(){var e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e},r.prototype.accept=function(e){e=this.normalizeParams(e);var t;return t=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params=t,t},r.prototype.cleanup=function(){this._inflate&&(this._inflate.writeInProgress?this._inflate.pendingClose=!0:(this._inflate.close&&this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate.writeInProgress?this._deflate.pendingClose=!0:(this._deflate.close&&this._deflate.close(),this._deflate=null))},r.prototype.acceptAsServer=function(e){var t={},n=e.some(function(e){return t={},this._options.serverNoContextTakeover===!1&&e.server_no_context_takeover||this._options.serverMaxWindowBits===!1&&e.server_max_window_bits||"number"==typeof this._options.serverMaxWindowBits&&"number"==typeof e.server_max_window_bits&&this._options.serverMaxWindowBits>e.server_max_window_bits||"number"==typeof this._options.clientMaxWindowBits&&!e.client_max_window_bits?void 0:((this._options.serverNoContextTakeover||e.server_no_context_takeover)&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.clientNoContextTakeover!==!1&&e.client_no_context_takeover&&(t.client_no_context_takeover=!0),"number"==typeof this._options.serverMaxWindowBits?t.server_max_window_bits=this._options.serverMaxWindowBits:"number"==typeof e.server_max_window_bits&&(t.server_max_window_bits=e.server_max_window_bits),"number"==typeof this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits!==!1&&"number"==typeof e.client_max_window_bits&&(t.client_max_window_bits=e.client_max_window_bits),!0)},this);if(!n)throw new Error("Doesn't support the offered configuration");return t},r.prototype.acceptAsClient=function(e){var t=e[0];if(null!=this._options.clientNoContextTakeover&&this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Invalid value for "client_no_context_takeover"');if(null!=this._options.clientMaxWindowBits){if(this._options.clientMaxWindowBits===!1&&t.client_max_window_bits)throw new Error('Invalid value for "client_max_window_bits"');if("number"==typeof this._options.clientMaxWindowBits&&(!t.client_max_window_bits||t.client_max_window_bits>this._options.clientMaxWindowBits))throw new Error('Invalid value for "client_max_window_bits"')}return t},r.prototype.normalizeParams=function(e){return e.map(function(e){return Object.keys(e).forEach(function(t){var n=e[t];if(n.length>1)throw new Error("Multiple extension parameters for "+t);switch(n=n[0],t){case"server_no_context_takeover":case"client_no_context_takeover":if(n!==!0)throw new Error("invalid extension parameter value for "+t+" ("+n+")");e[t]=!0;break;case"server_max_window_bits":case"client_max_window_bits":if("string"==typeof n&&(n=parseInt(n,10),!~o.indexOf(n)))throw new Error("invalid extension parameter value for "+t+" ("+n+")");if(!this._isServer&&n===!0)throw new Error("Missing extension parameter value for "+t);e[t]=n;break;default:throw new Error("Not defined extension parameter ("+t+")")}},this),e},this)},r.prototype.decompress=function(e,n,r){function o(e){c(),r(e)}function a(e){if(void 0!==l._maxPayload&&null!==l._maxPayload&&l._maxPayload>0&&(d+=e.length,d>l._maxPayload)){h=[],c();var t={type:1009};return void r(t)}h.push(e)}function c(){l._inflate&&(l._inflate.removeListener("error",o),l._inflate.removeListener("data",a),l._inflate.writeInProgress=!1,(n&&l.params[u+"_no_context_takeover"]||l._inflate.pendingClose)&&(l._inflate.close&&l._inflate.close(),l._inflate=null))}var u=this._isServer?"client":"server";if(!this._inflate){var f=this.params[u+"_max_window_bits"];this._inflate=i.createInflateRaw({windowBits:"number"==typeof f?f:s})}this._inflate.writeInProgress=!0;var l=this,h=[],d=0;this._inflate.on("error",o).on("data",a),this._inflate.write(e),n&&this._inflate.write(new t([0,0,255,255])),this._inflate.flush(function(){c(),r(null,t.concat(h))})},r.prototype.compress=function(e,n,r){function o(e){u(),r(e)}function c(e){d.push(e)}function u(){h._deflate&&(h._deflate.removeListener("error",o),h._deflate.removeListener("data",c),h._deflate.writeInProgress=!1,(n&&h.params[f+"_no_context_takeover"]||h._deflate.pendingClose)&&(h._deflate.close&&h._deflate.close(),h._deflate=null))}var f=this._isServer?"server":"client";if(!this._deflate){var l=this.params[f+"_max_window_bits"];this._deflate=i.createDeflateRaw({flush:i.Z_SYNC_FLUSH,windowBits:"number"==typeof l?l:s,memLevel:this._options.memLevel||a})}this._deflate.writeInProgress=!0;var h=this,d=[];this._deflate.on("error",o).on("data",c),this._deflate.write(e),this._deflate.flush(function(){u();var e=t.concat(d);n&&(e=e.slice(0,e.length-4)),r(null,e)})},e.exports=r}).call(t,n(67).Buffer)},function(e,t,n){(function(e,r){function i(t,n,r){function i(){for(var e;null!==(e=t.read());)a.push(e),c+=e.length;t.once("readable",i)}function o(e){t.removeListener("end",s),t.removeListener("readable",i),r(e)}function s(){var n=e.concat(a,c);a=[],r(null,n),t.close()}var a=[],c=0;t.on("error",o),t.on("end",s),t.end(n),i()}function o(t,n){if("string"==typeof n&&(n=new e(n)),!e.isBuffer(n))throw new TypeError("Not a string or buffer");var r=v.Z_FINISH;return t._processChunk(n,r)}function s(e){return this instanceof s?void d.call(this,e,v.DEFLATE):new s(e)}function a(e){return this instanceof a?void d.call(this,e,v.INFLATE):new a(e)}function c(e){return this instanceof c?void d.call(this,e,v.GZIP):new c(e)}function u(e){return this instanceof u?void d.call(this,e,v.GUNZIP):new u(e)}function f(e){return this instanceof f?void d.call(this,e,v.DEFLATERAW):new f(e)}function l(e){return this instanceof l?void d.call(this,e,v.INFLATERAW):new l(e)}function h(e){return this instanceof h?void d.call(this,e,v.UNZIP):new h(e)}function d(n,r){if(this._opts=n=n||{},this._chunkSize=n.chunkSize||t.Z_DEFAULT_CHUNK,p.call(this,n),n.flush&&n.flush!==v.Z_NO_FLUSH&&n.flush!==v.Z_PARTIAL_FLUSH&&n.flush!==v.Z_SYNC_FLUSH&&n.flush!==v.Z_FULL_FLUSH&&n.flush!==v.Z_FINISH&&n.flush!==v.Z_BLOCK)throw new Error("Invalid flush flag: "+n.flush);if(this._flushFlag=n.flush||v.Z_NO_FLUSH,n.chunkSize&&(n.chunkSize<t.Z_MIN_CHUNK||n.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+n.chunkSize);if(n.windowBits&&(n.windowBits<t.Z_MIN_WINDOWBITS||n.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+n.windowBits);if(n.level&&(n.level<t.Z_MIN_LEVEL||n.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+n.level);if(n.memLevel&&(n.memLevel<t.Z_MIN_MEMLEVEL||n.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+n.memLevel);if(n.strategy&&n.strategy!=t.Z_FILTERED&&n.strategy!=t.Z_HUFFMAN_ONLY&&n.strategy!=t.Z_RLE&&n.strategy!=t.Z_FIXED&&n.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+n.strategy);
if(n.dictionary&&!e.isBuffer(n.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new v.Zlib(r);var i=this;this._hadError=!1,this._binding.onerror=function(e,n){i._binding=null,i._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],i.emit("error",r)};var o=t.Z_DEFAULT_COMPRESSION;"number"==typeof n.level&&(o=n.level);var s=t.Z_DEFAULT_STRATEGY;"number"==typeof n.strategy&&(s=n.strategy),this._binding.init(n.windowBits||t.Z_DEFAULT_WINDOWBITS,o,n.memLevel||t.Z_DEFAULT_MEMLEVEL,s,n.dictionary),this._buffer=new e(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=s,this.once("end",this.close)}var p=n(174),v=n(238),_=n(78),g=n(189).ok;v.Z_MIN_WINDOWBITS=8,v.Z_MAX_WINDOWBITS=15,v.Z_DEFAULT_WINDOWBITS=15,v.Z_MIN_CHUNK=64,v.Z_MAX_CHUNK=1/0,v.Z_DEFAULT_CHUNK=16384,v.Z_MIN_MEMLEVEL=1,v.Z_MAX_MEMLEVEL=9,v.Z_DEFAULT_MEMLEVEL=8,v.Z_MIN_LEVEL=-1,v.Z_MAX_LEVEL=9,v.Z_DEFAULT_LEVEL=v.Z_DEFAULT_COMPRESSION,Object.keys(v).forEach(function(e){e.match(/^Z/)&&(t[e]=v[e])}),t.codes={Z_OK:v.Z_OK,Z_STREAM_END:v.Z_STREAM_END,Z_NEED_DICT:v.Z_NEED_DICT,Z_ERRNO:v.Z_ERRNO,Z_STREAM_ERROR:v.Z_STREAM_ERROR,Z_DATA_ERROR:v.Z_DATA_ERROR,Z_MEM_ERROR:v.Z_MEM_ERROR,Z_BUF_ERROR:v.Z_BUF_ERROR,Z_VERSION_ERROR:v.Z_VERSION_ERROR},Object.keys(t.codes).forEach(function(e){t.codes[t.codes[e]]=e}),t.Deflate=s,t.Inflate=a,t.Gzip=c,t.Gunzip=u,t.DeflateRaw=f,t.InflateRaw=l,t.Unzip=h,t.createDeflate=function(e){return new s(e)},t.createInflate=function(e){return new a(e)},t.createDeflateRaw=function(e){return new f(e)},t.createInflateRaw=function(e){return new l(e)},t.createGzip=function(e){return new c(e)},t.createGunzip=function(e){return new u(e)},t.createUnzip=function(e){return new h(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new s(t),e,n)},t.deflateSync=function(e,t){return o(new s(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new c(t),e,n)},t.gzipSync=function(e,t){return o(new c(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new f(t),e,n)},t.deflateRawSync=function(e,t){return o(new f(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new h(t),e,n)},t.unzipSync=function(e,t){return o(new h(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new a(t),e,n)},t.inflateSync=function(e,t){return o(new a(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new u(t),e,n)},t.gunzipSync=function(e,t){return o(new u(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new l(t),e,n)},t.inflateRawSync=function(e,t){return o(new l(t),e)},_.inherits(d,p),d.prototype.params=function(e,n,i){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var o=this;this.flush(v.Z_SYNC_FLUSH,function(){o._binding.params(e,n),o._hadError||(o._level=e,o._strategy=n,i&&i())})}else r.nextTick(i)},d.prototype.reset=function(){return this._binding.reset()},d.prototype._flush=function(t){this._transform(new e(0),"",t)},d.prototype.flush=function(t,n){var i=this._writableState;if(("function"==typeof t||void 0===t&&!n)&&(n=t,t=v.Z_FULL_FLUSH),i.ended)n&&r.nextTick(n);else if(i.ending)n&&this.once("end",n);else if(i.needDrain){var o=this;this.once("drain",function(){o.flush(n)})}else this._flushFlag=t,this.write(new e(0),"",n)},d.prototype.close=function(e){if(e&&r.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;r.nextTick(function(){t.emit("close")})}},d.prototype._transform=function(t,n,r){var i,o=this._writableState,s=o.ending||o.ended,a=s&&(!t||o.length===t.length);if(null===!t&&!e.isBuffer(t))return r(new Error("invalid input"));a?i=v.Z_FINISH:(i=this._flushFlag,t.length>=o.length&&(this._flushFlag=this._opts.flush||v.Z_NO_FLUSH));this._processChunk(t,i,r)},d.prototype._processChunk=function(t,n,r){function i(f,d){if(!c._hadError){var p=s-d;if(g(p>=0,"have should not go down"),p>0){var v=c._buffer.slice(c._offset,c._offset+p);c._offset+=p,u?c.push(v):(l.push(v),h+=v.length)}if((0===d||c._offset>=c._chunkSize)&&(s=c._chunkSize,c._offset=0,c._buffer=new e(c._chunkSize)),0===d){if(a+=o-f,o=f,!u)return!0;var _=c._binding.write(n,t,a,o,c._buffer,c._offset,c._chunkSize);return _.callback=i,void(_.buffer=t)}return u?void r():!1}}var o=t&&t.length,s=this._chunkSize-this._offset,a=0,c=this,u="function"==typeof r;if(!u){var f,l=[],h=0;this.on("error",function(e){f=e});do var d=this._binding.writeSync(n,t,a,o,this._buffer,this._offset,s);while(!this._hadError&&i(d[0],d[1]));if(this._hadError)throw f;var p=e.concat(l,h);return this.close(),p}var v=this._binding.write(n,t,a,o,this._buffer,this._offset,s);v.buffer=t,v.callback=i},_.inherits(s,d),_.inherits(a,d),_.inherits(c,d),_.inherits(u,d),_.inherits(f,d),_.inherits(l,d),_.inherits(h,d)}).call(t,n(67).Buffer,n(79))},function(e,t,n){(function(e,r){function i(e){if(e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function o(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}var s=n(239),a=n(240),c=n(241),u=n(246),f=n(249);for(var l in f)t[l]=f[l];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,i.prototype.init=function(e,n,r,i,o){switch(this.windowBits=e,this.level=n,this.memLevel=r,this.strategy=i,(this.mode===t.GZIP||this.mode===t.GUNZIP)&&(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),(this.mode===t.DEFLATERAW||this.mode===t.INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var s=c.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:var s=u.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return s!==t.Z_OK?void this._error(s):(this.write_in_progress=!1,void(this.init_done=!0))},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===t.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},i.prototype.write=function(t,n,r,i,o,s,a){this._writeCheck(),this.write_in_progress=!0;var c=this;return e.nextTick(function(){c.write_in_progress=!1;var e=c._write(t,n,r,i,o,s,a);c.callback(e[0],e[1]),c.pending_close&&c.close()}),this},i.prototype.writeSync=function(e,t,n,r,i,o,s){return this._writeCheck(),this._write(e,t,n,r,i,o,s)},i.prototype._write=function(e,n,i,s,a,f,l){if(this.write_in_progress=!0,e!==t.Z_NO_FLUSH&&e!==t.Z_PARTIAL_FLUSH&&e!==t.Z_SYNC_FLUSH&&e!==t.Z_FULL_FLUSH&&e!==t.Z_FINISH&&e!==t.Z_BLOCK)throw new Error("Invalid flush value");null==n&&(n=new r(0),s=0,i=0),a._set?a.set=a._set:a.set=o;var h=this.strm;switch(h.avail_in=s,h.input=n,h.next_in=i,h.avail_out=l,h.output=a,h.next_out=f,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var d=c.deflate(h,e);break;case t.UNZIP:case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:var d=u.inflate(h,e);break;default:throw new Error("Unknown mode "+this.mode)}return d!==t.Z_STREAM_END&&d!==t.Z_OK&&this._error(d),this.write_in_progress=!1,[h.avail_in,h.avail_out]},i.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?c.deflateEnd(this.strm):u.inflateEnd(this.strm),void(this.mode=t.NONE))},i.prototype.reset=function(){switch(this.mode){case t.DEFLATE:case t.DEFLATERAW:var e=c.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:var e=u.inflateReset(this.strm)}e!==t.Z_OK&&this._error(e)},i.prototype._error=function(e){this.onerror(s[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},t.Zlib=i}).call(t,n(79),n(67).Buffer)},function(e,t){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},function(e,t,n){function r(e,t){return e.msg=I[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(O.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function a(e,t){C._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function c(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function f(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,O.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=R(e.adler,t,i,n):2===e.state.wrap&&(e.adler=N(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function l(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-ue?e.strstart-(e.w_size-ue):0,u=e.window,f=e.w_mask,l=e.prev,h=e.strstart+ce,d=u[o+s-1],p=u[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do if(n=t,u[n+s]===p&&u[n+s-1]===d&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do;while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&h>o);if(r=ce-(h-o),o=h-ce,r>s){if(e.match_start=t,s=r,r>=a)break;d=u[o+s-1],p=u[o+s]}}while((t=l[t&f])>c&&0!==--i);return s<=e.lookahead?s:e.lookahead}function h(e){var t,n,r,i,o,s=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-ue)){O.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=s?r-s:0;while(--n);n=s,t=n;do r=e.prev[--t],e.prev[t]=r>=s?r-s:0;while(--n);i+=s}if(0===e.strm.avail_in)break;if(n=f(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=ae)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+ae-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<ae)););}while(e.lookahead<ue&&0!==e.strm.avail_in)}function d(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===P)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,a(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-ue&&(a(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===L?(a(e,!0),0===e.strm.avail_out?be:we):e.strstart>e.block_start&&(a(e,!1),0===e.strm.avail_out)?ye:ye}function p(e,t){for(var n,r;;){if(e.lookahead<ue){if(h(e),e.lookahead<ue&&t===P)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=ae&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ue&&(e.match_length=l(e,n)),e.match_length>=ae)if(r=C._tr_tally(e,e.strstart-e.match_start,e.match_length-ae),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ae){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(a(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<ae-1?e.strstart:ae-1,t===L?(a(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?ye:me}function v(e,t){for(var n,r,i;;){if(e.lookahead<ue){if(h(e),e.lookahead<ue&&t===P)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=ae&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ae-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ue&&(e.match_length=l(e,n),e.match_length<=5&&(e.strategy===V||e.match_length===ae&&e.strstart-e.match_start>4096)&&(e.match_length=ae-1)),e.prev_length>=ae&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ae,r=C._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ae),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=ae-1,e.strstart++,r&&(a(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if(r=C._tr_tally(e,0,e.window[e.strstart-1]),r&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=C._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ae-1?e.strstart:ae-1,t===L?(a(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?ye:me}function _(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=ce){if(h(e),e.lookahead<=ce&&t===P)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ae&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+ce;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&o>i);e.match_length=ce-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ae?(n=C._tr_tally(e,1,e.match_length-ae),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(a(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===L?(a(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?ye:me}function g(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===P)return ye;break}if(e.match_length=0,n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===L?(a(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?ye:me}function y(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=A[e.level].max_lazy,e.good_match=A[e.level].good_length,e.nice_match=A[e.level].nice_length,e.max_chain_length=A[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ae-1,e.match_available=0,e.ins_h=0}function m(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=J,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(2*oe),this.dyn_dtree=new O.Buf16(2*(2*re+1)),this.bl_tree=new O.Buf16(2*(2*ie+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(se+1),this.heap=new O.Buf16(2*ne+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*ne+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=K,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?le:_e,e.adler=2===t.wrap?0:1,t.last_flush=P,C._tr_init(t),D):r(e,U)}function w(e){var t=b(e);return t===D&&y(e.state),t}function E(e,t){return e&&e.state?2!==e.state.wrap?U:(e.state.gzhead=t,D):U}function k(e,t,n,i,o,s){if(!e)return U;var a=1;if(t===q&&(t=6),0>i?(a=0,i=-i):i>15&&(a=2,i-=16),1>o||o>X||n!==J||8>i||i>15||0>t||t>9||0>s||s>Z)return r(e,U);8===i&&(i=9);var c=new m;return e.state=c,c.strm=e,c.wrap=a,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+ae-1)/ae),c.window=new O.Buf8(2*c.w_size),c.head=new O.Buf16(c.hash_size),c.prev=new O.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new O.Buf8(c.pending_buf_size),c.d_buf=c.lit_bufsize>>1,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=s,c.method=n,w(e)}function x(e,t){return k(e,t,J,$,Q,Y)}function T(e,t){var n,a,f,l;if(!e||!e.state||t>M||0>t)return e?r(e,U):U;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===ge&&t!==L)return r(e,0===e.avail_out?H:U);if(a.strm=e,n=a.last_flush,a.last_flush=t,a.status===le)if(2===a.wrap)e.adler=0,c(a,31),c(a,139),c(a,8),a.gzhead?(c(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),c(a,255&a.gzhead.time),c(a,a.gzhead.time>>8&255),c(a,a.gzhead.time>>16&255),c(a,a.gzhead.time>>24&255),c(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),c(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(c(a,255&a.gzhead.extra.length),c(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=N(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=he):(c(a,0),c(a,0),c(a,0),c(a,0),c(a,0),c(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),c(a,Ee),a.status=_e);else{var h=J+(a.w_bits-8<<4)<<8,d=-1;d=a.strategy>=G||a.level<2?0:a.level<6?1:6===a.level?2:3,h|=d<<6,0!==a.strstart&&(h|=fe),h+=31-h%31,a.status=_e,u(a,h),0!==a.strstart&&(u(a,e.adler>>>16),u(a,65535&e.adler)),e.adler=1}if(a.status===he)if(a.gzhead.extra){for(f=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>f&&(e.adler=N(e.adler,a.pending_buf,a.pending-f,f)),s(e),f=a.pending,a.pending!==a.pending_buf_size));)c(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>f&&(e.adler=N(e.adler,a.pending_buf,a.pending-f,f)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=de)}else a.status=de;if(a.status===de)if(a.gzhead.name){f=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>f&&(e.adler=N(e.adler,a.pending_buf,a.pending-f,f)),s(e),f=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,c(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>f&&(e.adler=N(e.adler,a.pending_buf,a.pending-f,f)),0===l&&(a.gzindex=0,a.status=pe)}else a.status=pe;if(a.status===pe)if(a.gzhead.comment){f=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>f&&(e.adler=N(e.adler,a.pending_buf,a.pending-f,f)),s(e),f=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,c(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>f&&(e.adler=N(e.adler,a.pending_buf,a.pending-f,f)),0===l&&(a.status=ve)}else a.status=ve;if(a.status===ve&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(e),a.pending+2<=a.pending_buf_size&&(c(a,255&e.adler),c(a,e.adler>>8&255),e.adler=0,a.status=_e)):a.status=_e),0!==a.pending){if(s(e),0===e.avail_out)return a.last_flush=-1,D}else if(0===e.avail_in&&i(t)<=i(n)&&t!==L)return r(e,H);if(a.status===ge&&0!==e.avail_in)return r(e,H);if(0!==e.avail_in||0!==a.lookahead||t!==P&&a.status!==ge){var p=a.strategy===G?g(a,t):a.strategy===W?_(a,t):A[a.level].func(a,t);if((p===be||p===we)&&(a.status=ge),p===ye||p===be)return 0===e.avail_out&&(a.last_flush=-1),D;if(p===me&&(t===B?C._tr_align(a):t!==M&&(C._tr_stored_block(a,0,0,!1),t===j&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(e),0===e.avail_out))return a.last_flush=-1,D}return t!==L?D:a.wrap<=0?F:(2===a.wrap?(c(a,255&e.adler),c(a,e.adler>>8&255),c(a,e.adler>>16&255),c(a,e.adler>>24&255),c(a,255&e.total_in),c(a,e.total_in>>8&255),c(a,e.total_in>>16&255),c(a,e.total_in>>24&255)):(u(a,e.adler>>>16),u(a,65535&e.adler)),s(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?D:F)}function S(e){var t;return e&&e.state?(t=e.state.status,t!==le&&t!==he&&t!==de&&t!==pe&&t!==ve&&t!==_e&&t!==ge?r(e,U):(e.state=null,t===_e?r(e,z):D)):U}var A,O=n(242),C=n(243),R=n(244),N=n(245),I=n(239),P=0,B=1,j=3,L=4,M=5,D=0,F=1,U=-2,z=-3,H=-5,q=-1,V=1,G=2,W=3,Z=4,Y=0,K=2,J=8,X=9,$=15,Q=8,ee=29,te=256,ne=te+1+ee,re=30,ie=19,oe=2*ne+1,se=15,ae=3,ce=258,ue=ce+ae+1,fe=32,le=42,he=69,de=73,pe=91,ve=103,_e=113,ge=666,ye=1,me=2,be=3,we=4,Ee=3,ke=function(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i};A=[new ke(0,0,0,0,d),new ke(4,4,8,4,p),new ke(4,5,16,8,p),new ke(4,6,32,32,p),new ke(4,4,16,16,v),new ke(8,16,32,32,v),new ke(8,16,128,128,v),new ke(8,32,128,256,v),new ke(32,128,258,1024,v),new ke(32,258,258,4096,v)],t.deflateInit=x,t.deflateInit2=k,t.deflateReset=w,t.deflateResetKeep=b,t.deflateSetHeader=E,t.deflate=T,t.deflateEnd=S,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==("undefined"==typeof n?"undefined":_typeof(n)))throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;r>o;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(r=0,t=0,n=e.length;n>t;t++)r+=e[t].length;for(s=new Uint8Array(r),i=0,t=0,n=e.length;n>t;t++)o=e[t],s.set(o,i),i+=o.length;return s}},i={arraySet:function(e,t,n,r,i){for(var o=0;r>o;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)},function(e,t,n){function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e){return 256>e?se[e]:se[256+(e>>>7)]}function o(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function s(e,t,n){e.bi_valid>Z-n?(e.bi_buf|=t<<e.bi_valid&65535,o(e,e.bi_buf),e.bi_buf=t>>Z-e.bi_valid,e.bi_valid+=n-Z):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function a(e,t,n){s(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function u(e){16===e.bi_valid?(o(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function f(e,t){var n,r,i,o,s,a,c=t.dyn_tree,u=t.max_code,f=t.stat_desc.static_tree,l=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,v=0;for(o=0;W>=o;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;G>n;n++)r=e.heap[n],o=c[2*c[2*r+1]+1]+1,o>p&&(o=p,v++),c[2*r+1]=o,r>u||(e.bl_count[o]++,s=0,r>=d&&(s=h[r-d]),a=c[2*r],e.opt_len+=a*(o+s),l&&(e.static_len+=a*(f[2*r+1]+s)));if(0!==v){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,v-=2}while(v>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)i=e.heap[--n],i>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}function l(e,t,n){var r,i,o=new Array(W+1),s=0;for(r=1;W>=r;r++)o[r]=s=s+n[r-1]<<1;for(i=0;t>=i;i++){var a=e[2*i+1];0!==a&&(e[2*i]=c(o[a]++,a))}}function h(){var e,t,n,r,i,o=new Array(W+1);for(n=0,r=0;U-1>r;r++)for(ce[r]=n,e=0;e<1<<Q[r];e++)ae[n++]=r;for(ae[n-1]=r,i=0,r=0;16>r;r++)for(ue[r]=i,e=0;e<1<<ee[r];e++)se[i++]=r;for(i>>=7;q>r;r++)for(ue[r]=i<<7,e=0;e<1<<ee[r]-7;e++)se[256+i++]=r;for(t=0;W>=t;t++)o[t]=0;for(e=0;143>=e;)ie[2*e+1]=8,e++,o[8]++;for(;255>=e;)ie[2*e+1]=9,e++,o[9]++;for(;279>=e;)ie[2*e+1]=7,e++,o[7]++;for(;287>=e;)ie[2*e+1]=8,e++,o[8]++;for(l(ie,H+1,o),e=0;q>e;e++)oe[2*e+1]=5,oe[2*e]=c(e,5);fe=new de(ie,Q,z+1,H,W),le=new de(oe,ee,0,q,W),he=new de(new Array(0),te,0,V,Y)}function d(e){var t;for(t=0;H>t;t++)e.dyn_ltree[2*t]=0;for(t=0;q>t;t++)e.dyn_dtree[2*t]=0;for(t=0;V>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*K]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?o(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){p(e),r&&(o(e,n),o(e,~n)),R.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function _(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function g(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&_(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!_(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function y(e,t,n){var r,o,c,u,f=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*f]<<8|e.pending_buf[e.d_buf+2*f+1],o=e.pending_buf[e.l_buf+f],f++,0===r?a(e,o,t):(c=ae[o],a(e,c+z+1,t),u=Q[c],0!==u&&(o-=ce[c],s(e,o,u)),r--,c=i(r),a(e,c,n),u=ee[c],0!==u&&(r-=ue[c],s(e,r,u)));while(f<e.last_lit);a(e,K,t)}function m(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=G,n=0;c>n;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=2>u?++u:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)g(e,o,n);i=c;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],g(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,g(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],f(e,t),l(o,u,e.bl_count)}function b(e,t,n){var r,i,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;n>=r;r++)i=s,s=t[2*(r+1)+1],++a<c&&i===s||(u>a?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*J]++):10>=a?e.bl_tree[2*X]++:e.bl_tree[2*$]++,a=0,o=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4))}function w(e,t,n){var r,i,o=-1,c=t[1],u=0,f=7,l=4;for(0===c&&(f=138,l=3),r=0;n>=r;r++)if(i=c,c=t[2*(r+1)+1],!(++u<f&&i===c)){if(l>u){do a(e,i,e.bl_tree);while(0!==--u)}else 0!==i?(i!==o&&(a(e,i,e.bl_tree),u--),a(e,J,e.bl_tree),s(e,u-3,2)):10>=u?(a(e,X,e.bl_tree),s(e,u-3,3)):(a(e,$,e.bl_tree),s(e,u-11,7));u=0,o=i,0===c?(f=138,l=3):i===c?(f=6,l=3):(f=7,l=4)}}function E(e){var t;for(b(e,e.dyn_ltree,e.l_desc.max_code),b(e,e.dyn_dtree,e.d_desc.max_code),m(e,e.bl_desc),t=V-1;t>=3&&0===e.bl_tree[2*ne[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function k(e,t,n,r){var i;for(s(e,t-257,5),s(e,n-1,5),s(e,r-4,4),i=0;r>i;i++)s(e,e.bl_tree[2*ne[i]+1],3);w(e,e.dyn_ltree,t-1),w(e,e.dyn_dtree,n-1)}function x(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return I;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return P;for(t=32;z>t;t++)if(0!==e.dyn_ltree[2*t])return P;return I}function T(e){ve||(h(),ve=!0),e.l_desc=new pe(e.dyn_ltree,fe),e.d_desc=new pe(e.dyn_dtree,le),e.bl_desc=new pe(e.bl_tree,he),e.bi_buf=0,e.bi_valid=0,d(e)}function S(e,t,n,r){s(e,(j<<1)+(r?1:0),3),v(e,t,n,!0)}function A(e){s(e,L<<1,3),a(e,K,ie),u(e)}function O(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===B&&(e.strm.data_type=x(e)),m(e,e.l_desc),m(e,e.d_desc),a=E(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,i>=o&&(i=o)):i=o=n+5,i>=n+4&&-1!==t?S(e,t,n,r):e.strategy===N||o===i?(s(e,(L<<1)+(r?1:0),3),y(e,ie,oe)):(s(e,(M<<1)+(r?1:0),3),k(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),y(e,e.dyn_ltree,e.dyn_dtree)),d(e),r&&p(e)}function C(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ae[n]+z+1)]++,e.dyn_dtree[2*i(t)]++),e.last_lit===e.lit_bufsize-1}var R=n(242),N=4,I=0,P=1,B=2,j=0,L=1,M=2,D=3,F=258,U=29,z=256,H=z+1+U,q=30,V=19,G=2*H+1,W=15,Z=16,Y=7,K=256,J=16,X=17,$=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=512,ie=new Array(2*(H+2));r(ie);var oe=new Array(2*q);r(oe);var se=new Array(re);r(se);var ae=new Array(F-D+1);r(ae);var ce=new Array(U);r(ce);var ue=new Array(q);r(ue);var fe,le,he,de=function(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length},pe=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},ve=!1;t._tr_init=T,t._tr_stored_block=S,t._tr_flush_block=O,t._tr_tally=C,t._tr_align=A},function(e,t){function n(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do i=i+t[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}e.exports=n},function(e,t){function n(){for(var e,t=[],n=0;256>n;n++){e=n;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function r(e,t,n,r){var o=i,s=r+n;e=-1^e;for(var a=r;s>a;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}var i=n();e.exports=r},function(e,t,n){function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=L,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new g.Buf32(pe),t.distcode=t.distdyn=new g.Buf32(ve),t.sane=1,t.back=-1,O):N}function s(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):N}function a(e,t){var n,r;return e&&e.state?(r=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?N:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,s(e))):N}function c(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=a(e,t),n!==O&&(e.state=null),n):N}function u(e){return c(e,ge)}function f(e){if(ye){var t;for(v=new g.Buf32(512),_=new g.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(w(k,e.lens,0,288,v,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;
w(x,e.lens,0,32,_,0,e.work,{bits:5}),ye=!1}e.lencode=v,e.lenbits=9,e.distcode=_,e.distbits=5}function l(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new g.Buf8(o.wsize)),r>=o.wsize?(g.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),g.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(g.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function h(e,t){var n,i,o,s,a,c,u,h,d,p,v,_,pe,ve,_e,ge,ye,me,be,we,Ee,ke,xe,Te,Se=0,Ae=new g.Buf8(4),Oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return N;n=e.state,n.mode===Z&&(n.mode=Y),a=e.next_out,o=e.output,u=e.avail_out,s=e.next_in,i=e.input,c=e.avail_in,h=n.hold,d=n.bits,p=c,v=u,ke=O;e:for(;;)switch(n.mode){case L:if(0===n.wrap){n.mode=Y;break}for(;16>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if(2&n.wrap&&35615===h){n.check=0,Ae[0]=255&h,Ae[1]=h>>>8&255,n.check=m(n.check,Ae,2,0),h=0,d=0,n.mode=M;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=le;break}if((15&h)!==j){e.msg="unknown compression method",n.mode=le;break}if(h>>>=4,d-=4,Ee=(15&h)+8,0===n.wbits)n.wbits=Ee;else if(Ee>n.wbits){e.msg="invalid window size",n.mode=le;break}n.dmax=1<<Ee,e.adler=n.check=1,n.mode=512&h?G:Z,h=0,d=0;break;case M:for(;16>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if(n.flags=h,(255&n.flags)!==j){e.msg="unknown compression method",n.mode=le;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=le;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,n.check=m(n.check,Ae,2,0)),h=0,d=0,n.mode=D;case D:for(;32>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}n.head&&(n.head.time=h),512&n.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,Ae[2]=h>>>16&255,Ae[3]=h>>>24&255,n.check=m(n.check,Ae,4,0)),h=0,d=0,n.mode=F;case F:for(;16>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,n.check=m(n.check,Ae,2,0)),h=0,d=0,n.mode=U;case U:if(1024&n.flags){for(;16>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,n.check=m(n.check,Ae,2,0)),h=0,d=0}else n.head&&(n.head.extra=null);n.mode=z;case z:if(1024&n.flags&&(_=n.length,_>c&&(_=c),_&&(n.head&&(Ee=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),g.arraySet(n.head.extra,i,s,_,Ee)),512&n.flags&&(n.check=m(n.check,i,_,s)),c-=_,s+=_,n.length-=_),n.length))break e;n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===c)break e;_=0;do Ee=i[s+_++],n.head&&Ee&&n.length<65536&&(n.head.name+=String.fromCharCode(Ee));while(Ee&&c>_);if(512&n.flags&&(n.check=m(n.check,i,_,s)),c-=_,s+=_,Ee)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=q;case q:if(4096&n.flags){if(0===c)break e;_=0;do Ee=i[s+_++],n.head&&Ee&&n.length<65536&&(n.head.comment+=String.fromCharCode(Ee));while(Ee&&c>_);if(512&n.flags&&(n.check=m(n.check,i,_,s)),c-=_,s+=_,Ee)break e}else n.head&&(n.head.comment=null);n.mode=V;case V:if(512&n.flags){for(;16>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=le;break}h=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Z;break;case G:for(;32>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}e.adler=n.check=r(h),h=0,d=0,n.mode=W;case W:if(0===n.havedict)return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=c,n.hold=h,n.bits=d,R;e.adler=n.check=1,n.mode=Z;case Z:if(t===S||t===A)break e;case Y:if(n.last){h>>>=7&d,d-=7&d,n.mode=ce;break}for(;3>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}switch(n.last=1&h,h>>>=1,d-=1,3&h){case 0:n.mode=K;break;case 1:if(f(n),n.mode=te,t===A){h>>>=2,d-=2;break e}break;case 2:n.mode=$;break;case 3:e.msg="invalid block type",n.mode=le}h>>>=2,d-=2;break;case K:for(h>>>=7&d,d-=7&d;32>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if((65535&h)!==(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=le;break}if(n.length=65535&h,h=0,d=0,n.mode=J,t===A)break e;case J:n.mode=X;case X:if(_=n.length){if(_>c&&(_=c),_>u&&(_=u),0===_)break e;g.arraySet(o,i,s,_,a),c-=_,s+=_,u-=_,a+=_,n.length-=_;break}n.mode=Z;break;case $:for(;14>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if(n.nlen=(31&h)+257,h>>>=5,d-=5,n.ndist=(31&h)+1,h>>>=5,d-=5,n.ncode=(15&h)+4,h>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=le;break}n.have=0,n.mode=Q;case Q:for(;n.have<n.ncode;){for(;3>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}n.lens[Oe[n.have++]]=7&h,h>>>=3,d-=3}for(;n.have<19;)n.lens[Oe[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,xe={bits:n.lenbits},ke=w(E,n.lens,0,19,n.lencode,0,n.work,xe),n.lenbits=xe.bits,ke){e.msg="invalid code lengths set",n.mode=le;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.nlen+n.ndist;){for(;Se=n.lencode[h&(1<<n.lenbits)-1],_e=Se>>>24,ge=Se>>>16&255,ye=65535&Se,!(d>=_e);){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if(16>ye)h>>>=_e,d-=_e,n.lens[n.have++]=ye;else{if(16===ye){for(Te=_e+2;Te>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if(h>>>=_e,d-=_e,0===n.have){e.msg="invalid bit length repeat",n.mode=le;break}Ee=n.lens[n.have-1],_=3+(3&h),h>>>=2,d-=2}else if(17===ye){for(Te=_e+3;Te>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}h>>>=_e,d-=_e,Ee=0,_=3+(7&h),h>>>=3,d-=3}else{for(Te=_e+7;Te>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}h>>>=_e,d-=_e,Ee=0,_=11+(127&h),h>>>=7,d-=7}if(n.have+_>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=le;break}for(;_--;)n.lens[n.have++]=Ee}}if(n.mode===le)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=le;break}if(n.lenbits=9,xe={bits:n.lenbits},ke=w(k,n.lens,0,n.nlen,n.lencode,0,n.work,xe),n.lenbits=xe.bits,ke){e.msg="invalid literal/lengths set",n.mode=le;break}if(n.distbits=6,n.distcode=n.distdyn,xe={bits:n.distbits},ke=w(x,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,xe),n.distbits=xe.bits,ke){e.msg="invalid distances set",n.mode=le;break}if(n.mode=te,t===A)break e;case te:n.mode=ne;case ne:if(c>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=c,n.hold=h,n.bits=d,b(e,v),a=e.next_out,o=e.output,u=e.avail_out,s=e.next_in,i=e.input,c=e.avail_in,h=n.hold,d=n.bits,n.mode===Z&&(n.back=-1);break}for(n.back=0;Se=n.lencode[h&(1<<n.lenbits)-1],_e=Se>>>24,ge=Se>>>16&255,ye=65535&Se,!(d>=_e);){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if(ge&&0===(240&ge)){for(me=_e,be=ge,we=ye;Se=n.lencode[we+((h&(1<<me+be)-1)>>me)],_e=Se>>>24,ge=Se>>>16&255,ye=65535&Se,!(d>=me+_e);){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}h>>>=me,d-=me,n.back+=me}if(h>>>=_e,d-=_e,n.back+=_e,n.length=ye,0===ge){n.mode=ae;break}if(32&ge){n.back=-1,n.mode=Z;break}if(64&ge){e.msg="invalid literal/length code",n.mode=le;break}n.extra=15&ge,n.mode=re;case re:if(n.extra){for(Te=n.extra;Te>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ie;case ie:for(;Se=n.distcode[h&(1<<n.distbits)-1],_e=Se>>>24,ge=Se>>>16&255,ye=65535&Se,!(d>=_e);){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if(0===(240&ge)){for(me=_e,be=ge,we=ye;Se=n.distcode[we+((h&(1<<me+be)-1)>>me)],_e=Se>>>24,ge=Se>>>16&255,ye=65535&Se,!(d>=me+_e);){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}h>>>=me,d-=me,n.back+=me}if(h>>>=_e,d-=_e,n.back+=_e,64&ge){e.msg="invalid distance code",n.mode=le;break}n.offset=ye,n.extra=15&ge,n.mode=oe;case oe:if(n.extra){for(Te=n.extra;Te>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=le;break}n.mode=se;case se:if(0===u)break e;if(_=v-u,n.offset>_){if(_=n.offset-_,_>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=le;break}_>n.wnext?(_-=n.wnext,pe=n.wsize-_):pe=n.wnext-_,_>n.length&&(_=n.length),ve=n.window}else ve=o,pe=a-n.offset,_=n.length;_>u&&(_=u),u-=_,n.length-=_;do o[a++]=ve[pe++];while(--_);0===n.length&&(n.mode=ne);break;case ae:if(0===u)break e;o[a++]=n.length,u--,n.mode=ne;break;case ce:if(n.wrap){for(;32>d;){if(0===c)break e;c--,h|=i[s++]<<d,d+=8}if(v-=u,e.total_out+=v,n.total+=v,v&&(e.adler=n.check=n.flags?m(n.check,o,v,a-v):y(n.check,o,v,a-v)),v=u,(n.flags?h:r(h))!==n.check){e.msg="incorrect data check",n.mode=le;break}h=0,d=0}n.mode=ue;case ue:if(n.wrap&&n.flags){for(;32>d;){if(0===c)break e;c--,h+=i[s++]<<d,d+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=le;break}h=0,d=0}n.mode=fe;case fe:ke=C;break e;case le:ke=I;break e;case he:return P;case de:default:return N}return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=c,n.hold=h,n.bits=d,(n.wsize||v!==e.avail_out&&n.mode<le&&(n.mode<ce||t!==T))&&l(e,e.output,e.next_out,v-e.avail_out)?(n.mode=he,P):(p-=e.avail_in,v-=e.avail_out,e.total_in+=p,e.total_out+=v,n.total+=v,n.wrap&&v&&(e.adler=n.check=n.flags?m(n.check,o,v,e.next_out-v):y(n.check,o,v,e.next_out-v)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Z?128:0)+(n.mode===te||n.mode===J?256:0),(0===p&&0===v||t===T)&&ke===O&&(ke=B),ke)}function d(e){if(!e||!e.state)return N;var t=e.state;return t.window&&(t.window=null),e.state=null,O}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?N:(n.head=t,t.done=!1,O)):N}var v,_,g=n(242),y=n(244),m=n(245),b=n(247),w=n(248),E=0,k=1,x=2,T=4,S=5,A=6,O=0,C=1,R=2,N=-2,I=-3,P=-4,B=-5,j=8,L=1,M=2,D=3,F=4,U=5,z=6,H=7,q=8,V=9,G=10,W=11,Z=12,Y=13,K=14,J=15,X=16,$=17,Q=18,ee=19,te=20,ne=21,re=22,ie=23,oe=24,se=25,ae=26,ce=27,ue=28,fe=29,le=30,he=31,de=32,pe=852,ve=592,_e=15,ge=_e,ye=!0;t.inflateReset=s,t.inflateReset2=a,t.inflateResetKeep=o,t.inflateInit=u,t.inflateInit2=c,t.inflate=h,t.inflateEnd=d,t.inflateGetHeader=p,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t){var n=30,r=12;e.exports=function(e,t){var i,o,s,a,c,u,f,l,h,d,p,v,_,g,y,m,b,w,E,k,x,T,S,A,O;i=e.state,o=e.next_in,A=e.input,s=o+(e.avail_in-5),a=e.next_out,O=e.output,c=a-(t-e.avail_out),u=a+(e.avail_out-257),f=i.dmax,l=i.wsize,h=i.whave,d=i.wnext,p=i.window,v=i.hold,_=i.bits,g=i.lencode,y=i.distcode,m=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;e:do{15>_&&(v+=A[o++]<<_,_+=8,v+=A[o++]<<_,_+=8),w=g[v&m];t:for(;;){if(E=w>>>24,v>>>=E,_-=E,E=w>>>16&255,0===E)O[a++]=65535&w;else{if(!(16&E)){if(0===(64&E)){w=g[(65535&w)+(v&(1<<E)-1)];continue t}if(32&E){i.mode=r;break e}e.msg="invalid literal/length code",i.mode=n;break e}k=65535&w,E&=15,E&&(E>_&&(v+=A[o++]<<_,_+=8),k+=v&(1<<E)-1,v>>>=E,_-=E),15>_&&(v+=A[o++]<<_,_+=8,v+=A[o++]<<_,_+=8),w=y[v&b];n:for(;;){if(E=w>>>24,v>>>=E,_-=E,E=w>>>16&255,!(16&E)){if(0===(64&E)){w=y[(65535&w)+(v&(1<<E)-1)];continue n}e.msg="invalid distance code",i.mode=n;break e}if(x=65535&w,E&=15,E>_&&(v+=A[o++]<<_,_+=8,E>_&&(v+=A[o++]<<_,_+=8)),x+=v&(1<<E)-1,x>f){e.msg="invalid distance too far back",i.mode=n;break e}if(v>>>=E,_-=E,E=a-c,x>E){if(E=x-E,E>h&&i.sane){e.msg="invalid distance too far back",i.mode=n;break e}if(T=0,S=p,0===d){if(T+=l-E,k>E){k-=E;do O[a++]=p[T++];while(--E);T=a-x,S=O}}else if(E>d){if(T+=l+d-E,E-=d,k>E){k-=E;do O[a++]=p[T++];while(--E);if(T=0,k>d){E=d,k-=E;do O[a++]=p[T++];while(--E);T=a-x,S=O}}}else if(T+=d-E,k>E){k-=E;do O[a++]=p[T++];while(--E);T=a-x,S=O}for(;k>2;)O[a++]=S[T++],O[a++]=S[T++],O[a++]=S[T++],k-=3;k&&(O[a++]=S[T++],k>1&&(O[a++]=S[T++]))}else{T=a-x;do O[a++]=O[T++],O[a++]=O[T++],O[a++]=O[T++],k-=3;while(k>2);k&&(O[a++]=O[T++],k>1&&(O[a++]=O[T++]))}break}}break}}while(s>o&&u>a);k=_>>3,o-=k,_-=k<<3,v&=(1<<_)-1,e.next_in=o,e.next_out=a,e.avail_in=s>o?5+(s-o):5-(o-s),e.avail_out=u>a?257+(u-a):257-(a-u),i.hold=v,i.bits=_}},function(e,t,n){var r=n(242),i=15,o=852,s=592,a=0,c=1,u=2,f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,p,v,_,g,y){var m,b,w,E,k,x,T,S,A,O=y.bits,C=0,R=0,N=0,I=0,P=0,B=0,j=0,L=0,M=0,D=0,F=null,U=0,z=new r.Buf16(i+1),H=new r.Buf16(i+1),q=null,V=0;for(C=0;i>=C;C++)z[C]=0;for(R=0;p>R;R++)z[t[n+R]]++;for(P=O,I=i;I>=1&&0===z[I];I--);if(P>I&&(P=I),0===I)return v[_++]=20971520,v[_++]=20971520,y.bits=1,0;for(N=1;I>N&&0===z[N];N++);for(N>P&&(P=N),L=1,C=1;i>=C;C++)if(L<<=1,L-=z[C],0>L)return-1;if(L>0&&(e===a||1!==I))return-1;for(H[1]=0,C=1;i>C;C++)H[C+1]=H[C]+z[C];for(R=0;p>R;R++)0!==t[n+R]&&(g[H[t[n+R]]++]=R);if(e===a?(F=q=g,x=19):e===c?(F=f,U-=257,q=l,V-=257,x=256):(F=h,q=d,x=-1),D=0,R=0,C=N,k=_,B=P,j=0,w=-1,M=1<<P,E=M-1,e===c&&M>o||e===u&&M>s)return 1;for(var G=0;;){G++,T=C-j,g[R]<x?(S=0,A=g[R]):g[R]>x?(S=q[V+g[R]],A=F[U+g[R]]):(S=96,A=0),m=1<<C-j,b=1<<B,N=b;do b-=m,v[k+(D>>j)+b]=T<<24|S<<16|A|0;while(0!==b);for(m=1<<C-1;D&m;)m>>=1;if(0!==m?(D&=m-1,D+=m):D=0,R++,0===--z[C]){if(C===I)break;C=t[n+g[R]]}if(C>P&&(D&E)!==w){for(0===j&&(j=P),k+=N,B=C-j,L=1<<B;I>B+j&&(L-=z[B+j],!(0>=L));)B++,L<<=1;if(M+=1<<B,e===c&&M>o||e===u&&M>s)return 1;w=D&E,v[w]=P<<24|B<<16|k-_|0}}return 0!==D&&(v[k+D]=C-j<<24|64<<16|0),y.bits=P,0}},function(e,t){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){(function(t){function r(e,n){if(this instanceof r==!1)throw new TypeError("Classes can't be function-called");"number"==typeof e&&(n=e,e={});var i=-1;this.fragmentedBufferPool=new f(1024,function(e,t){return e.used+t},function(e){return i=i>=0?Math.ceil((i+e.used)/2):e.used});var o=-1;this.unfragmentedBufferPool=new f(1024,function(e,t){return e.used+t},function(e){return o=o>=0?Math.ceil((o+e.used)/2):e.used}),this.extensions=e||{},this.maxPayload=n||0,this.currentPayloadLength=0,this.state={activeFragmentedOperation:null,lastFragment:!1,masked:!1,opcode:0,fragmentedOperation:!1},this.overflow=[],this.headerBuffer=new t(10),this.expectOffset=0,this.expectBuffer=null,this.expectHandler=null,this.currentMessage=[],this.currentMessageLength=0,this.messageHandlers=[],this.expectHeader(2,this.processPacket),this.dead=!1,this.processing=!1,this.onerror=function(){},this.ontext=function(){},this.onbinary=function(){},this.onclose=function(){},this.onping=function(){},this.onpong=function(){}}function i(e){return(this[e]<<8)+this[e+1]}function o(e){return(this[e]<<24)+(this[e+1]<<16)+(this[e+2]<<8)+this[e+3]}function s(e,t,n,r){switch(e){default:t.copy(n,r,0,e);break;case 16:n[r+15]=t[15];case 15:n[r+14]=t[14];case 14:n[r+13]=t[13];case 13:n[r+12]=t[12];case 12:n[r+11]=t[11];case 11:n[r+10]=t[10];case 10:n[r+9]=t[9];case 9:n[r+8]=t[8];case 8:n[r+7]=t[7];case 7:n[r+6]=t[6];case 6:n[r+5]=t[5];case 5:n[r+4]=t[4];case 4:n[r+3]=t[3];case 3:n[r+2]=t[2];case 2:n[r+1]=t[1];case 1:n[r]=t[0]}}function a(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var c=(n(78),n(251).Validation),u=n(231),f=n(255),l=n(232).BufferUtil,h=n(236);e.exports=r,r.prototype.add=function(e){if(!this.dead){var t=e.length;if(0!=t){if(null==this.expectBuffer)return void this.overflow.push(e);var n=Math.min(t,this.expectBuffer.length-this.expectOffset);for(s(n,e,this.expectBuffer,this.expectOffset),this.expectOffset+=n,t>n&&this.overflow.push(e.slice(n));this.expectBuffer&&this.expectOffset==this.expectBuffer.length;){var r=this.expectBuffer;this.expectBuffer=null,this.expectOffset=0,this.expectHandler.call(this,r)}}}},r.prototype.cleanup=function(){this.dead=!0,this.overflow=null,this.headerBuffer=null,this.expectBuffer=null,this.expectHandler=null,this.unfragmentedBufferPool=null,this.fragmentedBufferPool=null,this.state=null,this.currentMessage=null,this.onerror=null,this.ontext=null,this.onbinary=null,this.onclose=null,this.onping=null,this.onpong=null},r.prototype.expectHeader=function(e,t){if(0==e)return void t(null);this.expectBuffer=this.headerBuffer.slice(this.expectOffset,this.expectOffset+e),this.expectHandler=t;for(var n=e;n>0&&this.overflow.length>0;){var r=this.overflow.pop();n<r.length&&this.overflow.push(r.slice(n));var i=Math.min(r.length,n);s(i,r,this.expectBuffer,this.expectOffset),this.expectOffset+=i,n-=i}},r.prototype.expectData=function(e,t){if(0==e)return void t(null);this.expectBuffer=this.allocateFromPool(e,this.state.fragmentedOperation),this.expectHandler=t;for(var n=e;n>0&&this.overflow.length>0;){var r=this.overflow.pop();n<r.length&&this.overflow.push(r.slice(n));var i=Math.min(r.length,n);s(i,r,this.expectBuffer,this.expectOffset),this.expectOffset+=i,n-=i}},r.prototype.allocateFromPool=function(e,t){return(t?this.fragmentedBufferPool:this.unfragmentedBufferPool).get(e)},r.prototype.processPacket=function(e){if(this.extensions[h.extensionName]){if(0!=(48&e[0]))return void this.error("reserved fields (2, 3) must be empty",1002)}else if(0!=(112&e[0]))return void this.error("reserved fields must be empty",1002);this.state.lastFragment=128==(128&e[0]),this.state.masked=128==(128&e[1]);var t=64==(64&e[0]),n=15&e[0];if(0===n){if(t)return void this.error("continuation frame cannot have the Per-message Compressed bits",1002);if(this.state.fragmentedOperation=!0,this.state.opcode=this.state.activeFragmentedOperation,1!=this.state.opcode&&2!=this.state.opcode)return void this.error("continuation frame cannot follow current opcode",1002)}else{if(3>n&&null!=this.state.activeFragmentedOperation)return void this.error("data frames after the initial data frame must have opcode 0",1002);if(n>=8&&t)return void this.error("control frames cannot have the Per-message Compressed bits",1002);this.state.compressed=t,this.state.opcode=n,this.state.lastFragment===!1?(this.state.fragmentedOperation=!0,this.state.activeFragmentedOperation=n):this.state.fragmentedOperation=!1}var r=d[this.state.opcode];"undefined"==typeof r?this.error("no handler for opcode "+this.state.opcode,1002):r.start.call(this,e)},r.prototype.endPacket=function(){this.dead||(this.state.fragmentedOperation?this.state.lastFragment&&this.fragmentedBufferPool.reset(!0):this.unfragmentedBufferPool.reset(!0),this.expectOffset=0,this.expectBuffer=null,this.expectHandler=null,this.state.lastFragment&&this.state.opcode===this.state.activeFragmentedOperation&&(this.state.activeFragmentedOperation=null),this.currentPayloadLength=0,this.state.lastFragment=!1,this.state.opcode=null!=this.state.activeFragmentedOperation?this.state.activeFragmentedOperation:0,this.state.masked=!1,this.expectHeader(2,this.processPacket))},r.prototype.reset=function(){this.dead||(this.state={activeFragmentedOperation:null,lastFragment:!1,masked:!1,opcode:0,fragmentedOperation:!1},this.fragmentedBufferPool.reset(!0),this.unfragmentedBufferPool.reset(!0),this.expectOffset=0,this.expectBuffer=null,this.expectHandler=null,this.overflow=[],this.currentMessage=[],this.currentMessageLength=0,this.messageHandlers=[],this.currentPayloadLength=0)},r.prototype.unmask=function(e,t,n){return null!=e&&null!=t&&l.unmask(t,e),n?t:null!=t?t.toString("utf8"):""},r.prototype.error=function(e,t){return this.dead?void 0:(this.reset(),"string"==typeof e?this.onerror(new Error(e),t):e.constructor==Error?this.onerror(e,t):this.onerror(new Error("An error occured"),t),this)},r.prototype.flush=function(){if(!this.processing&&!this.dead){var e=this.messageHandlers.shift();if(e){this.processing=!0;var t=this;e(function(){t.processing=!1,t.flush()})}}},r.prototype.applyExtensions=function(e,t,n,r){var i=this;n?this.extensions[h.extensionName].decompress(e,t,function(e,t){return i.dead?void 0:e?void r(new Error("invalid compressed data")):void r(null,t)}):r(null,e)},r.prototype.maxPayloadExceeded=function(e){if(void 0===this.maxPayload||null===this.maxPayload||this.maxPayload<1)return!1;var t=this.currentPayloadLength+e;return t<this.maxPayload?(this.currentPayloadLength=t,!1):(this.error("payload cannot exceed "+this.maxPayload+" bytes",1009),this.messageBuffer=[],this.cleanup(),!0)};var d={1:{start:function(e){var t=this,n=127&e[1];if(126>n){if(t.maxPayloadExceeded(n))return void t.error("Maximumpayload exceeded in compressed text message. Aborting...",1009);d[1].getData.call(t,n)}else 126==n?t.expectHeader(2,function(e){var n=i.call(e,0);return t.maxPayloadExceeded(n)?void t.error("Maximumpayload exceeded in compressed text message. Aborting...",1009):void d[1].getData.call(t,n)}):127==n&&t.expectHeader(8,function(e){if(0!=o.call(e,0))return void t.error("packets with length spanning more than 32 bit is currently not supported",1008);var n=o.call(e,4);return t.maxPayloadExceeded(n)?void t.error("Maximumpayload exceeded in compressed text message. Aborting...",1009):void d[1].getData.call(t,o.call(e,4))})},getData:function(e){var t=this;t.state.masked?t.expectHeader(4,function(n){var r=n;t.expectData(e,function(e){d[1].finish.call(t,r,e)})}):t.expectData(e,function(e){d[1].finish.call(t,null,e)})},finish:function(e,n){var r=this,i=this.unmask(e,n,!0)||new t(0),o=a(this.state);this.messageHandlers.push(function(e){r.applyExtensions(i,o.lastFragment,o.compressed,function(n,i){if(n)return 1009===n.type?r.error("Maximumpayload exceeded in compressed text message. Aborting...",1009):r.error(n.message,1007);if(null!=i){if(!(0==r.maxPayload||r.maxPayload>0&&r.currentMessageLength+i.length<r.maxPayload))return r.currentMessage=null,r.currentMessage=[],r.currentMessageLength=0,void r.error(new Error("Maximum payload exceeded. maxPayload: "+r.maxPayload),1009);r.currentMessage.push(i),r.currentMessageLength+=i.length}if(o.lastFragment){var s=t.concat(r.currentMessage);if(r.currentMessage=[],r.currentMessageLength=0,!c.isValidUTF8(s))return void r.error("invalid utf8 sequence",1007);r.ontext(s.toString("utf8"),{masked:o.masked,buffer:s})}e()})}),this.flush(),this.endPacket()}},2:{start:function(e){var t=this,n=127&e[1];if(126>n){if(t.maxPayloadExceeded(n))return void t.error("Max payload exceeded in compressed text message. Aborting...",1009);d[2].getData.call(t,n)}else 126==n?t.expectHeader(2,function(e){var n=i.call(e,0);return t.maxPayloadExceeded(n)?void t.error("Max payload exceeded in compressed text message. Aborting...",1009):void d[2].getData.call(t,n)}):127==n&&t.expectHeader(8,function(e){if(0!=o.call(e,0))return void t.error("packets with length spanning more than 32 bit is currently not supported",1008);var n=o.call(e,4,!0);return t.maxPayloadExceeded(n)?void t.error("Max payload exceeded in compressed text message. Aborting...",1009):void d[2].getData.call(t,n)})},getData:function(e){var t=this;t.state.masked?t.expectHeader(4,function(n){var r=n;t.expectData(e,function(e){d[2].finish.call(t,r,e)})}):t.expectData(e,function(e){d[2].finish.call(t,null,e)})},finish:function(e,n){var r=this,i=this.unmask(e,n,!0)||new t(0),o=a(this.state);this.messageHandlers.push(function(e){r.applyExtensions(i,o.lastFragment,o.compressed,function(n,i){if(n)return 1009===n.type?r.error("Max payload exceeded in compressed binary message. Aborting...",1009):r.error(n.message,1007);if(null!=i){if(!(0==r.maxPayload||r.maxPayload>0&&r.currentMessageLength+i.length<r.maxPayload))return r.currentMessage=null,r.currentMessage=[],r.currentMessageLength=0,void r.error(new Error("Maximum payload exceeded"),1009);r.currentMessage.push(i),r.currentMessageLength+=i.length}if(o.lastFragment){var s=t.concat(r.currentMessage);r.currentMessage=[],r.currentMessageLength=0,r.onbinary(s,{masked:o.masked,buffer:s})}e()})}),this.flush(),this.endPacket()}},8:{start:function(e){var t=this;if(0==t.state.lastFragment)return void t.error("fragmented close is not supported",1002);var n=127&e[1];126>n?d[8].getData.call(t,n):t.error("control frames cannot have more than 125 bytes of data",1002)},getData:function(e){var t=this;t.state.masked?t.expectHeader(4,function(n){var r=n;t.expectData(e,function(e){d[8].finish.call(t,r,e)})}):t.expectData(e,function(e){d[8].finish.call(t,null,e)})},finish:function(e,t){var n=this;t=n.unmask(e,t,!0);var r=a(this.state);this.messageHandlers.push(function(){if(t&&1==t.length)return void n.error("close packets with data must be at least two bytes long",1002);var e=t&&t.length>1?i.call(t,0):1e3;if(!u.isValidErrorCode(e))return void n.error("invalid error code",1002);var o="";if(t&&t.length>2){var s=t.slice(2);if(!c.isValidUTF8(s))return void n.error("invalid utf8 sequence",1007);o=s.toString("utf8")}n.onclose(e,o,{masked:r.masked}),n.reset()}),this.flush()}},9:{start:function(e){var t=this;if(0==t.state.lastFragment)return void t.error("fragmented ping is not supported",1002);var n=127&e[1];126>n?d[9].getData.call(t,n):t.error("control frames cannot have more than 125 bytes of data",1002)},getData:function(e){var t=this;t.state.masked?t.expectHeader(4,function(n){var r=n;t.expectData(e,function(e){d[9].finish.call(t,r,e)})}):t.expectData(e,function(e){d[9].finish.call(t,null,e)})},finish:function(e,t){var n=this;t=this.unmask(e,t,!0);var r=a(this.state);this.messageHandlers.push(function(e){n.onping(t,{masked:r.masked,binary:!0}),e()}),this.flush(),this.endPacket()}},10:{start:function(e){var t=this;if(0==t.state.lastFragment)return void t.error("fragmented pong is not supported",1002);var n=127&e[1];126>n?d[10].getData.call(t,n):t.error("control frames cannot have more than 125 bytes of data",1002)},getData:function(e){var t=this;this.state.masked?this.expectHeader(4,function(n){var r=n;t.expectData(e,function(e){d[10].finish.call(t,r,e)})}):this.expectData(e,function(e){d[10].finish.call(t,null,e)})},finish:function(e,t){var n=this;t=n.unmask(e,t,!0);var r=a(this.state);this.messageHandlers.push(function(e){n.onpong(t,{masked:r.masked,binary:!0}),e()}),this.flush(),this.endPacket()}}}}).call(t,n(67).Buffer)},function(e,t,n){try{e.exports=n(252)}catch(r){e.exports=n(254)}},function(e,t,n){try{e.exports=n(205)("validation")}catch(r){e.exports=n(253)}},function(e,t){e.exports.Validation={isValidUTF8:function(e){return!0}}},function(e,t){t.Validation={isValidUTF8:function(e){return!0}}},function(e,t,n){(function(t){function r(e,n,i){if(this instanceof r==!1)throw new TypeError("Classes can't be function-called");"function"==typeof e?(i=n,n=e,e=0):"undefined"==typeof e&&(e=0),this._growStrategy=(n||function(e,t){return e.used+t}).bind(null,this),this._shrinkStrategy=(i||function(t){return e}).bind(null,this),this._buffer=e?new t(e):null,this._offset=0,this._used=0,this._changeFactor=0,this.__defineGetter__("size",function(){return null==this._buffer?0:this._buffer.length}),this.__defineGetter__("used",function(){return this._used})}n(78);r.prototype.get=function(e){if(null==this._buffer||this._offset+e>this._buffer.length){var n=new t(this._growStrategy(e));this._buffer=n,this._offset=0}this._used+=e;var r=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,r},r.prototype.reset=function(e){var n=this._shrinkStrategy();n<this.size&&(this._changeFactor-=1),(e||this._changeFactor<-2)&&(this._changeFactor=0,this._buffer=n?new t(n):null),this._offset=0,this._used=0},e.exports=r}).call(t,n(67).Buffer)},function(e,t,n){(function(t){function r(e){if(this instanceof r==!1)throw new TypeError("Classes can't be function-called");i.EventEmitter.call(this),this.socket=e,this.continuationFrame=!1,this.isClosed=!1}var i=n(159),o=n(78);i.EventEmitter;e.exports=r,o.inherits(r,i.EventEmitter),r.prototype.send=function(e,n,r){if(!this.isClosed){var i="string"==typeof e,o=i?t.byteLength(e):e.length,s=o>127?2:1,a=0==this.continuationFrame,c=!n||!("undefined"!=typeof n.fin&&!n.fin),u=new t((a?n&&n.binary?1+s:1:0)+o+(!c||n&&n.binary?0:1)),f=a?1:0;a&&(n&&n.binary?(u.write("","binary"),s>1&&u.write(String.fromCharCode(128+o/128),f++,"binary"),u.write(String.fromCharCode(127&o),f++,"binary")):u.write("\x00","binary")),i?u.write(e,f,"utf8"):e.copy(u,f,0),c?(n&&n.binary||u.write("ÿ",f+o,"binary"),this.continuationFrame=!1):this.continuationFrame=!0;try{this.socket.write(u,"binary",r)}catch(l){this.error(l.toString())}}},r.prototype.close=function(e,n,r,i){if(!this.isClosed){this.isClosed=!0;try{this.continuationFrame&&this.socket.write(new t([255],"binary")),this.socket.write(new t([255,0]),"binary",i)}catch(o){this.error(o.toString())}}},r.prototype.ping=function(e,t){},r.prototype.pong=function(e,t){},r.prototype.error=function(e){return this.emit("error",e),this}}).call(t,n(67).Buffer)},function(e,t,n){(function(t){function r(){if(this instanceof r==!1)throw new TypeError("Classes can't be function-called");this.state=o,this.buffers=[],this.messageEnd=-1,this.spanLength=0,this.dead=!1,this.onerror=function(){},this.ontext=function(){},this.onbinary=function(){},this.onclose=function(){},this.onping=function(){},this.onpong=function(){}}function i(e,t){for(var n=0,r=e.length;r>n;++n)if(e[n]===t)return n;return-1}var o=(n(78),0),s=1,a=2,c=3;e.exports=r,r.prototype.add=function(e){function t(){if(n.state===o){if(2==e.length&&255==e[0]&&0==e[1])return n.reset(),void n.onclose();if(128===e[0])n.messageEnd=0,n.state=a,e=e.slice(1);else{if(0!==e[0])return void n.error("payload must start with 0x00 byte",!0);e=e.slice(1),n.state=s}}if(n.state===a){for(var t=0;t<e.length&&128&e[t];)n.messageEnd=128*n.messageEnd+(127&e[t]),++t;t<e.length&&(n.messageEnd=128*n.messageEnd+(127&e[t]),n.state=c,++t),t>0&&(e=e.slice(t))}if(n.state===c){var r=n.messageEnd-n.spanLength;return e.length>=r?(n.buffers.push(e),n.spanLength+=r,n.messageEnd=r,n.parse()):(n.buffers.push(e),void(n.spanLength+=e.length))}return n.buffers.push(e),-1!=(n.messageEnd=i(e,255))?(n.spanLength+=n.messageEnd,n.parse()):void(n.spanLength+=e.length)}if(!this.dead)for(var n=this;e;)e=t()},r.prototype.cleanup=function(){this.dead=!0,this.state=o,this.buffers=[]},r.prototype.parse=function(){for(var e=new t(this.spanLength),n=0,r=0,i=this.buffers.length;i-1>r;++r){var o=this.buffers[r];o.copy(e,n),n+=o.length}var a=this.buffers[this.buffers.length-1];this.messageEnd>0&&a.copy(e,n,0,this.messageEnd),this.state!==s&&--this.messageEnd;var c=null;return this.messageEnd<a.length-1&&(c=a.slice(this.messageEnd+1)),this.reset(),this.ontext(e.toString("utf8")),c},r.prototype.error=function(e,t){return this.dead?void 0:(this.reset(),"string"==typeof e?this.onerror(new Error(e),t):e.constructor==Error?this.onerror(e,t):this.onerror(new Error("An error occured"),t),this)},r.prototype.reset=function(e){this.dead||(this.state=o,this.buffers=[],this.messageEnd=-1,this.spanLength=0)}}).call(t,n(67).Buffer)},function(e,t,n){function r(e){e=e||"";var t={};return e.split(",").forEach(function(e){var n=e.split(";"),r=n.shift().trim(),i=t[r]=t[r]||[],o={};n.forEach(function(e){var t=e.trim().split("="),n=t[0],r=t[1];"undefined"==typeof r?r=!0:('"'===r[0]&&(r=r.slice(1)),'"'===r[r.length-1]&&(r=r.slice(0,r.length-1))),(o[n]=o[n]||[]).push(r)}),i.push(o)}),t}function i(e){return Object.keys(e).map(function(t){var n=e[t];return o.isArray(n)||(n=[n]),n.map(function(e){return[t].concat(Object.keys(e).map(function(t){var n=e[t];return o.isArray(n)||(n=[n]),n.map(function(e){return e===!0?t:t+"="+e}).join("; ")})).join("; ")}).join(", ")}).join(", ")}var o=n(78);t.parse=r,t.format=i},function(e,t,n){(function(t){function r(e,n){if(this instanceof r==!1)return new r(e,n);if(u.EventEmitter.call(this),e=new h({host:"0.0.0.0",port:null,server:null,verifyClient:null,handleProtocols:null,path:null,noServer:!1,disableHixie:!1,clientTracking:!0,perMessageDeflate:!0,maxPayload:null}).merge(e),!e.isDefinedAndNonNull("port")&&!e.isDefinedAndNonNull("server")&&!e.value.noServer)throw new TypeError("`port` or a `server` must be provided");var i=this;if(e.isDefinedAndNonNull("port"))this._server=f.createServer(function(e,t){var n=f.STATUS_CODES[426];t.writeHead(426,{"Content-Length":n.length,
"Content-Type":"text/plain"}),t.end(n)}),this._server.allowHalfOpen=!1,this._server.listen(e.value.port,e.value.host,n),this._closeServer=function(){i._server&&i._server.close()};else if(e.value.server&&(this._server=e.value.server,e.value.path)){if(this._server._webSocketPaths&&e.value.server._webSocketPaths[e.value.path])throw new Error("two instances of WebSocketServer cannot listen on the same http server path");"object"!==_typeof(this._server._webSocketPaths)&&(this._server._webSocketPaths={}),this._server._webSocketPaths[e.value.path]=1}this._server&&(this._onceServerListening=function(){i.emit("listening")},this._server.once("listening",this._onceServerListening)),"undefined"!=typeof this._server&&(this._onServerError=function(e){i.emit("error",e)},this._server.on("error",this._onServerError),this._onServerUpgrade=function(e,n,r){var o=new t(r.length);r.copy(o),i.handleUpgrade(e,n,o,function(t){i.emit("connection"+e.url,t),i.emit("connection",t)})},this._server.on("upgrade",this._onServerUpgrade)),this.options=e.value,this.path=e.value.path,this.clients=[]}function i(e,t,n,r){var i=function(){try{t.destroy()}catch(e){}};if(t.on("error",i),!e.headers["sec-websocket-key"])return void a(t,400,"Bad Request");var o=parseInt(e.headers["sec-websocket-version"]);if(-1===[8,13].indexOf(o))return void a(t,400,"Bad Request");var c=e.headers["sec-websocket-protocol"],u=13>o?e.headers["sec-websocket-origin"]:e.headers.origin,h=p.parse(e.headers["sec-websocket-extensions"]),v=this,_=function(c){var u=e.headers["sec-websocket-key"],f=l.createHash("sha1");f.update(u+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11"),u=f.digest("base64");var _=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+u];"undefined"!=typeof c&&_.push("Sec-WebSocket-Protocol: "+c);var g={};try{g=s.call(v,h)}catch(y){return void a(t,400,"Bad Request")}if(Object.keys(g).length){var m={};Object.keys(g).forEach(function(e){m[e]=[g[e].params]}),_.push("Sec-WebSocket-Extensions: "+p.format(m))}v.emit("headers",_),t.setTimeout(0),t.setNoDelay(!0);try{t.write(_.concat("","").join("\r\n"))}catch(b){try{t.destroy()}catch(b){}return}var w=new d([e,t,n],{protocolVersion:o,protocol:c,extensions:g,maxPayload:v.options.maxPayload});v.options.clientTracking&&(v.clients.push(w),w.on("close",function(){var e=v.clients.indexOf(w);-1!=e&&v.clients.splice(e,1)})),t.removeListener("error",i),r(w)},g=function(){if("function"==typeof v.options.handleProtocols){var e=(c||"").split(/, */),n=!1;v.options.handleProtocols(e,function(e,r){n=!0,e?_(r):a(t,401,"Unauthorized")});return void(n||a(t,501,"Could not process protocols"))}"undefined"!=typeof c?_(c.split(/, */)[0]):_()};if("function"==typeof this.options.verifyClient){var y={origin:u,secure:"undefined"!=typeof e.connection.authorized||"undefined"!=typeof e.connection.encrypted,req:e};if(2==this.options.verifyClient.length)return void this.options.verifyClient(y,function(e,n,r){"undefined"==typeof n&&(n=401),"undefined"==typeof r&&(r=f.STATUS_CODES[n]),e?g():a(t,n,r)});if(!this.options.verifyClient(y))return void a(t,401,"Unauthorized")}g()}function o(e,n,r,i){var o=function(){try{n.destroy()}catch(e){}};if(n.on("error",o),this.options.disableHixie)return void a(n,401,"Hixie support disabled");if(!e.headers["sec-websocket-key2"])return void a(n,400,"Bad Request");var s=e.headers.origin,c=this,u=function(){var u;u=e.headers["x-forwarded-host"]?e.headers["x-forwarded-host"]:e.headers.host;var f=("https"===e.headers["x-forwarded-proto"]||n.encrypted?"wss":"ws")+"://"+u+e.url,h=e.headers["sec-websocket-protocol"],p=function(){var e=["HTTP/1.1 101 Switching Protocols","Upgrade: WebSocket","Connection: Upgrade","Sec-WebSocket-Location: "+f];return"undefined"!=typeof h&&e.push("Sec-WebSocket-Protocol: "+h),"undefined"!=typeof s&&e.push("Sec-WebSocket-Origin: "+s),new t(e.concat("","").join("\r\n"))},v=function(){n.setTimeout(0),n.setNoDelay(!0);var e=p();try{n.write(e,"binary",function(e){e&&n.removeListener("data",w)})}catch(t){try{n.destroy()}catch(t){}return}},_=function(r,s,u){var f=e.headers["sec-websocket-key1"],p=e.headers["sec-websocket-key2"],v=l.createHash("md5");[f,p].forEach(function(e){var t=parseInt(e.replace(/[^\d]/g,"")),r=e.replace(/[^ ]/g,"").length;return 0===r||t%r!==0?void a(n,400,"Bad Request"):(t/=r,void v.update(String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)))}),v.update(r.toString("binary")),n.setTimeout(0),n.setNoDelay(!0);try{var _=new t(v.digest("binary"),"binary"),g=new t(u.length+_.length);u.copy(g,0),_.copy(g,u.length),n.write(g,"binary",function(t){if(!t){var r=new d([e,n,s],{protocolVersion:"hixie-76",protocol:h});c.options.clientTracking&&(c.clients.push(r),r.on("close",function(){var e=c.clients.indexOf(r);-1!=e&&c.clients.splice(e,1)})),n.removeListener("error",o),i(r)}})}catch(y){try{n.destroy()}catch(y){}return}},g=8;if(r&&r.length>=g){var y=r.slice(0,g),m=r.length>g?r.slice(g):null;_.call(c,y,m,p())}else{var y=new t(g);r.copy(y,0);var b=r.length,m=null,w=function E(e){var r=Math.min(e.length,g-b);0!==r&&(e.copy(y,b,0,r),b+=r,b==g&&(n.removeListener("data",E),r<e.length&&(m=e.slice(r)),_.call(c,y,m,new t(0))))};n.on("data",w),v()}};if("function"==typeof this.options.verifyClient){var h={origin:s,secure:"undefined"!=typeof e.connection.authorized||"undefined"!=typeof e.connection.encrypted,req:e};if(2==this.options.verifyClient.length){var c=this;return void this.options.verifyClient(h,function(e,t,r){"undefined"==typeof t&&(t=401),"undefined"==typeof r&&(r=f.STATUS_CODES[t]),e?u.apply(c):a(n,t,r)})}if(!this.options.verifyClient(h))return void a(n,401,"Unauthorized")}u()}function s(e){var t={},n=this.options.perMessageDeflate,r=this.options.maxPayload;if(n&&e[v.extensionName]){var i=new v(n!==!0?n:{},!0,r);i.accept(e[v.extensionName]),t[v.extensionName]=i}return t}function a(e,t,n){try{var r=["HTTP/1.1 "+t+" "+n,"Content-type: text/html"];e.write(r.concat("","").join("\r\n"))}catch(i){}finally{try{e.destroy()}catch(i){}}}var c=n(78),u=n(159),f=n(158),l=n(71),h=n(229),d=n(226),p=n(258),v=n(236),_=(n(198),n(14));c.inherits(r,u.EventEmitter),r.prototype.close=function(e){var t=null;try{for(var n=0,r=this.clients.length;r>n;++n)this.clients[n].terminate()}catch(i){t=i}this.path&&this._server._webSocketPaths&&(delete this._server._webSocketPaths[this.path],0==Object.keys(this._server._webSocketPaths).length&&delete this._server._webSocketPaths);try{"undefined"!=typeof this._closeServer&&this._closeServer()}finally{this._server&&(this._server.removeListener("listening",this._onceServerListening),this._server.removeListener("error",this._onServerError),this._server.removeListener("upgrade",this._onServerUpgrade)),delete this._server}if(e)e(t);else if(t)throw t},r.prototype.handleUpgrade=function(e,t,n,r){if(this.options.path){var s=_.parse(e.url);if(s&&s.pathname!==this.options.path)return}return"undefined"==typeof e.headers.upgrade||"websocket"!==e.headers.upgrade.toLowerCase()?void a(t,400,"Bad Request"):void(e.headers["sec-websocket-key1"]?o.apply(this,arguments):i.apply(this,arguments))},e.exports=r}).call(t,n(67).Buffer)}])});
//# sourceMappingURL=eve.map